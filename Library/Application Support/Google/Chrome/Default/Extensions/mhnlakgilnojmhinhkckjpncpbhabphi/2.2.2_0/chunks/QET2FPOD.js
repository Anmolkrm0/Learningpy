import{a as vt}from"./Y72NYQ3H.js";import{a as Mt}from"./QZ23CPMF.js";import{a as wt}from"./PRTVLPOH.js";import{a as ma}from"./CABSF6OY.js";import{a as ht,b as Be,c as Tt,d as At,e as Et,h as Pt}from"./NC3HSZPM.js";import"./BOMJP2FH.js";import"./E6NJOYW7.js";import{c as xt,f as Ct,i as yt,l as It}from"./CDTXYPFK.js";import{g as oe}from"./MAHQTXLC.js";import"./NWQIMPPW.js";import"./FTDSOY3N.js";import{f as Y}from"./5DTTT7PK.js";import"./GDTY5ONR.js";import"./JWFUVF6X.js";import"./2C24X2KU.js";import{b as pt,d as mt,f as dt,g as gt,h as ft,i as bt,j as St}from"./GSUPQIG3.js";import"./B3MUEI4N.js";import"./7O552GAH.js";import"./ANYQA2SD.js";import"./N2433CGI.js";import"./RH52XT4X.js";import"./CUWLSLUX.js";import"./QBFJRALZ.js";import{a as _t}from"./XV4HXCZ7.js";import{a as ca}from"./ZLV6U2AL.js";import"./4NAB6M5G.js";import"./EFY4DJEK.js";import{a as pa}from"./R4DOVXS6.js";import{Eb as ct,X as it,ab as Oe,b as et,d as te,e as rt,t as L,ua as st,va as ut,w as ua,x as lt}from"./VAZXMTWI.js";import{h as ge}from"./3ULVSIIZ.js";import"./JMXOINXE.js";import{c as de}from"./VTSHHT45.js";import{w as nt}from"./DY5NX2CV.js";import"./3XSPDXYF.js";import"./XPQQBCXB.js";import"./JOBG3ISB.js";import"./CQO467EU.js";import"./L33QHTPD.js";import"./EYWU5WEI.js";import{i as ae,j as me}from"./GQJKJJWP.js";import{f as tt,h as at}from"./NDBRMG4E.js";import{c as ee}from"./QIXLAUXQ.js";import{f as ot}from"./6KDU3L24.js";import"./OBYCD3QX.js";import{a as P,c as Le}from"./BXGPN2X7.js";import"./RXRC7KSS.js";import{d as D}from"./VMA5WMPP.js";import{a as v,b as ke,u as G}from"./SYZGD7UF.js";import"./H3PWEBSP.js";import"./QZNWBGPK.js";import{j as Me}from"./QZVUH6Z4.js";import"./6NCLE6FY.js";import"./TN74TYZV.js";import"./6LS5XNTR.js";import"./JBQIPS5C.js";import"./AN4BH4LP.js";import"./CVYR3XXR.js";import"./M6G54ME7.js";import"./SNNNIFZC.js";import{a as we,d as R,o as Re}from"./DAZIVUKN.js";import{A as $e,M as Qe,U as Ze,a as Pe,e as Q,f as Je,r as le}from"./OKNPJCGL.js";import{c as z}from"./QPPETRF6.js";import{e as pe}from"./OPO7MVAW.js";import{D as Ye,F as qe,P as Xe,U as ce,e as j,f as Ue,i as Ke,j as je,k as We,p as ue}from"./2XMGLZMD.js";import{a as k}from"./64D36THL.js";import{a as sa}from"./3JX3VARJ.js";import{c as Ee,f as x}from"./PQ35KENF.js";var kt=Ee(fe=>{"use strict";var da=ke();Object.defineProperty(fe,"__esModule",{value:!0});fe.default=void 0;var ga=da(Le()),fa=Me(),ba=(0,ga.default)((0,fa.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"Cached");fe.default=ba});var Dt=Ee(be=>{"use strict";var xa=ke();Object.defineProperty(be,"__esModule",{value:!0});be.default=void 0;var Ca=xa(Le()),ya=Me(),Ta=(0,Ca.default)((0,ya.jsx)("path",{d:"M7.41 18.59 8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z"}),"UnfoldLess");be.default=Ta});var Ht=Ee(_e=>{"use strict";var Ia=ke();Object.defineProperty(_e,"__esModule",{value:!0});_e.default=void 0;var Aa=Ia(Le()),Ea=Me(),Ma=(0,Aa.default)((0,Ea.jsx)("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}),"UnfoldMore");_e.default=Ma});var re=x(k());var s=x(k());var ta=x(kt());var aa=x(ma());var E=x(k());var Lt=x(mt());var _a=t=>{let{onSendMessage:e}=t,{t:o}=z(["common","client"]),{currentMaxInputLength:n,isError:l}=dt("chatBoxInputMediator"),[r,m]=(0,E.useState)(""),u=j(te),a=E.default.useRef(null),d=(0,E.useRef)(!1),y=(0,E.useRef)({});return(0,E.useEffect)(()=>{let h=(_,b)=>{b&&(y.current=b),_.startsWith("``NO_HISTORY_&#``\n")&&(_=_.replace("``NO_HISTORY_&#``\n",""),d.current=!0),m(_)};return Oe("chatBoxInputMediator").subscribe(h),()=>{Oe("chatBoxInputMediator").unsubscribe(h)}},[]),(0,E.useEffect)(()=>{d.current=!1,y.current={}},[u.loading]),E.default.createElement(v,{ref:a,p:1,pt:0,direction:"row",alignItems:"center",spacing:1,width:"100%"},E.default.createElement(G,{component:"span",color:l?"rgb(239, 83, 80)":"text.secondary",fontSize:12,fontFamily:"Roboto,RobotoDraft,Helvetica,Arial,sans-serif!important"},u.loading?0:we(r.length,0),"/",we(n,0)),E.default.createElement(P,{component:"div",display:"flex",width:0,flex:1,alignItems:"center",justifyContent:"end",gap:1},!je&&!u.loading&&E.default.createElement(vt,{onBeforeShowContextMenu:()=>({template:r||" ",target:R()?.querySelector(`#${ue}`)?.parentElement||a.current})}),E.default.createElement(me,{title:o("client:sidebar__button__send_to_ai"),TooltipProps:{description:"\u23CE"},sx:{minWidth:"unset",p:1},disableElevation:!0,variant:"contained",disabled:u.loading,onClick:()=>{e&&e(r,{includeHistory:!d.current,meta:y.current}),y.current={},d.current=!1}},u.loading?E.default.createElement(de,{size:16}):E.default.createElement(Lt.default,{sx:{fontSize:"16px"}}))))},Ot=_a;var w=x(k()),Sa=(t,e,o)=>{let n=(0,w.useRef)(null),l=(0,w.useRef)(null),[r,m]=(0,w.useState)(1),[u]=(0,w.useState)(o?.buffer||10),a=o?.buffer||0,d=(0,w.useCallback)(()=>{if(n.current&&n.current.disconnect(),t.current){let b=t.current,A=null,H=()=>{A&&window.clearTimeout(A);let C=b.children[a];if(C){let q=U=>{U[0].isIntersecting&&h()};n.current=new IntersectionObserver(q),l.current=C,n.current.observe(C)}else A=window.setTimeout(()=>{H()},1e3)};H()}},[a]),y=(0,w.useCallback)(()=>{let b=t.current;if(n.current&&b){l.current&&n.current.unobserve(l.current);let A=b.children[a];A&&n.current.observe(A)}},[t,a]),h=(0,w.useCallback)(()=>{m(b=>++b)},[]),_=(0,w.useMemo)(()=>u===-1?e:e.slice(-(r*u)),[e,r,u]);return(0,w.useEffect)(()=>{y()},[_]),(0,w.useEffect)(()=>(e.length>u&&t.current&&d(),()=>{n.current&&n.current.disconnect()}),[d,e,u,t]),{slicedMessageList:_,loadMore:h,changePageNumber:(0,w.useCallback)(b=>m(b),[])}},Bt=Sa;var f=x(k());var va=t=>{let{onClick:e,disabledMainButton:o}=t,{currentSidebarConversationType:n}=L(),{t:l}=z(["common","client"]),[r,m]=(0,f.useState)(!1),u=()=>{m(!1),setTimeout(()=>{e&&e("focus")},100)};return f.default.createElement(P,{sx:{position:"absolute",left:0,bottom:0,width:40,height:40}},f.default.createElement(ht,{ariaLabel:"SpeedDial controlled open",sx:{position:"absolute",left:0,bottom:"0","& > button":{width:40,height:40}},FabProps:{sx:{"& + div":{marginBottom:"-40px!important",paddingBottom:"48px!important"}}},icon:f.default.createElement(P,{component:"div",onClick:()=>{if(o){e&&e("focus");return}e&&e("new")}},f.default.createElement(ae,{placement:"left",title:l(n==="Summary"?"client:sidebar__tabs__summary__action_btn__title":"client:sidebar__tabs__chat__action_btn__title")},f.default.createElement(v,{p:1,alignItems:"center",justifyContent:"center",component:"div"},f.default.createElement(tt,{sx:{color:"#fff",fontSize:"24px"}}))))},f.default.createElement(Be,{icon:f.default.createElement(ee,{href:qe+"/prompts",target:"_blank",color:"text.secondary"},f.default.createElement(P,{component:"div",onClick:a=>{a.stopPropagation()}},f.default.createElement(ae,{placement:"left",title:l("client:sidebar__speed_dial__one_click_prompts__button")},f.default.createElement(v,{p:1,alignItems:"center",justifyContent:"center",component:"div"},f.default.createElement(at,{sx:{fontSize:"24px",color:"primary.main"}}))))),tooltipTitle:""}),f.default.createElement(Be,{icon:f.default.createElement(P,{component:"div",onClick:()=>{m(!0)}},f.default.createElement(ae,{placement:"left",title:l("client:sidebar__speed_dial__restart_extension__button")},f.default.createElement(v,{p:1,alignItems:"center",justifyContent:"center",component:"div"},f.default.createElement(ge,{icon:"Restart",sx:{fontSize:"24px"}})))),tooltipTitle:""})),f.default.createElement(xt,{open:r,onClose:()=>{u()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},f.default.createElement(Ct,{id:"alert-dialog-title"},l("client:sidebar__speed_dial__restart_extension__tooltip__title")),f.default.createElement(yt,null,f.default.createElement(Tt,{id:"alert-dialog-description"},l("client:sidebar__speed_dial__restart_extension__tooltip__description1"),f.default.createElement("br",null),l("client:sidebar__speed_dial__restart_extension__tooltip__description2"))),f.default.createElement(It,null,f.default.createElement(D,{sx:{},variant:"outlined",onClick:()=>{u()}},l("common:cancel")),f.default.createElement(D,{color:"primary",variant:"contained",onClick:()=>{e&&e("restart"),u()},autoFocus:!0},l("client:sidebar__speed_dial__restart_extension__tooltip__confirm")))))},Nt=va;var N=x(k());var ha=t=>{let{sx:e}=t,{currentSidebarConversationType:o}=L(),n=j(ce),[l,r]=N.default.useState(null),m=(0,N.useRef)(null),u=(0,N.useRef)(!1),a=(0,N.useRef)(!1),d=_=>{a.current||r(_.currentTarget)},y=()=>{r(null)},h=!!l;return(0,N.useMemo)(()=>o!=="Chat"?null:N.default.createElement(P,{id:"max-ai__ai-provider-floating-button",sx:{width:"44px",height:"44px",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",border:"1px solid #EBEBEB",cursor:"pointer",borderColor:_=>_.palette.mode==="dark"?"rgba(255, 255, 255, 0.16)":"#EBEBEB",bgcolor:_=>_.palette.mode==="dark"?"#333":"#fff",boxShadow:"0px 0px 0.5px 0px rgba(0, 0, 0, 0.40), 0px 1px 3px 0px rgba(0, 0, 0, 0.09), 0px 4px 8px 0px rgba(0, 0, 0, 0.09);",...e},"aria-owns":h?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:_=>{m.current&&clearTimeout(m.current),u.current=!0,m.current=setTimeout(()=>{u.current=!1},700),d(_)},onMouseLeave:()=>{y(),a.current=!1}},N.default.createElement(rt,{aiProviderType:n.sidebarSettings?.common?.currentAIProvider||"USE_CHAT_GPT_PLUS"}),N.default.createElement(nt,{open:h,anchorEl:l,id:"mouse-over-popover",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},disableScrollLock:!0,PaperProps:{sx:{ml:pe()?0:"8px"}}},N.default.createElement(lt.default,{onClickAway:_=>{let b=R()?.querySelector("#MaxAIProviderSelectorCard");if(b){let A=b.getBoundingClientRect(),H=_.clientX,C=_.clientY;if(H>A.left&&H<A.right&&C>A.top&&C<A.bottom)return;y()}}},N.default.createElement(P,{onMouseEnter:d,onMouseLeave:y},N.default.createElement(st,{closeAble:!0,onClose:()=>{u.current||(a.current=!0,y())}}))))),[n.sidebarSettings?.common?.currentAIProvider,h,o])},Vt=ha;var V=x(k());var I=x(k());var zt=x(Dt()),Ft=x(Ht());var Pa=()=>{let{currentSidebarAIProvider:t,currentSidebarConversationId:e,currentSidebarConversationType:o,currentSidebarConversation:n,sidebarSettings:l}=L(),r=j(ce),m=j(te),[u]=Ue(et),[a,d]=(0,I.useState)(!0),y=(0,I.useMemo)(()=>{let h=Q(n);return h&&(h.messages=[]),h},[n]);return I.default.createElement(v,{sx:{position:"absolute",top:"0",maxWidth:a?"400px":"32px",maxHeight:a?"500px":"32px",overflowX:"auto",overflowY:"auto",zIndex:1,bgcolor:"background.paper",color:"text.primary",right:"100%",border:"1px solid",borderColor:"customColor.borderColor",borderRadius:"4px","& > pre, & > p":{p:0,m:0,fontSize:"12px"}}},a?I.default.createElement(D,{variant:"contained",sx:{width:32,height:32,minWidth:"unset",position:"absolute",top:0,right:0,p:1},onClick:()=>d(!1)},I.default.createElement(zt.default,null)):I.default.createElement(D,{variant:"contained",sx:{width:32,height:32,minWidth:"unset",position:"absolute",top:0,right:0,p:1},onClick:()=>d(!0)},I.default.createElement(Ft.default,null)),I.default.createElement(v,{direction:"row",spacing:1},I.default.createElement(D,{onClick:async h=>{await Ze()}},"Reset OnBoarding")),I.default.createElement("p",null,"authStatus: ",u.status),I.default.createElement("p",null,"loading: ",m.loading?"loading":"done"),I.default.createElement("p",null,"currentSidebarConversationType: ",o),I.default.createElement("p",null,"currentSidebarAIProvider: ",t),I.default.createElement("p",null,"currentSidebarConversationId: ",e),I.default.createElement("pre",null,JSON.stringify(y,null,2)),I.default.createElement("pre",null,JSON.stringify(l,null,2)),I.default.createElement("pre",null,JSON.stringify(r.thirdProviderSettings,null,2)))},Gt=Pa;var wa=[{label:"client:sidebar__tabs__chat__title",tooltip:()=>"client:sidebar__tabs__chat__tooltip",value:"Chat"},{label:"client:sidebar__tabs__summary__title",tooltip:()=>{switch(it()){case"DEFAULT_EMAIL_SUMMARY":return"client:sidebar__tabs__summary__tooltip__default_email";case"PAGE_SUMMARY":return"client:sidebar__tabs__summary__tooltip__page";case"PDF_CRX_SUMMARY":return"client:sidebar__tabs__summary__tooltip__pdf_crx";case"YOUTUBE_VIDEO_SUMMARY":return"client:sidebar__tabs__summary__tooltip__youtube_video";default:return"client:sidebar__tabs__summary__tooltip__page"}},value:"Summary"},{label:"client:sidebar__tabs__search__title",tooltip:()=>"client:sidebar__tabs__search__tooltip",value:"Search"}],ka=()=>{let{t}=z(["common","client"]),{currentSidebarConversationType:e,updateSidebarConversationType:o}=L(),n=j(te);(0,V.useEffect)(()=>{let r=m=>{let u=m?.detail?.type;u&&o(u)};return window.addEventListener("MaxAISwitchSidebarTab",r),()=>{window.removeEventListener("MaxAISwitchSidebarTab",r)}});let l=(0,V.useMemo)(()=>wa.filter(r=>!(r.value==="Summary"&&pe())),[]);return V.default.createElement(V.default.Fragment,null,V.default.createElement(v,{direction:"row",height:36,alignItems:"center",width:"100%",borderBottom:"1px solid",borderColor:"customColor.borderColor",bgcolor:"background.paper",sx:{position:"sticky",top:0,zIndex:1}},V.default.createElement(At,{sx:{minHeight:"36px","& .use-chat-gpt-ai--MuiButtonBase-root":{height:"36px",minHeight:"36px",p:1}},value:e,onChange:async(r,m)=>{o(m)},textColor:"inherit",indicatorColor:"primary"},l.map(r=>V.default.createElement(Et,{disabled:n.loading,key:r.value,value:r.value,label:V.default.createElement(ae,{title:t(r.tooltip?.())},V.default.createElement(G,{fontSize:"14px",color:"text.primary","data-testid":"max-ai__summary-tab"},t(r.label)))})))),V.default.createElement(Mt,null,V.default.createElement(Gt,null)))},Ut=ka;var g=x(k());var Xt=x(ca());var Jt=x(mt());var xe=x(k());var Se=x(k()),Ne=[{label:"Default",value:""},{value:"Academic",label:"Academic"},{value:"Analytical",label:"Analytical"},{value:"Argumentative",label:"Argumentative"},{value:"Conversational",label:"Conversational"},{value:"Creative",label:"Creative"},{value:"Critical",label:"Critical"},{value:"Descriptive",label:"Descriptive"},{value:"Epigrammatic",label:"Epigrammatic"},{value:"Epistolary",label:"Epistolary"},{value:"Expository",label:"Expository"},{value:"Informative",label:"Informative"},{value:"Instructive",label:"Instructive"},{value:"Journalistic",label:"Journalistic"},{value:"Metaphorical",label:"Metaphorical"},{value:"Narrative",label:"Narrative"},{value:"Persuasive",label:"Persuasive"},{value:"Poetic",label:"Poetic"},{value:"Satirical",label:"Satirical"},{value:"Technical",label:"Technical"}];function La(t,{inputValue:e}){return t.filter(o=>{let n=o.label.toLowerCase(),l=o.value.toLowerCase(),r=e.toLowerCase();return n.includes(r)||l.includes(r)})}var Kt=t=>{let{label:e="Writing style",defaultValue:o="",onChange:n=a=>{},placeholder:l,sx:r}=t,[m,u]=Se.default.useState(()=>Ne.find(a=>a.value===o)||Ne[0]);return Se.default.createElement(oe,{componentsProps:{popper:{style:{width:160}}},placeholder:l,disableClearable:!0,value:m,size:"small",sx:{width:160,...r},autoHighlight:!0,getOptionLabel:a=>a.label,options:Ne,onChange:(a,d)=>{u(d),n(d.value)},filterOptions:La,renderInput:a=>Se.default.createElement(Y,{...a,label:e,InputLabelProps:{sx:{fontSize:"16px"},...a.InputLabelProps},inputProps:{sx:{fontSize:"16px"},...a.inputProps,autoComplete:"new-password"}})})};var ve=x(k()),Ve=[{language_code:"uk",value:"Ukrainian",label:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},{language_code:"so",value:"Somali",label:"Af Soomaali"},{language_code:"af",value:"Afrikaans",label:"Afrikaans"},{language_code:"az",value:"Azerbaijani",label:"Az\u0259rbaycan dili"},{language_code:"id",value:"Indonesian",label:"Bahasa Indonesia"},{language_code:"ms-MY",value:"Malaysian Malay",label:"Bahasa Malaysia"},{language_code:"ms",value:"Malay",label:"Bahasa Melayu"},{language_code:"jv",value:"Javanese",label:"Basa Jawa"},{language_code:"su",value:"Sundanese",label:"Basa Sunda"},{language_code:"bs",value:"Bosnian",label:"Bosanski jezik"},{language_code:"ca",value:"Catalan",label:"Catal\xE0"},{language_code:"cs",value:"Czech",label:"\u010Ce\u0161tina"},{language_code:"ny",value:"Chichewa",label:"Chichewa"},{language_code:"cy",value:"Welsh",label:"Cymraeg"},{language_code:"da",value:"Danish",label:"Dansk"},{language_code:"de",value:"German",label:"Deutsch"},{language_code:"et",value:"Estonian",label:"Eesti keel"},{language_code:"en",value:"English",label:"English"},{language_code:"en-GB",value:"English (UK)",label:"English (UK)"},{language_code:"en-US",value:"English (US)",label:"English (US)"},{language_code:"es",value:"Spanish",label:"Espa\xF1ol"},{language_code:"eo",value:"Esperanto",label:"Esperanto"},{language_code:"eu",value:"Basque",label:"Euskara"},{language_code:"fr",value:"French",label:"Fran\xE7ais"},{language_code:"ga",value:"Irish",label:"Gaeilge"},{language_code:"gl",value:"Galician",label:"Galego"},{language_code:"hr",value:"Croatian",label:"Hrvatski jezik"},{language_code:"xh",value:"Xhosa",label:"isiXhosa"},{language_code:"zu",value:"Zulu",label:"isiZulu"},{language_code:"is",value:"Icelandic",label:"\xCDslenska"},{language_code:"it",value:"Italian",label:"Italiano"},{language_code:"sw",value:"Swahili",label:"Kiswahili"},{language_code:"ht",value:"Haitian Creole",label:"Krey\xF2l Ayisyen"},{language_code:"ku",value:"Kurdish",label:"Kurd\xEE"},{language_code:"la",value:"Latin",label:"Lat\u012Bna"},{language_code:"lv",value:"Latvian",label:"Latvie\u0161u valoda"},{language_code:"lb",value:"Luxembourgish",label:"L\xEBtzebuergesch"},{language_code:"lt",value:"Lithuanian",label:"Lietuvi\u0173 kalba"},{language_code:"hu",value:"Hungarian",label:"Magyar"},{language_code:"mg",value:"Malagasy",label:"Malagasy"},{language_code:"mt",value:"Maltese",label:"Malti"},{language_code:"mi",value:"Maori",label:"M\u0101ori"},{language_code:"nl",value:"Dutch",label:"Nederlands"},{language_code:"no",value:"Norwegian",label:"Norsk"},{language_code:"uz",value:"Uzbek",label:"O'zbek tili"},{language_code:"pl",value:"Polish",label:"Polski"},{language_code:"pt",value:"Portuguese",label:"Portugu\xEAs"},{language_code:"ro",value:"Romanian",label:"Rom\xE2n\u0103"},{language_code:"st",value:"Sesotho",label:"Sesotho"},{language_code:"sq",value:"Albanian",label:"Shqip"},{language_code:"sk",value:"Slovak",label:"Sloven\u010Dina"},{language_code:"sl",value:"Slovenian",label:"Sloven\u0161\u010Dina"},{language_code:"fi",value:"Finnish",label:"Suomi"},{language_code:"sv",value:"Swedish",label:"Svenska"},{language_code:"tl",value:"Tagalog",label:"Tagalog"},{language_code:"tt",value:"Tatar",label:"Tatar\xE7a"},{language_code:"tr",value:"Turkish",label:"T\xFCrk\xE7e"},{language_code:"vi",value:"Vietnamese",label:"Vi\u1EC7t ng\u1EEF"},{language_code:"yo",value:"Yoruba",label:"Yor\xF9b\xE1"},{language_code:"el",value:"Greek",label:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC"},{language_code:"be",value:"Belarusian",label:"\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0430\u044F \u043C\u043E\u0432\u0430"},{language_code:"bg",value:"Bulgarian",label:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438 \u0435\u0437\u0438\u043A"},{language_code:"ky",value:"Kyrgyz",label:"\u041A\u044B\u0440"},{language_code:"kk",value:"Kazakh",label:"\u049A\u0430\u0437\u0430\u049B \u0442\u0456\u043B\u0456"},{language_code:"mk",value:"Macedonian",label:"\u041C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438 \u0458\u0430\u0437\u0438\u043A"},{language_code:"mn",value:"Mongolian",label:"\u041C\u043E\u043D\u0433\u043E\u043B \u0445\u044D\u043B"},{language_code:"ru",value:"Russian",label:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},{language_code:"sr",value:"Serbian",label:"\u0421\u0440\u043F\u0441\u043A\u0438 \u0458\u0435\u0437\u0438\u043A"},{language_code:"tg",value:"Tajik",label:"\u0422\u043E\u04B7\u0438\u043A\u04E3"},{language_code:"ka",value:"Georgian",label:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8"},{language_code:"hy",value:"Armenian",label:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},{language_code:"yi",value:"Yiddish",label:"\u05D9\u05D9\u05B4\u05D3\u05D9\u05E9"},{language_code:"he",value:"Hebrew",label:"\u05E2\u05D1\u05E8\u05D9\u05EA"},{language_code:"ug",value:"Uyghur",label:"\u0626\u06C7\u064A\u063A\u06C7\u0631\u0686\u06D5"},{language_code:"ur",value:"Urdu",label:"\u0627\u0631\u062F\u0648"},{language_code:"ar",value:"Arabic",label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"},{language_code:"ps",value:"Pashto",label:"\u067E\u069A\u062A\u0648"},{language_code:"fa",value:"Persian",label:"\u0641\u0627\u0631\u0633\u06CC"},{language_code:"ne",value:"Nepali",label:"\u0928\u0947\u092A\u093E\u0932\u0940"},{language_code:"mr",value:"Marathi",label:"\u092E\u0930\u093E\u0920\u0940"},{language_code:"hi",value:"Hindi",label:"\u0939\u093F\u0928\u094D\u0926\u0940"},{language_code:"bn",value:"Bengali",label:"\u09AC\u09BE\u0982\u09B2\u09BE"},{language_code:"pa",value:"Punjabi",label:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40"},{language_code:"gu",value:"Gujarati",label:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0"},{language_code:"or",value:"Oriya",label:"\u0B13\u0B21\u0B3C\u0B3F\u0B06"},{language_code:"ta",value:"Tamil",label:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD"},{language_code:"te",value:"Telugu",label:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41"},{language_code:"kn",value:"Kannada",label:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1"},{language_code:"ml",value:"Malayalam",label:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02"},{language_code:"si",value:"Sinhala",label:"\u0DC3\u0DD2\u0D82\u0DC4\u0DBD"},{language_code:"th",value:"Thai",label:"\u0E44\u0E17\u0E22"},{language_code:"lo",value:"Lao",label:"\u0E9E\u0EB2\u0EAA\u0EB2\u0EA5\u0EB2\u0EA7"},{language_code:"my",value:"Burmese",label:"\u1017\u1019\u102C\u1005\u102C"},{language_code:"km",value:"Khmer",label:"\u1797\u17B6\u179F\u17B6\u1781\u17D2\u1798\u17C2\u179A"},{language_code:"ko",value:"Korean",label:"\uD55C\uAD6D\uC5B4"},{language_code:"zh",value:"Chinese",label:"\u4E2D\u6587"},{language_code:"zh-TW",value:"Traditional Chinese",label:"\u7E41\u9AD4\u4E2D\u6587"},{language_code:"ja",value:"Japanese",label:"\u65E5\u672C\u8A9E"}];function Oa(t,{inputValue:e}){return t.filter(o=>{let n=o.label.toLowerCase(),l=o.value.toLowerCase(),r=e.toLowerCase();return n.includes(r)||l.includes(r)})}var jt=t=>{let{label:e="Output language",defaultValue:o="",onChange:n=a=>{},placeholder:l,sx:r}=t,[m,u]=ve.default.useState(()=>Ve.find(a=>a.value===o)||Ve[0]);return ve.default.createElement(oe,{componentsProps:{popper:{style:{width:160}}},placeholder:l,disableClearable:!0,value:m,size:"small",sx:{width:160,...r},autoHighlight:!0,getOptionLabel:a=>a.label,options:Ve,onChange:(a,d)=>{u(d),n(d.value)},filterOptions:Oa,renderInput:a=>ve.default.createElement(Y,{...a,label:e,InputLabelProps:{sx:{fontSize:"16px"},...a.InputLabelProps},inputProps:{sx:{fontSize:"16px"},...a.inputProps}})})};var he=x(k());var De=[{label:"Default",value:""},{label:"Authoritative",value:"Authoritative"},{label:"Casual",value:"Casual"},{label:"Clinical",value:"Clinical"},{label:"Cold",value:"Cold"},{label:"Confident",value:"Confident"},{label:"Cynical",value:"Cynical"},{label:"Emotional",value:"Emotional"},{label:"Empathetic",value:"Empathetic"},{label:"Formal",value:"Formal"},{label:"Friendly",value:"Friendly"},{label:"Humorous",value:"Humorous"},{label:"Informal",value:"Informal"},{label:"Ironic",value:"Ironic"},{label:"Optimistic",value:"Optimistic"},{label:"Pessimistic",value:"Pessimistic"},{label:"Playful",value:"Playful"},{label:"Professional",value:"Professional"},{label:"Sarcastic",value:"Sarcastic"},{label:"Serious",value:"Serious"},{label:"Straightforward",value:"Straightforward"},{label:"Sympathetic",value:"Sympathetic"},{label:"Tentative",value:"Tentative"},{label:"Warm",value:"Warm"}];function Ba(t,{inputValue:e}){return t.filter(o=>{let n=o.label.toLowerCase(),l=o.value.toLowerCase(),r=e.toLowerCase();return n.includes(r)||l.includes(r)})}var Wt=t=>{let{label:e="Tone",defaultValue:o="",onChange:n=a=>{},placeholder:l,sx:r}=t,[m,u]=he.default.useState(()=>De.find(a=>a.value===o)||De[0]);return he.default.createElement(oe,{componentsProps:{popper:{style:{width:160}}},placeholder:l,disableClearable:!0,value:m,size:"small",sx:{width:160,...r},autoHighlight:!0,getOptionLabel:a=>a.label,options:De,onChange:(a,d)=>{u(d),n(d.value)},filterOptions:Ba,renderInput:a=>he.default.createElement(Y,{...a,label:e,InputLabelProps:{sx:{fontSize:"16px"},...a.InputLabelProps},inputProps:{sx:{fontSize:"16px"},...a.inputProps,autoComplete:"new-password"}})})};var Na=t=>{let{systemVariableSelectKey:e,...o}=t;switch(e){case"AI_RESPONSE_WRITING_STYLE":return xe.default.createElement(Kt,{...o});case"AI_RESPONSE_LANGUAGE":return xe.default.createElement(jt,{...o});case"AI_RESPONSE_TONE":return xe.default.createElement(Wt,{...o});default:return null}},Yt=Na;var He=x(sa()),Ce="CHROME_EXTENSION_SET_VARIABLES_MODAL_SELECT_KEY",ze=async()=>{let t=await He.default.storage.local.get(Ce);try{return t[Ce]?JSON.parse(t[Ce]):{}}catch{return{}}},qt=async(t,e)=>{try{let o=await ze();return o[t]=e,await He.default.storage.local.set({[Ce]:JSON.stringify(o)}),!0}catch{return!1}};var Va=t=>{let{title:e,variables:o,systemVariables:n,modelKey:l,onShow:r,onClose:m}=t,{setShortCuts:u,runShortCuts:a,loading:d}=ft(),{currentSidebarConversationType:y}=L(),{t:h}=z(["common","client"]),[_,b]=(0,g.useState)(!1),[A,H]=(0,g.useState)(!1),[C,q]=(0,g.useState)(null),U=(0,g.useRef)(),[X,J]=(0,g.useState)([]),[F,$]=(0,g.useState)({}),ie=async c=>{X.forEach(p=>{p.resolve({data:Q(F),type:c?"cancel":"close",success:!1})}),$({}),b(!1),m?.()},ne=async c=>{if(le(c)){let p=U.current?.querySelectorAll("textarea[id]")?.[c+1];if(p){p.focus();return}}if(C?.waitForUserAction)X.forEach(p=>{p.resolve({data:Q(F),type:"confirm",success:!0})});else{let p=Q(F);if($({}),b(!1),m?.(),C?.template){let S=F?.TEMPLATE||C?.template||"",M="";p.AI_RESPONSE_TONE!=="Default"&&p.AI_RESPONSE_WRITING_STYLE!=="Default"?M=`

Please write in {{AI_RESPONSE_TONE}} tone, {{AI_RESPONSE_WRITING_STYLE}} writing style, using {{AI_RESPONSE_LANGUAGE}}.`:p.AI_RESPONSE_TONE!=="Default"?M=`

Please write in {{AI_RESPONSE_TONE}} tone, using {{AI_RESPONSE_LANGUAGE}}.`:p.AI_RESPONSE_WRITING_STYLE!=="Default"?M=`

Please write in {{AI_RESPONSE_WRITING_STYLE}} writing style, using {{AI_RESPONSE_LANGUAGE}}.`:M=`

Please write using {{AI_RESPONSE_LANGUAGE}}.`,S+=`

---`+M;let i=[];i.push({type:"SET_VARIABLE_MAP",parameters:{VariableMap:p}}),i.push({type:"RENDER_TEMPLATE",parameters:{template:S}}),We?i.push({type:"ASK_CHATGPT",parameters:{template:"{{LAST_ACTION_OUTPUT}}",AskChatGPTActionType:"ASK_CHAT_GPT_WITH_PREFIX",AskChatGPTActionMeta:{contextMenu:{id:C.contextMenuId||Pe(),droppable:!1,parent:Pe(),text:C.title,data:{editable:!1,type:"shortcuts",actions:[]}}}}}):i.push({type:"ASK_CHATGPT",parameters:{template:"{{LAST_ACTION_OUTPUT}}"}}),await u(i),await a()}}},K=(0,g.useMemo)(()=>{let c={},p=o||C?.variables||[],S=n||C?.systemVariables||[],M=e||C?.title||"",i=[],T=[];p.forEach(B=>{B.valueType==="Select"&&!B.hidden&&i.push(B),B.valueType==="Text"&&!B.hidden&&T.push(B),c[B.VariableName]=B.defaultValue}),S.forEach(B=>{c[B.VariableName]=B.defaultValue});let O=i.length+S.length,ye=window.innerHeight*.6,Te=36,se=Math.ceil(O/3),Fe=se*48+(se-1)*16,Ie=T.length,ra=(Ie-1)*16,na=16*3,la=ye-Te-Fe-ra-na,ia=Math.floor(la/24/Ie)-1;return ze().then(B=>{let Ge=Object.keys(c);Ge.length!==0&&(Ge.forEach(Ae=>{B[Ae]!==void 0&&(c[Ae]=B[Ae])}),$(c))}),{currentTitle:M,currentSelectTotalCount:O,currentSystemVariables:S,selectTypeVariables:i,textTypeVariables:T,maxTextareaMaxRows:ia}},[o,e,n,l,C]);return Qe(()=>{pt.receive("SetVariablesModal",c=>new Promise((p,S)=>{c.task==="open"&&c.config?.modelKey===l&&(b(!1),setTimeout(()=>{q(c.config),c.config.waitForUserAction?J([{resolve:p,reject:S}]):p({data:Q(F),type:"confirm",success:!0}),r?.(),b(!0)},0))}))}),(0,g.useEffect)(()=>{H(y!=="Chat")},[y]),(0,g.useEffect)(()=>{if(_)if(A)m?.();else{let c=()=>{let p=Array.from(U.current?.querySelectorAll("textarea")||[]).find(S=>S.value==="");p?p.focus():U.current?.querySelector("textarea")?.focus()};setTimeout(()=>{c()},0),setTimeout(()=>{c()},100),r?.()}else H(!1)},[_,A]),!_||A||Object.keys(F).length===0?null:g.default.createElement(v,{borderRadius:"8px",border:"1px solid",borderColor:"customColor.borderColor",sx:{width:"100%",p:1,gap:1},maxHeight:"60vh",onKeyPressCapture:c=>{c.stopPropagation()},onKeyPress:c=>{c.stopPropagation()}},g.default.createElement(v,{height:36,direction:"row",alignItems:"start",justifyContent:"space-between"},g.default.createElement(P,{component:"div",sx:{borderRadius:"4px",p:"4px 8px",bgcolor:"rgba(0, 0, 0, 0.87)"}},g.default.createElement(G,{fontSize:"14px",color:"#fff",fontWeight:600},K.currentTitle)),g.default.createElement(ot,{onClick:async()=>await ie(!0),sx:{position:"relative",top:"-8px",right:"-8px"}},g.default.createElement(Xt.default,{sx:{fontSize:"24px"}}))),g.default.createElement(v,{flexWrap:"wrap",direction:"row",sx:{gap:"16px"}},K.currentSystemVariables.map((c,p)=>{let S=Da(p,K.currentSelectTotalCount);return g.default.createElement(Yt,{systemVariableSelectKey:c.VariableName,key:c.VariableName,defaultValue:F[c.VariableName]||"",onChange:async M=>{await qt(c.VariableName,M),$(i=>({...i,[c.VariableName]:M}))},sx:{width:S}})})),g.default.createElement(v,{gap:2,paddingTop:1,ref:U},K.textTypeVariables.map((c,p)=>g.default.createElement(Y,{size:"small",key:c.VariableName,label:c.label,value:F[c.VariableName]||"",onChange:S=>{let M=S.target.value;$(i=>({...i,[c.VariableName]:M}))},onKeyDown:async S=>{S.key==="Enter"&&!S.shiftKey?(S.stopPropagation(),S.preventDefault(),await ne(p)):S.stopPropagation()},InputProps:{sx:{fontSize:"16px"}},InputLabelProps:{shrink:!0,sx:{fontSize:"16px"}},multiline:!0,placeholder:c.placeholder,minRows:Math.min(K.maxTextareaMaxRows,2),maxRows:K.maxTextareaMaxRows}))),g.default.createElement(v,{direction:"row",alignItems:"center",justifyContent:"end",gap:1},g.default.createElement(D,{sx:{height:"32px"},onClick:async()=>await ie(!0),variant:"secondary"},h("common:cancel")),g.default.createElement(me,{title:h("client:sidebar__button__send_to_ai"),TooltipProps:{description:"\u23CE"},disabled:d,onClick:async()=>await ne(),variant:"contained",color:"primary",sx:{width:"32px",height:"32px",minWidth:"unset"}},d?g.default.createElement(de,{size:16,sx:{fontSize:"inherit",color:"#fff"}}):g.default.createElement(Jt.default,{sx:{fontSize:"16px"}}))))},Da=(t,e)=>{let o=e%3,n=(e-o)/3;if(t<n*3)return"calc(33.33% - (2/3)*16px)";switch(o){case 1:if(t===e-1)return"100%";break;case 2:if(t>=e-2)return"calc(50% - 8px)";break}return null},$t=Va;var W=x(k());var Z=x(k());var Ha=()=>{let t="Email & social media assistants in one click.";return Z.default.createElement(G,{width:"100%",component:"div",fontSize:12,color:"text.secondary",sx:{display:"flex",alignItems:"center",justifyContent:"end"}},Z.default.createElement(G,{fontSize:"inherit",color:"inherit",width:0,flex:1,textAlign:"right",noWrap:!0},Z.default.createElement(ee,{fontSize:"inherit",color:"inherit",href:Xe,target:"_blank",sx:{textDecoration:"underline!important"}},Z.default.createElement("span",null,"MaxAI.me v"),Z.default.createElement("span",null,`${Ke}`),Z.default.createElement("span",null,` - ${t}`))))},Qt=Ha;var Zt=x(pa()),{getOS:za}=new Zt.UAParser,Fa=()=>{let{width:t,scrollWidth:e}=wt(),{t:o}=z(["common"]),[n,l]=(0,W.useState)(!1);return(0,W.useEffect)(()=>{if(le(e)&&le(t)&&e>t){if(za().name==="Mac OS")return;l(!0)}},[t,e]),W.default.createElement(v,{direction:"row",alignItems:"center",sx:{width:"100%"},spacing:2,justifyContent:"space-between",pb:n?2:0},W.default.createElement(G,{sx:{flexShrink:0},fontSize:12},W.default.createElement(ee,{color:"text.primary",sx:{cursor:"pointer"},underline:"always",target:"_blank",href:Ye},o("common:contact_us"))),W.default.createElement(Qt,null))},Rt=Fa;var ea=s.default.lazy(()=>import("./5GFQOFA2.js")),Ga=t=>{let{sx:e,aiAvatar:o,userAvatar:n,onCopy:l,onQuestionUpdate:r,editAble:m=!0,insertAble:u=!0,reGenerateAble:a=!0,onReGenerate:d,onStopGenerate:y,onSendMessage:h,writingMessage:_,messages:b,onRetry:A,onReset:H,loading:C}=t,[q,U]=(0,s.useState)(!1),{t:X}=z(["common","client"]),J=(0,s.useRef)(null),F=(0,s.useRef)(null),[$,ie]=s.default.useState(!1),{slicedMessageList:ne,changePageNumber:K}=Bt(F,b),{currentSidebarConversationType:c}=L(),p=(0,s.useRef)(!0),S=(0,s.useCallback)((i,T)=>{K(1),h&&h(i,T)},[h,K]);(0,s.useEffect)(()=>{let i=J.current;if(!i)return;let O=$e(ye=>{if(ye.deltaY<0){p.current=!1;return}let Te=i.scrollTop,se=i.scrollHeight;i.clientHeight+Te>=se&&(p.current=!0)},100);return i.addEventListener("wheel",O),()=>i.removeEventListener("wheel",O)},[]),(0,s.useEffect)(()=>{let i=J.current;p.current&&i&&i.scrollTo(0,i.scrollHeight)},[_]);let M=(0,s.useRef)("");return(0,s.useEffect)(()=>{if(b.length>0){ie(b[b.length-1].type==="ai");for(let i=b.length-1;i>=0;i--){let T=b[i];if(T){let O=J.current;M.current&&M.current!==T.messageId?(p.current=!0,setTimeout(()=>{O&&O.scrollTo(0,O.scrollHeight)},0)):(p.current=!0,setTimeout(()=>{O&&O.scrollTo(0,O.scrollHeight)},0)),M.current=T.messageId;break}}}},[b]),(0,s.useEffect)(()=>{let i=()=>{let T=J.current;T&&(p.current&&T.scrollTo(0,T.scrollHeight),setTimeout(()=>{p.current&&T.scrollTo(0,T.scrollHeight)},1e3))};return i(),window.addEventListener("focus",i),()=>window.removeEventListener("focus",i)},[]),s.default.createElement(v,{position:"relative",borderTop:"1px solid",borderColor:"customColor.borderColor",sx:{height:0,flex:1,"& .MuiButton-root":{textTransform:"none"},...e}},s.default.createElement(P,{ref:J,flex:1,height:0,sx:{textAlign:"left",overflowY:"auto"}},s.default.createElement(Ut,null),s.default.createElement(P,{ref:F},s.default.createElement(_t,null,ne.map((i,T)=>s.default.createElement(ea,{className:`use-chat-gpt-ai__message-item use-chat-gpt-ai__message-item--${i.type}`,insertAble:u,replaceAble:!0,message:i,aiAvatar:o,editAble:m,userAvatar:n,useChatGPTAble:!0,key:i.messageId+"_sidebar_chat_message_"+String(T),onSave:O=>{r&&r(i.messageId,O)},onRetry:A,onCopy:l})),_&&s.default.createElement(ea,{className:"use-chat-gpt-ai__writing-message-item",replaceAble:!1,insertAble:!1,message:_,useChatGPTAble:!1,aiAvatar:o,editAble:!1,userAvatar:n})))),s.default.createElement(v,{className:"use-chat-gpt-ai__chat-box__input-box",position:"relative",mt:"auto",justifyContent:"center",alignItems:"center",minHeight:60,spacing:1,p:1,flexShrink:0},s.default.createElement(v,{width:"100%",alignItems:"center",justifyContent:"center"},s.default.createElement(P,{sx:{width:"100%"},component:"div",display:"flex",width:0,flex:1,alignItems:"center",justifyContent:"center",gap:1,mb:1,position:"relative"},s.default.createElement(Nt,{disabledMainButton:C,onClick:async i=>{if(i==="focus"){let T=R()?.querySelector(`#${ue}`);T&&T.focus()}else i==="new"?H&&H():i==="restart"&&await Re()}}),s.default.createElement(Vt,{sx:{position:"absolute",bottom:0,right:0}}),!C&&ne.length>0&&s.default.createElement(s.default.Fragment,null,a&&s.default.createElement(D,{disableElevation:!0,startIcon:s.default.createElement(ta.default,null),variant:"outlined",disabled:C,onClick:()=>{d&&d()}},X("client:sidebar__button__regenerate")),$&&c!=="Search"&&s.default.createElement(D,{disableElevation:!0,startIcon:s.default.createElement(ge,{icon:"FastForward"}),variant:"outlined",disabled:C,onClick:()=>{S&&S("Continue",{includeHistory:!0,regenerate:!1})}},X("client:sidebar__button__continue"))),C&&s.default.createElement(D,{sx:{mb:1},disableElevation:!0,variant:"outlined",startIcon:s.default.createElement(aa.default,null),onClick:()=>{y&&y()}},X("client:sidebar__button__stop_generating"))),s.default.createElement($t,{onClose:()=>{U(!1)},onShow:()=>U(!0),modelKey:"Sidebar"}),s.default.createElement(gt,{sx:{minHeight:q?0:80,height:q?"0!important":"unset",visibility:q?"hidden":"visible"},stopPropagation:!0,loading:C,expandNode:s.default.createElement(St,{direction:"column",size:"small"}),onEnter:S},s.default.createElement(Ot,{onSendMessage:S}))),s.default.createElement(Rt,null)))},oa=Ga;var Ua=()=>{let{currentSidebarConversationType:t}=L(),{createSearchWithAI:e,regenerateSearchWithAI:o}=bt(),{sendQuestion:n,conversation:l,reGenerate:r,retryMessage:m,stopGenerateMessage:u,resetConversation:a}=ct(""),{currentSidebarConversationMessages:d}=L();return(0,re.useEffect)(()=>{Je()},[]),re.default.createElement(v,{flex:1,height:0,position:"relative"},re.default.createElement(ut,null),re.default.createElement(oa,{editAble:!1,insertAble:!1,onSendMessage:async(y,h)=>{t==="Search"?await e(y,!0):await n({question:y},{...h,regenerate:!1,includeHistory:h.includeHistory===!0})},writingMessage:l.writingMessage,messages:d,loading:l.loading,title:"Chat Draft",onRetry:m,onReGenerate:async()=>{t==="Search"?await o():await r()},onStopGenerate:u,onReset:a}))},Fn=Ua;export{Fn as default};
