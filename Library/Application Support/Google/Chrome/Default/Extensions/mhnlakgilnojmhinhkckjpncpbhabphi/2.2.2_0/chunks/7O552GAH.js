import{a as _}from"./EFY4DJEK.js";var E=(l,a=!1)=>l?(l.search(/^http[s]?:\/\//)==-1&&(l="https://"+l),a&&(l=l.replace(/\.(json)+$/i,"")),l):"";var k=l=>new RegExp(/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/).test(l),S=l=>{if(!l)return"";try{let a=/^(?:https?:\/\/)?(?:www\.)?((?:(?!www\.|\.).)+\.[-a-zA-Z0-9.]+)/gm,n=l.match(a);return(n?n[0]:"").toLowerCase()}catch{return l}},b=(l,a=16)=>{let n=S(l)||`${l?.toLowerCase()}.com`;return`https://www.google.com/s2/favicons?sz=${a}&domain_url=${n}`};var U=l=>{try{let n=new URL(l).pathname.split(".").pop()||"";return!!["doc","xls","ppt","pdf","zip","rar","apk"].includes(n)}catch{return!1}};function A({html:l,limit:a,searchEngine:n,fullSearchURL:c,query:u}){try{let i=L(l,n),t=[],e=[];return i.filter((o,f)=>((!o.body||!o.title||!o.url)&&(t.push(o),e.push(f)),U(o.url)?!1:o.url&&(o.body||o.title))).slice(0,a)}catch{return[]}}function m(l){let a=l.match(/RU=([^/]+)/);return a&&a[1]?decodeURIComponent(a[1]):l}var L=(l,a)=>{try{let n=_.load(l),c=[];switch(a){case"google":{let u=n("#search #rso > div");u.length===1?(n("#rso #kp-wp-tab-overview:not([style])").length>0&&n('#rso #kp-wp-tab-overview:not([style]) div[class*="K7khPe"]').each((t,e)=>{let r=n(e),s=r.find("a > h3"),o=s.closest("a"),f=r.find("div.MUxGbd").text();if(!f){let v=r.find("div[style]").filter((w,R)=>!!n(R)?.attr("style")?.includes("-webkit-line-clamp"));f=n(v[0]).text().trim()}let d=s.next(),h=m(o.attr("href")??""),p=d?.children()?.last()?.children()?.first()?.text(),x=s.text();x&&c.push({title:x,body:f||x,url:h,from:p,favicon:d?.find("img")?.attr("src")})}),n("#search #rso > div a[data-ved]").filter((t,e)=>!!n(e).find("div[role=heading]").text()).each((t,e)=>{let r=n(e),s=r.find("div[role=heading]"),o=s.text(),f=s.next().text(),d=s.prev(),h=m(r.attr("href")??"");c.push({title:o,body:f||o,url:h,from:d.text(),favicon:d.find("img")?.attr("src")})})):u.filter((i,t)=>!!n(t).find("a > h3").text()).each((i,t)=>{let e=n(t),r=e.find("a > h3"),s=r.closest("a"),o=e.find("div.MUxGbd").text();if(o||(o=s?.parent()?.parent()?.parent().next().text().trim()),o||(o=s?.parent()?.parent()?.parent().next().next().text().trim()),!o){let x=e.find("div[style]").filter((v,w)=>!!n(w)?.attr("style")?.includes("-webkit-line-clamp"));o=n(x[0]).text().trim()}let f=r.text(),d=r.next(),h=m(s.attr("href")??""),p=d?.children()?.last()?.children()?.first()?.text();c.push({title:f,body:o||f,url:h,from:p,favicon:d?.find("img")?.attr("src")})});break}case"bing":{n("ol#b_results li.b_algo").each((u,i)=>{let t=n(i),e=t.find("h2 > a"),r=t.find(".b_algoSlug").text();r||(r=t.find(".b_wikiRichcard .tab-content").text().trim()),c.push({title:e.text()??"",body:r??"",url:m(e.attr("href")??""),from:t.find("a .tptt").text(),favicon:t.find("img.rms_img").attr("src")})});break}case"baidu":{n("div#content_left div[class^=result]").each((u,i)=>{let t=n(i),e=t.find("h3"),r=e.find("a"),s=t.find("div[class*=description_]").text();s||(s=t.find(".op_dict_content").text()),s||(s=t.find("div[class*=basis-info_]").text()),s||(s=t.find(".c-color-text").text()),s||(s=e.next().next().text());let o=t.find("a[class^=siteLink]");c.push({title:e.text(),body:s??"",url:m(r.attr("href")??""),from:o.text(),favicon:o.find("img")?.attr("src")})});break}case"duckduckgo":{n("ol.react-results--main li[data-layout=organic]").each((u,i)=>{let t=n(i),e=t.find("h2 > a"),r=t.find("a[data-testid=result-extras-url-link]"),s=r.parent(),o=m(e.attr("href")??"");c.push({title:e.text(),body:t.find("div[data-result=snippet]").text(),url:o,from:g(o)||r.children().first().text(),favicon:s.find("a > img")?.attr("src")})});break}case"yahoo":{n('.algo:not([class*="ad"])').each((u,i)=>{let t=n(i),e=t.find("h3.title a"),r=m(e.attr("href")??""),s=e.find("span").text().split(" \u203A ");c.push({title:e.attr("aria-label")??"",body:t.find(".compText").text(),url:r,from:g(r)||s[0]})});break}case"naver":{n("ul.lst_total > li.bx").each((u,i)=>{let t=n(i),e=t.find("a.link_tit");(!e||e.length<=0)&&(e=t.find("a.total_tit"));let r=m(e.attr("href")??""),s=t.find("a.thumb img").attr("src");c.push({title:e.text(),body:t.find(".dsc_txt").text(),url:r,from:g(r),favicon:s})});break}case"yandex":{n(".content__left ul.serp-list > li.serp-item").each((u,i)=>{let t=n(i),e=t.find("a.organic__url"),r=m(e.attr("href")??""),o=t.find(".Favicon-Icon").css("background-image")?.slice(5).slice(0,-2);c.push({title:e.text(),body:t.find(".organic__content-wrapper").text(),url:r,favicon:o,from:g(r)})});break}case"sogou":{n(".results div.vrwrap").each((u,i)=>{let t=n(i),e=t.find("h3.vr-title a"),r=t.find(".text-layout").text();r||(r=t.find(".word-result").text()),r||(r=t.find(".space-txt").text());let s=m(e.attr("href")??"");s=s.startsWith("/")?location.origin+s:s;let f=t.find(".citeurl").text().replace(/\n\s*/g,"").split("-").find(h=>{try{let p=h.trim().replace("...","");return p.includes("/")&&(p=p.split("/")[0]),k(p)}catch{return!1}}),d=g(f||"");c.push({title:e.text(),body:r,url:s,from:d,favicon:b(d)})});break}case"brave":{n("#results > .snippet[data-type=web]").each((u,i)=>{let t=n(i),e=t.find(".snippet-title"),r=e.text(),s=e.closest("a"),o=t.find("img.favicon").attr("src");r||(e=t.find("a > div.url"),r=e.text(),s=e.closest("a"));let f=t.find(".snippet-content").text();f||(f=t.find(".snippet-description").text());let h=t.find(".snippet-url").children().first().text();t.attr("id")==="discussions"&&(r=t.find(".question > p.title").text(),f=t.find(".faq-a").text(),s=t.find("a.source").first(),h=t.find("img.forum-name").text());let p=m(s.attr("href")??"");c.push({title:r,body:f,url:p,favicon:o,from:h})});break}default:return[]}return c=c.map(u=>{let i={...u};return i.from||(i.from=g(i.url)),i.from&&(i.from=i.from.replace(/\.[^.]*$/,"")),!i.favicon&&i.url&&(i.favicon=b(i.url)),i.from=y(i.from),i.body=y(i.body),i.title=y(i.title),i}),c}catch{return[]}};function y(l){return l.trim().replace(/\n/g,"")||""}function g(l){try{let a=E(l.trim().replace(/.../g,"")),c=new URL(a).host.split(".");return c.length>=3?c[1]:c[0]}catch{return l}}export{A as a};
