import{a as St}from"./UC34CGI7.js";import{a as Mt}from"./QZ23CPMF.js";import{a as wt}from"./PRTVLPOH.js";import{a as pa}from"./WHPSTVSP.js";import{a as ht,b as Oe,c as Tt,d as At,e as Et,h as Pt}from"./ZPV5YW5N.js";import"./CEART6XA.js";import"./K7IBU4YD.js";import"./H3MALSJ3.js";import"./OUAEXYNT.js";import{c as xt,f as yt,i as Ct,l as It}from"./2ELCHEQ3.js";import{g as ee}from"./I7YFGYRS.js";import{f as j}from"./UOML2ES3.js";import"./TMAALQVM.js";import"./GOKIUV7K.js";import"./FQE6TWCB.js";import{b as mt,c as gt,f as dt,g as ft,h as bt,i as vt}from"./FZ2GZC7W.js";import"./WPI52SV7.js";import"./2YYODAGO.js";import"./TPZZZNNY.js";import"./CUWLSLUX.js";import"./WCTRZLYY.js";import{a as ua}from"./4AFPIRTG.js";import"./DDYN6LH7.js";import{a as _t}from"./FK6CHTW2.js";import{a as se}from"./6MDJIXWZ.js";import"./4NAB6M5G.js";import"./X52TO7MR.js";import{a as ca}from"./KIFV56CW.js";import{Db as ct,E as lt,Eb as pt,S as sa,T as it,b as Re,c as Ze,cb as Le,d as ue,e as K,f as ot,v as rt,va as st,wa as ut}from"./BSEQX7JW.js";import{c as pe}from"./H2NXPTRN.js";import"./WBKERYKW.js";import{g as me}from"./TAMQTRNZ.js";import{w as nt}from"./CSD3ZJG6.js";import"./SG4NMKLB.js";import"./GGD6JS33.js";import"./EYWU5WEI.js";import"./FIUCXHR6.js";import"./VTNNVCHV.js";import"./L33QHTPD.js";import"./PEYNS6YO.js";import"./OQCOQ46A.js";import"./4JVVI5M5.js";import{i as Z,j as ce}from"./ZAZJKFJ6.js";import{c as R}from"./SNV3FDHQ.js";import{f as et,h as tt}from"./KUL6UDBQ.js";import{d as ke,g as at}from"./BQGQFNDN.js";import{a as M}from"./M3D6HDXF.js";import{d as V}from"./PC5JBKQI.js";import"./YOUVFAYJ.js";import"./XLYML35Q.js";import{a as T,b as we,u as z}from"./FIOVDIPM.js";import"./H3PWEBSP.js";import"./QZNWBGPK.js";import{j as Ee}from"./QZVUH6Z4.js";import"./6NCLE6FY.js";import"./YSIM5RLZ.js";import"./RW4DAJBJ.js";import"./SHNRUDHL.js";import"./GZO7NFQH.js";import{E as Qe,a as Pe,k as oe,s as $e}from"./SVGE6UYD.js";import{c as D}from"./QPPETRF6.js";import{c as Me,f as Q,s as Je}from"./AA7KRV4Y.js";import{M as J,N as Xe}from"./LVENEOJP.js";import{C as We,E as Ye,O as qe,R as ia,U as ie,e as O,f as Ae,i as Ue,j as Ke,k as je,o as ne}from"./CIA73AT4.js";import{a as L}from"./64D36THL.js";import{c as Ie,f as C}from"./PQ35KENF.js";var kt=Ie(ge=>{"use strict";var ma=we();Object.defineProperty(ge,"__esModule",{value:!0});ge.default=void 0;var ga=ma(ke()),da=Ee(),fa=(0,ga.default)((0,da.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"Cached");ge.default=fa});var Dt=Ie(de=>{"use strict";var ha=we();Object.defineProperty(de,"__esModule",{value:!0});de.default=void 0;var xa=ha(ke()),ya=Ee(),Ca=(0,xa.default)((0,ya.jsx)("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}),"UnfoldMore");de.default=Ca});var Ht=Ie(fe=>{"use strict";var Ta=we();Object.defineProperty(fe,"__esModule",{value:!0});fe.default=void 0;var Ia=Ta(ke()),Aa=Ee(),Ea=(0,Ia.default)((0,Aa.jsx)("path",{d:"M7.41 18.59 8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z"}),"UnfoldLess");fe.default=Ea});var te=C(L());var i=C(L());var ea=C(kt());var ta=C(pa());var E=C(L());var Lt=C(gt());var ba=a=>{let{onSendMessage:e}=a,{t:r}=D(["common","client"]),{currentMaxInputLength:o,isError:u}=dt("chatBoxInputMediator"),[s,_]=(0,E.useState)(""),c=O(ue),t=E.default.useRef(null),v=(0,E.useRef)(!1),I=(0,E.useRef)({});return(0,E.useEffect)(()=>{let d=(g,p)=>{p&&(I.current=p),g.startsWith("``NO_HISTORY_&#``\n")&&(g=g.replace("``NO_HISTORY_&#``\n",""),v.current=!0),_(g)};return Le("chatBoxInputMediator").subscribe(d),()=>{Le("chatBoxInputMediator").unsubscribe(d)}},[]),(0,E.useEffect)(()=>{v.current=!1,I.current={}},[c.loading]),E.default.createElement(T,{ref:t,p:1,pt:0,direction:"row",alignItems:"center",spacing:1,width:"100%"},E.default.createElement(z,{component:"span",color:u?"rgb(239, 83, 80)":"text.secondary",fontSize:12,fontFamily:"Roboto,RobotoDraft,Helvetica,Arial,sans-serif!important"},c.loading?0:Me(s.length,0),"/",Me(o,0)),E.default.createElement(M,{component:"div",display:"flex",width:0,flex:1,alignItems:"center",justifyContent:"end",gap:1},!Ke&&!c.loading&&E.default.createElement(St,{onBeforeShowContextMenu:()=>({template:s||" ",target:Q()?.querySelector(`#${ne}`)?.parentElement||t.current})}),E.default.createElement(ce,{title:r("client:sidebar__button__send_to_ai"),TooltipProps:{description:"\u23CE"},sx:{minWidth:"unset",p:1},disableElevation:!0,variant:"contained",disabled:c.loading,onClick:()=>{e&&e(s,{includeHistory:!v.current,meta:I.current}),I.current={},v.current=!1}},c.loading?E.default.createElement(pe,{size:16}):E.default.createElement(Lt.default,{sx:{fontSize:"16px"}}))))},Ot=ba;var P=C(L()),_a=(a,e,r)=>{let o=(0,P.useRef)(null),u=(0,P.useRef)(null),[s,_]=(0,P.useState)(1),[c]=(0,P.useState)(r?.buffer||10),t=r?.buffer||0,v=(0,P.useCallback)(()=>{if(o.current&&o.current.disconnect(),a.current){let p=a.current,A=null,N=()=>{A&&window.clearTimeout(A);let y=p.children[t];if(y){let W=F=>{F[0].isIntersecting&&d()};o.current=new IntersectionObserver(W),u.current=y,o.current.observe(y)}else A=window.setTimeout(()=>{N()},1e3)};N()}},[t]),I=(0,P.useCallback)(()=>{let p=a.current;if(o.current&&p){u.current&&o.current.unobserve(u.current);let A=p.children[t];A&&o.current.observe(A)}},[a,t]),d=(0,P.useCallback)(()=>{_(p=>++p)},[]),g=(0,P.useMemo)(()=>c===-1?e:e.slice(-(s*c)),[e,s,c]);return(0,P.useEffect)(()=>{I()},[g]),(0,P.useEffect)(()=>(e.length>c&&a.current&&v(),()=>{o.current&&o.current.disconnect()}),[v,e,c,a]),{slicedMessageList:g,loadMore:d,changePageNumber:(0,P.useCallback)(p=>_(p),[])}},Bt=_a;var S=C(L());var va=a=>{let{onClick:e,disabledMainButton:r}=a,{t:o}=D(["common","client"]),u=O(K),[s,_]=(0,S.useState)(!1),c=()=>{_(!1),setTimeout(()=>{e&&e("focus")},100)};return S.default.createElement(M,{sx:{position:"absolute",left:0,bottom:0,width:40,height:40}},S.default.createElement(ht,{ariaLabel:"SpeedDial controlled open",sx:{position:"absolute",left:0,bottom:"0","& > button":{width:40,height:40}},FabProps:{sx:{"& + div":{marginBottom:"-40px!important",paddingBottom:"48px!important"}}},icon:S.default.createElement(M,{component:"div",onClick:()=>{if(r){e&&e("focus");return}e&&e("new")}},S.default.createElement(Z,{placement:"left",title:u.type==="Chat"?o("client:sidebar__tabs__chat__action_btn__title"):o("client:sidebar__tabs__summary__action_btn__title")},S.default.createElement(T,{p:1,alignItems:"center",justifyContent:"center",component:"div"},S.default.createElement(et,{sx:{color:"#fff",fontSize:"24px"}}))))},S.default.createElement(Oe,{icon:S.default.createElement(R,{href:Ye+"/prompts",target:"_blank",color:"text.secondary"},S.default.createElement(M,{component:"div",onClick:t=>{t.stopPropagation()}},S.default.createElement(Z,{placement:"left",title:o("client:sidebar__speed_dial__one_click_prompts__button")},S.default.createElement(T,{p:1,alignItems:"center",justifyContent:"center",component:"div"},S.default.createElement(tt,{sx:{fontSize:"24px",color:"primary.main"}}))))),tooltipTitle:""}),S.default.createElement(Oe,{icon:S.default.createElement(M,{component:"div",onClick:()=>{_(!0)}},S.default.createElement(Z,{placement:"left",title:o("client:sidebar__speed_dial__restart_extension__button")},S.default.createElement(T,{p:1,alignItems:"center",justifyContent:"center",component:"div"},S.default.createElement(me,{icon:"Restart",sx:{fontSize:"24px"}})))),tooltipTitle:""})),S.default.createElement(xt,{open:s,onClose:()=>{c()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},S.default.createElement(yt,{id:"alert-dialog-title"},o("client:sidebar__speed_dial__restart_extension__tooltip__title")),S.default.createElement(Ct,null,S.default.createElement(Tt,{id:"alert-dialog-description"},o("client:sidebar__speed_dial__restart_extension__tooltip__description1"),S.default.createElement("br",null),o("client:sidebar__speed_dial__restart_extension__tooltip__description2"))),S.default.createElement(It,null,S.default.createElement(V,{sx:{},variant:"outlined",onClick:()=>{c()}},o("common:cancel")),S.default.createElement(V,{color:"primary",variant:"contained",onClick:()=>{e&&e("restart"),c()},autoFocus:!0},o("client:sidebar__speed_dial__restart_extension__tooltip__confirm")))))},Nt=va;var B=C(L());var Sa=a=>{let{sx:e}=a,{type:r}=O(K),o=O(ie),[u,s]=B.default.useState(null),_=(0,B.useRef)(null),c=(0,B.useRef)(!1),t=(0,B.useRef)(!1),v=g=>{t.current||s(g.currentTarget)},I=()=>{s(null)},d=!!u;return(0,B.useMemo)(()=>r==="Summary"?null:B.default.createElement(M,{id:"max-ai__ai-provider-floating-button",sx:{width:"44px",height:"44px",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",border:"1px solid #EBEBEB",cursor:"pointer",borderColor:g=>g.palette.mode==="dark"?"rgba(255, 255, 255, 0.16)":"#EBEBEB",bgcolor:g=>g.palette.mode==="dark"?"#333":"#fff",boxShadow:"0px 0px 0.5px 0px rgba(0, 0, 0, 0.40), 0px 1px 3px 0px rgba(0, 0, 0, 0.09), 0px 4px 8px 0px rgba(0, 0, 0, 0.09);",...e},"aria-owns":d?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:g=>{_.current&&clearTimeout(_.current),c.current=!0,_.current=setTimeout(()=>{c.current=!1},700),v(g)},onMouseLeave:()=>{I(),t.current=!1}},B.default.createElement(lt,{aiProviderType:o.currentAIProvider||"USE_CHAT_GPT_PLUS"}),B.default.createElement(nt,{open:d,anchorEl:u,id:"mouse-over-popover",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},disableScrollLock:!0,PaperProps:{sx:{ml:se()?0:"8px"}}},B.default.createElement(it.default,{onClickAway:g=>{let p=Q()?.querySelector("#MaxAIProviderSelectorCard");if(p){let A=p.getBoundingClientRect(),N=g.clientX,y=g.clientY;if(N>A.left&&N<A.right&&y>A.top&&y<A.bottom)return;I()}}},B.default.createElement(M,{onMouseEnter:v,onMouseLeave:I},B.default.createElement(st,{closeAble:!0,onClose:()=>{c.current||(t.current=!0,I())}}))))),[o.currentAIProvider,d,r])},Vt=Sa;var h=C(L());var zt=C(Dt()),Ft=C(Ht());var Ma=[{label:"client:sidebar__tabs__chat__title",tooltip:()=>"client:sidebar__tabs__chat__tooltip",value:"Chat"},{label:"client:sidebar__tabs__summary__title",tooltip:()=>{switch(rt()){case"DEFAULT_EMAIL_SUMMARY":return"client:sidebar__tabs__summary__tooltip__default_email";case"PAGE_SUMMARY":return"client:sidebar__tabs__summary__tooltip__page";case"PDF_CRX_SUMMARY":return"client:sidebar__tabs__summary__tooltip__pdf_crx";case"YOUTUBE_VIDEO_SUMMARY":return"client:sidebar__tabs__summary__tooltip__youtube_video";default:return"client:sidebar__tabs__summary__tooltip__page"}},value:"Summary"}],Pa=()=>{let{t:a}=D(["common","client"]),[e]=Ae(Re),[r,o]=(0,h.useState)(!0),u=O(ot),[s,_]=Ae(K),c=O(ie),t=O(Ze),v=O(ue),I=(0,h.useMemo)(()=>{let d=J(t[u]||{});return d.messages&&delete d.messages,d},[t,u]);return se()?null:((0,h.useEffect)(()=>{let d=g=>{let p=g?.detail?.type;p&&_(A=>({...A,type:p}))};return window.addEventListener("MaxAISwitchSidebarTab",d),()=>{window.removeEventListener("MaxAISwitchSidebarTab",d)}}),h.default.createElement(h.default.Fragment,null,h.default.createElement(T,{direction:"row",height:36,alignItems:"center",width:"100%",borderBottom:"1px solid",borderColor:"customColor.borderColor",bgcolor:"background.paper",sx:{position:"sticky",top:0,zIndex:1}},h.default.createElement(At,{sx:{minHeight:"36px","& .use-chat-gpt-ai--MuiButtonBase-root":{height:"36px",minHeight:"36px",p:1}},value:s.type,onChange:(d,g)=>{_(p=>({...p,type:g}))},textColor:"inherit",indicatorColor:"primary"},Ma.map(d=>h.default.createElement(Et,{disabled:v.loading,key:d.value,value:d.value,label:h.default.createElement(Z,{title:a(d.tooltip?.())},h.default.createElement(z,{fontSize:"14px",color:"text.primary","data-testid":"max-ai__summary-tab"},a(d.label)))})))),h.default.createElement(Mt,null,h.default.createElement(T,{sx:{position:"absolute",top:"0",maxWidth:r?"400px":"32px",maxHeight:r?"unset":"32px",overflowX:"auto",zIndex:1,bgcolor:"background.paper",color:"text.primary",right:"100%",border:"1px solid",borderColor:"customColor.borderColor",borderRadius:"4px","& > pre, & > p":{p:0,m:0,fontSize:"12px"}}},r?h.default.createElement(V,{variant:"contained",sx:{minWidth:"unset",position:"absolute",top:0,right:0,p:1},onClick:()=>o(!1)},h.default.createElement(Ft.default,null)):h.default.createElement(V,{variant:"contained",sx:{minWidth:"unset",position:"absolute",top:0,right:0,p:1},onClick:()=>o(!0)},h.default.createElement(zt.default,null)),h.default.createElement("p",null,"authStatus: ",e.status),h.default.createElement("p",null,"loading: ",v.loading?"loading":"done"),h.default.createElement("pre",null,JSON.stringify(s,null,2)),h.default.createElement("p",null,"AppLocalStorage: ",c.chatTypeConversationId,"==",c.currentAIProvider),h.default.createElement("p",null,"currentTabUsingID: ",u),h.default.createElement("pre",null,JSON.stringify(I,null,2))))))},Gt=Pa;var b=C(L());var qt=C(ua());var Xt=C(gt());var Se=C(L());var be=C(L()),Be=[{label:"Default",value:""},{value:"Academic",label:"Academic"},{value:"Analytical",label:"Analytical"},{value:"Argumentative",label:"Argumentative"},{value:"Conversational",label:"Conversational"},{value:"Creative",label:"Creative"},{value:"Critical",label:"Critical"},{value:"Descriptive",label:"Descriptive"},{value:"Epigrammatic",label:"Epigrammatic"},{value:"Epistolary",label:"Epistolary"},{value:"Expository",label:"Expository"},{value:"Informative",label:"Informative"},{value:"Instructive",label:"Instructive"},{value:"Journalistic",label:"Journalistic"},{value:"Metaphorical",label:"Metaphorical"},{value:"Narrative",label:"Narrative"},{value:"Persuasive",label:"Persuasive"},{value:"Poetic",label:"Poetic"},{value:"Satirical",label:"Satirical"},{value:"Technical",label:"Technical"}];function wa(a,{inputValue:e}){return a.filter(r=>{let o=r.label.toLowerCase(),u=r.value.toLowerCase(),s=e.toLowerCase();return o.includes(s)||u.includes(s)})}var Ut=a=>{let{label:e="Writing style",defaultValue:r="",onChange:o=t=>{},placeholder:u,sx:s}=a,[_,c]=be.default.useState(()=>Be.find(t=>t.value===r)||Be[0]);return be.default.createElement(ee,{componentsProps:{popper:{style:{width:160}}},placeholder:u,disableClearable:!0,value:_,size:"small",sx:{width:160,...s},autoHighlight:!0,getOptionLabel:t=>t.label,options:Be,onChange:(t,v)=>{c(v),o(v.value)},filterOptions:wa,renderInput:t=>be.default.createElement(j,{...t,label:e,InputLabelProps:{sx:{fontSize:"16px"},...t.InputLabelProps},inputProps:{sx:{fontSize:"16px"},...t.inputProps,autoComplete:"new-password"}})})};var _e=C(L()),Ne=[{language_code:"uk",value:"Ukrainian",label:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},{language_code:"so",value:"Somali",label:"Af Soomaali"},{language_code:"af",value:"Afrikaans",label:"Afrikaans"},{language_code:"az",value:"Azerbaijani",label:"Az\u0259rbaycan dili"},{language_code:"id",value:"Indonesian",label:"Bahasa Indonesia"},{language_code:"ms-MY",value:"Malaysian Malay",label:"Bahasa Malaysia"},{language_code:"ms",value:"Malay",label:"Bahasa Melayu"},{language_code:"jv",value:"Javanese",label:"Basa Jawa"},{language_code:"su",value:"Sundanese",label:"Basa Sunda"},{language_code:"bs",value:"Bosnian",label:"Bosanski jezik"},{language_code:"ca",value:"Catalan",label:"Catal\xE0"},{language_code:"cs",value:"Czech",label:"\u010Ce\u0161tina"},{language_code:"ny",value:"Chichewa",label:"Chichewa"},{language_code:"cy",value:"Welsh",label:"Cymraeg"},{language_code:"da",value:"Danish",label:"Dansk"},{language_code:"de",value:"German",label:"Deutsch"},{language_code:"et",value:"Estonian",label:"Eesti keel"},{language_code:"en",value:"English",label:"English"},{language_code:"en-GB",value:"English (UK)",label:"English (UK)"},{language_code:"en-US",value:"English (US)",label:"English (US)"},{language_code:"es",value:"Spanish",label:"Espa\xF1ol"},{language_code:"eo",value:"Esperanto",label:"Esperanto"},{language_code:"eu",value:"Basque",label:"Euskara"},{language_code:"fr",value:"French",label:"Fran\xE7ais"},{language_code:"ga",value:"Irish",label:"Gaeilge"},{language_code:"gl",value:"Galician",label:"Galego"},{language_code:"hr",value:"Croatian",label:"Hrvatski jezik"},{language_code:"xh",value:"Xhosa",label:"isiXhosa"},{language_code:"zu",value:"Zulu",label:"isiZulu"},{language_code:"is",value:"Icelandic",label:"\xCDslenska"},{language_code:"it",value:"Italian",label:"Italiano"},{language_code:"sw",value:"Swahili",label:"Kiswahili"},{language_code:"ht",value:"Haitian Creole",label:"Krey\xF2l Ayisyen"},{language_code:"ku",value:"Kurdish",label:"Kurd\xEE"},{language_code:"la",value:"Latin",label:"Lat\u012Bna"},{language_code:"lv",value:"Latvian",label:"Latvie\u0161u valoda"},{language_code:"lb",value:"Luxembourgish",label:"L\xEBtzebuergesch"},{language_code:"lt",value:"Lithuanian",label:"Lietuvi\u0173 kalba"},{language_code:"hu",value:"Hungarian",label:"Magyar"},{language_code:"mg",value:"Malagasy",label:"Malagasy"},{language_code:"mt",value:"Maltese",label:"Malti"},{language_code:"mi",value:"Maori",label:"M\u0101ori"},{language_code:"nl",value:"Dutch",label:"Nederlands"},{language_code:"no",value:"Norwegian",label:"Norsk"},{language_code:"uz",value:"Uzbek",label:"O'zbek tili"},{language_code:"pl",value:"Polish",label:"Polski"},{language_code:"pt",value:"Portuguese",label:"Portugu\xEAs"},{language_code:"ro",value:"Romanian",label:"Rom\xE2n\u0103"},{language_code:"st",value:"Sesotho",label:"Sesotho"},{language_code:"sq",value:"Albanian",label:"Shqip"},{language_code:"sk",value:"Slovak",label:"Sloven\u010Dina"},{language_code:"sl",value:"Slovenian",label:"Sloven\u0161\u010Dina"},{language_code:"fi",value:"Finnish",label:"Suomi"},{language_code:"sv",value:"Swedish",label:"Svenska"},{language_code:"tl",value:"Tagalog",label:"Tagalog"},{language_code:"tt",value:"Tatar",label:"Tatar\xE7a"},{language_code:"tr",value:"Turkish",label:"T\xFCrk\xE7e"},{language_code:"vi",value:"Vietnamese",label:"Vi\u1EC7t ng\u1EEF"},{language_code:"yo",value:"Yoruba",label:"Yor\xF9b\xE1"},{language_code:"el",value:"Greek",label:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC"},{language_code:"be",value:"Belarusian",label:"\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0430\u044F \u043C\u043E\u0432\u0430"},{language_code:"bg",value:"Bulgarian",label:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438 \u0435\u0437\u0438\u043A"},{language_code:"ky",value:"Kyrgyz",label:"\u041A\u044B\u0440"},{language_code:"kk",value:"Kazakh",label:"\u049A\u0430\u0437\u0430\u049B \u0442\u0456\u043B\u0456"},{language_code:"mk",value:"Macedonian",label:"\u041C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438 \u0458\u0430\u0437\u0438\u043A"},{language_code:"mn",value:"Mongolian",label:"\u041C\u043E\u043D\u0433\u043E\u043B \u0445\u044D\u043B"},{language_code:"ru",value:"Russian",label:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},{language_code:"sr",value:"Serbian",label:"\u0421\u0440\u043F\u0441\u043A\u0438 \u0458\u0435\u0437\u0438\u043A"},{language_code:"tg",value:"Tajik",label:"\u0422\u043E\u04B7\u0438\u043A\u04E3"},{language_code:"ka",value:"Georgian",label:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8"},{language_code:"hy",value:"Armenian",label:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},{language_code:"yi",value:"Yiddish",label:"\u05D9\u05D9\u05B4\u05D3\u05D9\u05E9"},{language_code:"he",value:"Hebrew",label:"\u05E2\u05D1\u05E8\u05D9\u05EA"},{language_code:"ug",value:"Uyghur",label:"\u0626\u06C7\u064A\u063A\u06C7\u0631\u0686\u06D5"},{language_code:"ur",value:"Urdu",label:"\u0627\u0631\u062F\u0648"},{language_code:"ar",value:"Arabic",label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"},{language_code:"ps",value:"Pashto",label:"\u067E\u069A\u062A\u0648"},{language_code:"fa",value:"Persian",label:"\u0641\u0627\u0631\u0633\u06CC"},{language_code:"ne",value:"Nepali",label:"\u0928\u0947\u092A\u093E\u0932\u0940"},{language_code:"mr",value:"Marathi",label:"\u092E\u0930\u093E\u0920\u0940"},{language_code:"hi",value:"Hindi",label:"\u0939\u093F\u0928\u094D\u0926\u0940"},{language_code:"bn",value:"Bengali",label:"\u09AC\u09BE\u0982\u09B2\u09BE"},{language_code:"pa",value:"Punjabi",label:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40"},{language_code:"gu",value:"Gujarati",label:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0"},{language_code:"or",value:"Oriya",label:"\u0B13\u0B21\u0B3C\u0B3F\u0B06"},{language_code:"ta",value:"Tamil",label:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD"},{language_code:"te",value:"Telugu",label:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41"},{language_code:"kn",value:"Kannada",label:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1"},{language_code:"ml",value:"Malayalam",label:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02"},{language_code:"si",value:"Sinhala",label:"\u0DC3\u0DD2\u0D82\u0DC4\u0DBD"},{language_code:"th",value:"Thai",label:"\u0E44\u0E17\u0E22"},{language_code:"lo",value:"Lao",label:"\u0E9E\u0EB2\u0EAA\u0EB2\u0EA5\u0EB2\u0EA7"},{language_code:"my",value:"Burmese",label:"\u1017\u1019\u102C\u1005\u102C"},{language_code:"km",value:"Khmer",label:"\u1797\u17B6\u179F\u17B6\u1781\u17D2\u1798\u17C2\u179A"},{language_code:"ko",value:"Korean",label:"\uD55C\uAD6D\uC5B4"},{language_code:"zh",value:"Chinese",label:"\u4E2D\u6587"},{language_code:"zh-TW",value:"Traditional Chinese",label:"\u7E41\u9AD4\u4E2D\u6587"},{language_code:"ja",value:"Japanese",label:"\u65E5\u672C\u8A9E"}];function ka(a,{inputValue:e}){return a.filter(r=>{let o=r.label.toLowerCase(),u=r.value.toLowerCase(),s=e.toLowerCase();return o.includes(s)||u.includes(s)})}var Kt=a=>{let{label:e="Output language",defaultValue:r="",onChange:o=t=>{},placeholder:u,sx:s}=a,[_,c]=_e.default.useState(()=>Ne.find(t=>t.value===r)||Ne[0]);return _e.default.createElement(ee,{componentsProps:{popper:{style:{width:160}}},placeholder:u,disableClearable:!0,value:_,size:"small",sx:{width:160,...s},autoHighlight:!0,getOptionLabel:t=>t.label,options:Ne,onChange:(t,v)=>{c(v),o(v.value)},filterOptions:ka,renderInput:t=>_e.default.createElement(j,{...t,label:e,InputLabelProps:{sx:{fontSize:"16px"},...t.InputLabelProps},inputProps:{sx:{fontSize:"16px"},...t.inputProps}})})};var ve=C(L());var Ve=[{label:"Default",value:""},{label:"Authoritative",value:"Authoritative"},{label:"Casual",value:"Casual"},{label:"Clinical",value:"Clinical"},{label:"Cold",value:"Cold"},{label:"Confident",value:"Confident"},{label:"Cynical",value:"Cynical"},{label:"Emotional",value:"Emotional"},{label:"Empathetic",value:"Empathetic"},{label:"Formal",value:"Formal"},{label:"Friendly",value:"Friendly"},{label:"Humorous",value:"Humorous"},{label:"Informal",value:"Informal"},{label:"Ironic",value:"Ironic"},{label:"Optimistic",value:"Optimistic"},{label:"Pessimistic",value:"Pessimistic"},{label:"Playful",value:"Playful"},{label:"Professional",value:"Professional"},{label:"Sarcastic",value:"Sarcastic"},{label:"Serious",value:"Serious"},{label:"Straightforward",value:"Straightforward"},{label:"Sympathetic",value:"Sympathetic"},{label:"Tentative",value:"Tentative"},{label:"Warm",value:"Warm"}];function La(a,{inputValue:e}){return a.filter(r=>{let o=r.label.toLowerCase(),u=r.value.toLowerCase(),s=e.toLowerCase();return o.includes(s)||u.includes(s)})}var jt=a=>{let{label:e="Tone",defaultValue:r="",onChange:o=t=>{},placeholder:u,sx:s}=a,[_,c]=ve.default.useState(()=>Ve.find(t=>t.value===r)||Ve[0]);return ve.default.createElement(ee,{componentsProps:{popper:{style:{width:160}}},placeholder:u,disableClearable:!0,value:_,size:"small",sx:{width:160,...s},autoHighlight:!0,getOptionLabel:t=>t.label,options:Ve,onChange:(t,v)=>{c(v),o(v.value)},filterOptions:La,renderInput:t=>ve.default.createElement(j,{...t,label:e,InputLabelProps:{sx:{fontSize:"16px"},...t.InputLabelProps},inputProps:{sx:{fontSize:"16px"},...t.inputProps,autoComplete:"new-password"}})})};var Oa=a=>{let{systemVariableSelectKey:e,...r}=a;switch(e){case"AI_RESPONSE_WRITING_STYLE":return Se.default.createElement(Ut,{...r});case"AI_RESPONSE_LANGUAGE":return Se.default.createElement(Kt,{...r});case"AI_RESPONSE_TONE":return Se.default.createElement(jt,{...r});default:return null}},Wt=Oa;var De=C(ia()),he="CHROME_EXTENSION_SET_VARIABLES_MODAL_SELECT_KEY",He=async()=>{let a=await De.default.storage.local.get(he);try{return a[he]?JSON.parse(a[he]):{}}catch{return{}}},Yt=async(a,e)=>{try{let r=await He();return r[a]=e,await De.default.storage.local.set({[he]:JSON.stringify(r)}),!0}catch{return!1}};var Ba=a=>{let{title:e,variables:r,systemVariables:o,modelKey:u,onShow:s,onClose:_}=a,{setShortCuts:c,runShortCuts:t,loading:v}=bt(),{type:I}=O(K),{t:d}=D(["common","client"]),[g,p]=(0,b.useState)(!1),[A,N]=(0,b.useState)(!1),[y,W]=(0,b.useState)(null),F=(0,b.useRef)(),[Y,q]=(0,b.useState)([]),[H,X]=(0,b.useState)({}),re=async l=>{Y.forEach(f=>{f.resolve({data:J(H),type:l?"cancel":"close",success:!1})}),X({}),p(!1),_?.()},ae=async l=>{if(oe(l)){let f=F.current?.querySelectorAll("textarea[id]")?.[l+1];if(f){f.focus();return}}if(y?.waitForUserAction)Y.forEach(f=>{f.resolve({data:J(H),type:"confirm",success:!0})});else{let f=J(H);if(X({}),p(!1),_?.(),y?.template){let x=H?.TEMPLATE||y?.template||"",n="";f.AI_RESPONSE_TONE!=="Default"&&f.AI_RESPONSE_WRITING_STYLE!=="Default"?n=`

Please write in {{AI_RESPONSE_TONE}} tone, {{AI_RESPONSE_WRITING_STYLE}} writing style, using {{AI_RESPONSE_LANGUAGE}}.`:f.AI_RESPONSE_TONE!=="Default"?n=`

Please write in {{AI_RESPONSE_TONE}} tone, using {{AI_RESPONSE_LANGUAGE}}.`:f.AI_RESPONSE_WRITING_STYLE!=="Default"?n=`

Please write in {{AI_RESPONSE_WRITING_STYLE}} writing style, using {{AI_RESPONSE_LANGUAGE}}.`:n=`

Please write using {{AI_RESPONSE_LANGUAGE}}.`,x+=`

---`+n;let m=[];m.push({type:"SET_VARIABLE_MAP",parameters:{VariableMap:f}}),m.push({type:"RENDER_TEMPLATE",parameters:{template:x}}),je?m.push({type:"ASK_CHATGPT",parameters:{template:"{{LAST_ACTION_OUTPUT}}",AskChatGPTActionType:"ASK_CHAT_GPT_WITH_PREFIX",AskChatGPTActionMeta:{contextMenu:{id:y.contextMenuId||Pe(),droppable:!1,parent:Pe(),text:y.title,data:{editable:!1,type:"shortcuts",actions:[]}}}}}):m.push({type:"ASK_CHATGPT",parameters:{template:"{{LAST_ACTION_OUTPUT}}"}}),await c(m),await t()}}},G=(0,b.useMemo)(()=>{let l={},f=r||y?.variables||[],x=o||y?.systemVariables||[],n=e||y?.title||"",m=[],w=[];f.forEach(k=>{k.valueType==="Select"&&!k.hidden&&m.push(k),k.valueType==="Text"&&!k.hidden&&w.push(k),l[k.VariableName]=k.defaultValue}),x.forEach(k=>{l[k.VariableName]=k.defaultValue});let le=m.length+x.length,xe=window.innerHeight*.6,ye=36,Ce=Math.ceil(le/3),ze=Ce*48+(Ce-1)*16,Fe=w.length,oa=(Fe-1)*16,ra=16*3,la=xe-ye-ze-oa-ra,na=Math.floor(la/24/Fe)-1;return He().then(k=>{let Ge=Object.keys(l);Ge.length!==0&&(Ge.forEach(Te=>{k[Te]!==void 0&&(l[Te]=k[Te])}),X(l))}),{currentTitle:n,currentSelectTotalCount:le,currentSystemVariables:x,selectTypeVariables:m,textTypeVariables:w,maxTextareaMaxRows:na}},[r,e,o,u,y]);return Qe(()=>{mt.receive("SetVariablesModal",l=>new Promise((f,x)=>{l.task==="open"&&l.config?.modelKey===u&&(p(!1),setTimeout(()=>{W(l.config),l.config.waitForUserAction?q([{resolve:f,reject:x}]):f({data:J(H),type:"confirm",success:!0}),s?.(),p(!0)},0))}))}),(0,b.useEffect)(()=>{N(I!=="Chat")},[I]),(0,b.useEffect)(()=>{if(g)if(A)_?.();else{let l=()=>{let f=Array.from(F.current?.querySelectorAll("textarea")||[]).find(x=>x.value==="");f?f.focus():F.current?.querySelector("textarea")?.focus()};setTimeout(()=>{l()},0),setTimeout(()=>{l()},100),s?.()}else N(!1)},[g,A]),!g||A||Object.keys(H).length===0?null:b.default.createElement(T,{borderRadius:"8px",border:"1px solid",borderColor:"customColor.borderColor",sx:{width:"100%",p:1,gap:1},maxHeight:"60vh",onKeyPressCapture:l=>{l.stopPropagation()},onKeyPress:l=>{l.stopPropagation()}},b.default.createElement(T,{height:36,direction:"row",alignItems:"start",justifyContent:"space-between"},b.default.createElement(M,{component:"div",sx:{borderRadius:"4px",p:"4px 8px",bgcolor:"rgba(0, 0, 0, 0.87)"}},b.default.createElement(z,{fontSize:"14px",color:"#fff",fontWeight:600},G.currentTitle)),b.default.createElement(at,{onClick:async()=>await re(!0),sx:{position:"relative",top:"-8px",right:"-8px"}},b.default.createElement(qt.default,{sx:{fontSize:"24px"}}))),b.default.createElement(T,{flexWrap:"wrap",direction:"row",sx:{gap:"16px"}},G.currentSystemVariables.map((l,f)=>{let x=Na(f,G.currentSelectTotalCount);return b.default.createElement(Wt,{systemVariableSelectKey:l.VariableName,key:l.VariableName,defaultValue:H[l.VariableName]||"",onChange:async n=>{await Yt(l.VariableName,n),X(m=>({...m,[l.VariableName]:n}))},sx:{width:x}})})),b.default.createElement(T,{gap:2,paddingTop:1,ref:F},G.textTypeVariables.map((l,f)=>b.default.createElement(j,{size:"small",key:l.VariableName,label:l.label,value:H[l.VariableName]||"",onChange:x=>{let n=x.target.value;X(m=>({...m,[l.VariableName]:n}))},onKeyDown:async x=>{x.key==="Enter"&&!x.shiftKey?(x.stopPropagation(),x.preventDefault(),await ae(f)):x.stopPropagation()},InputProps:{sx:{fontSize:"16px"}},InputLabelProps:{shrink:!0,sx:{fontSize:"16px"}},multiline:!0,placeholder:l.placeholder,minRows:Math.min(G.maxTextareaMaxRows,2),maxRows:G.maxTextareaMaxRows}))),b.default.createElement(T,{direction:"row",alignItems:"center",justifyContent:"end",gap:1},b.default.createElement(V,{sx:{height:"32px"},onClick:async()=>await re(!0),variant:"secondary"},d("common:cancel")),b.default.createElement(ce,{title:d("client:sidebar__button__send_to_ai"),TooltipProps:{description:"\u23CE"},disabled:v,onClick:async()=>await ae(),variant:"contained",color:"primary",sx:{width:"32px",height:"32px",minWidth:"unset"}},v?b.default.createElement(pe,{size:16,sx:{fontSize:"inherit",color:"#fff"}}):b.default.createElement(Xt.default,{sx:{fontSize:"16px"}}))))},Na=(a,e)=>{let r=e%3,o=(e-r)/3;if(a<o*3)return"calc(33.33% - (2/3)*16px)";switch(r){case 1:if(a===e-1)return"100%";break;case 2:if(a>=e-2)return"calc(50% - 8px)";break}return null},Jt=Ba;var U=C(L());var $=C(L());var Va=()=>{let a="Email & social media assistants in one click.";return $.default.createElement(z,{width:"100%",component:"div",fontSize:12,color:"text.secondary",sx:{display:"flex",alignItems:"center",justifyContent:"end"}},$.default.createElement(z,{fontSize:"inherit",color:"inherit",width:0,flex:1,textAlign:"right",noWrap:!0},$.default.createElement(R,{fontSize:"inherit",color:"inherit",href:qe,target:"_blank",sx:{textDecoration:"underline!important"}},$.default.createElement("span",null,"MaxAI.me v"),$.default.createElement("span",null,`${Ue}`),$.default.createElement("span",null,` - ${a}`))))},$t=Va;var Qt=C(ca()),{getOS:Da}=new Qt.UAParser,Ha=()=>{let{width:a,scrollWidth:e}=wt(),{t:r}=D(["common"]),[o,u]=(0,U.useState)(!1);return(0,U.useEffect)(()=>{if(oe(e)&&oe(a)&&e>a){if(Da().name==="Mac OS")return;u(!0)}},[a,e]),U.default.createElement(T,{direction:"row",alignItems:"center",sx:{width:"100%"},spacing:2,justifyContent:"space-between",pb:o?2:0},U.default.createElement(z,{sx:{flexShrink:0},fontSize:12},U.default.createElement(R,{color:"text.primary",sx:{cursor:"pointer"},underline:"always",target:"_blank",href:We},r("common:contact_us"))),U.default.createElement($t,null))},Rt=Ha;var Zt=i.default.lazy(()=>import("./2AFKXPCK.js")),za=a=>{let{sx:e,aiAvatar:r,userAvatar:o,onCopy:u,onQuestionUpdate:s,editAble:_=!0,insertAble:c=!0,reGenerateAble:t=!0,onReGenerate:v,onStopGenerate:I,onSendMessage:d,writingMessage:g,messages:p,onRetry:A,onReset:N,loading:y}=a,[W,F]=(0,i.useState)(!1),{t:Y}=D(["common","client"]),q=(0,i.useRef)(null),H=(0,i.useRef)(null),[X,re]=i.default.useState(!1),{slicedMessageList:ae,changePageNumber:G}=Bt(H,p),l=(0,i.useRef)(!0),f=(0,i.useCallback)((n,m)=>{G(1),d&&d(n,m)},[d,G]);(0,i.useEffect)(()=>{let n=q.current;if(!n)return;let w=$e(le=>{if(le.deltaY<0){l.current=!1;return}let xe=n.scrollTop,ye=n.scrollHeight;n.clientHeight+xe>=ye&&(l.current=!0)},100);return n.addEventListener("wheel",w),()=>n.removeEventListener("wheel",w)},[]),(0,i.useEffect)(()=>{let n=q.current;l.current&&n&&n.scrollTo(0,n.scrollHeight)},[g]);let x=(0,i.useRef)("");return(0,i.useEffect)(()=>{if(p.length>0){re(p[p.length-1].type==="ai");for(let n=p.length-1;n>=0;n--){let m=p[n];if(m.type==="user"||m.type==="system"){let w=q.current;x.current&&x.current!==m.messageId?(l.current=!0,setTimeout(()=>{w&&w.scrollTo(0,w.scrollHeight)},0)):(l.current=!0,setTimeout(()=>{w&&w.scrollTo(0,w.scrollHeight)},0)),x.current=m.messageId;break}}}},[p]),(0,i.useEffect)(()=>{let n=()=>{let m=q.current;m&&(l.current&&m.scrollTo(0,m.scrollHeight),setTimeout(()=>{l.current&&m.scrollTo(0,m.scrollHeight)},1e3))};return n(),window.addEventListener("focus",n),()=>window.removeEventListener("focus",n)},[]),i.default.createElement(T,{position:"relative",borderTop:"1px solid",borderColor:"customColor.borderColor",sx:{height:0,flex:1,"& .MuiButton-root":{textTransform:"none"},...e}},i.default.createElement(M,{ref:q,flex:1,height:0,sx:{textAlign:"left",overflowY:"auto"}},i.default.createElement(Gt,null),i.default.createElement(M,{ref:H},i.default.createElement(_t,null,ae.map((n,m)=>i.default.createElement(Zt,{className:`use-chat-gpt-ai__message-item use-chat-gpt-ai__message-item--${n.type}`,insertAble:c,replaceAble:!0,message:n,aiAvatar:r,editAble:_,userAvatar:o,useChatGPTAble:!0,key:n.messageId+"_sidebar_chat_message_"+String(m),onSave:w=>{s&&s(n.messageId,w)},onRetry:A,onCopy:u})),g&&i.default.createElement(Zt,{className:"use-chat-gpt-ai__writing-message-item",replaceAble:!1,insertAble:!1,message:g,useChatGPTAble:!1,aiAvatar:r,editAble:!1,userAvatar:o})))),i.default.createElement(T,{className:"use-chat-gpt-ai__chat-box__input-box",position:"relative",mt:"auto",justifyContent:"center",alignItems:"center",minHeight:60,spacing:1,p:1,flexShrink:0},i.default.createElement(T,{width:"100%",alignItems:"center",justifyContent:"center"},i.default.createElement(M,{sx:{width:"100%"},component:"div",display:"flex",width:0,flex:1,alignItems:"center",justifyContent:"center",gap:1,mb:1,position:"relative"},i.default.createElement(Nt,{disabledMainButton:y,onClick:async n=>{if(n==="focus"){let m=Q()?.querySelector(`#${ne}`);m&&m.focus()}else n==="new"?N&&N():n==="restart"&&await Je()}}),i.default.createElement(Vt,{sx:{position:"absolute",bottom:0,right:0}}),!y&&ae.length>0&&i.default.createElement(i.default.Fragment,null,t&&i.default.createElement(V,{disableElevation:!0,startIcon:i.default.createElement(ea.default,null),variant:"outlined",disabled:y,onClick:()=>{v&&v()}},Y("client:sidebar__button__regenerate")),X&&i.default.createElement(V,{disableElevation:!0,startIcon:i.default.createElement(me,{icon:"FastForward"}),variant:"outlined",disabled:y,onClick:()=>{f&&f("Continue",{includeHistory:!0,regenerate:!1})}},Y("client:sidebar__button__continue"))),y&&i.default.createElement(V,{sx:{mb:1},disableElevation:!0,variant:"outlined",startIcon:i.default.createElement(ta.default,null),onClick:()=>{I&&I()}},Y("client:sidebar__button__stop_generating"))),i.default.createElement(Jt,{onClose:()=>{F(!1)},onShow:()=>F(!0),modelKey:"Sidebar"}),i.default.createElement(ft,{sx:{minHeight:W?0:80,height:W?"0!important":"unset",visibility:W?"hidden":"visible"},stopPropagation:!0,loading:y,expandNode:i.default.createElement(vt,{direction:"column",size:"small"}),onEnter:f},i.default.createElement(Ot,{onSendMessage:f}))),i.default.createElement(Rt,null)))},aa=za;var Fa=()=>{let{sendQuestion:a,conversation:e,reGenerate:r,retryMessage:o,stopGenerateMessage:u,resetConversation:s}=pt(""),_=ct();return(0,te.useEffect)(()=>{Xe()},[]),te.default.createElement(T,{flex:1,height:0,position:"relative"},te.default.createElement(ut,null),te.default.createElement(aa,{editAble:!1,insertAble:!1,onSendMessage:async(c,t)=>{await a({question:c},{...t,regenerate:!1,includeHistory:t.includeHistory===!0})},writingMessage:e.writingMessage,messages:_,loading:e.loading,title:"Chat Draft",onRetry:o,onReGenerate:r,onStopGenerate:u,onReset:s}))},Ml=Fa;export{Ml as default};
