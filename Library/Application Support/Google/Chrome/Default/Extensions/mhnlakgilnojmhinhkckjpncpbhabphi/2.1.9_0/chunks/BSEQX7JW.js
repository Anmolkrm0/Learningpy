import{d as Gn}from"./H2NXPTRN.js";import{a as Ya}from"./WBKERYKW.js";import{c as Ii,g as Vn}from"./TAMQTRNZ.js";import{T as Ot,g as Lt}from"./CSD3ZJG6.js";import{c as Ti,e as Si,f as Ba}from"./SG4NMKLB.js";import{a as Dr,d as La}from"./GGD6JS33.js";import{a as Oa}from"./EYWU5WEI.js";import{a as Ga}from"./FIUCXHR6.js";import{e as kt}from"./VTNNVCHV.js";import{T as Na,W as Fa,X as Ha,a as na,aa as Ua,b as Gp,ba as Wa,c as Vp,ca as Ei,d as Wn,da as za,e as $p,ea as qa,ka as ja}from"./PEYNS6YO.js";import{A as Nr,b as ra,g as Bn,h as pa,i as yi,j as da,k as vi,l as fa,m as Fn,o as ma,p as ga,r as ha,s as ya,t as ve,u as $t,x as va,z as qt}from"./OQCOQ46A.js";import{a as zp,d as ka,h as ur,i as zn,j as Da}from"./ZAZJKFJ6.js";import{c as ze}from"./SNV3FDHQ.js";import{b as Un,c as Sa,d as Ea,e as Ia,i as wa,j as Pa,k as _a,l as Aa,m as Ra,p as Ma}from"./KUL6UDBQ.js";import{c as Hn,d as xi,i as Ci}from"./BQGQFNDN.js";import{a as be,b as Wp}from"./M3D6HDXF.js";import{d as jt}from"./PC5JBKQI.js";import{a as cr}from"./YOUVFAYJ.js";import{D as Ca,a as z,b as bi,i as ba,o as Up,q as Rt,r as je,u as q,v as xa,y as Ta}from"./FIOVDIPM.js";import{d as Ys,e as Ks,g as Rn,t as Xs}from"./QZNWBGPK.js";import{B as Fe,C as Mn,D as di,E as ce,b as Wt,e as B,f as zt,i as Be,j as Ae,l as kr,m as Vt,x as js}from"./QZVUH6Z4.js";import{a as pt}from"./YSIM5RLZ.js";import{b as Va,f as $a}from"./RW4DAJBJ.js";import{a as Mt}from"./SHNRUDHL.js";import{D as ut,E as _t,H as la,K as ca,L as ua,Q as Nn,R as Dn,a as ie,c as fi,g as ar,h as mi,i as gi,k as hi,l as oa,m as ia,o as On,q as sa,r as aa,u as lr}from"./SVGE6UYD.js";import{a as At,c as xe}from"./QPPETRF6.js";import{f as Lr,g as kn,i as Or,j as Zs,k as ea,m as Ln,o as ta,r as de}from"./AA7KRV4Y.js";import{M as ue,N as Qs,P as oe,Q as Js}from"./LVENEOJP.js";import{H as qs,I as De,J as ir,K as Gt,R as _n,S as An,T as sr,U as tt,a as Gs,c as Ee,d as Ut,e as ae,f as ne,g as ct,o as Pn,p as Vs,q as $s,r as ui,v as pi}from"./CIA73AT4.js";import{a as $}from"./64D36THL.js";import{c as wn,d as Hp,e as ci,f as E}from"./PQ35KENF.js";var Fi=wn(io=>{"use strict";var Fd=bi();Object.defineProperty(io,"__esModule",{value:!0});io.default=void 0;var Hd=Fd(xi()),Ud=Ae(),Wd=(0,Hd.default)((0,Ud.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew");io.default=Wd});var Wl=wn(co=>{"use strict";var lf=bi();Object.defineProperty(co,"__esModule",{value:!0});co.default=void 0;var cf=lf(xi()),uf=Ae(),pf=(0,cf.default)((0,uf.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");co.default=pf});var os=wn(bo=>{"use strict";var Qf=bi();Object.defineProperty(bo,"__esModule",{value:!0});bo.default=void 0;var Jf=Qf(xi()),Zf=Ae(),em=(0,Jf.default)((0,Zf.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");bo.default=em});var hp=wn((Ns,Ds)=>{(function(e,t){typeof Ns=="object"&&typeof Ds<"u"?Ds.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_relativeTime=t()})(Ns,function(){"use strict";return function(e,t,r){e=e||{};var n=t.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(l,a,c,u){return n.fromToBase(l,a,c,u)}r.en.relativeTime=o,n.fromToBase=function(l,a,c,u,p){for(var f,d,h,m=c.$locale().relativeTime||o,v=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],y=v.length,b=0;b<y;b+=1){var x=v[b];x.d&&(f=u?r(l).diff(c,x.d,!0):c.diff(l,x.d,!0));var I=(e.rounding||Math.round)(Math.abs(f));if(h=f>0,I<=x.r||!x.r){I<=1&&b>0&&(x=v[b-1]);var T=m[x.l];p&&(I=p(""+I)),d=typeof T=="string"?T.replace("%d",I):T(I,a,x.l,h);break}}if(a)return d;var w=h?m.future:m.past;return typeof w=="function"?w(d):w.replace("%s",d)},n.to=function(l,a){return i(l,a,this,!0)},n.from=function(l,a){return i(l,a,this)};var s=function(l){return l.$u?r.utc():r()};n.toNow=function(l){return this.to(s(this),l)},n.fromNow=function(l){return this.from(s(this),l)}}})});var Qa="https://chat.openai.com",$n="MaxAI.me",yt=(e,t,r,n)=>fetch(`${Qa}${r}`,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:n===void 0?void 0:JSON.stringify(n)}),qp=async e=>{let{uuid:t}=e;try{let r=await Br();return{success:!0,data:(await(await yt(r,"GET",`/backend-api/files/${t}/download`)).json())?.download_url}}catch{return{success:!1,data:""}}},jp=async e=>{let{conversationId:t,message_id:r,sandbox_path:n}=e,o=`https://chat.openai.com/c/${t}`;try{let i=await Br(),l=await(await yt(i,"GET",`/backend-api/conversation/${t}/interpreter/download?message_id=${r}&sandbox_path=${n}`)).json();return l?.status==="error"?{success:!1,data:o,error:"File Expired"}:{success:!0,data:l?.download_url||o}}catch{return{success:!1,data:o,error:"Network Error"}}},Yp=async e=>{try{let{token:t,offset:r=0,limit:n=100,order:o="updated"}=e;return(await(await yt(t,"GET",`/backend-api/conversations?offset=${r}&limit=${n}&order=${o}`)).json())?.items||[]}catch{return[]}},Ka=async({token:e,conversationId:t,messageId:r,input:n})=>{try{await yt(e,"POST","/backend-api/moderations",{conversation_id:t,message_id:r,input:n,model:"text-moderation-playground"})}catch{}},wi=async(e,t,r)=>{await yt(e,"PATCH",`/backend-api/conversation/${t}`,r)},Br=async(e=!1)=>{let t=await fetch("https://chat.openai.com/api/auth/session");if(t.status===403&&!e)throw new Error("CLOUDFLARE");let r=await t.json().catch(()=>({}));if(!r.accessToken&&!e)throw new Error("UNAUTHORIZED");return r?.accessToken||""},Kp=async e=>["gpt-4","gpt-4-code-interpreter","gpt-4-browsing","gpt-4-plugins","gpt-4-mobile"].includes(e)?new Promise((r,n)=>{let o=ie(),i=!1;window.postMessage({event:"MAX_AI_CHAT_GPT_MESSAGE_KEY",type:"arkoseToken",data:{taskId:o}}),setTimeout(()=>{i||(n("Something went wrong, please try again. If this issue persists, contact us via email."),window.removeEventListener("message",s),window.location.reload())},20*1e3);let s=l=>{if(l?.data?.event==="MAX_AI_CHAT_GPT_MESSAGE_KEY"&&l?.data?.type==="arkoseTokenResponse"&&l?.data?.data?.taskId===o&&!i){i=!0;let a=l?.data?.data?.token||"";a?r(a):n("Something went wrong, please try again. If this issue persists, contact us via email."),window.removeEventListener("message",s)}};window.addEventListener("message",s)}):"",Pi=class{constructor(t){this.isCleaningCache=!1;this.token=t.token,this.model=t.model,this.lastChatGPTAnswerMessageId=ie(),this.id=ie(),this.conversationId=t.conversationId||void 0,this.conversationInfo={title:"",messages:[]}}async updateTitle(t){!this.conversationId||this.conversationInfo.title===t||(await wi(this.token,this.conversationId,{title:t}),this.conversationInfo.title=t)}async fetchHistoryAndConfig(){if(this.conversationId)try{let r=await(await yt(this.token,"GET",`/backend-api/conversation/${this.conversationId}`)).json();this.conversationInfo={title:r.title,messages:na(r.current_node,r.mapping),raw:r},r.title!==$n&&await this.updateTitle($n),this.lastChatGPTAnswerMessageId=r.current_node}catch{this.lastChatGPTAnswerMessageId=ie(),this.conversationId=void 0,this.conversationInfo={title:"",messages:[]}}}async generateAnswer(t,r=!1){let n=t.messageId||ie(),o=t.parentMessageId||this.lastChatGPTAnswerMessageId||ie(),i=!1,s="",l="",a=await qt("OPENAI"),c;try{c=await Kp(this.model)}catch(f){t.onEvent({type:"error",data:{message:f.message||"Network error.",detail:""}}),t.onEvent({type:"done"});return}let u={action:r?"variant":"next",messages:[{id:n,author:{role:"user"},content:{content_type:"text",parts:[t.prompt]}}],model:this.model,parent_message_id:o,timezone_offset_min:new Date().getTimezoneOffset(),history_and_training_disabled:!1};this.conversationId&&(u.conversation_id=this.conversationId),c&&(u.arkose_token=c),t.meta&&(u.messages[0].metadata=t.meta),a?.plugins&&!this.conversationId&&this.model==="gpt-4-plugins"&&(u.plugin_ids=a.plugins);let p=[];await ra(`${Qa}/backend-api/conversation`,{provider:De.OPENAI,method:"POST",signal:t.signal,headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(Object.assign(u)),onMessage:async f=>{if(f==="[DONE]"){s&&this.conversationId&&l&&(this.updateTitle($n),Ka({token:this.token,conversationId:this.conversationId,messageId:l,input:s}));let m=s;p.length>0&&(await Promise.all(p.map(async b=>await qp({uuid:b})))).forEach(b=>{b.success&&b.data&&(m=`![image](${b.data})
${m}`)});let v=m.match(/\[.*?\]\(.*?\)/g);this.conversationId&&v&&v.length>0?((await Promise.all(v.map(async b=>{let x=b.split("](");if(x.length!==2)return;let I=x[0].slice(1),T=x[1].slice(0,-1);if(!T.startsWith("sandbox:"))return;let w=await jp({conversationId:this.conversationId,message_id:l,sandbox_path:T.replace("sandbox:","")});if(w.success)return{original:b,new:`[${I}](${w.data})`}}))).forEach(b=>{b&&(m=m.replace(b.original,b.new))}),t.onEvent({type:"answer",data:{text:m,messageId:l,conversationId:this.conversationId,parentMessageId:n}}),setTimeout(()=>{t.onEvent({type:"done"})},100)):t.onEvent({type:"done"});return}let d;try{d=JSON.parse(f)}catch{return}let h=d.message?.content?.parts?.[0]||d.message?.content?.text||"";if(h.includes("<<ImageDisplayed>>")){let v=(d.message?.metadata?.aggregate_result?.messages?.[0]?.image_url).split("//")[1];if(p.find(y=>y===v))return;p.push(v)}h&&(s=h,l=d.message.id,this.conversationId=d.conversation_id,this.lastChatGPTAnswerMessageId=d.message.id,this.conversationId&&!i&&(i=!0,Ka({token:this.token,conversationId:this.conversationId,messageId:n,input:t.prompt})),t.onEvent({type:"answer",data:{text:h,messageId:d.message.id,conversationId:d.conversation_id,parentMessageId:n}}))}}).then().catch(f=>{try{if(f?.message==="BodyStreamBuffer was aborted"||f?.message==="The user aborted a request."){t.onEvent({type:"error",data:{message:"manual aborted request.",detail:""}});return}let d=JSON.parse(f.message||f);t.onEvent({type:"error",data:{message:d.message,detail:d.detail}})}catch{t.onEvent({type:"error",data:{message:"Network error.",detail:""}})}})}async close(){this.conversationId&&(await wi(this.token,this.conversationId,{is_visible:!1}),this.conversationInfo={title:"",messages:[]})}async removeCacheConversation(){if(!this.isCleaningCache&&this.token){let r=(await Yp({token:this.token})).filter(o=>o.title===$n&&o.id!==this.conversationId);if(r.length===0)return;this.isCleaningCache=!0;let n=o=>new Promise(i=>setTimeout(i,o));for(let o=0;o<r.length;o++)try{await wi(this.token,r[o].id,{is_visible:!1}),await n(3e3)}catch{}this.isCleaningCache=!1}}},Xa=class{constructor(){this.conversations=[],this.abortFunctions={},this.plugins=[],this.token=void 0,this.models=[]}async fetchModels(t){if(this.models.length>0)return this.models;let r=await yt(t,"GET","/backend-api/settings/beta_features").then(async o=>{let i=await o.json();return{browsing:i?.browsing||!1,chat_preferences:i?.chat_preferences||!1,code_interpreter:i?.code_interpreter||!1,plugins:i?.plugins||!1}}).catch(()=>({browsing:!1,chat_preferences:!1,code_interpreter:!1,plugins:!1})),n=await yt(t,"GET","/backend-api/models").then(o=>o.json());return n?.models&&n.models.length>0&&(this.models=n.models.filter(o=>o.slug==="gpt-4-code-interpreter"?r.code_interpreter:o.slug==="gpt-4-browsing"?r.browsing:o.slug==="gpt-4-plugins"?r.plugins:!0)),this.models}async fetchPlugins(t){if(this.plugins.length>0)return this.plugins;let r=await yt(t,"GET","/backend-api/aip/p?offset=0&limit=100&is_installed=true").then(n=>n.json());return r?.items&&r.items.length>0&&(this.plugins=r.items),r.items}async getModelName(t,r){try{let n=await this.fetchModels(t);if(n?.length>0){if(r){let o=n.find(i=>i.slug===r);if(o)return o.slug}return n[0].slug}return"text-davinci-002-render-sha"}catch{return"text-davinci-002-render-sha"}}async getAllModels(){if(this.models.length>0)return this.models;try{let t=this.token||await Br();return t&&(this.token=t),await this.fetchModels(t)}catch{return[]}}async getAllPlugins(){if(this.plugins.length>0)return this.plugins;try{let t=this.token||await Br();return t&&(this.token=t),await this.fetchPlugins(t)}catch{return[]}}async createConversation(t,r){if(this.conversations.length>0)return this.conversations[0];try{let n=this.token||await Br(),o=await this.getModelName(n,r),i=new Pi({token:n,model:o,conversationId:t});return this.conversations.push(i),i.removeCacheConversation(),await i.fetchHistoryAndConfig(),i}catch(n){n.message==="CLOUDFLARE"&&location.reload();return}}getConversation(t){return this.conversations.find(r=>r.id===t||r.conversationId===t)}getConversations(){return this.conversations}async closeConversation(t){try{let r=this.getConversation(t);return r&&(await r.close(),this.conversations=this.conversations.filter(n=>n.conversationId!==t)),!0}catch{return!1}}addAbortWithMessageId(t,r){this.abortFunctions[t]=r}removeAbortWithMessageId(t){delete this.abortFunctions[t]}abortWithMessageId(t){try{this.abortFunctions[t]&&(this.abortFunctions[t](),delete this.abortFunctions[t])}catch{}}removeCacheConversation(){return this.conversations?.[0]?.removeCacheConversation()}};var xo=E($());var Y=E($());var Nt=Ee({key:"ChatGPTClientState",default:{loaded:!1,status:"needAuth",aborts:[]}}),Yt=Ee({key:"ClientConversationMapState",default:{}});var qn=Ee({key:"AuthState",default:{isLogin:!1}}),jn=Ee({key:"AuthUserInfoState",default:{user:null,loading:!1}});var rt=E($());var Ja=E(zp());var Xp=()=>{let{t:e}=xe(["common","client"]);return rt.default.createElement(z,{minWidth:400,spacing:2,p:1},rt.default.createElement(z,{boxSizing:"border-box",direction:"row",width:"100%",alignItems:"center",justifyContent:"space-between"},rt.default.createElement(ze,{sx:{flexShrink:0,textDecoration:"none!important"},href:Gt,target:"_blank"},rt.default.createElement(z,{direction:"row",alignItems:"center",gap:1},rt.default.createElement(Un,{sx:{fontSize:28,color:"inherit"}}),rt.default.createElement(q,{color:"text.primary",component:"h1",fontSize:20,fontWeight:800},e("client:sidebar__refresh_page__title"))))),rt.default.createElement(ka,{severity:"info"},rt.default.createElement(q,{fontSize:14,color:"text.primary",textAlign:"left"},e("client:sidebar__refresh_page__description"))),rt.default.createElement(jt,{fullWidth:!0,color:"primary",variant:"contained",startIcon:rt.default.createElement(Ja.default,{sx:{fontSize:16,color:"inherit"}}),onClick:async()=>{window.location.reload()}},e("client:sidebar__refresh_page__button")))},Za=Xp;var we=E($());var _i=E($()),Qp=[{beta:!1,label:"client:provider__bing_web_app__title",description:"",value:De.BING,authDescription:"client:provider__bing_web_app__auth_description",shortDescription:e=>e("client:provider__bing_web_app__short_description"),authButtonText:"client:provider__bing_web_app__auth_button_text",authOpenInNew:!1},{beta:!1,label:"client:provider__bard_web_app__title",description:"",value:De.BARD,authDescription:"client:provider__bard_web_app__auth_description",shortDescription:e=>e("client:provider__bard_web_app__short_description"),authButtonText:"client:provider__bard_web_app__auth_button_text",authOpenInNew:!1},{beta:!1,label:"client:provider__claude_web_app__title",value:De.CLAUDE,description:"",authDescription:"client:provider__claude_web_app__auth_description",shortDescription:e=>e("client:provider__claude_web_app__short_description"),authButtonText:"client:provider__claude_web_app__auth_button_text",authOpenInNew:!0},{beta:!1,label:"client:provider__chatgpt_web_app__title",description:"",value:De.OPENAI,authDescription:"client:provider__chatgpt_web_app__auth_description",shortDescription:e=>e("client:provider__chatgpt_web_app__short_description"),authButtonText:"client:provider__chatgpt_web_app__auth_button_text",authOpenInNew:!0},{beta:!1,label:"client:provider__openai_api__title",description:"",value:De.OPENAI_API,authDescription:"client:provider__openai_api__auth_description",shortDescription:e=>_i.default.createElement("span",null,e("client:provider__openai_api__short_description1")," ",_i.default.createElement(ze,{target:"_blank",href:"https://platform.openai.com/playground?mode=chat",rel:"noreferrer noopener nofollow",sx:{color:"inherit",display:"inline-flex",textDecorationColor:t=>t.palette.mode==="dark"?"rgba(255,255,255,0.4)":"rgba(0,0,0,0.4)","&:hover":{textDecorationColor:t=>t.palette.mode==="dark"?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"}}},e("client:provider__openai_api__short_description2")),e("client:provider__openai_api__short_description3")),authButtonText:"client:provider__openai_api__auth_button_text",authOpenInNew:!0},{beta:!1,label:"client:provider__claude__title",value:De.MAXAI_CLAUDE,description:"",authDescription:"client:provider__claude__auth_description",shortDescription:e=>e("client:provider__claude__short_description"),authButtonText:"client:provider__claude__auth_button_text",authOpenInNew:!1},{beta:!1,description:"",label:"client:provider__chatgpt__title",authDescription:"client:provider__chatgpt__auth_description",value:De.USE_CHAT_GPT_PLUS,shortDescription:e=>e("client:provider__chatgpt__short_description"),authButtonText:"client:provider__chatgpt__auth_button_text",authOpenInNew:!1}],Fr=Qp;var dt=Ee({key:"ChatGPTConversationState",default:{writingMessage:null,lastMessageId:"",model:"",loading:!1}}),pr=Ee({key:"SidebarSettingsState",default:{type:"Chat"}}),vt=Ut({key:"SidebarConversationIdSelector",get:({get:e})=>{let t=e(pr);return t.type==="Chat"?t.chatConversationId||"":t.summaryConversationId||""}}),Yn=Ut({key:"SidebarConversationMessagesSelector",get:({get:e})=>{let t=e(vt);return e(Yt)[t]?.messages||[]}}),Kn=Ut({key:"SidebarChatConversationMessagesSelector",get:({get:e})=>{let t=e(pr).chatConversationId,r=e(Yt);return t&&r[t]?r[t]?.messages||[]:[]}});var mr=E($());var el=E(Vp()),tl=E(Gp()),rl=(e,t="MaxAI")=>el.default.encrypt(JSON.stringify(e),t).toString(),bt=e=>(0,tl.default)(e).toString();var yl=E($());var Di=E(_n());var Sh=(e,t,r)=>{let o={textSelectPopupButton:[{type:"RENDER_TEMPLATE",parameters:{template:t}}],inputAssistantComposeReplyButton:[{type:"RENDER_TEMPLATE",parameters:{template:t}}],inputAssistantComposeNewButton:[{type:"RENDER_TEMPLATE",parameters:{template:t}}],inputAssistantRefineDraftButton:[{type:"RENDER_TEMPLATE",parameters:{template:t}}]}[e];return r?(o.push({type:"INSERT_USER_INPUT",parameters:{template:"{{LAST_ACTION_OUTPUT}}"}}),o.push({type:"ASK_CHATGPT",parameters:{template:"{{LAST_ACTION_OUTPUT}}"}})):o.push({type:"INSERT_USER_INPUT",parameters:{template:"{{LAST_ACTION_OUTPUT}}"}}),o},Eh=["SELECTED_TEXT","AI_RESPONSE_LANGUAGE","CURRENT_WEBSITE_DOMAIN"],Ih=e=>{switch(e){case"LAST_ACTION_OUTPUT":return{description:"feature_card__prompts__prompt_template__variable_last_action_output__description",examples:[]};case"USER_INPUT":return{description:"feature_card__prompts__prompt_template__variable_user_input__description",examples:[]};case"SELECTED_TEXT":return{description:"feature_card__prompts__prompt_template__variable_selected_text__description",examples:["feature_card__prompts__prompt_template__variable_selected_text__example1","feature_card__prompts__prompt_template__variable_selected_text__example2"]};case"AI_RESPONSE_LANGUAGE":return{description:"feature_card__prompts__prompt_template__variable_ai_response_language__description",examples:["feature_card__prompts__prompt_template__variable_ai_response_language__example1","feature_card__prompts__prompt_template__variable_ai_response_language__example2"]};case"GMAIL_EMAIL_CONTEXT":return{description:"feature_card__prompts__prompt_template__variable_gmail_email_context__description",examples:[]};case"GMAIL_DRAFT_CONTEXT":return{description:"feature_card__prompts__prompt_template__variable_gmail_draft_context__description",examples:[]};case"CURRENT_WEBSITE_DOMAIN":return{description:"feature_card__prompts__prompt_template__variable_current_website_domain__description",examples:["feature_card__prompts__prompt_template__variable_current_website_domain__example1","feature_card__prompts__prompt_template__variable_current_website_domain__example2"]};default:return{description:"",examples:[]}}};var wh=e=>{let t=e;return t?.includes("524")&&(t="Network error: 524"),t?.includes("502")&&(t="Network error: 502"),t};var Hr=async(e,t)=>{try{let n=await new oe().postMessage({event:"Client_proxyFetchAPI",data:{url:e,options:t}});return{success:n.success,data:n.data,error:n.message}}catch(r){return{success:!1,data:null,error:r?.message||r}}},Ph=async(e,t,r={})=>{try{let n=new oe,o=await Wn(),i=await Mt();r.body=JSON.stringify(t),r.headers||(r.headers={"Content-Type":"application/json",Authorization:`Bearer ${i}`,fp:`${o}`}),r.method||(r.method="POST"),ir&&!e.startsWith(ir)&&(e=ir+e);let s=await n.postMessage({event:"Client_proxyFetchAPI",data:{url:e,options:r}});return{success:s.success,data:s.data,error:s.message}}catch(n){return{success:!1,data:null,error:n?.message||n}}};var Jp=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i,Xn=class{static async fetchTranscript(t){try{let r=this.retrieveVideoId(t);if(!r)return[];let n=await Hr("https://www.youtube.com/watch?v="+r,{parse:"text"});if(!n.success)return[];let i=n.data.split('"captions":');if(i.length<2)return[];let s=JSON.parse(i[1].split(',"videoDetails')[0].replace(/\n/,"")).playerCaptionsTracklistRenderer.captionTracks,l=Array.from(s).map(p=>p.name.simpleText),a="English",u=Array.from(l).sort((p,f)=>p===a?-1:f===a||p.includes(a)?1:f.includes(a)?-1:0).map(p=>{let f=s.find(d=>d.name.simpleText===p).baseUrl;return{language:p,link:f}});for(let p=0;p<u.length;p++){let f=u[p],d=await Hr(f.link,{parse:"text"});if(d.success){let h=d.data,m=this.parseXml(h);if(m.length)return m}}return[]}catch{return[]}}static async transcriptFormat(t,r=4096){let n=`${t.map(o=>`${o.start} ${o.text}
`).join("")}`;return await Bn(n,r)}static retrieveVideoId(t){if(t.length===11)return t;let r=t.match(Jp);return r&&r.length?r[1]:""}static parseXml(t){let o=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("text"),i=[];for(let s=0;s<o.length;s++){let l=o[s],a=l.getAttribute("start"),c=l.getAttribute("dur")||"",u=l.textContent;a&&u&&i.push({start:a,duration:c,text:u})}return i}};var fl=E($p());function Zp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}function ki(e,t){return Array(t+1).join(e)}function ed(e){return e.replace(/^\n*/,"")}function td(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}var rd=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Li(e){return Oi(e,rd)}var il=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function sl(e){return Oi(e,il)}function nd(e){return ll(e,il)}var al=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function od(e){return Oi(e,al)}function id(e){return ll(e,al)}function Oi(e,t){return t.indexOf(e.nodeName)>=0}function ll(e,t){return e.getElementsByTagName&&t.some(function(r){return e.getElementsByTagName(r).length})}var Re={};Re.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}};Re.lineBreak={filter:"br",replacement:function(e,t,r){return r.br+`
`}};Re.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,r){var n=Number(t.nodeName.charAt(1));if(r.headingStyle==="setext"&&n<3){var o=ki(n===1?"=":"-",e.length);return`

`+e+`
`+o+`

`}else return`

`+ki("#",n)+" "+e+`

`}};Re.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),`

`+e+`

`}};Re.list={filter:["ul","ol"],replacement:function(e,t){var r=t.parentNode;return r.nodeName==="LI"&&r.lastElementChild===t?`
`+e:`

`+e+`

`}};Re.listItem={filter:"li",replacement:function(e,t,r){e=e.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var n=r.bulletListMarker+"   ",o=t.parentNode;if(o.nodeName==="OL"){var i=o.getAttribute("start"),s=Array.prototype.indexOf.call(o.children,t);n=(i?Number(i)+s:s+1)+".  "}return n+e+(t.nextSibling&&!/\n$/.test(e)?`
`:"")}};Re.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,r){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Re.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,r){for(var n=t.firstChild.getAttribute("class")||"",o=(n.match(/language-(\S+)/)||[null,""])[1],i=t.firstChild.textContent,s=r.fence.charAt(0),l=3,a=new RegExp("^"+s+"{3,}","gm"),c;c=a.exec(i);)c[0].length>=l&&(l=c[0].length+1);var u=ki(s,l);return`

`+u+o+`
`+i.replace(/\n$/,"")+`
`+u+`

`}};Re.horizontalRule={filter:"hr",replacement:function(e,t,r){return`

`+r.hr+`

`}};Re.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var r=t.getAttribute("href"),n=Qn(t.getAttribute("title"));return n&&(n=' "'+n+'"'),"["+e+"]("+r+n+")"}};Re.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,r){var n=t.getAttribute("href"),o=Qn(t.getAttribute("title"));o&&(o=' "'+o+'"');var i,s;switch(r.linkReferenceStyle){case"collapsed":i="["+e+"][]",s="["+e+"]: "+n+o;break;case"shortcut":i="["+e+"]",s="["+e+"]: "+n+o;break;default:var l=this.references.length+1;i="["+e+"]["+l+"]",s="["+l+"]: "+n+o}return this.references.push(s),i},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};Re.emphasis={filter:["em","i"],replacement:function(e,t,r){return e.trim()?r.emDelimiter+e+r.emDelimiter:""}};Re.strong={filter:["strong","b"],replacement:function(e,t,r){return e.trim()?r.strongDelimiter+e+r.strongDelimiter:""}};Re.code={filter:function(e){var t=e.previousSibling||e.nextSibling,r=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!r},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",r="`",n=e.match(/`+/gm)||[];n.indexOf(r)!==-1;)r=r+"`";return r+t+e+t+r}};Re.image={filter:"img",replacement:function(e,t){var r=Qn(t.getAttribute("alt")),n=t.getAttribute("src")||"",o=Qn(t.getAttribute("title")),i=o?' "'+o+'"':"";return n?"!["+r+"]("+n+i+")":""}};function Qn(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function cl(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}cl.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=Ai(this.array,e,this.options))||(t=Ai(this._keep,e,this.options))||(t=Ai(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function Ai(e,t,r){for(var n=0;n<e.length;n++){var o=e[n];if(sd(o,t,r))return o}}function sd(e,t,r){var n=e.filter;if(typeof n=="string"){if(n===t.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof n=="function"){if(n.call(e,t,r))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function ad(e){var t=e.element,r=e.isBlock,n=e.isVoid,o=e.isPre||function(p){return p.nodeName==="PRE"};if(!(!t.firstChild||o(t))){for(var i=null,s=!1,l=null,a=nl(l,t,o);a!==t;){if(a.nodeType===3||a.nodeType===4){var c=a.data.replace(/[ \r\n\t]+/g," ");if((!i||/ $/.test(i.data))&&!s&&c[0]===" "&&(c=c.substr(1)),!c){a=Ri(a);continue}a.data=c,i=a}else if(a.nodeType===1)r(a)||a.nodeName==="BR"?(i&&(i.data=i.data.replace(/ $/,"")),i=null,s=!1):n(a)||o(a)?(i=null,s=!0):i&&(s=!1);else{a=Ri(a);continue}var u=nl(l,a,o);l=a,a=u}i&&(i.data=i.data.replace(/ $/,""),i.data||Ri(i))}}function Ri(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function nl(e,t,r){return e&&e.parentNode===t||r(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var ul=typeof window<"u"?window:{};function ld(){var e=ul.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch{}return t}function cd(){var e=function(){};return ud()?e.prototype.parseFromString=function(t){var r=new window.ActiveXObject("htmlfile");return r.designMode="on",r.open(),r.write(t),r.close(),r}:e.prototype.parseFromString=function(t){var r=document.implementation.createHTMLDocument("");return r.open(),r.write(t),r.close(),r},e}function ud(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{window.ActiveXObject&&(e=!0)}return e}var pd=ld()?ul.DOMParser:cd();function dd(e,t){var r;if(typeof e=="string"){var n=fd().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");r=n.getElementById("turndown-root")}else r=e.cloneNode(!0);return ad({element:r,isBlock:Li,isVoid:sl,isPre:t.preformattedCode?md:null}),r}var Mi;function fd(){return Mi=Mi||new pd,Mi}function md(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function gd(e,t){return e.isBlock=Li(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=hd(e),e.flankingWhitespace=yd(e,t),e}function hd(e){return!sl(e)&&!od(e)&&/^\s*$/i.test(e.textContent)&&!nd(e)&&!id(e)}function yd(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var r=vd(e.textContent);return r.leadingAscii&&ol("left",e,t)&&(r.leading=r.leadingNonAscii),r.trailingAscii&&ol("right",e,t)&&(r.trailing=r.trailingNonAscii),{leading:r.leading,trailing:r.trailing}}function vd(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function ol(e,t,r){var n,o,i;return e==="left"?(n=t.previousSibling,o=/ $/):(n=t.nextSibling,o=/^ /),n&&(n.nodeType===3?i=o.test(n.nodeValue):r.preformattedCode&&n.nodeName==="CODE"?i=!1:n.nodeType===1&&!Li(n)&&(i=o.test(n.textContent))),i}var bd=Array.prototype.reduce,xd=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Jn(e){if(!(this instanceof Jn))return new Jn(e);var t={rules:Re,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(r,n){return n.isBlock?`

`:""},keepReplacement:function(r,n){return n.isBlock?`

`+n.outerHTML+`

`:n.outerHTML},defaultReplacement:function(r,n){return n.isBlock?`

`+r+`

`:r}};this.options=Zp({},t,e),this.rules=new cl(this.options)}Jn.prototype={turndown:function(e){if(!Sd(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=pl.call(this,new dd(e,this.options));return Td.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return xd.reduce(function(t,r){return t.replace(r[0],r[1])},e)}};function pl(e){var t=this;return bd.call(e.childNodes,function(r,n){n=new gd(n,t.options);var o="";return n.nodeType===3?o=n.isCode?n.nodeValue:t.escape(n.nodeValue):n.nodeType===1&&(o=Cd.call(t,n)),dl(r,o)},"")}function Td(e){var t=this;return this.rules.forEach(function(r){typeof r.append=="function"&&(e=dl(e,r.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Cd(e){var t=this.rules.forNode(e),r=pl.call(this,e),n=e.flankingWhitespace;return(n.leading||n.trailing)&&(r=r.trim()),n.leading+t.replacement(r,e,this.options)+n.trailing}function dl(e,t){var r=td(e),n=ed(t),o=Math.max(e.length-r.length,t.length-n.length),i=`

`.substring(0,o);return r+i+n}function Sd(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}var Zn=Jn;var Ed=async()=>{try{let e=document.cloneNode(!0),r=new fl.Readability(e).parse();if(!r||!r?.content)return document.body.innerText||"";let o=new Zn().turndown(r?.content||"");return`# ${r?.title}

${o}
`}catch{return""}},Ni=Ed;var dr=e=>{if(!e)return"";let t=e.cloneNode(!0);Array.from(t.querySelectorAll("br")).forEach(o=>{o.replaceWith(`

`)});let r=[];return de()==="mail.google.com"&&(r.push(...Array.from(t.querySelectorAll(".adL"))),r.push(...Array.from(t.querySelectorAll(".adm")).map(o=>o.parentElement)),r.push(...Array.from(t.querySelectorAll(".gmail_quote"))),r.push(...Array.from(t.querySelectorAll(".iX")))),t.querySelectorAll("div[id]").forEach(o=>{if(o.id.includes("mail-quote")){r.push(o);return}if(o.id.includes("RplyFwdMsg")){r.push(o.nextElementSibling),r.push(o);return}}),t.querySelectorAll("div[class]").forEach(o=>{if(o.className.includes("gmail_quote")){r.push(o);return}}),t.querySelectorAll("blockquote").forEach(o=>{r.push(o)}),r.forEach(o=>{try{o.remove()}catch{}}),t.innerText};var Id=[{website:"mail.google.com",traffic:4.57},{website:"mail.yahoo.com",traffic:1.79},{website:"outlook.live.com",traffic:1.63},{website:"outlook.office.com",traffic:1.63},{website:"outlook.office365.com",traffic:1.63},{website:"navigator-lxa.mail.com",traffic:1.51},{website:"mail.proton.me",traffic:.54},{website:"icloud.com",traffic:.51},{website:"mail.zoho.com",traffic:.45},{website:"mail.qq.com",traffic:.37},{website:"wx.mail.qq.com",traffic:.36}],wd=Id.map(e=>e.website),ml=()=>{let e=de();return wd.includes(e)?e==="icloud.com"?window.location.href.includes("icloud.com/mail"):e==="outlook.live.com"?window.location.href.includes("outlook.live.com/mail"):e==="outlook.office.com"?window.location.href.includes("outlook.office.com/mail"):e==="outlook.office365.com"?window.location.href.includes("outlook.office365.com"):!0:!1},Uh=async e=>{let t=document.querySelector(e),r=de(),n="",o=document.documentElement;if(r==="mail.google.com"&&(document.querySelectorAll('table[role="presentation"]').forEach(i=>{i.contains(t)&&(o=i)}),n='div[role="textbox"]'),r==="outlook.office.com"||r==="outlook.live.com"||r==="outlook.office365.com"){let s=t.parentElement,l=null,a=0;for(;!l&&a<20;)s=s?.parentElement,l=s?.querySelector('div[role="textbox"][textprediction]')||s?.querySelector('div[id] > div[role="textbox"]')||null,a++;return l?dr(l):""}try{if(n){let i=o.querySelector(n);return dr(i)}return""}catch{return""}},Ur=class{constructor(){this.emails=[]}addSender(t){this.sender=t}addReceiver(t){this.receiver=t}addEmail(t,r){this.sender&&this.receiver&&(t===this.sender?.email?this.emails.push({from:this.sender,to:this.receiver,...r}):this.emails.push({from:this.receiver,to:this.sender,...r}))}sortEmails(){this.emails.sort((t,r)=>new Date(t.date).getTime()-new Date(r.date).getTime())}formatText(){return this.emails.map((t,r)=>`## Email #${r+1}
**From:** ${t.from.name}<${t.from.email}>
**To:** ${t.to.name}<${t.to.email}>
**Date:** ${t.date}
**Subject:** ${t.subject}

${t.content}

---
`).join(`
`).replace(/\n{2,}/g,`

`)}},Pd=e=>{if(document.createEvent){let t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else typeof e.onclick=="function"&&e.onclick()},Wh=async e=>{let t=c=>new Promise(u=>setTimeout(u,c)),r=de(),n=/[\w.-]+@[\w.-]+\.[A-Za-z]{2,}/g,o=!1,i="",s="body",l=e&&document.querySelector(e)||null;if(r==="mail.google.com"){let c=document.querySelector('div[role="list"]');if(c){let u=new Ur,p=c.querySelector('span[role="button"][aria-expanded][tabindex="-1"]');p&&(p.click(),await t(3e3));let f=[];Array.from(c.querySelectorAll('div[role="listitem"]')).find(h=>h.contains(l)?(f.push(h),!0):(f.push(h),!1));for(let h=0;h<f.length;h++)if(f[h].querySelectorAll("table span[email]").length>=2){let m=Array.from(f[h].querySelectorAll("table span[email]")),v="";document.querySelectorAll('a[aria-label][role="button"]').forEach(x=>{x?.getAttribute("aria-label")?.includes("@gmail.com")&&(v=x?.getAttribute("aria-label")?.match(n)?.[0]||"")});let y=m.find(x=>x.getAttribute("email")===v),b=m.find(x=>x.getAttribute("email")!==v);u.addSender({email:y?.getAttribute("email")||"",name:y?.getAttribute("name")||""}),u.addReceiver({email:b?.getAttribute("email")||"",name:b?.getAttribute("name")||""});break}let d=document.querySelector("h2[data-thread-perm-id]")?.textContent||document.title;return f.forEach(h=>{let m=h.querySelector("div[data-message-id]")||h.querySelector("div[data-legacy-message-id]"),v=h.querySelector('span[tabindex="-1"][alt]')?.textContent||"",y=h.querySelector("h3 span[email]")?.getAttribute("email")||h.querySelector("span[email]")?.getAttribute("email");if(y)if(m){let b=dr(h.querySelector("div[id][jslog] > div[id]"));u.addEmail(y,{content:b,date:v,subject:d})}else{let b=h.querySelector('div[role="gridcell"] span')?.textContent||"";u.addEmail(y,{content:b,date:v,subject:d})}}),u.formatText()}else s='div[role="list"]'}if(r==="outlook.office.com"||r==="outlook.live.com"||r==="outlook.office365.com")try{let c=document.querySelector('#ReadingPaneContainerId div[role="heading"][aria-level="2"]')?.textContent||document.title;document.querySelector('div[role="button"][aria-label="See more messages"]')?.click();let p=document.querySelector('div[data-app-section="ConversationContainer"]');if(p&&p.contains(l)){let y=new Ur,b=[],x=Array.from(p.querySelectorAll("& > div > div")),I=x.find(N=>N.contains(l))?.querySelector('div[data-testid="SentReceivedSavedTime"]')?.textContent||"";x.forEach(N=>{let _=N.querySelector('div[data-testid="SentReceivedSavedTime"]')?.textContent||"";new Date(_).getTime()<=new Date(I).getTime()&&b.push(N),N.querySelectorAll("& > div > div").forEach(g=>Pd(g))});let T=document.querySelector("#meInitialsButton");for(;!document.querySelector("#mectrl_currentAccount_primary");)T.click(),await t(2e3);let w=document.querySelector("#mectrl_currentAccount_primary")?.textContent||"",D=document.querySelector("#mectrl_currentAccount_secondary")?.textContent||"";for(let N=0;N<b.length;N++){let _=Array.from(b[N].querySelectorAll("span[data-lpc-hover-target-id]")),C=b[N].querySelector('div[data-testid="RecipientWell"]');if(!C||_.length===0)continue;let g=b[N].querySelector('div[data-testid="SentReceivedSavedTime"]')?.textContent||"",k=dr(b[N].querySelector("#UniqueMessageBody")||b[N].querySelector('div[role="document"]'));_.find(O=>{let P=O.textContent||"",R=P.match(n)?.[0];if(!R&&P===y.sender?.name?R=y.sender.email:!R&&P===y.receiver?.name&&(R=y.receiver.email),R){let W=!1;C?.contains(O)&&(W=!0);let G=P.replace(` <${R}>`,"");if(G&&R){if((!y.receiver||!y.sender)&&(W?(y.addReceiver({name:G,email:R}),y.addSender({name:w,email:D})):(y.addSender({name:G,email:R}),y.addReceiver({name:w,email:D}))),W){let A=y.sender?.email===R?y.receiver.email:y.sender.email;y.addEmail(A,{date:g,subject:c,content:k})}else y.addEmail(R,{date:g,subject:c,content:k});return!0}}return!1})}if(y.sortEmails(),y.emails.length>0)return y.formatText();s='div[data-app-section="ConversationContainer"]'}let f=y=>{let b=y,x=0;for(;!b.querySelector("#divRplyFwdMsg")&&!b.querySelector("#divRplyFwdMsg")&&x<10;)x++,b=b.parentElement;let I=b.cloneNode(!0),T=new Ur,w=I.querySelector("#divRplyFwdMsg")||I.querySelector("#RplyFwdMsg"),D=w?.nextElementSibling;if(w&&D){let N=Array.from(w.querySelector("font")?.childNodes||[]).filter(_=>!_.tagName);if(N.length===4){let _=N[0].textContent?.match(n)?.[0],C=N[0].textContent?.replace(` <${_}>`,""),g=N[2].textContent?.match(n)?.[0],k=N[2].textContent?.replace(` <${g}>`,""),O=N[1].textContent||"",P=N[3].textContent||"";if(_&&C&&g&&k&&O&&P){T.addSender({email:_,name:C}),T.addReceiver({email:g,name:k}),w.remove();let R=dr(D);return T.addEmail(_,{date:O,subject:P,content:R}),T.formatText()}}}return""},d=document.querySelector('div[role="dialog"] div[role="textbox"][textprediction]')||document.querySelector('div[role="dialog"] div[id] > div[role="textbox"]'),h=Array.from(document.querySelectorAll('div[role="dialog"]')).find(y=>y.contains(d));if(h&&h.contains(l)){let y=f(d);if(y)return y;s="#ReadingPaneContainerId"}let m=document.querySelector('#ReadingPaneContainerId div[id] > div[role="textbox"]');if(document.querySelector("#ReadingPaneContainerId")?.contains(l)){let y=f(m);if(y)return y;s="#ReadingPaneContainerId"}}catch{s='div[data-app-section="ConversationContainer"]'}r==="mail.yahoo.com"&&(s='div[data-test-id="message-group-view-scroller"]'),r==="wx.mail.qq.com"&&(s="div.container"),r==="mail.proton.me"&&(document.querySelectorAll("div.scroll-inner .message-header").forEach(c=>{o=!0,c.click()}),i="iframe[sandbox]",s="div#proton-root"),r==="mail.zoho.com"&&(document.querySelectorAll("div.zmPVContent .zmTMailList .zmMHdrSumContent").forEach(c=>{o=!0,c.click()}),s="div.zmPVContent"),o&&await t(3e3);let a=[document.documentElement];i&&(a=Array.from(document.querySelectorAll(i)));try{return(await Promise.all(a.map(async u=>{let p=u?.contentDocument||u?.ownerDocument||document;if(!p?.querySelector)return"";let f=p.querySelector(s);return f?f.innerText:await Ni()}))).join("")}catch{return await Ni()}};var _d={PAGE_SUMMARY:{id:"f734efe5-c63e-490e-a0f1-ae5a248e0f16",parent:"root",droppable:!1,text:"Summarize page",data:{editable:!1,type:"shortcuts",actions:[{type:"GET_READABILITY_CONTENTS_OF_WEBPAGE",parameters:{}},{type:"SET_VARIABLE",parameters:{VariableName:"READABILITY_CONTENTS"}},{type:"ANALYZE_CHAT_FILE",parameters:{AnalyzeChatFileImmediateUpdateConversation:!1,AnalyzeChatFileName:"PageSummaryContent.txt"}},{type:"ASK_CHATGPT",parameters:{template:`Ignore all previous instructions. You are a highly proficient researcher that can read and write properly and fluently, and can extract all important information from any text. Your task is to summarize and extract all key takeaways of the context text delimited by triple backticks in all relevant aspects.

The context text is sourced from the main content of the webpage at {{CURRENT_WEBPAGE_URL}}.

Output a summary and a list of key takeaways respectively.
The summary should be a one-liner in at most 100 words.
The key takeaways should be in up to seven bulletpoints, the fewer the better.

---

Use the following format:
## \u{1F310} {{CURRENT_WEBPAGE_TITLE}}

### Summary
<summary of the text>

### Key Takeaways
<list of key takeaways>

---

You must add these two lines at the bottom of the response:
### Deep Dive
Ask AI anything about the page...

Respond in {{AI_RESPONSE_LANGUAGE}}.`}},{type:"SET_VARIABLE",parameters:{VariableName:"SUMMARY_CONTENTS"}},{type:"CREATE_WEBSITE_CONTEXT",parameters:{CreateWebsiteContextConfig:{summary:"{{SUMMARY_CONTENTS}}",meta:{readability:"{{READABILITY_CONTENTS}}"}}}}],visibility:{isWhitelistMode:!1,whitelist:[],blacklist:[]}}},DEFAULT_EMAIL_SUMMARY:{id:"8ed1bf33-efc9-4714-8b21-09ceede3e2a8",parent:"root",droppable:!1,text:"Summarize email",data:{editable:!1,type:"shortcuts",actions:[{type:"GET_EMAIL_CONTENTS_OF_WEBPAGE",parameters:{}},{type:"SET_VARIABLE",parameters:{VariableName:"READABILITY_CONTENTS"}},{type:"ANALYZE_CHAT_FILE",parameters:{AnalyzeChatFileImmediateUpdateConversation:!1,AnalyzeChatFileName:"EmailSummaryContent.txt"}},{type:"ASK_CHATGPT",parameters:{template:`Ignore all previous instructions. You are a highly proficient researcher that can read and write properly and fluently, and can extract all important information from any text. Your task is to summarize and extract all key takeaways and action items of the context text delimited by triple backticks in all relevant aspects. 

The context text comprises email messages from an email thread you received or sent on {{CURRENT_WEBSITE_DOMAIN}}.

Output a summary, a list of key takeaways, and a list of action items respectively.
The summary should be a one-liner in at most 100 words. 
The key takeaways should be in up to seven bulletpoints, the fewer the better.
When extracting the action items, identify only the action items that need the reader to take action, and exclude action items requiring action from anyone other than the reader. Output the action items in bulletpoints, and pick a good matching emoji for every bullet point.

---

Use the following format:
## \u{1F4E7} {{CURRENT_WEBPAGE_TITLE}}

### Summary
<summary of the text>

### Key Takeaways
<list of key takeaways>

### Action Items
<list of action items>

---

You must add these two lines at the bottom of the response:
### Deep Dive
Ask AI anything about the email...

Respond in {{AI_RESPONSE_LANGUAGE}}.`}},{type:"SET_VARIABLE",parameters:{VariableName:"SUMMARY_CONTENTS"}},{type:"CREATE_WEBSITE_CONTEXT",parameters:{CreateWebsiteContextConfig:{summary:"{{SUMMARY_CONTENTS}}",meta:{readability:"{{READABILITY_CONTENTS}}"}}}}],visibility:{isWhitelistMode:!1,whitelist:[],blacklist:[]}}},PDF_CRX_SUMMARY:{id:"0c8c8bd7-1072-4fb7-9fad-cf6447b33896",parent:"root",droppable:!1,text:"Summarize PDF",data:{editable:!1,type:"shortcuts",actions:[{type:"GET_PDF_CONTENTS_OF_CRX",parameters:{}},{type:"SET_VARIABLE",parameters:{VariableName:"READABILITY_CONTENTS"}},{type:"ANALYZE_CHAT_FILE",parameters:{AnalyzeChatFileImmediateUpdateConversation:!1,AnalyzeChatFileName:"PDFSummaryContent.txt"}},{type:"ASK_CHATGPT",parameters:{template:`Ignore all previous instructions. You are a highly proficient researcher that can read and write properly and fluently, and can extract all important information from any text. Your task is to summarize and extract all key takeaways of the context text delimited by triple backticks in all relevant aspects. 

The context text originates from the main content of a PDF viewed on the browser at {{CURRENT_WEBPAGE_URL}}.

Output a summary and a list of key takeaways respectively.
The summary should be a one-liner in at most 100 words.
The key takeaways should be in up to seven bulletpoints, the fewer the better.

---

Use the following format:
## \u{1F4C4} {{CURRENT_WEBPAGE_TITLE}}

### Summary
<summary of the text>

### Key Takeaways
<list of key takeaways>

---

You must add these two lines at the bottom of the response:
### Deep Dive
Ask AI anything about the PDF...

Respond in {{AI_RESPONSE_LANGUAGE}}.`}},{type:"SET_VARIABLE",parameters:{VariableName:"SUMMARY_CONTENTS"}},{type:"CREATE_WEBSITE_CONTEXT",parameters:{CreateWebsiteContextConfig:{summary:"{{SUMMARY_CONTENTS}}",meta:{readability:"{{READABILITY_CONTENTS}}"}}}}],visibility:{isWhitelistMode:!1,whitelist:[],blacklist:[]}}},YOUTUBE_VIDEO_SUMMARY:{id:"215bf574-3a68-4ac8-8fff-ccdd19150cb9",parent:"root",droppable:!1,text:"Summarize video",data:{editable:!1,type:"shortcuts",actions:[{type:"GET_YOUTUBE_TRANSCRIPT_OF_URL",parameters:{}},{type:"ANALYZE_CHAT_FILE",parameters:{AnalyzeChatFileName:"YouTubeSummaryContent.txt",AnalyzeChatFileImmediateUpdateConversation:!1}},{type:"SET_VARIABLE",parameters:{VariableName:"READABILITY_CONTENTS"}},{type:"ASK_CHATGPT",parameters:{template:`Ignore all previous instructions. You are a highly proficient researcher that can read and write properly and fluently, and can extract all important information from any text. Your task is to summarize and extract all key takeaways of the context text delimited by triple backticks in all relevant aspects. 

The context text is the transcript of a video from {{CURRENT_WEBPAGE_URL}}.

Output a summary and a list of key takeaways respectively.
The summary should be a one-liner in at most 100 words.
The key takeaways should be in up to seven bulletpoints, the fewer the better.

---

Use the following format:
## \u{1F4FA} {{CURRENT_WEBPAGE_TITLE}}

### Summary
<summary of the text>

### Key Takeaways
<list of key takeaways>

---

You must add these two lines at the bottom of the response:
### Deep Dive
Ask AI anything about the video...

Respond in {{AI_RESPONSE_LANGUAGE}}.`}},{type:"SET_VARIABLE",parameters:{VariableName:"SUMMARY_CONTENTS"}},{type:"CREATE_WEBSITE_CONTEXT",parameters:{CreateWebsiteContextConfig:{summary:"{{SUMMARY_CONTENTS}}",meta:{readability:"{{READABILITY_CONTENTS}}"}}}}],visibility:{isWhitelistMode:!1,whitelist:[],blacklist:[]}}}},Xh=e=>{let t=ue(_d[e]);return(t.data.actions||[]).map(r=>(r.type==="ASK_CHATGPT"&&(r.parameters.AskChatGPTActionMeta={contextMenu:ue(t)}),r))},Ad=()=>window.location.href,Kt=()=>bt(Ad()),eo=()=>{if(de()==="youtube.com"&&Xn.retrieveVideoId(window.location.href))return"YOUTUBE_VIDEO_SUMMARY";let e=new URL(location.href),t=`${Di.default.runtime.id}/pages/pdf/web/viewer.html`;return e.href.includes(t)?"PDF_CRX_SUMMARY":ml()?"DEFAULT_EMAIL_SUMMARY":"PAGE_SUMMARY"},Qh=async()=>{let e="";return gl()?e=await hl():Rd()&&(e=await Md()),e=e.trim(),e},Rd=()=>{let e=de();return["docs.google.com"].find(t=>t===e)},Md=async()=>de()==="docs.google.com"?new Promise(t=>{let r=ie(),n=document.createElement("script");n.type="module",n.src=Di.default.runtime.getURL("pages/googleDoc/index.js"),n.setAttribute("data-event-id",r),n.id="MAXAI_GOOGLE_DOC_CONTENT_SCRIPT",document.body.appendChild(n);let o=!1;window.addEventListener(`${r}res`,i=>{o||(o=!0,t(i.detail))},{once:!0}),setTimeout(()=>{o||(o=!0,t(""))},1e4)}):"";var nt=async e=>{try{let r=await new oe().postMessage({event:"Client_getLiteConversation",data:{conversationId:e}});return r.success?r.data:void 0}catch{return}},kd=()=>{let[,e]=ne(Yt),t=ae(vt);Dn(async(r,n,o)=>{switch(r){case"Client_listenUpdateConversationMessages":{let{conversation:i,conversationId:s}=n;return i?.id?e(l=>({...l,[i.id]:i})):s&&!i&&e(l=>{let a=ue(l);return delete a[s],a}),{success:!0}}break}}),(0,yl.useEffect)(()=>{t&&nt(t).then(r=>{r&&e(n=>({...n,[r.id]:r}))})},[t]),ut(()=>{ve().then(r=>{r.chatTypeConversationId&&nt(r.chatTypeConversationId).then(n=>{n&&e(o=>({...o,[n.id]:n}))})}),Kt()&&nt(Kt()).then(r=>{r&&e(n=>({...n,[r.id]:r}))})})},ly=kd;var Ge=E($());var Bi=E($());var Ld=()=>{let[e,t]=ne(tt),r=e.currentAIProvider,n=(0,Bi.useMemo)(()=>{if(e.thirdProviderSettings&&r&&e.thirdProviderSettings[r])return e.thirdProviderSettings?.[r]},[r,e.thirdProviderSettings]);return{fetchThirdProviderSettings:async s=>{try{return await qt(s)}catch{return}},saveThirdProviderSettings:async(s,l)=>{await Nr(s,l)&&t(await ve())},currentThirdProviderSettings:n}},vl=e=>{let[t,r]=ne(tt);return[(0,Bi.useMemo)(()=>t.thirdProviderSettings?.[e],[t.thirdProviderSettings,e]),async i=>{await Nr(e,i)&&r(await ve())}]},to=Ld;var Od=()=>{let[e,t]=ne(tt),r=e.currentAIProvider,[n,o]=(0,Ge.useState)(!1),{currentThirdProviderSettings:i,saveThirdProviderSettings:s}=to(),[l,a]=(0,Ge.useState)([]);(0,Ge.useEffect)(()=>{r==="OPENAI"&&Na().then(h=>{a(h)})},[r]);let c=(0,Ge.useMemo)(()=>{let h=[];if(!r)return h;switch(r){case"OPENAI":h=(e.thirdProviderSettings?.OPENAI?.modelOptions||[]).map(m=>{let v=m.slug==="gpt-4-code-interpreter";return{title:m.title,value:m.slug,titleTag:m.tags?.find(b=>b.toLowerCase().includes("beta"))||m.tags?.find(b=>b.toLowerCase().includes("mobile"))||"",maxTokens:m.max_tokens,tags:m.tags||[],descriptions:[{label:b=>b("client:provider__model__tooltip_card__label__max_token"),value:b=>`${pa(m.max_tokens,0)} ${b("client:provider__model__tooltip_card__label__max_token__suffix")}`},{label:b=>b("client:provider__model__tooltip_card__label__description"),value:b=>{let x=m.description,I=`provider__chatgpt_web_app__${m.slug}__description`.replace(/-/g,"_"),T=`client:${I}`;return b(T)!==I?b(T):x}}],disabled:l.length>0?!l.includes(m.slug):!1,uploadFileConfig:v?{accept:"",acceptTooltip:b=>b("client:provider__chatgpt_web_app__upload__accept_tooltip"),maxFileSize:-1,maxCount:1}:void 0}}).reverse();break;case"USE_CHAT_GPT_PLUS":h=On(ue(Fn));break;case"BARD":h=fa;break;case"BING":h=da;break;case"OPENAI_API":h=On(ue(ga));break;case"CLAUDE":h=vi;break;case"POE":h=ha;break;case"MAXAI_CLAUDE":h=On(ue(ya));break;default:break}return h},[r,l,e.thirdProviderSettings?.OPENAI?.modelOptions]),u=(0,Ge.useMemo)(()=>i?.model||"",[r,i]),p=(0,Ge.useMemo)(()=>Fr.find(h=>h.value===r),[r]),f=(0,Ge.useMemo)(()=>c.find(h=>h.value===u),[u,c]),d=(0,Ge.useCallback)(async h=>{try{let m=(await ve()).chatTypeConversationId;if(m){let v=await nt(m);v&&v?.meta?.AIProvider&&!["USE_CHAT_GPT_PLUS","OPENAI_API"].includes(v.meta.AIProvider)&&new oe().postMessage({event:"Client_removeChatGPTConversation",data:{conversationId:m}}).then().catch()}r&&c.find(v=>v.value===h)&&(o(!0),await s(r,{model:h}),await $t({chatTypeConversationId:bt(r+h)}),t(await ve()))}catch{}finally{o(!1)}},[r,c]);return(0,Ge.useEffect)(()=>{r==="CLAUDE"&&i?.model==="a2"&&d(vi[0].value)},[u,r]),{aiProvider:e.currentAIProvider,aiProviderModel:u,currentAIProviderDetail:p,currentAIProviderModelDetail:f,aiProviderModels:c,updateAIProviderModel:d,loading:n}},ro=Od;var bl=async e=>{let t=await ve(),r={AIProvider:t.currentAIProvider,AIModel:t.thirdProviderSettings?.[t.currentAIProvider]?.model||""};return e==="OPENAI_API"&&(r.systemPrompt=ma),r};var Xt=async(e,t,r,n)=>{try{return(await new oe().postMessage({event:"Client_modifyMessages",data:{conversationId:t,action:e,deleteCount:r,newMessages:n}})).success}catch{return!1}},xl=async(e,t)=>{try{return(await new oe().postMessage({event:"Client_updateConversation",data:{conversationId:e,updateConversationData:t}})).success}catch{return!1}};var no=new oe({runtime:"client"}),fr=()=>{let[,e]=ne(tt),[,t]=ne(dt),r=ct(Yt),[n,o]=ne(pr),{currentAIProviderDetail:i,currentAIProviderModelDetail:s}=ro(),l=ae(vt);return{cleanConversation:async()=>{no.postMessage({event:"Client_removeChatGPTConversation",data:{conversationId:l}}).then().catch(),n.type==="Chat"?(e(d=>({...d,chatTypeConversationId:""})),await $t({chatTypeConversationId:""})):o(d=>({...d,summaryConversationId:""})),r(d=>{let h=ue(d);return delete h[l],h}),t({model:"",writingMessage:null,loading:!1})},createConversation:async()=>{let d=l,h=i?.value||"USE_CHAT_GPT_PLUS",m=s?.value||"gpt-3.5-turbo",v="";if(n.type==="Chat"){let y=await ve();if(y.currentAIProvider&&y.currentAIProvider!==h&&(h=y.currentAIProvider,m=y.thirdProviderSettings?.[y.currentAIProvider]?.model||m,d=bt(h+m)),d&&await nt(d))return d;let b=bt(h+m),x=await no.postMessage({event:"Client_createChatGPTConversation",data:{initConversationData:{id:b,type:"Chat",meta:{maxTokens:s?.maxTokens||4096,...await bl(h)}}}});x.success&&x.data.conversationId&&(v=x.data.conversationId,await $t({chatTypeConversationId:x.data.conversationId}),e(I=>({...I,chatTypeConversationId:x.data.conversationId})))}else if(n.type==="Summary"){if(Kt()&&await nt(Kt()))return d;let y=await no.postMessage({event:"Client_createChatGPTConversation",data:{initConversationData:{id:Kt(),type:"Summary",meta:oa({AIProvider:"USE_CHAT_GPT_PLUS",AIModel:"gpt-3.5-turbo",maxTokens:16384,pageSummaryType:eo()})}}});v=y.data.conversationId,o(b=>({...b,summaryConversationId:y.data.conversationId}))}return v},changeConversation:async d=>d?(await new oe().postMessage({event:"Client_changeConversation",data:{conversationId:d}})).success:!1,updateConversation:async(d,h)=>{await xl(h||l,d)},switchBackgroundChatSystemAIProvider:async d=>(await no.postMessage({event:"Client_switchAIProvider",data:{provider:d}})).success}};var Nd=()=>{let[e,t]=(0,mr.useState)(!1),[r,n]=ne(tt),{changeConversation:o,switchBackgroundChatSystemAIProvider:i}=fr(),s=(0,mr.useRef)(r.currentAIProvider);(0,mr.useEffect)(()=>{s.current=r.currentAIProvider},[r.currentAIProvider]);let l=async a=>{try{t(!0);let c=await ve(),u=c.chatTypeConversationId?await nt(c.chatTypeConversationId):void 0,p=c.thirdProviderSettings?.[a]?.model||"",f="";if(p){let d=bt(a+p),h=await nt(d);f=d}n(d=>({...d,currentAIProvider:a,chatTypeConversationId:f})),await $t({currentAIProvider:a,chatTypeConversationId:f}),setTimeout(async()=>{let d=await ve();u?.meta.AIProvider&&u?.meta.AIProvider===d.currentAIProvider?await o(f):await i(a)},0)}catch{}finally{t(!1)}};return{currentAIProviderRef:s,provider:r.currentAIProvider,updateChatGPTProvider:l,loading:e}},Tl=Nd;var ot=E($());var Dd=e=>{let{aiProviderType:t,size:r=20,sx:n}=e;return ot.default.createElement(ot.default.Fragment,null,t==="USE_CHAT_GPT_PLUS"&&ot.default.createElement(Sa,{sx:{...n,fontSize:r}}),t==="OPENAI_API"&&ot.default.createElement(Ia,{sx:{...n,fontSize:r,color:o=>o.palette.mode==="dark"?"#fff":"rgba(0,0,0,1)"}}),t==="OPENAI"&&ot.default.createElement(Ea,{sx:{...n,fontSize:r}}),t==="BARD"&&ot.default.createElement(Pa,{sx:{...n,fontSize:r}}),t==="BING"&&ot.default.createElement(wa,{sx:{...n,fontSize:r}}),t==="CLAUDE"&&ot.default.createElement(Aa,{sx:{...n,fontSize:r,color:o=>o.palette.mode==="dark"?"#fff":"rgba(0,0,0,1)"}}),t==="MAXAI_CLAUDE"&&ot.default.createElement(_a,{sx:{...n,fontSize:r}}),t==="POE"&&ot.default.createElement(Ma,{sx:{...n,fontSize:r}}))},xt=Dd;var fe=E($());var Ye=E($());var Bd=e=>{let{aiProviderOption:t,children:r,sx:n,boxSx:o,authMode:i}=e,{t:s}=xe(["common","client"]),l={USE_CHAT_GPT_PLUS:"chatgpt",OPENAI:"chatgpt_web_app",OPENAI_API:"openai_api",BARD:"bard_web_app",BING:"bing_web_app",POE:"poe",CLAUDE:"claude_web_app",MAXAI_CLAUDE:"claude"};return Ye.default.createElement(z,{alignItems:"center",justifyContent:"space-between",sx:{height:"100%",...n}},Ye.default.createElement(z,{p:1,spacing:1,width:"100%",sx:{textAlign:"left"}},Ye.default.createElement(z,{direction:"row",spacing:1},Ye.default.createElement(xt,{aiProviderType:t.value,size:24}),Ye.default.createElement(q,{fontSize:"16px",fontWeight:600,color:"text.primary"},s(t.label))),i&&Ye.default.createElement(q,{fontSize:"14px",color:"text.secondary",fontWeight:400},s(t.authDescription)),Ye.default.createElement(q,{fontSize:"14px",color:"text.secondary",fontWeight:400},t.shortDescription(s)),Ye.default.createElement(be,{display:"flex"},Ye.default.createElement(ze,{href:`${Gt}/get-started?provider=${l[t.value]}#ai-provider`,target:"_blank",underline:"always",sx:{display:"inline-flex",textDecorationColor:a=>a.palette.mode==="dark"?"rgba(255,255,255,0.4)":"rgba(0,0,0,0.4)","&:hover":{textDecorationColor:a=>a.palette.mode==="dark"?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"}}},Ye.default.createElement(q,{fontSize:"14px",color:"text.secondary",fontWeight:400,component:"span"},s("common:learn_more"))))),Ye.default.createElement(z,{sx:{width:"100%",p:1,...o}},r))},oo=Bd;var Hi=E(Fi());var Cl=new oe,zd=e=>{let{aiProviderOption:t}=e,{t:r}=xe(["common","client"]),n=ae(Nt),[o,i]=(0,fe.useState)(!1);return(0,fe.useEffect)(()=>{let s=null;return(n.status==="loading"||n.status==="complete")&&(s=setTimeout(()=>{i(!0)},10*1e3)),()=>{s&&(i(!1),clearTimeout(s))}},[n.status]),fe.default.createElement(oo,{authMode:!0,aiProviderOption:t,boxSx:{p:0}},(n.status==="loading"||n.status==="complete")&&fe.default.createElement(z,null,t.value===De.OPENAI&&fe.default.createElement(zn,{placement:"bottom",arrow:!0,open:!0,PopperProps:{sx:{maxWidth:"237px",zIndex:"2147483632!important"}},title:o&&fe.default.createElement(be,{sx:{cursor:"pointer",textAlign:"center","&:hover":{textDecoration:"underline"}},onClick:()=>{Cl.postMessage({event:"Client_authChatGPTProvider",data:{provider:De.OPENAI}})}},fe.default.createElement(q,{component:"span",textAlign:"center",fontSize:"14px",fontWeight:400},r("client:provider__chatgpt_web_app__waiting_tooltip1")),fe.default.createElement(q,{component:"span",textAlign:"center",fontSize:"14px",fontWeight:400,sx:{textDecoration:"underline"}},r("client:provider__chatgpt_web_app__waiting_tooltip2")),fe.default.createElement(Hi.default,{sx:{fontSize:14,position:"relative",top:3}}),fe.default.createElement(q,{component:"span",textAlign:"center",fontSize:"14px",fontWeight:400},r("client:provider__chatgpt_web_app__waiting_tooltip3")))},fe.default.createElement(z,{justifyContent:"center",alignItems:"center",height:"100%",sx:{height:"40px"}},fe.default.createElement(q,{fontSize:"18px",fontWeight:700},r("client:provider__chatgpt_web_app__connecting"))))),n.status==="needAuth"&&fe.default.createElement(z,{spacing:2},fe.default.createElement(Da,{TooltipProps:{arrow:!0,placement:"bottom",PopperProps:{sx:{maxWidth:"237px",zIndex:"2147483632!important"}}},sx:{fontSize:"14px",fontWeight:400,width:"100%",px:"0",py:"6px",height:"40px"},title:t.value===De.OPENAI&&fe.default.createElement(be,{sx:{display:"inline"}},fe.default.createElement(q,{component:"span",fontSize:14,textAlign:"left"},r("client:provider__chatgpt_web_app__stable_mode_tooltip1")),fe.default.createElement(ze,{fontSize:14,color:"#fff",sx:{textDecorationColor:"#fff"},href:"#",onClick:async()=>{await Ln({key:"options",query:"#/chatgpt-stable-mode"})}},r("client:provider__chatgpt_web_app__stable_mode_tooltip2")),fe.default.createElement(q,{component:"span",fontSize:14,textAlign:"left"},r("client:provider__chatgpt_web_app__stable_mode_tooltip3"))),onClick:async()=>{await Cl.postMessage({event:"Client_authChatGPTProvider",data:{provider:t.value}})},variant:"contained",disableElevation:!0,fullWidth:!0},r(t.authButtonText),t.authOpenInNew&&fe.default.createElement(Hi.default,{sx:{fontSize:"16px",ml:"4px"}}))))},Sl=zd;var Zt=E($());var he=E($());zt();var Dt=E($());var zi=E(At()),Ul=E(Rt()),Wr=E(kr());zt();var Pl=E($());var _l=E(At()),Al=E(Rt()),Rl=E(kr());var El=E(Wt()),Il=E(Vt());function wl(e){return(0,Il.default)("MuiDivider",e)}var Gd=(0,El.unstable_generateUtilityClasses)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),so=Gd;var Ui=E(Ae()),Vd=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],$d=e=>{let{absolute:t,children:r,classes:n,flexItem:o,light:i,orientation:s,textAlign:l,variant:a}=e;return(0,Al.unstable_composeClasses)({root:["root",t&&"absolute",a,i&&"light",s==="vertical"&&"vertical",o&&"flexItem",r&&"withChildren",r&&s==="vertical"&&"withChildrenVertical",l==="right"&&s!=="vertical"&&"textAlignRight",l==="left"&&s!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",s==="vertical"&&"wrapperVertical"]},wl,n)},qd=ce("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>B({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:(0,Rl.alpha)(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({theme:e,ownerState:t})=>B({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}),({theme:e,ownerState:t})=>B({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(e.vars||e).palette.divider}`,transform:"translateX(0%)"}}),({ownerState:e})=>B({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),jd=ce("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>B({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),Yd=Pl.forwardRef(function(t,r){let n=Fe({props:t,name:"MuiDivider"}),{absolute:o=!1,children:i,className:s,component:l=i?"div":"hr",flexItem:a=!1,light:c=!1,orientation:u="horizontal",role:p=l!=="hr"?"separator":void 0,textAlign:f="center",variant:d="fullWidth"}=n,h=Be(n,Vd),m=B({},n,{absolute:o,component:l,flexItem:a,light:c,orientation:u,role:p,textAlign:f,variant:d}),v=$d(m);return(0,Ui.jsx)(qd,B({as:l,className:(0,_l.default)(v.root,s),role:p,ref:r,ownerState:m},h,{children:i?(0,Ui.jsx)(jd,{className:v.wrapper,ownerState:m,children:i}):null}))}),Wi=Yd;zt();var lo=E($());var Ol=E(At()),Nl=E(Rt());var Ml=E(Wt()),kl=E(Vt());function Ll(e){return(0,kl.default)("MuiListItemIcon",e)}var Kd=(0,Ml.unstable_generateUtilityClasses)("MuiListItemIcon",["root","alignItemsFlexStart"]),ao=Kd;var Dl=E(Ae()),Xd=["className"],Qd=e=>{let{alignItems:t,classes:r}=e;return(0,Nl.unstable_composeClasses)({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Ll,r)},Jd=ce("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>B({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),Zd=lo.forwardRef(function(t,r){let n=Fe({props:t,name:"MuiListItemIcon"}),{className:o}=n,i=Be(n,Xd),s=lo.useContext(Dr),l=B({},n,{alignItems:s.alignItems}),a=Qd(l);return(0,Dl.jsx)(Jd,B({className:(0,Ol.default)(a.root,o),ownerState:l,ref:r},i))}),ef=Zd;var Bl=E(Wt()),Fl=E(Vt());function Hl(e){return(0,Fl.default)("MuiMenuItem",e)}var tf=(0,Bl.unstable_generateUtilityClasses)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Qt=tf;var Gi=E(Ae()),rf=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],nf=(e,t)=>{let{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},of=e=>{let{disabled:t,dense:r,divider:n,disableGutters:o,selected:i,classes:s}=e,a=(0,Ul.unstable_composeClasses)({root:["root",r&&"dense",t&&"disabled",!o&&"gutters",n&&"divider",i&&"selected"]},Hl,s);return B({},s,a)},sf=ce(Ca,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:nf})(({theme:e,ownerState:t})=>B({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Qt.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Wr.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Qt.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Wr.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Qt.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Wr.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Wr.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Qt.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Qt.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${so.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${so.inset}`]:{marginLeft:52},[`& .${Si.root}`]:{marginTop:0,marginBottom:0},[`& .${Si.inset}`]:{paddingLeft:36},[`& .${ao.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&B({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${ao.root} svg`]:{fontSize:"1.25rem"}}))),af=Dt.forwardRef(function(t,r){let n=Fe({props:t,name:"MuiMenuItem"}),{autoFocus:o=!1,component:i="li",dense:s=!1,divider:l=!1,disableGutters:a=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:p,className:f}=n,d=Be(n,rf),h=Dt.useContext(Dr),m=Dt.useMemo(()=>({dense:s||h.dense||!1,disableGutters:a}),[h.dense,s,a]),v=Dt.useRef(null);Oa(()=>{o&&v.current&&v.current.focus()},[o]);let y=B({},n,{dense:m.dense,divider:l,disableGutters:a}),b=of(n),x=xa(v,r),I;return n.disabled||(I=p!==void 0?p:-1),(0,Gi.jsx)(Dr.Provider,{value:m,children:(0,Gi.jsx)(sf,B({ref:x,role:u,tabIndex:I,component:i,focusVisibleClassName:(0,zi.default)(b.focusVisible,c),className:(0,zi.default)(b.root,f)},d,{ownerState:y,classes:b}))})}),Tt=af;var ge=E($());var zl=E(Wl());var zr=E($());var df=({emptyText:e})=>{let{t}=xe(["common"]);return zr.default.createElement(z,{alignItems:"center"},zr.default.createElement(z,{width:"56px",height:"56px",justifyContent:"center",alignItems:"center",borderRadius:4,sx:{bgcolor:r=>r.palette.mode==="dark"?"rgba(255, 255, 255, .04)":"rgba(0, 0, 0, .04)"}},zr.default.createElement(zl.default,{width:24,height:24})),zr.default.createElement(q,{variant:"body1"},e||t("common:no_options")))},Gl=df;var se=E($());var $i=E($());var Vl=(e,t)=>{if(!e)return[];if(typeof e[0]=="string"||typeof e[0]=="number")return e.map(o=>({label:String(o),value:String(o)}));let{labelKey:r="label",valueKey:n="value"}=t||{};return e.map(o=>({label:o[r],value:o[n],origin:o}))},$l=(e,t)=>{for(let r=e.length-1;r>=0;r--){let n=e[r];if(t(n))return n}};var uo=E($()),Vi=new oe,ql=new pt("Features/Auth/UseChatGPTPlusChat"),jl="You have successfully upgraded to MaxAI Pro. Enjoy unlimited usage!",ff=(e=!0)=>{let[t,r]=ne(jn),n=ae(Yn),o=ae(vt),i=(0,uo.useRef)(!1),s=async()=>{try{r(c=>({...c,loading:!0}));let a=await Vi.postMessage({event:"Client_getUseChatGPTUserInfo",data:{}});return a.success&&a.data?.email?(r({user:a.data,loading:!1}),!0):!1}catch(a){return ql.error(a),!1}finally{r(a=>({...a,loading:!1}))}},l=async()=>{try{r(u=>({...u,loading:!0}));let a=ue(t.user);if(!a){let u=await Vi.postMessage({event:"Client_getUseChatGPTUserInfo",data:{}});u.success&&u.data?.email&&(a=u.data)}if(!a)return!1;let c=await Vi.postMessage({event:"Client_getUseChatGPTUserSubscriptionInfo",data:{}});if(c.success&&c.data?.name){let u=c.data;u&&r(p=>{let f=ue(p.user);return f||(f=ue(a)),f?(f.role?.name&&f.role.name!==u.name&&u.name!=="free"&&(i.current=!0),{user:{...f,role:u},loading:!1}):{user:null,loading:!1}})}return!1}catch(a){return ql.error(a),!1}finally{r(a=>({...a,loading:!1}))}};return(0,uo.useEffect)(()=>{i.current&&o&&!$l(n,a=>a.text===jl)&&Xt("add",o,0,[{messageId:ie(),type:"system",parentMessageId:void 0,text:jl,extra:{status:"success"}}])},[o,n]),_t(()=>{e&&s()}),ut(()=>{e&&s()}),{userInfo:t,syncUserInfo:s,syncUserSubscriptionInfo:l}},Yl=ff;var qi=E(fi()),Gr=()=>{let{user:e,loading:t}=ae(jn),{syncUserInfo:r,syncUserSubscriptionInfo:n}=Yl(!1),o=(0,$i.useMemo)(()=>{if(e?.chatgpt_expires_at){let s=new Date(e.chatgpt_expires_at),l=new Date,a=s.getTime()-l.getTime(),c=Math.ceil(a/(1e3*3600*24)),u=Math.floor(c/7),p=Math.ceil(c%7),f="";return p>0&&(f="& "+p+" day"+(p>1?"s":"")),u<1?c<=0?a<0?"0":"1 day":c<2?`${c} day`:`${c} days`:u<2?`${u} week ${f}`:`${u} weeks ${f}`}return 0},[e]);return{currentUserPlan:(0,$i.useMemo)(()=>{let s=e?.role?.name||"free";e?.roles?.length&&e.roles.find(c=>c.name==="pro")&&(s="pro");let l=!1;if(e?.chatgpt_expires_at&&s==="free"&&new Date(e.chatgpt_expires_at).getTime()>new Date().getTime()&&(s="pro_gift"),s==="free"&&e?.created_at){let a=(0,qi.default)(e?.created_at);(0,qi.default)().utc().diff(a,"day")<=-1e5&&(s="new_user",l=!0)}return{name:s,isNewUser:l}},[e]),quotaLeftText:o,userInfo:e,loading:t,syncUserInfo:r,syncUserSubscriptionInfo:n}};var Vr={};Hp(Vr,{default:()=>po.default});var po=E(ba());ci(Vr,E(ba()));var Ct=E($());var mf=e=>{let{youtubeLink:t,borderRadius:r=16,cover:n,sx:o}=e,[i,s]=(0,Ct.useState)(!1),[l,a]=(0,Ct.useState)(!1),c=(0,Ct.useMemo)(()=>n?i&&l:!0,[n,i,l]);return _t(()=>{Hr("https://www.youtube.com/t/terms",{parse:"text"}).then(u=>{u.success&&s(!0)}).catch(u=>{})}),Ct.default.createElement(be,{className:"video-container",sx:{"&.video-container":{position:"relative",paddingBottom:"56.25%",height:0},"&.video-container iframe":{borderRadius:r+"px",position:"absolute",top:0,left:0,width:"100%",height:"100%"},"&.video-container img":{borderRadius:r+"px",position:"absolute",top:0,left:0,width:"100%",objectFit:"contain",height:"100%"},...o}},!c&&n&&Ct.default.createElement("img",{src:n,alt:"Youtube video cover"}),Ct.default.createElement("iframe",{title:"YouTube video player",width:"560",height:"315",src:t,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:()=>{a(!0)},style:{visibility:c?"visible":"hidden",width:c?"100%":"0!important",height:c?"100%":"0!important"}}))},Kl=mf;var Ke=E($());zt();var nc=E($()),oc=E(At());var gr=E(kr()),ic=E(Rt());var Xl=E(Wt()),Ql=E(Vt());function Jl(e){return(0,Ql.default)("MuiSkeleton",e)}var gf=(0,Xl.unstable_generateUtilityClasses)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]),hf=gf;var sc=E(Ae()),yf=["animation","className","component","height","style","variant","width"],fo=e=>e,Zl,ec,tc,rc,vf=e=>{let{classes:t,variant:r,animation:n,hasChildren:o,width:i,height:s}=e;return(0,ic.unstable_composeClasses)({root:["root",r,n,o&&"withChildren",o&&!i&&"fitContent",o&&!s&&"heightAuto"]},Jl,t)},bf=(0,gr.keyframes)(Zl||(Zl=fo`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),xf=(0,gr.keyframes)(ec||(ec=fo`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),Tf=ce("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],r.animation!==!1&&t[r.animation],r.hasChildren&&t.withChildren,r.hasChildren&&!r.width&&t.fitContent,r.hasChildren&&!r.height&&t.heightAuto]}})(({theme:e,ownerState:t})=>{let r=Ys(e.shape.borderRadius)||"px",n=Ks(e.shape.borderRadius);return B({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:(0,Xs.alpha)(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em"},t.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${n}${r}/${Math.round(n/.6*10)/10}${r}`,"&:empty:before":{content:'"\\00a0"'}},t.variant==="circular"&&{borderRadius:"50%"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})},({ownerState:e})=>e.animation==="pulse"&&(0,gr.css)(tc||(tc=fo`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),bf),({ownerState:e,theme:t})=>e.animation==="wave"&&(0,gr.css)(rc||(rc=fo`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),xf,(t.vars||t).palette.action.hover)),Cf=nc.forwardRef(function(t,r){let n=Fe({props:t,name:"MuiSkeleton"}),{animation:o="pulse",className:i,component:s="span",height:l,style:a,variant:c="text",width:u}=n,p=Be(n,yf),f=B({},n,{animation:o,component:s,variant:c,hasChildren:!!p.children}),d=vf(f);return(0,sc.jsx)(Tf,B({as:s,ref:r,className:(0,oc.default)(d.root,i),ownerState:f},p,{style:B({width:u,height:l},a)}))}),ji=Cf;function ft(e){for(let t of e){let r=document.querySelector(t);if(r)return r}}var px=e=>{let{containerId:t,presetContainerElement:r,shadowContainerId:n,presetShadowContainerElement:o,webComponent:i=!0}=e,s="customElements"in window,l=document.createElement(s&&i?`maxai-custom-element-${ie()}`:"div");t&&(l.id=t),r&&r(l);let a=l.attachShadow({mode:"open"}),c=document.createElement("style");t&&(c.id=`${t}-emotion-style`);let u=document.createElement("div");return n&&(u.id=n),o&&o(u),a.appendChild(c),a.appendChild(u),{container:l,shadowContainer:u,emotionRoot:c}};function ac(e,t){t.parentNode.insertBefore(e,t.nextSibling)}var Yi={google:{ref:"google",verifier:()=>location.hostname.startsWith("www.google")&&location.pathname.startsWith("/search"),inputQueryFinder:()=>ft(["input[name='q']","textarea[type='search']"])?.value||"",sidebarContainerFinder:()=>{let e=document.querySelector("#rcnt");if(e){let t=e.querySelector("div#rhs[role=complementary]");if(t)return t;let r=e.querySelector("div#rhs");if(r)return r;let n=Sf(),o=e.querySelector("#center_col");return o?ac(n,o):e.appendChild(n),n}},isDarkMode:()=>!!document.querySelector("meta[content=dark]")},bing:{ref:"bing",verifier:()=>location.hostname.includes(".bing.")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("aside > ol#b_context"),inputQueryFinder:()=>{let e=ft(["#sp_requery a","input[name=q]","input.b_searchbox","textarea.b_searchbox"]);return e?.value||e?.textContent||""},customStyle:{margin:"0 -20px 20px"},isDarkMode:()=>!1},baidu:{ref:"baidu",verifier:()=>location.hostname.startsWith("www.baidu"),sidebarContainerFinder:()=>document.querySelector("div#content_right"),inputQueryFinder:()=>{let e=window.bds;return e?.comm?.query?e.comm.query:ft(["input[name=wd]"])?.value||""},watchRouteChange(e){let t=document.getElementById("wrapper_wrapper");new MutationObserver(function(n){for(let o of n)if(o.type==="childList"){for(let i of o.addedNodes)if("id"in i&&i.id==="container"){e();return}}}).observe(t,{childList:!0})},isDarkMode:()=>!1},duckduckgo:{ref:"duckduckgo",verifier:()=>location.hostname==="duckduckgo.com"&&location.pathname==="/",sidebarContainerFinder:()=>document.querySelector("section.js-react-sidebar[data-area=sidebar]"),inputQueryFinder:()=>{let e=ft(["div[data-testid=spelling-message] p a","input#search_form_input"]);return e?.value||e?.textContent||""},isDarkMode:()=>!!document.querySelector("html.dark-header")},yahoo:{ref:"yahoo",verifier:()=>location.hostname.includes("search.yahoo")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("div#results div#right"),inputQueryFinder:()=>ft(["input[name=p]"])?.value||"",isDarkMode:()=>!1},naver:{ref:"naver",verifier:()=>location.hostname.includes("search.naver")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("div#sub_pack"),inputQueryFinder:()=>{let e=ft(["div.dsc_area strong.source","input[name=query]"]);return e?.value||e?.textContent||""},customStyle:{margin:"0 30px 20px 16px"},isDarkMode:()=>!1},yandex:{ref:"yandex",verifier:()=>location.host.includes("yandex")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("div.main__content div#search-result-aside"),inputQueryFinder:()=>ft(["input.HeaderDesktopForm-Input[name=text]"])?.value||"",isDarkMode:()=>!!document.querySelector("meta[name=color-scheme][content=dark]")},sogou:{ref:"sogou",verifier:()=>location.host.includes("sogou")&&(location.pathname.startsWith("/web")||location.pathname.startsWith("/sogou")),sidebarContainerFinder:()=>document.querySelector("div#wrapper div#right"),inputQueryFinder:()=>ft(["input#upquery[name=query]"])?.value||"",isDarkMode:()=>!1},brave:{ref:"brave",verifier:()=>location.host.includes("search.brave")&&location.pathname.startsWith("/search"),sidebarContainerFinder:()=>document.querySelector("aside.sidebar"),inputQueryFinder:()=>{let e=ft(["div.altered-query-text a","input[id=searchbox]"]);return e?.value||e?.textContent||""},isDarkMode:()=>!!document.querySelector("img.theme--dark")}};function mx(){let e=null,t=Object.keys(Yi);for(let r=0;r<t.length;r++){let n=t[r],o=Yi[n].verifier;if(o()){e=n;break}}return{siteName:e,config:e?Yi[e]:null}}function Sf(){let e=document.createElement("div");return e.setAttribute("role","complementary"),e.setAttribute("id","rhs"),e.setAttribute("data-by","webchatgpt"),new URLSearchParams(location.search).get("tbm")==="nws"&&(e.style.marginLeft="30px"),e}function lc(){return document.querySelector(`#${Fa}`)?.shadowRoot?.querySelector(`#${Ha}`)}function bx(e){return e.endsWith("?")||e.endsWith("\uFF1F")||e.endsWith("\u061F")||e.endsWith("\u2E2E")}function xx(e,t){switch(e){case"bing":case"yandex":{t.style.display="inline-flex",t.style.flexDirection="column";break}case"google":case"baidu":case"duckduckgo":case"yahoo":case"naver":case"sogou":case"brave":{t.style.display="flex",t.style.flexDirection="column";break}default:break}}var Tx=async(e,t,{onMessage:r,onError:n})=>new Promise(o=>{let i=e.messageId,s=Nn(async(a,c)=>{if(a==="Client_askChatGPTQuestionResponse"&&c.taskId===i)return c.error?n?.(c.error):c?.data?.text&&r?.(c.data),c.done?(o(!0),s(),{success:!0,message:"ok",data:{}}):{success:!0,message:"ok",data:{}}});new oe({runtime:"client"}).postMessage({event:"SWAI_askAIQuestion",data:{taskId:i,question:e,options:t}})});var Ef=({src:e,alt:t,height:r})=>{let[n,o]=(0,Ke.useState)(null),[i,s]=(0,Ke.useState)(!0),l=(0,Ke.useRef)(ie());return(0,Ke.useEffect)(()=>{let a=()=>{let f=new Image;f.src=e,f.onload=()=>{o(e),s(!1)}},c=new IntersectionObserver(f=>{f.forEach(d=>{d.isIntersecting&&(a(),c.unobserve(d.target))})}),u=`#lazy-image-${l.current}`,p=Lr()?.querySelector(u)||kn()?.querySelector(u)||lc()?.querySelector(u)||document.querySelector(u);return p&&c.observe(p),()=>{p&&c.unobserve(p)}},[e]),Ke.default.createElement(Ke.default.Fragment,null,i?Ke.default.createElement(ji,{id:`lazy-image-${l.current}`,variant:"rectangular",height:r}):Ke.default.createElement("img",{src:n,alt:t,height:r}))},cc=Ef;var hr=ar(async(e,t)=>{try{let r=t;if(t==="PAGE_SUMMARY")switch(eo()){case"PDF_CRX_SUMMARY":r+="(PDF)";break;case"PAGE_SUMMARY":r+="(DEFAULT)";break;case"YOUTUBE_VIDEO_SUMMARY":r+="(YOUTUBE)";break;case"DEFAULT_EMAIL_SUMMARY":r+="(EMAIL)";break;default:break}await new oe().postMessage({event:"Client_emitPricingHooks",data:{action:e,name:r}})}catch{}},1e3);var $r=E($());var If=()=>{let[e]=ne(An),[t,r]=(0,$r.useState)(!1),[n,o]=(0,$r.useState)(!1),[i,s]=ne(qn);return _t(()=>{o(!0),Mt().then(l=>{l&&s(a=>({...a,isLogin:!0})),r(!0),o(!1)}).catch(()=>{r(!0),o(!1)})}),ut(()=>{Mt().then(l=>{s(l?a=>({...a,isLogin:!0}):a=>({...a,isLogin:!1}))})}),(0,$r.useEffect)(()=>{e.open&&Mt().then(l=>{s(l?a=>({...a,isLogin:!0}):a=>({...a,isLogin:!1}))})},[e.open]),{isLogin:i.isLogin,loaded:t,loading:n}};var Ki=E($());var Xi=e=>{let{t}=xe(["common","client"]);return(0,Ki.useMemo)(()=>{let r=Ei(e);return{title:r.title(t),description:r.description(t),ctaButtonText:r.ctaButtonText(t),ctaButtonLink:r.ctaButtonLink,ctaButtonOnClick:r.ctaButtonOnClick,imageUrl:r.imageUrl,videoUrl:r.videoUrl,sceneType:e}},[e,t])},uc=()=>{let{t:e}=xe(["common","client"]);return(0,Ki.useMemo)(()=>{let t={};return Ua.forEach(r=>{let n=Ei(r),o={title:n.title(e),description:n.description(e),ctaButtonText:n.ctaButtonText(e),ctaButtonLink:n.ctaButtonLink,ctaButtonOnClick:n.ctaButtonOnClick,imageUrl:n.imageUrl,videoUrl:n.videoUrl,sceneType:r};t[r]=o}),t},[e])};var wf=e=>{let{sceneType:t,allowedRoles:r,onPermission:n,BoxProps:o,TooltipProps:i,children:s}=e,l=Xi(t),[a,c]=(0,se.useState)(void 0),u=(0,se.useMemo)(()=>a||l,[l,a]),{currentUserPlan:p}=Gr(),[f,d]=(0,se.useState)(!1),h=(0,se.useRef)(ie());return(0,se.useEffect)(()=>{let v=y=>{y.detail.id!==h.current&&d(y.detail.open)};return window.addEventListener("maxAIPermissionWrapperCustomEvent",v),()=>{window.removeEventListener("maxAIPermissionWrapperCustomEvent",v)}},[]),(0,se.useMemo)(()=>!!(r.find(v=>v===p.name)||r.find(v=>v==="new_user")&&p?.isNewUser),[p,r])?se.default.createElement(se.default.Fragment,null,s):se.default.createElement(zn,{arrow:!0,open:f,PopperProps:{sx:{"& > div":{maxWidth:316,p:1}},...i?.PopperProps},title:se.default.createElement(po.default,{mouseEvent:"onMouseDown",onClickAway:()=>{d(!1)}},se.default.createElement(z,{spacing:1,component:"div",width:300},u.videoUrl&&se.default.createElement(Kl,{borderRadius:4,cover:u.imageUrl,youtubeLink:u.videoUrl}),!u.videoUrl&&u.imageUrl&&se.default.createElement(be,{sx:{width:"100%",height:"auto",borderRadius:"4px",overflow:"hidden","& img":{width:"100%",height:"auto"}}},se.default.createElement(cc,{height:140,src:u.imageUrl,alt:`${u.title} img`})),se.default.createElement(q,{fontSize:"14px",fontWeight:600,textAlign:"left",color:"rgba(255,255,255,.87)"},u.title),se.default.createElement(q,{fontSize:"12px",fontWeight:400,textAlign:"left",color:"rgba(255,255,255,.87)"},u.description),u.ctaButtonText&&se.default.createElement(ze,{target:"_blank",href:u.ctaButtonLink,onClick:v=>{v.preventDefault(),window.open(u.ctaButtonLink,"_blank"),u.ctaButtonOnClick?.(v),d(!1),hr("click",l.sceneType)}},se.default.createElement(jt,{fullWidth:!0,variant:"contained"},u.ctaButtonText)))),...i},se.default.createElement(be,{...o},se.default.createElement(be,null,se.default.Children.map(s,v=>{if(se.default.isValidElement(v)){let y={...v.props,...v.props.onClick&&{onClick:async(b,...x)=>{let I=!1;if(b?.stopPropagation?.(),b?.preventDefault?.(),n){let{success:w,cardSettings:D}=await n(p,l,[b,...x]);c({...l,...D}),I=w}let T=new CustomEvent("maxAIPermissionWrapperCustomEvent",{detail:{id:h.current,open:!1}});window.dispatchEvent(T),d(!I),I?v.props?.onClick?.(b,...x):hr("show",l.sceneType)}},...v.props.onChange&&{onChange:async(b,...x)=>{let I=!1;if(b?.stopPropagation?.(),b?.preventDefault?.(),n){let{success:w,cardSettings:D}=await n(p,l,[b,...x]);c({...l,...D}),I=w}let T=new CustomEvent("maxAIPermissionWrapperCustomEvent",{detail:{id:h.current,open:!1}});window.dispatchEvent(T),d(!I),I?v.props?.onChange?.(b,...x):hr("show",l.sceneType)}}};return se.default.cloneElement(v,y)}return v}))))},mo=wf;var Qi=(e,t)=>{let r=0,n=e.find((o,i)=>o.value===t?(r=i,!0):!1);return[t,n,r]},Ji=({defaultValue:e,emptyText:t,options:r,renderLabel:n,labelProp:o,MenuProps:i,sx:s,placeholder:l,onChange:a,loading:c=!1,renderFooter:u,renderHeader:p,label:f,labelSx:d,onPermission:h,displayLoading:m=!0,...v})=>{let[y,b]=(0,ge.useState)(e||""),[x,I]=ge.default.useState(!1),T=()=>{I(!1)},w=()=>{I(!0)},D=(0,ge.useMemo)(()=>!ta(r)&&!c,[r,c]),N=(C,g,k)=>n?n(C,g||{},k):ge.default.createElement(Ba,{sx:{fontSize:"14px",color:"text.primary"}},ge.default.createElement(q,{sx:{fontSize:"14px",color:"text.primary"},component:"span"},g.label));(0,ge.useEffect)(()=>{!y&&e&&b(e)},[e]),(0,ge.useEffect)(()=>{r.length&&!c&&y&&(r.find(g=>g.value===y)||b(""))},[r,y,c]);let _=(0,ge.useMemo)(()=>r.map((C,g)=>C.origin.permission?ge.default.createElement(mo,{key:g,sceneType:C.origin.permission.sceneType,allowedRoles:C.origin.permission.roles,onPermission:h},ge.default.createElement(Tt,{sx:{...o},selected:C.value===v.value,disabled:C.origin.disabled,value:C.value,onClick:k=>{C.origin.disabled&&(k.stopPropagation(),k.preventDefault()),b(C.value),a&&a(...Qi(r,C.value)),T()}},N(C.value,C,g))):ge.default.createElement(Tt,{sx:{...o},key:g,disabled:C.origin.disabled,value:C.value,onClick:k=>{C.origin.disabled&&(k.stopPropagation(),k.preventDefault())}},N(C.value,C,g))),[r,v.value,N]);return ge.default.createElement(kt,null,f&&ge.default.createElement(Lt,{id:"demo-simple-select-label",sx:{fontSize:"14px",color:"text.primary",...d}},f),ge.default.createElement(Ot,{open:x,onClose:T,onOpen:w,label:f,sx:{width:220,lineHeight:"40px",padding:"8px 12px",height:40,fontSize:"14px","& > .use-chat-gpt-ai--MuiSelect-select":{padding:0,"& > div":{margin:0}},...s},value:y,onChange:(C,g)=>{g.props.disabled||(b(C.target.value),a&&a(...Qi(r,C.target.value)))},renderValue:C=>!C&&l||r.length===0?ge.default.createElement("em",null,l):N(...Qi(r,C)),MenuProps:i,displayEmpty:!0,...v},c&&m&&ge.default.createElement(Gn,{size:16,loading:c}),!D&&p,!D&&_,!D&&u,D&&ge.default.createElement(Gl,{emptyText:t})))};var Pf=()=>{let{t:e}=xe(["common","client"]),{aiProviderModel:t,aiProviderModels:r,loading:n,updateAIProviderModel:o,aiProvider:i}=ro(),s=(0,he.useMemo)(()=>Vl(r,{labelKey:"title",valueKey:"value"}),[r]);return(0,he.useEffect)(()=>{if(t&&r.length>0){let l=r.every(c=>c.value!==t),a=r.find(c=>c.value===t)?.disabled;if(l||a){for(let c=r.length-1;c>=0;c--)if(!r[c].disabled){o(r[c].value).then().catch();break}}}},[r,t]),he.default.createElement(Ji,{displayLoading:!1,MenuProps:{elevation:0,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},MenuListProps:{sx:{border:"1px solid",borderColor:"customColor.borderColor"}}},onPermission:async()=>(i==="USE_CHAT_GPT_PLUS"&&await o(Fn[0].value),{success:!1}),sx:{width:"100%"},size:"small",loading:n,label:e("common:model"),labelSx:{fontSize:16},options:s,value:t,onChange:async l=>{await o(l)},labelProp:{p:0,pointerEvents:"auto!important"},renderValue:l=>{let a=s.find(c=>c.value===l);return he.default.createElement(z,{sx:{padding:"6px 0"},direction:"row",alignItems:"center",spacing:1},he.default.createElement(q,{component:"span",fontSize:14,color:"text.primary",textAlign:"left",noWrap:!0},e(a?.label||"client:provider__model__selector__placeholder")))},renderLabel:(l,a)=>{let c=a.origin;return he.default.createElement(ur,{placement:"left",PopperProps:{sx:{zIndex:2147483620}},componentsProps:{tooltip:{sx:{border:"1px solid rgb(224,224,224)",bgcolor:"background.paper",p:1}}},title:he.default.createElement(z,{spacing:1,width:"160px"},he.default.createElement(z,{textAlign:"left",width:"100%",spacing:2},c.disabled&&he.default.createElement(q,{fontSize:"14px",color:"text.primary",textAlign:"left",fontWeight:700},e("client:provider__model__selector__disabled__description")),he.default.createElement(q,{fontSize:"14px",color:"text.primary",textAlign:"left",fontWeight:"bold"},c?.title)),c.tags.length>0&&he.default.createElement(z,{direction:"row",flexWrap:"wrap",gap:"4px"},c.tags.map(u=>he.default.createElement(Ii,{sx:{fontSize:"12px",height:"18px",textTransform:"capitalize",flexShrink:0,"& > span":{px:"6px"}},key:u,label:u,color:"primary",size:"small",variant:"outlined"}))),c.descriptions.map((u,p)=>he.default.createElement(z,{spacing:.5,key:p},he.default.createElement(q,{fontSize:"12px",color:"text.secondary",textAlign:"left"},u.label(e),":"),he.default.createElement(q,{fontSize:"12px",color:"text.primary",textAlign:"left"},u.value(e)))))},he.default.createElement(z,{sx:{padding:"6px 16px"},width:"100%",direction:"row",alignItems:"center",spacing:1,onClick:u=>{c.disabled&&(u.stopPropagation(),u.preventDefault())}},he.default.createElement(q,{component:"span",fontSize:14,color:"text.primary",textAlign:"left",noWrap:!0},e(c.title||"client:provider__model__selector__placeholder")),c.titleTag&&he.default.createElement(Ii,{sx:{ml:1,textTransform:"capitalize",fontSize:"14px",flexShrink:0},label:c.titleTag,color:"primary",size:"small",variant:"outlined"})))}})},pc=Pf;var it=E($());zt();var qr=E($());var vo=E(At());var ke=E(Rt()),xc=E(Up()),Jt=E(kr());var dc=E(Rt()),_f=e=>!e||!(0,dc.isHostComponent)(e),fc=_f;var yo=E($());var ho=E(At());var mc=E(Wt()),gc=E(Vt());function hc(e){return(0,gc.default)("MuiSlider",e)}var Af=(0,mc.unstable_generateUtilityClasses)("MuiSlider",["root","active","colorPrimary","colorSecondary","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),He=Af;var go=E(Ae()),yc=E(Ae()),Rf=e=>{let{open:t}=e;return{offset:(0,ho.default)(t&&He.valueLabelOpen),circle:He.valueLabelCircle,label:He.valueLabelLabel}};function Zi(e){let{children:t,className:r,value:n}=e,o=Rf(e);return t?yo.cloneElement(t,{className:(0,ho.default)(t.props.className)},(0,yc.jsxs)(yo.Fragment,{children:[t.props.children,(0,go.jsx)("span",{className:(0,ho.default)(o.offset,r),"aria-hidden":!0,children:(0,go.jsx)("span",{className:o.circle,children:(0,go.jsx)("span",{className:o.label,children:n})})})]})):null}var St=E(Ae()),es=E(Ae()),Mf=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"],vc=(e,t,r)=>(e-t)*100/(r-t);function bc(e){return e}var kf=ce("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`color${je(r.color)}`],r.size!=="medium"&&t[`size${je(r.size)}`],r.marked&&t.marked,r.orientation==="vertical"&&t.vertical,r.track==="inverted"&&t.trackInverted,r.track===!1&&t.trackFalse]}})(({theme:e,ownerState:t})=>B({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[t.color].main,WebkitTapHighlightColor:"transparent"},t.orientation==="horizontal"&&B({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},t.size==="small"&&{height:2},t.marked&&{marginBottom:20}),t.orientation==="vertical"&&B({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},t.size==="small"&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${He.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${He.dragging}`]:{[`& .${He.thumb}, & .${He.track}`]:{transition:"none"}}}));var Lf=ce("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})(({ownerState:e})=>B({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},e.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track==="inverted"&&{opacity:1}));var Of=ce("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e,ownerState:t})=>{let r=e.palette.mode==="light"?(0,Jt.lighten)(e.palette[t.color].main,.62):(0,Jt.darken)(e.palette[t.color].main,.5);return B({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{border:"none"},t.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track===!1&&{display:"none"},t.track==="inverted"&&{backgroundColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:r,borderColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:r})});var Nf=ce("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.thumb,t[`thumbColor${je(r.color)}`],r.size!=="medium"&&t[`thumbSize${je(r.size)}`]]}})(({theme:e,ownerState:t})=>B({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{width:12,height:12},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":B({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},t.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${He.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:(0,Jt.alpha)(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${He.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:(0,Jt.alpha)(e.palette[t.color].main,.16)}`},[`&.${He.disabled}`]:{"&:hover":{boxShadow:"none"}}}));var Df=ce(Zi,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e,ownerState:t})=>B({[`&.${He.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:"translateY(-100%) scale(0)",position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},t.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},t.orientation==="vertical"&&{right:"30px",top:"24px",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",right:"-20%",top:"25%"}},t.size==="small"&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}));var Bf=ce("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>di(e)&&e!=="markActive",overridesResolver:(e,t)=>{let{markActive:r}=e;return[t.mark,r&&t.markActive]}})(({theme:e,ownerState:t,markActive:r})=>B({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},r&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}));var Ff=ce("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>di(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e,ownerState:t,markLabelActive:r})=>B({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},t.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},t.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},r&&{color:(e.vars||e).palette.text.primary}));var Hf=e=>{let{disabled:t,dragging:r,marked:n,orientation:o,track:i,classes:s,color:l,size:a}=e,c={root:["root",t&&"disabled",r&&"dragging",n&&"marked",o==="vertical"&&"vertical",i==="inverted"&&"trackInverted",i===!1&&"trackFalse",l&&`color${je(l)}`,a&&`size${je(a)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",a&&`thumbSize${je(a)}`,l&&`thumbColor${je(l)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,ke.unstable_composeClasses)(c,hc,s)},Uf=({children:e})=>e,Wf=qr.forwardRef(function(t,r){var n,o,i,s,l,a,c,u,p,f,d,h,m,v,y,b,x,I,T,w,D,N,_,C;let g=Fe({props:t,name:"MuiSlider"}),O=Rn().direction==="rtl",{"aria-label":P,"aria-valuetext":R,"aria-labelledby":W,component:G="span",components:A={},componentsProps:F={},color:L="primary",classes:U,className:Z,disableSwap:X=!1,disabled:Q=!1,getAriaLabel:re,getAriaValueText:M,marks:te=!1,max:K=100,min:ee=0,orientation:Ce="horizontal",size:j="medium",step:_e=1,scale:le=bc,slotProps:V,slots:H,track:me="normal",valueLabelDisplay:pe="off",valueLabelFormat:Ne=bc}=g,or=Be(g,Mf),We=B({},g,{isRtl:O,max:K,min:ee,classes:U,disabled:Q,disableSwap:X,orientation:Ce,marks:te,color:L,size:j,step:_e,scale:le,track:me,valueLabelDisplay:pe,valueLabelFormat:Ne}),{axisProps:Sn,getRootProps:Sp,getHiddenInputProps:Ep,getThumbProps:Ip,open:wp,active:Ko,axis:En,focusedThumbIndex:Xo,range:Bs,dragging:Pp,marks:Qo,values:Ze,trackOffset:_p,trackLeap:Ap}=(0,xc.useSlider)(B({},We,{ref:r}));We.marked=Qo.length>0&&Qo.some(ye=>ye.label),We.dragging=Pp,We.focusedThumbIndex=Xo;let et=Hf(We),Jo=(n=(o=H?.root)!=null?o:A.Root)!=null?n:kf,Fs=(i=(s=H?.rail)!=null?s:A.Rail)!=null?i:Lf,Hs=(l=(a=H?.track)!=null?a:A.Track)!=null?l:Of,Us=(c=(u=H?.thumb)!=null?u:A.Thumb)!=null?c:Nf,Ws=(p=(f=H?.valueLabel)!=null?f:A.ValueLabel)!=null?p:Df,Zo=(d=(h=H?.mark)!=null?h:A.Mark)!=null?d:Bf,ei=(m=(v=H?.markLabel)!=null?v:A.MarkLabel)!=null?m:Ff,zs=(y=(b=H?.input)!=null?b:A.Input)!=null?y:"input",ti=(x=V?.root)!=null?x:F.root,Rp=(I=V?.rail)!=null?I:F.rail,ri=(T=V?.track)!=null?T:F.track,ni=(w=V?.thumb)!=null?w:F.thumb,oi=(D=V?.valueLabel)!=null?D:F.valueLabel,Mp=(N=V?.mark)!=null?N:F.mark,kp=(_=V?.markLabel)!=null?_:F.markLabel,Lp=(C=V?.input)!=null?C:F.input,Op=(0,ke.useSlotProps)({elementType:Jo,getSlotProps:Sp,externalSlotProps:ti,externalForwardedProps:or,additionalProps:B({},fc(Jo)&&{as:G}),ownerState:B({},We,ti?.ownerState),className:[et.root,Z]}),Np=(0,ke.useSlotProps)({elementType:Fs,externalSlotProps:Rp,ownerState:We,className:et.rail}),Dp=(0,ke.useSlotProps)({elementType:Hs,externalSlotProps:ri,additionalProps:{style:B({},Sn[En].offset(_p),Sn[En].leap(Ap))},ownerState:B({},We,ri?.ownerState),className:et.track}),ii=(0,ke.useSlotProps)({elementType:Us,getSlotProps:Ip,externalSlotProps:ni,ownerState:B({},We,ni?.ownerState)}),Bp=(0,ke.useSlotProps)({elementType:Ws,externalSlotProps:oi,ownerState:B({},We,oi?.ownerState),className:et.valueLabel}),si=(0,ke.useSlotProps)({elementType:Zo,externalSlotProps:Mp,ownerState:We,className:et.mark}),ai=(0,ke.useSlotProps)({elementType:ei,externalSlotProps:kp,ownerState:We}),Fp=(0,ke.useSlotProps)({elementType:zs,getSlotProps:Ep,externalSlotProps:Lp,ownerState:We});return(0,es.jsxs)(Jo,B({},Op,{children:[(0,St.jsx)(Fs,B({},Np)),(0,St.jsx)(Hs,B({},Dp)),Qo.filter(ye=>ye.value>=ee&&ye.value<=K).map((ye,Se)=>{let li=vc(ye.value,ee,K),In=Sn[En].offset(li),ht;return me===!1?ht=Ze.indexOf(ye.value)!==-1:ht=me==="normal"&&(Bs?ye.value>=Ze[0]&&ye.value<=Ze[Ze.length-1]:ye.value<=Ze[0])||me==="inverted"&&(Bs?ye.value<=Ze[0]||ye.value>=Ze[Ze.length-1]:ye.value>=Ze[0]),(0,es.jsxs)(qr.Fragment,{children:[(0,St.jsx)(Zo,B({"data-index":Se},si,!(0,ke.isHostComponent)(Zo)&&{markActive:ht},{style:B({},In,si.style),className:(0,vo.default)(si.className,ht&&et.markActive)})),ye.label!=null?(0,St.jsx)(ei,B({"aria-hidden":!0,"data-index":Se},ai,!(0,ke.isHostComponent)(ei)&&{markLabelActive:ht},{style:B({},In,ai.style),className:(0,vo.default)(et.markLabel,ai.className,ht&&et.markLabelActive),children:ye.label})):null]},Se)}),Ze.map((ye,Se)=>{let li=vc(ye,ee,K),In=Sn[En].offset(li),ht=pe==="off"?Uf:Ws;return(0,St.jsx)(qr.Fragment,{children:(0,St.jsx)(ht,B({},!(0,ke.isHostComponent)(ht)&&{valueLabelFormat:Ne,valueLabelDisplay:pe,value:typeof Ne=="function"?Ne(le(ye),Se):Ne,index:Se,open:wp===Se||Ko===Se||pe==="on",disabled:Q},Bp,{children:(0,St.jsx)(Us,B({"data-index":Se,"data-focusvisible":Xo===Se},ii,{className:(0,vo.default)(et.thumb,ii.className,Ko===Se&&et.active,Xo===Se&&et.focusVisible),style:B({},In,{pointerEvents:X&&Ko!==Se?"none":void 0},ii.style),children:(0,St.jsx)(zs,B({"data-index":Se,"aria-label":re?re(Se):P,"aria-valuenow":le(ye),"aria-labelledby":W,"aria-valuetext":M?M(le(ye),Se):R,value:Ze[Se]},Fp))}))}))},Se)})]}))}),ts=Wf;var zf=e=>{let{provider:t,authSceneType:r}=e,{t:n}=xe(["common","client"]),{saveThirdProviderSettings:o,currentThirdProviderSettings:i}=to(),[s,l]=it.default.useState(1),a=it.default.useRef(!1);(0,it.useEffect)(()=>{a.current||(a.current=!0,l(i.temperature))},[i.temperature]);let c=ar(async u=>{await o(t,{temperature:u})},200);return(0,it.useEffect)(()=>{c(s)},[s]),it.default.createElement(kt,{fullWidth:!0},it.default.createElement(Lt,{id:"max-ai__ai-provider-temperature-select-label"},`${n("client:provider__temperature__label")}: ${i.temperature}`),it.default.createElement(Ot,{sx:{"& > div":{p:"8px !important"},"& > svg":{display:"none"}},open:!1,id:"max-ai__ai-provider-temperature-select-label",value:s,label:`${n("client:provider__temperature__label")}: ${s}`,renderValue:u=>it.default.createElement(mo,{sceneType:r||"MAXAI_CHATGPT_TEMPERATURE",allowedRoles:r?["pro","pro_gift","new_user"]:["free","pro","pro_gift","new_user"],BoxProps:{sx:{"& > div":{display:"flex",flexDirection:"column",width:"100%"}}},onPermission:async p=>p.name==="free"?(l(1),{success:!1}):{success:!0}},it.default.createElement(ts,{size:"small",marks:[{value:0,label:n("client:provider__temperature__precise__title")},{value:1,label:n("client:provider__temperature__balanced__title")},{value:2,label:n("client:provider__temperature__creative__title")}],min:0,max:2,step:.1,value:s,onChange:async(p,f)=>{l(f)},sx:{width:"100%",mx:"auto",mb:0,"& .use-chat-gpt-ai--MuiSlider-markLabel":{color:"text.primary",fontSize:"12px",fontWeight:"400"},"& > span[aria-hidden]":{top:"20px"},'& > span[aria-hidden][data-index="0"]':{left:"21px!important"},'& > span[aria-hidden][data-index="2"]':{left:"calc(100% - 22px) !important"}}}))}))},rs=zf;var J=E($());zt();var Yr=E($());var Rc=E(At());var Mc=E(Rt()),kc=E(kr());var yC=E($());var Tc=E(Ae()),Cc=cr((0,Tc.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");var xC=E($());var Sc=E(Ae()),Ec=cr((0,Sc.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");var SC=E($());var Ic=E(Ae()),wc=cr((0,Ic.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var Pc=E(Wt()),_c=E(Vt());function Ac(e){return(0,_c.default)("MuiCheckbox",e)}var Gf=(0,Pc.unstable_generateUtilityClasses)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),jr=Gf;var Kr=E(Ae()),Vf=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],$f=e=>{let{classes:t,indeterminate:r,color:n}=e,o={root:["root",r&&"indeterminate",`color${je(n)}`]},i=(0,Mc.unstable_composeClasses)(o,Ac,t);return B({},t,i)},qf=ce(Ga,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,r.color!=="default"&&t[`color${je(r.color)}`]]}})(({theme:e,ownerState:t})=>B({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,kc.alpha)(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${jr.checked}, &.${jr.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${jr.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),jf=(0,Kr.jsx)(Ec,{}),Yf=(0,Kr.jsx)(Cc,{}),Kf=(0,Kr.jsx)(wc,{}),Xf=Yr.forwardRef(function(t,r){var n,o;let i=Fe({props:t,name:"MuiCheckbox"}),{checkedIcon:s=jf,color:l="primary",icon:a=Yf,indeterminate:c=!1,indeterminateIcon:u=Kf,inputProps:p,size:f="medium",className:d}=i,h=Be(i,Vf),m=c?u:a,v=c?u:s,y=B({},i,{color:l,indeterminate:c,size:f}),b=$f(y);return(0,Kr.jsx)(qf,B({type:"checkbox",inputProps:B({"data-indeterminate":c},p),icon:Yr.cloneElement(m,{fontSize:(n=m.props.fontSize)!=null?n:f}),checkedIcon:Yr.cloneElement(v,{fontSize:(o=v.props.fontSize)!=null?o:f}),ownerState:y,ref:r,className:(0,Rc.default)(b.root,d)},h,{classes:b}))}),ns=Xf;var Lc=E(os()),Oc=E(Fi());var tm=()=>J.default.createElement(Lc.default,{sx:{color:"text.secondary",fontSize:"16px",position:"absolute",right:"8px",top:"calc(50% - 8px)"}}),Nc=()=>{let e=ae(Kn),[t,r]=(0,J.useState)(!1),[n,o]=vl("OPENAI"),i=(0,J.useMemo)(()=>n?.plugins||[],[n]),s=(0,J.useMemo)(()=>n?.pluginOptions&&n?.model==="gpt-4-plugins"?lr(n.pluginOptions,"id").filter(a=>a.user_settings.is_installed):[],[n]);(0,J.useEffect)(()=>{if(n?.model==="gpt-4-plugins"){let a=i.filter(c=>s.find(u=>u.id===c));a.length!==i.length&&o({plugins:a})}},[s,i,n?.model]);let l=()=>{r(!0),setTimeout(()=>{r(!1)},1e3)};return J.default.createElement(J.default.Fragment,null,s.length>0?J.default.createElement(kt,{size:"small",sx:{height:40,maxWidth:400},fullWidth:!0},J.default.createElement(Lt,{sx:{fontSize:"16px"},id:"ChatGPTPluginsSelectorLabel"},J.default.createElement("span",{style:{fontSize:"16px"}},i.length>0?"Plugins":"No plugins enabled")),J.default.createElement(Ot,{sx:{height:40,p:0},value:n?.plugins||[],multiple:!0,disabled:e.length>0,MenuProps:{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},elevation:0,MenuListProps:{sx:{padding:0,width:320,maxHeight:"300px",overflowY:"auto","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px",borderRadius:"3px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{borderRadius:"3px",backgroundColor:"rgba(0,0,0,0.2)"},position:"relative",border:"1px solid",borderColor:"customColor.borderColor"}}},onChange:async a=>{if(a.target.value.length>3){l();return}let c=a.target.value;await o({plugins:c})},renderValue:a=>J.default.createElement(z,{direction:"row",alignItems:"center",width:320,spacing:.5},a.length>0?a.map(c=>{let u=s.find(d=>d.id===c),p=u?.manifest?.name_for_human||u?.manifest?.name_for_model||u?.namespace,f=u?.manifest?.logo_url;return u&&f?J.default.createElement("img",{key:u.id,width:16,height:16,alt:p,src:f}):null}):J.default.createElement(q,{textAlign:"left",noWrap:!0,fontSize:"14px",color:"text.primary"},"No plugins enabled")),IconComponent:tm,labelId:"ChatGPTPluginsSelectorLabel",label:"Model"},J.default.createElement(be,{component:"div",className:t?"error":"",sx:{display:"flex",alignItems:"center",p:1,bgcolor:"background.paper",position:"sticky",top:0,zIndex:1,justifyContent:"center",fontSize:"14px",color:"text.primary","&.error":{backgroundColor:"error.light",color:"error.dark"}}},i.length,"/3 Enabled"),s.map(a=>{let c=a.manifest?.name_for_human||a.manifest?.name_for_model||a.namespace,u=a.manifest?.description_for_human||a.manifest?.description_for_model||"";return J.default.createElement(Tt,{key:a.id,value:a.id,sx:{p:0}},J.default.createElement(ur,{placement:"left",componentsProps:{tooltip:{sx:{border:"1px solid rgb(245,245,245)",bgcolor:"background.paper",p:1}}},title:J.default.createElement(z,{width:"320px"},a.manifest?.logo_url&&J.default.createElement("img",{width:70,height:70,alt:c+" logo",src:a.manifest.logo_url,style:{flexShrink:0}}),J.default.createElement(z,{width:"100%",direction:"row",alignItems:"center",spacing:1,my:2},J.default.createElement(q,{fontSize:"14px",color:"text.primary",textAlign:"left"},c)),J.default.createElement(q,{fontSize:"12px",color:"text.secondary",textAlign:"left"},u))},J.default.createElement(z,{width:320,sx:{padding:"0 16px"},direction:"row",alignItems:"center",spacing:1},a.manifest?.logo_url&&J.default.createElement("img",{width:24,height:24,alt:c+" logo",src:a.manifest.logo_url,style:{flexShrink:0}}),J.default.createElement(q,{flex:1,width:0,textAlign:"left",noWrap:!0,fontSize:"14px",color:"text.primary"},c),J.default.createElement(ns,{sx:{flexShrink:0},checked:n?.plugins?.includes(a.id)}))))}),J.default.createElement(Tt,{value:"",onClick:a=>{a.preventDefault(),a.stopPropagation()},sx:{p:"0!important"}},J.default.createElement(z,{width:320,sx:{padding:"12px 30px 12px 16px"},direction:"row",alignItems:"center",spacing:1,onClick:async a=>{a.preventDefault(),a.stopPropagation(),await Ln({key:"chatgpt"})}},J.default.createElement(q,{flex:1,width:0,textAlign:"left",noWrap:!0,fontSize:"14px",color:"text.primary"},"Plugin store"),J.default.createElement(Oc.default,{sx:{color:"text.primary",fontSize:"16px"}}))))):null)};var Ie=E($());var Dc=E(os());var rm=()=>Ie.default.createElement(Dc.default,{sx:{color:"text.secondary",fontSize:"16px",position:"absolute",right:"8px",top:"calc(50% - 8px)"}}),nm=()=>{let{t:e}=xe(["common","client"]),{cleanConversation:t}=fr(),{loading:r}=ae(dt),[n,o]=(0,Ie.useState)("balanced");return _t(()=>{qt("BING").then(i=>{i?.conversationStyle&&o(i.conversationStyle)})}),ut(()=>{qt("BING").then(i=>{i?.conversationStyle&&o(i.conversationStyle)})}),Ie.default.createElement(kt,{size:"small",sx:{height:40}},Ie.default.createElement(Lt,{sx:{fontSize:"16px"},id:"BingConversationStyleSelectorLabel"},Ie.default.createElement("span",{style:{fontSize:"16px"}},e("client:provider__bing_web_app__conversation_style__title"))),Ie.default.createElement(Ot,{disabled:r,MenuProps:{elevation:0,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},MenuListProps:{sx:{border:"1px solid",borderColor:"customColor.borderColor"}}},sx:{fontSize:"14px","& > fieldset":{"& > legend":{span:{width:110}}}},IconComponent:rm,labelId:"BingConversationStyleSelectorLabel",label:e("client:provider__bing_web_app__conversation_style__title"),value:n,onChange:async i=>{try{await Nr("BING",{conversationStyle:i.target.value}),await t(),o(i.target.value)}catch{}},renderValue:i=>{let s=yi.find(l=>l.value===i);return Ie.default.createElement(z,{direction:"row",width:160,alignItems:"center",spacing:1},Ie.default.createElement(q,{component:"span",fontSize:14,color:"text.primary",textAlign:"left",noWrap:!0},s?.label?e(s.label):"Select conversation style"))}},yi.map(i=>Ie.default.createElement(Tt,{value:i.value,key:i?.value,sx:{p:0}},Ie.default.createElement(ur,{placement:"left",componentsProps:{tooltip:{sx:{border:"1px solid rgb(245,245,245)",bgcolor:"background.paper",p:1}}},title:Ie.default.createElement(z,{spacing:1,width:"160px"},Ie.default.createElement(z,{direction:"row",width:"100%",alignItems:"center",spacing:1},Ie.default.createElement(q,{fontSize:"14px",color:"text.primary",textAlign:"left"},e(i.label))),Ie.default.createElement(q,{fontSize:"12px",color:"text.primary",textAlign:"left"},e(i.description)))},Ie.default.createElement(z,{width:160,sx:{padding:"6px 16px"},direction:"row",alignItems:"center",spacing:1},Ie.default.createElement(q,{component:"span",fontSize:14,color:"text.primary",textAlign:"left",noWrap:!0},i?.label?e(i.label):"Select conversation style")))))))},Bc=nm;var om=e=>{let{aiProviderOption:t}=e;return Zt.default.createElement(oo,{aiProviderOption:t,boxSx:{gap:"8px","& > .use-chat-gpt-ai--MuiFormControl-root + .use-chat-gpt-ai--MuiFormControl-root":{mt:"8px"}}},t.value==="OPENAI_API"&&Zt.default.createElement(rs,{provider:"OPENAI_API"}),t.value==="USE_CHAT_GPT_PLUS"&&Zt.default.createElement(rs,{provider:"USE_CHAT_GPT_PLUS",authSceneType:"MAXAI_CHATGPT_TEMPERATURE"}),t.value==="OPENAI"&&Zt.default.createElement(Nc,null),t.value==="BING"&&Zt.default.createElement(Bc,null),Zt.default.createElement(pc,null))},Fc=om;var im=e=>{let{sx:t,iconSize:r=20,closeAble:n,onClose:o}=e,{t:i}=xe(["common","client"]),{loading:s}=ae(dt),l=ae(Nt),{provider:a,updateChatGPTProvider:c,loading:u}=Tl(),p=(0,we.useMemo)(()=>s||u,[s,u]),f=(0,we.useMemo)(()=>Fr.find(d=>d.value===a),[a]);return we.default.createElement(be,{id:n?"MaxAIProviderSelectorCard":"",component:"div",sx:{borderRadius:"4px",border:"1px solid #EBEBEB",boxShadow:"0px 4px 8px 0px rgba(0, 0, 0, 0.16)",width:434,display:"flex",alignItems:"stretch",justifyContent:"center",flexDirection:"row",...t}},we.default.createElement(z,{sx:{p:1,width:248,flexShrink:0,borderRight:"1px solid #EBEBEB",alignItems:"stretch",boxSizing:"border-box"}},we.default.createElement(Gn,{loadingText:i(s?"client:floating_menu__input__running_placeholder":"common:loading"),loading:p,size:24,sx:{width:248}},f&&l.status!=="success"&&we.default.createElement(Sl,{aiProviderOption:f}),f&&l.status==="success"&&we.default.createElement(Fc,{aiProviderOption:f}))),we.default.createElement(z,{sx:{width:0,flex:1}},we.default.createElement(La,{component:"nav",sx:{py:0,pt:1}},Fr.map(d=>we.default.createElement(Ti,{id:`max-ai__ai-provider-selector__${d.value}`,className:`max-ai__ai-provider-selector__item ${d.value===a?"selected":""}`,onClick:async()=>{d.value!==a&&await c(d.value)},selected:d.value===a,disabled:p,key:d.value},we.default.createElement(z,{spacing:1,alignItems:"center",direction:"row"},we.default.createElement(xt,{aiProviderType:d.value,size:r}),we.default.createElement(q,{component:"span",fontSize:"14px",fontWeight:400,color:"text.primary",textAlign:"left"},i(d.label))))),we.default.createElement(Ti,{disabled:!n,onClick:o},we.default.createElement(z,{sx:{minHeight:"28px"},width:"100%",spacing:1,alignItems:"center",direction:"row",justifyContent:"end"},n&&we.default.createElement(Vn,{icon:"Close",sx:{fontSize:"24px"}}))))))},Hc=im;var sm=()=>{let[e]=ne(qn),t=ct(sr),[r,n]=ne(Nt),{status:o}=r,[i,s]=(0,xo.useState)(o);return(0,xo.useEffect)(()=>{i!==o&&o==="success"&&$a().then(t),s(o)},[o]),ut(()=>{Qs().then(l=>{l||n(a=>({...a,status:"needReload"}))})}),o==="needReload"?Y.default.createElement(be,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:2147483631,display:"flex",justifyContent:"center",alignItems:"center","& + *":{filter:"blur(5px)"}}},Y.default.createElement(z,{spacing:2,width:"calc(100% - 16px)"},Y.default.createElement(Hn,{sx:{maxWidth:"414px",mx:"auto!important",width:"100%",bgcolor:"background.paper"}},Y.default.createElement(Za,null)))):e.isLogin?o==="success"?null:Y.default.createElement(be,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:2147483631,display:"flex",justifyContent:"center","& + *":{filter:"blur(5px)"}}},Y.default.createElement(Hn,{sx:{position:"absolute",right:8,bottom:125,bgcolor:"background.paper",display:"flex",flexDirection:"column"}},Y.default.createElement(Hc,null))):Y.default.createElement(be,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:2147483631,display:"flex",justifyContent:"center",alignItems:"center","& + *":{filter:"blur(5px)"}}},Y.default.createElement(z,{width:"calc(100% - 16px)"},Y.default.createElement(z,{spacing:1.5,p:3,pb:2,sx:{maxWidth:"414px",mx:"auto!important",borderRadius:"4px 4px 0 0",width:"100%",bgcolor:l=>l.palette.mode==="dark"?"#4f4f4f":"#F5F6F7"}},Y.default.createElement(z,{direction:"row",alignItems:"center",justifyContent:"center",width:"100%",spacing:1},Y.default.createElement(Un,{sx:{fontSize:"24px"}}),Y.default.createElement(q,{fontSize:"24px",fontWeight:700,color:"text.secondary",textAlign:"center"},"Use AI Anywhere Online")),Y.default.createElement(z,{direction:"row",sx:{alignItems:"center",justifyContent:"center",gap:3}},Y.default.createElement(z,{direction:"row",alignItems:"center",spacing:1},Y.default.createElement(xt,{aiProviderType:"USE_CHAT_GPT_PLUS",size:20}),Y.default.createElement(q,{component:"span",fontSize:"16px",color:"text.secondary"},"ChatGPT")),Y.default.createElement(z,{direction:"row",alignItems:"center",spacing:1},Y.default.createElement(xt,{aiProviderType:"MAXAI_CLAUDE",size:20}),Y.default.createElement(q,{component:"span",fontSize:"16px",color:"text.secondary"},"Claude")),Y.default.createElement(z,{direction:"row",alignItems:"center",spacing:1},Y.default.createElement(xt,{aiProviderType:"BARD",size:20}),Y.default.createElement(q,{component:"span",fontSize:"16px",color:"text.secondary"},"Bard")),Y.default.createElement(z,{direction:"row",alignItems:"center",spacing:1},Y.default.createElement(xt,{aiProviderType:"BING",size:20}),Y.default.createElement(q,{component:"span",fontSize:"16px",color:"text.secondary"},"Bing")))),Y.default.createElement(Hn,{sx:{maxWidth:"414px",mx:"auto!important",width:"100%",p:2,bgcolor:"background.paper",borderRadius:"0 0 4px 4px"}},Y.default.createElement(z,{alignItems:"flex-start",height:"100%",spacing:2},Y.default.createElement(z,{direction:"row",alignItems:"center",justifyContent:"center",width:"100%",spacing:1},Y.default.createElement(q,{fontSize:"24px",fontWeight:700,color:"text.primary",textAlign:"center"},"Please sign in to continue")),Y.default.createElement(ze,{href:Gt+"/login?auto=true",target:"_blank",sx:{width:"100%"}},Y.default.createElement(jt,{fullWidth:!0,disableElevation:!0,variant:"contained",sx:{height:48,color:"#fff",border:"none",bgcolor:"#4285F4",fontSize:14,"&:hover":{bgcolor:"#366dc9"}}},Y.default.createElement(z,{direction:"row",spacing:2,alignItems:"center"},Y.default.createElement(z,{sx:{width:"32px",height:"32px",borderRadius:"50%",bgcolor:"#fff"},justifyContent:"center",alignItems:"center"},Y.default.createElement(Ra,{sx:{fontSize:"24px"}})),Y.default.createElement("span",null,"Continue with Google")))),Y.default.createElement(Wi,{sx:{width:"100%"}},"OR"),Y.default.createElement(ze,{href:Gt+"/login-email",target:"_blank",sx:{width:"100%"}},Y.default.createElement(jt,{fullWidth:!0,disableElevation:!0,variant:"outlined",sx:{height:48,textIndent:"16px",fontSize:14}},Y.default.createElement(z,{direction:"row",spacing:2,alignItems:"center",sx:{color:"primary.main"}},Y.default.createElement(Vn,{icon:"Email",sx:{fontSize:"24px"}}),Y.default.createElement("span",null,"Continue with Email"))))))))};var jc=E($());zt();var Et=E($()),Gc=E(At());var Vc=E(Rt());var $c=E(Wp());var Uc=E(Wt()),Wc=E(Vt());function zc(e){return(0,Wc.default)("MuiCollapse",e)}var am=(0,Uc.unstable_generateUtilityClasses)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]),lm=am;var Xr=E(Ae()),cm=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],um=e=>{let{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,Vc.unstable_composeClasses)(n,zc,r)},pm=ce("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>B({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&B({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),dm=ce("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>B({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),fm=ce("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>B({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),qc=Et.forwardRef(function(t,r){let n=Fe({props:t,name:"MuiCollapse"}),{addEndListener:o,children:i,className:s,collapsedSize:l="0px",component:a,easing:c,in:u,onEnter:p,onEntered:f,onEntering:d,onExit:h,onExited:m,onExiting:v,orientation:y="vertical",style:b,timeout:x=js.standard,TransitionComponent:I=Ta}=n,T=Be(n,cm),w=B({},n,{orientation:y,collapsedSize:l}),D=um(w),N=Rn(),_=Et.useRef(),C=Et.useRef(null),g=Et.useRef(),k=typeof l=="number"?`${l}px`:l,O=y==="horizontal",P=O?"width":"height";Et.useEffect(()=>()=>{clearTimeout(_.current)},[]);let R=Et.useRef(null),W=(0,$c.useForkRef)(r,R),G=M=>te=>{if(M){let K=R.current;te===void 0?M(K):M(K,te)}},A=()=>C.current?C.current[O?"clientWidth":"clientHeight"]:0,F=G((M,te)=>{C.current&&O&&(C.current.style.position="absolute"),M.style[P]=k,p&&p(M,te)}),L=G((M,te)=>{let K=A();C.current&&O&&(C.current.style.position="");let{duration:ee,easing:Ce}=Ci({style:b,timeout:x,easing:c},{mode:"enter"});if(x==="auto"){let j=N.transitions.getAutoHeightDuration(K);M.style.transitionDuration=`${j}ms`,g.current=j}else M.style.transitionDuration=typeof ee=="string"?ee:`${ee}ms`;M.style[P]=`${K}px`,M.style.transitionTimingFunction=Ce,d&&d(M,te)}),U=G((M,te)=>{M.style[P]="auto",f&&f(M,te)}),Z=G(M=>{M.style[P]=`${A()}px`,h&&h(M)}),X=G(m),Q=G(M=>{let te=A(),{duration:K,easing:ee}=Ci({style:b,timeout:x,easing:c},{mode:"exit"});if(x==="auto"){let Ce=N.transitions.getAutoHeightDuration(te);M.style.transitionDuration=`${Ce}ms`,g.current=Ce}else M.style.transitionDuration=typeof K=="string"?K:`${K}ms`;M.style[P]=k,M.style.transitionTimingFunction=ee,v&&v(M)});return(0,Xr.jsx)(I,B({in:u,onEnter:F,onEntered:U,onEntering:L,onExit:Z,onExited:X,onExiting:Q,addEndListener:M=>{x==="auto"&&(_.current=setTimeout(M,g.current||0)),o&&o(R.current,M)},nodeRef:R,timeout:x==="auto"?null:x},T,{children:(M,te)=>(0,Xr.jsx)(pm,B({as:a,className:(0,Gc.default)(D.root,s,{entered:D.entered,exited:!u&&k==="0px"&&D.hidden}[M]),style:B({[O?"minWidth":"minHeight"]:k},b),ownerState:B({},w,{state:M}),ref:W},te,{children:(0,Xr.jsx)(dm,{ownerState:B({},w,{state:M}),className:D.wrapper,ref:C,children:(0,Xr.jsx)(fm,{ownerState:B({},w,{state:M}),className:D.wrapperInner,children:i})})}))}))});qc.muiSupportAuto=!0;var mm=qc;var vn=E($());var BE=Ee({key:"ContextMenuSettingsState",default:{closeBeforeRefresh:!1}}),Yc=Ee({key:"RangyCoreState",default:{loaded:!1,rangy:null}}),To=Ee({key:"RangyState",default:{show:!1,tempSelection:null,currentSelection:null}}),Kc=Ee({key:"FloatingDropdownMenuState",default:{open:!1,rootRect:null}}),FE=Ee({key:"FloatingDropdownMenuLastFocusRangeState",default:{range:null,selectionText:null}}),HE=Ee({key:"FloatingDropdownMenuSystemItemsState",default:{selectContextMenuId:null,lastOutput:""}}),gm=Ee({key:"FloatingDropdownMenuSelectedItemState",default:{hoverContextMenuIdMap:{},selectedContextMenuId:null,lastHoverContextMenuId:null}}),UE=Ut({key:"FloatingDropdownMenuItemsSelector",get:({get:e})=>{let t=e(gm).hoverContextMenuIdMap;return Object.values(t).filter(r=>r)}}),hm=Ee({key:"FloatingContextMenuDraftState",default:{lastAIMessageId:""}}),WE=Ut({key:"FloatingContextMenuDraftSelector",get:({get:e})=>{let t=e(Kn),r=e(dt),n=[],o=e(hm).lastAIMessageId;if(o||t.filter(s=>s.type==="ai").length===1&&(o="root"),o)for(let s=t.length-1;s>=0;s--){let l=t[s];if(l.messageId===o)break;l.type==="ai"&&n.unshift(l)}return r.writingMessage&&r.writingMessage.type==="ai"&&n.push(r.writingMessage),n.map(s=>s.text).join(`

`).replace(/\n{2,}/,`

`)}});var yr=E($());var is=()=>{let[e,t]=ne(Yc),[r,n]=ne(To),o=(p=!1)=>{n(f=>(document.querySelector("#rangeBorderBox")?.remove(),{show:!1,tempSelection:null,currentSelection:p?null:f.currentSelection}))},i=p=>{t({loaded:!0,rangy:p})},s=()=>{n(p=>({...p,show:!0}))},l=p=>{n(f=>({...f,tempSelection:p}))},a=async p=>{p.selectionText=await Bn(p.selectionText||"",12e3),n(f=>({...f,currentSelection:p}))},c=(0,yr.useRef)(r.tempSelection);(0,yr.useEffect)(()=>{c.current=r.tempSelection},[r.tempSelection]);let u=(0,yr.useRef)(r.currentSelection);return(0,yr.useEffect)(()=>{u.current=r.currentSelection},[r.currentSelection]),{showRangy:s,hideRangy:o,rangy:e.rangy,initRangyCore:i,saveCurrentSelection:a,saveTempSelection:l,show:r.show,tempSelection:r.tempSelection,currentSelection:r.currentSelection,tempSelectionRef:c,currentSelectionRef:u}};var ss=E($());var hn=E($());var S=E($()),_r=E($());var Bt=Math.min,Le=Math.max,Jr=Math.round,Zr=Math.floor,It=e=>({x:e,y:e}),vm={left:"right",right:"left",bottom:"top",top:"bottom"},bm={start:"end",end:"start"};function as(e,t,r){return Le(e,Bt(t,r))}function vr(e,t){return typeof e=="function"?e(t):e}function wt(e){return e.split("-")[0]}function br(e){return e.split("-")[1]}function ls(e){return e==="x"?"y":"x"}function cs(e){return e==="y"?"height":"width"}function xr(e){return["top","bottom"].includes(wt(e))?"y":"x"}function us(e){return ls(xr(e))}function Xc(e,t,r){r===void 0&&(r=!1);let n=br(e),o=us(e),i=cs(o),s=o==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Qr(s)),[s,Qr(s)]}function Qc(e){let t=Qr(e);return[Co(e),t,Co(t)]}function Co(e){return e.replace(/start|end/g,t=>bm[t])}function xm(e,t,r){let n=["left","right"],o=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return r?t?o:n:t?n:o;case"left":case"right":return t?i:s;default:return[]}}function Jc(e,t,r,n){let o=br(e),i=xm(wt(e),r==="start",n);return o&&(i=i.map(s=>s+"-"+o),t&&(i=i.concat(i.map(Co)))),i}function Qr(e){return e.replace(/left|right|bottom|top/g,t=>vm[t])}function Tm(e){return{top:0,right:0,bottom:0,left:0,...e}}function Zc(e){return typeof e!="number"?Tm(e):{top:e,right:e,bottom:e,left:e}}function er(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function eu(e,t,r){let{reference:n,floating:o}=e,i=xr(t),s=us(t),l=cs(s),a=wt(t),c=i==="y",u=n.x+n.width/2-o.width/2,p=n.y+n.height/2-o.height/2,f=n[l]/2-o[l]/2,d;switch(a){case"top":d={x:u,y:n.y-o.height};break;case"bottom":d={x:u,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:p};break;case"left":d={x:n.x-o.width,y:p};break;default:d={x:n.x,y:n.y}}switch(br(t)){case"start":d[s]-=f*(r&&c?-1:1);break;case"end":d[s]+=f*(r&&c?-1:1);break}return d}var tu=async(e,t,r)=>{let{placement:n="bottom",strategy:o="absolute",middleware:i=[],platform:s}=r,l=i.filter(Boolean),a=await(s.isRTL==null?void 0:s.isRTL(t)),c=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:p}=eu(c,n,a),f=n,d={},h=0;for(let m=0;m<l.length;m++){let{name:v,fn:y}=l[m],{x:b,y:x,data:I,reset:T}=await y({x:u,y:p,initialPlacement:n,placement:f,strategy:o,middlewareData:d,rects:c,platform:s,elements:{reference:e,floating:t}});if(u=b??u,p=x??p,d={...d,[v]:{...d[v],...I}},T&&h<=50){h++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(c=T.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:o}):T.rects),{x:u,y:p}=eu(c,f,a)),m=-1;continue}}return{x:u,y:p,placement:f,strategy:o,middlewareData:d}};async function tr(e,t){var r;t===void 0&&(t={});let{x:n,y:o,platform:i,rects:s,elements:l,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:f=!1,padding:d=0}=vr(t,e),h=Zc(d),v=l[f?p==="floating"?"reference":"floating":p],y=er(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:a})),b=p==="floating"?{...s.floating,x:n,y:o}:s.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},T=er(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:x,strategy:a}):b);return{top:(y.top-T.top+h.top)/I.y,bottom:(T.bottom-y.bottom+h.bottom)/I.y,left:(y.left-T.left+h.left)/I.x,right:(T.right-y.right+h.right)/I.x}}var en=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;let{placement:o,middlewareData:i,rects:s,initialPlacement:l,platform:a,elements:c}=t,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:m=!0,...v}=vr(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};let y=wt(o),b=wt(l)===l,x=await(a.isRTL==null?void 0:a.isRTL(c.floating)),I=f||(b||!m?[Qr(l)]:Qc(l));!f&&h!=="none"&&I.push(...Jc(l,m,h,x));let T=[l,...I],w=await tr(t,v),D=[],N=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&D.push(w[y]),p){let k=Xc(o,s,x);D.push(w[k[0]],w[k[1]])}if(N=[...N,{placement:o,overflows:D}],!D.every(k=>k<=0)){var _,C;let k=(((_=i.flip)==null?void 0:_.index)||0)+1,O=T[k];if(O)return{data:{index:k,overflows:N},reset:{placement:O}};let P=(C=N.filter(R=>R.overflows[0]<=0).sort((R,W)=>R.overflows[1]-W.overflows[1])[0])==null?void 0:C.placement;if(!P)switch(d){case"bestFit":{var g;let R=(g=N.map(W=>[W.placement,W.overflows.filter(G=>G>0).reduce((G,A)=>G+A,0)]).sort((W,G)=>W[1]-G[1])[0])==null?void 0:g[0];R&&(P=R);break}case"initialPlacement":P=l;break}if(o!==P)return{reset:{placement:P}}}return{}}}};async function Cm(e,t){let{placement:r,platform:n,elements:o}=e,i=await(n.isRTL==null?void 0:n.isRTL(o.floating)),s=wt(r),l=br(r),a=xr(r)==="y",c=["left","top"].includes(s)?-1:1,u=i&&a?-1:1,p=vr(t,e),{mainAxis:f,crossAxis:d,alignmentAxis:h}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return l&&typeof h=="number"&&(d=l==="end"?h*-1:h),a?{x:d*u,y:f*c}:{x:f*c,y:d*u}}var Tr=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){let{x:r,y:n}=t,o=await Cm(t,e);return{x:r+o.x,y:n+o.y,data:o}}}},tn=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:n,placement:o}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:l={fn:v=>{let{x:y,y:b}=v;return{x:y,y:b}}},...a}=vr(e,t),c={x:r,y:n},u=await tr(t,a),p=xr(wt(o)),f=ls(p),d=c[f],h=c[p];if(i){let v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=d+u[v],x=d-u[y];d=as(b,d,x)}if(s){let v=p==="y"?"top":"left",y=p==="y"?"bottom":"right",b=h+u[v],x=h-u[y];h=as(b,h,x)}let m=l.fn({...t,[f]:d,[p]:h});return{...m,data:{x:m.x-r,y:m.y-n}}}}};var rn=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){let{placement:r,rects:n,platform:o,elements:i}=t,{apply:s=()=>{},...l}=vr(e,t),a=await tr(t,l),c=wt(r),u=br(r),p=xr(r)==="y",{width:f,height:d}=n.floating,h,m;c==="top"||c==="bottom"?(h=c,m=u===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(m=c,h=u==="end"?"top":"bottom");let v=d-a[h],y=f-a[m],b=!t.middlewareData.shift,x=v,I=y;if(p){let w=f-a.left-a.right;I=u||b?Bt(y,w):w}else{let w=d-a.top-a.bottom;x=u||b?Bt(v,w):w}if(b&&!u){let w=Le(a.left,0),D=Le(a.right,0),N=Le(a.top,0),_=Le(a.bottom,0);p?I=f-2*(w!==0||D!==0?w+D:Le(a.left,a.right)):x=d-2*(N!==0||_!==0?N+_:Le(a.top,a.bottom))}await s({...t,availableWidth:I,availableHeight:x});let T=await o.getDimensions(i.floating);return f!==T.width||d!==T.height?{reset:{rects:!0}}:{}}}};function Pt(e){return nu(e)?(e.nodeName||"").toLowerCase():"#document"}function Ue(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function mt(e){var t;return(t=(nu(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function nu(e){return e instanceof Node||e instanceof Ue(e).Node}function gt(e){return e instanceof Element||e instanceof Ue(e).Element}function st(e){return e instanceof HTMLElement||e instanceof Ue(e).HTMLElement}function ru(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ue(e).ShadowRoot}function Cr(e){let{overflow:t,overflowX:r,overflowY:n,display:o}=$e(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(o)}function ou(e){return["table","td","th"].includes(Pt(e))}function So(e){let t=Eo(),r=$e(e);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function iu(e){let t=rr(e);for(;st(t)&&!nn(t);){if(So(t))return t;t=rr(t)}return null}function Eo(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nn(e){return["html","body","#document"].includes(Pt(e))}function $e(e){return Ue(e).getComputedStyle(e)}function on(e){return gt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function rr(e){if(Pt(e)==="html")return e;let t=e.assignedSlot||e.parentNode||ru(e)&&e.host||mt(e);return ru(t)?t.host:t}function su(e){let t=rr(e);return nn(t)?e.ownerDocument?e.ownerDocument.body:e.body:st(t)&&Cr(t)?t:su(t)}function Ve(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);let o=su(e),i=o===((n=e.ownerDocument)==null?void 0:n.body),s=Ue(o);return i?t.concat(s,s.visualViewport||[],Cr(o)?o:[],s.frameElement&&r?Ve(s.frameElement):[]):t.concat(o,Ve(o))}function fu(e){let t=$e(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,o=st(e),i=o?e.offsetWidth:r,s=o?e.offsetHeight:n,l=Jr(r)!==i||Jr(n)!==s;return l&&(r=i,n=s),{width:r,height:n,$:l}}function ps(e){return gt(e)?e:e.contextElement}function Sr(e){let t=ps(e);if(!st(t))return It(1);let r=t.getBoundingClientRect(),{width:n,height:o,$:i}=fu(t),s=(i?Jr(r.width):r.width)/n,l=(i?Jr(r.height):r.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}var Em=It(0);function mu(e){let t=Ue(e);return!Eo()||!t.visualViewport?Em:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Im(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ue(e)?!1:t}function nr(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);let o=e.getBoundingClientRect(),i=ps(e),s=It(1);t&&(n?gt(n)&&(s=Sr(n)):s=Sr(e));let l=Im(i,r,n)?mu(i):It(0),a=(o.left+l.x)/s.x,c=(o.top+l.y)/s.y,u=o.width/s.x,p=o.height/s.y;if(i){let f=Ue(i),d=n&&gt(n)?Ue(n):n,h=f.frameElement;for(;h&&n&&d!==f;){let m=Sr(h),v=h.getBoundingClientRect(),y=$e(h),b=v.left+(h.clientLeft+parseFloat(y.paddingLeft))*m.x,x=v.top+(h.clientTop+parseFloat(y.paddingTop))*m.y;a*=m.x,c*=m.y,u*=m.x,p*=m.y,a+=b,c+=x,h=Ue(h).frameElement}}return er({width:u,height:p,x:a,y:c})}function wm(e){let{rect:t,offsetParent:r,strategy:n}=e,o=st(r),i=mt(r);if(r===i)return t;let s={scrollLeft:0,scrollTop:0},l=It(1),a=It(0);if((o||!o&&n!=="fixed")&&((Pt(r)!=="body"||Cr(i))&&(s=on(r)),st(r))){let c=nr(r);l=Sr(r),a.x=c.x+r.clientLeft,a.y=c.y+r.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-s.scrollLeft*l.x+a.x,y:t.y*l.y-s.scrollTop*l.y+a.y}}function Pm(e){return Array.from(e.getClientRects())}function gu(e){return nr(mt(e)).left+on(e).scrollLeft}function _m(e){let t=mt(e),r=on(e),n=e.ownerDocument.body,o=Le(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Le(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),s=-r.scrollLeft+gu(e),l=-r.scrollTop;return $e(n).direction==="rtl"&&(s+=Le(t.clientWidth,n.clientWidth)-o),{width:o,height:i,x:s,y:l}}function Am(e,t){let r=Ue(e),n=mt(e),o=r.visualViewport,i=n.clientWidth,s=n.clientHeight,l=0,a=0;if(o){i=o.width,s=o.height;let c=Eo();(!c||c&&t==="fixed")&&(l=o.offsetLeft,a=o.offsetTop)}return{width:i,height:s,x:l,y:a}}function Rm(e,t){let r=nr(e,!0,t==="fixed"),n=r.top+e.clientTop,o=r.left+e.clientLeft,i=st(e)?Sr(e):It(1),s=e.clientWidth*i.x,l=e.clientHeight*i.y,a=o*i.x,c=n*i.y;return{width:s,height:l,x:a,y:c}}function au(e,t,r){let n;if(t==="viewport")n=Am(e,r);else if(t==="document")n=_m(mt(e));else if(gt(t))n=Rm(t,r);else{let o=mu(e);n={...t,x:t.x-o.x,y:t.y-o.y}}return er(n)}function hu(e,t){let r=rr(e);return r===t||!gt(r)||nn(r)?!1:$e(r).position==="fixed"||hu(r,t)}function Mm(e,t){let r=t.get(e);if(r)return r;let n=Ve(e,[],!1).filter(l=>gt(l)&&Pt(l)!=="body"),o=null,i=$e(e).position==="fixed",s=i?rr(e):e;for(;gt(s)&&!nn(s);){let l=$e(s),a=So(s);!a&&l.position==="fixed"&&(o=null),(i?!a&&!o:!a&&l.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Cr(s)&&!a&&hu(e,s))?n=n.filter(u=>u!==s):o=l,s=rr(s)}return t.set(e,n),n}function km(e){let{element:t,boundary:r,rootBoundary:n,strategy:o}=e,s=[...r==="clippingAncestors"?Mm(t,this._c):[].concat(r),n],l=s[0],a=s.reduce((c,u)=>{let p=au(t,u,o);return c.top=Le(p.top,c.top),c.right=Bt(p.right,c.right),c.bottom=Bt(p.bottom,c.bottom),c.left=Le(p.left,c.left),c},au(t,l,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Lm(e){return fu(e)}function Om(e,t,r){let n=st(t),o=mt(t),i=r==="fixed",s=nr(e,!0,i,t),l={scrollLeft:0,scrollTop:0},a=It(0);if(n||!n&&!i)if((Pt(t)!=="body"||Cr(o))&&(l=on(t)),n){let c=nr(t,!0,i,t);a.x=c.x+t.clientLeft,a.y=c.y+t.clientTop}else o&&(a.x=gu(o));return{x:s.left+l.scrollLeft-a.x,y:s.top+l.scrollTop-a.y,width:s.width,height:s.height}}function lu(e,t){return!st(e)||$e(e).position==="fixed"?null:t?t(e):e.offsetParent}function yu(e,t){let r=Ue(e);if(!st(e))return r;let n=lu(e,t);for(;n&&ou(n)&&$e(n).position==="static";)n=lu(n,t);return n&&(Pt(n)==="html"||Pt(n)==="body"&&$e(n).position==="static"&&!So(n))?r:n||iu(e)||r}var Nm=async function(e){let{reference:t,floating:r,strategy:n}=e,o=this.getOffsetParent||yu,i=this.getDimensions;return{reference:Om(t,await o(r),n),floating:{x:0,y:0,...await i(r)}}};function Dm(e){return $e(e).direction==="rtl"}var Io={convertOffsetParentRelativeRectToViewportRelativeRect:wm,getDocumentElement:mt,getClippingRect:km,getOffsetParent:yu,getElementRects:Nm,getClientRects:Pm,getDimensions:Lm,getScale:Sr,isElement:gt,isRTL:Dm};function Bm(e,t){let r=null,n,o=mt(e);function i(){clearTimeout(n),r&&r.disconnect(),r=null}function s(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),i();let{left:c,top:u,width:p,height:f}=e.getBoundingClientRect();if(l||t(),!p||!f)return;let d=Zr(u),h=Zr(o.clientWidth-(c+p)),m=Zr(o.clientHeight-(u+f)),v=Zr(c),b={rootMargin:-d+"px "+-h+"px "+-m+"px "+-v+"px",threshold:Le(0,Bt(1,a))||1},x=!0;function I(T){let w=T[0].intersectionRatio;if(w!==a){if(!x)return s();w?s(!1,w):n=setTimeout(()=>{s(!1,1e-7)},100)}x=!1}try{r=new IntersectionObserver(I,{...b,root:o.ownerDocument})}catch{r=new IntersectionObserver(I,b)}r.observe(e)}return s(!0),i}function vu(e,t,r,n){n===void 0&&(n={});let{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=n,c=ps(e),u=o||i?[...c?Ve(c):[],...Ve(t)]:[];u.forEach(y=>{o&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});let p=c&&l?Bm(c,r):null,f=-1,d=null;s&&(d=new ResizeObserver(y=>{let[b]=y;b&&b.target===c&&d&&(d.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{d&&d.observe(t)})),r()}),c&&!a&&d.observe(c),d.observe(t));let h,m=a?nr(e):null;a&&v();function v(){let y=nr(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&r(),m=y,h=requestAnimationFrame(v)}return r(),()=>{u.forEach(y=>{o&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),p&&p(),d&&d.disconnect(),d=null,a&&cancelAnimationFrame(h)}}var wo=(e,t,r)=>{let n=new Map,o={platform:Io,...r},i={...o.platform,_c:n};return tu(e,t,{...o,platform:i})};var Te=E($()),Ao=E($()),xu=E(Gs());var Po=typeof document<"u"?Ao.useLayoutEffect:Ao.useEffect;function _o(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!_o(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;for(n=r;n--!==0;){let i=o[n];if(!(i==="_owner"&&e.$$typeof)&&!_o(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function bu(e){let t=Te.useRef(e);return Po(()=>{t.current=e}),t}function Tu(e){e===void 0&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:o,whileElementsMounted:i,open:s}=e,[l,a]=Te.useState({x:null,y:null,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[c,u]=Te.useState(n);_o(c,n)||u(n);let p=Te.useRef(null),f=Te.useRef(null),d=Te.useRef(l),h=bu(i),m=bu(o),[v,y]=Te.useState(null),[b,x]=Te.useState(null),I=Te.useCallback(C=>{p.current!==C&&(p.current=C,y(C))},[]),T=Te.useCallback(C=>{f.current!==C&&(f.current=C,x(C))},[]),w=Te.useCallback(()=>{if(!p.current||!f.current)return;let C={placement:t,strategy:r,middleware:c};m.current&&(C.platform=m.current),wo(p.current,f.current,C).then(g=>{let k={...g,isPositioned:!0};D.current&&!_o(d.current,k)&&(d.current=k,xu.flushSync(()=>{a(k)}))})},[c,t,r,m]);Po(()=>{s===!1&&d.current.isPositioned&&(d.current.isPositioned=!1,a(C=>({...C,isPositioned:!1})))},[s]);let D=Te.useRef(!1);Po(()=>(D.current=!0,()=>{D.current=!1}),[]),Po(()=>{if(v&&b){if(h.current)return h.current(v,b,w);w()}},[v,b,w,h]);let N=Te.useMemo(()=>({reference:p,floating:f,setReference:I,setFloating:T}),[I,T]),_=Te.useMemo(()=>({reference:v,floating:b}),[v,b]);return Te.useMemo(()=>({...l,update:w,refs:N,elements:_,reference:I,floating:T}),[l,w,N,_,I,T])}var Fm=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Er=new WeakMap,Ro=new WeakMap,Mo={},ds=0,Cu=function(e){return e&&(e.host||Cu(e.parentNode))},Hm=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Cu(r);return n&&e.contains(n)?n:null}).filter(function(r){return!!r})},Um=function(e,t,r,n){var o=Hm(t,Array.isArray(e)?e:[e]);Mo[r]||(Mo[r]=new WeakMap);var i=Mo[r],s=[],l=new Set,a=new Set(o),c=function(p){!p||l.has(p)||(l.add(p),c(p.parentNode))};o.forEach(c);var u=function(p){!p||a.has(p)||Array.prototype.forEach.call(p.children,function(f){if(l.has(f))u(f);else{var d=f.getAttribute(n),h=d!==null&&d!=="false",m=(Er.get(f)||0)+1,v=(i.get(f)||0)+1;Er.set(f,m),i.set(f,v),s.push(f),m===1&&h&&Ro.set(f,!0),v===1&&f.setAttribute(r,"true"),h||f.setAttribute(n,"true")}})};return u(t),l.clear(),ds++,function(){s.forEach(function(p){var f=Er.get(p)-1,d=i.get(p)-1;Er.set(p,f),i.set(p,d),f||(Ro.has(p)||p.removeAttribute(n),Ro.delete(p)),d||p.removeAttribute(r)}),ds--,ds||(Er=new WeakMap,Er=new WeakMap,Ro=new WeakMap,Mo={})}},Su=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=t||Fm(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live]"))),Um(n,o,r,"aria-hidden")):function(){return null}};var Wm=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],fs=Wm.join(","),wu=typeof Element>"u",sn=wu?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ko=!wu&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},Lo=function e(t,r){var n;r===void 0&&(r=!0);var o=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),i=o===""||o==="true",s=i||r&&t&&e(t.parentNode);return s},zm=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},Gm=function(t,r,n){if(Lo(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(fs));return r&&sn.call(t,fs)&&o.unshift(t),o=o.filter(n),o},Vm=function e(t,r,n){for(var o=[],i=Array.from(t);i.length;){var s=i.shift();if(!Lo(s,!1))if(s.tagName==="SLOT"){var l=s.assignedElements(),a=l.length?l:s.children,c=e(a,!0,n);n.flatten?o.push.apply(o,c):o.push({scopeParent:s,candidates:c})}else{var u=sn.call(s,fs);u&&n.filter(s)&&(r||!t.includes(s))&&o.push(s);var p=s.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(s),f=!Lo(p,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(s));if(p&&f){var d=e(p===!0?s.children:p.children,!0,n);n.flatten?o.push.apply(o,d):o.push({scopeParent:s,candidates:d})}else i.unshift.apply(i,s.children)}}return o},Pu=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},_u=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||zm(t))&&!Pu(t)?0:t.tabIndex},$m=function(t,r){var n=_u(t);return n<0&&r&&!Pu(t)?0:n},qm=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},Au=function(t){return t.tagName==="INPUT"},jm=function(t){return Au(t)&&t.type==="hidden"},Ym=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},Km=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},Xm=function(t){if(!t.name)return!0;var r=t.form||ko(t),n=function(l){return r.querySelectorAll('input[type="radio"][name="'+l+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=n(window.CSS.escape(t.name));else try{o=n(t.name)}catch{return!1}var i=Km(o,t.form);return!i||i===t},Qm=function(t){return Au(t)&&t.type==="radio"},Jm=function(t){return Qm(t)&&!Xm(t)},Zm=function(t){var r,n=t&&ko(t),o=(r=n)===null||r===void 0?void 0:r.host,i=!1;if(n&&n!==t){var s,l,a;for(i=!!((s=o)!==null&&s!==void 0&&(l=s.ownerDocument)!==null&&l!==void 0&&l.contains(o)||t!=null&&(a=t.ownerDocument)!==null&&a!==void 0&&a.contains(t));!i&&o;){var c,u,p;n=ko(o),o=(c=n)===null||c===void 0?void 0:c.host,i=!!((u=o)!==null&&u!==void 0&&(p=u.ownerDocument)!==null&&p!==void 0&&p.contains(o))}}return i},Eu=function(t){var r=t.getBoundingClientRect(),n=r.width,o=r.height;return n===0&&o===0},eg=function(t,r){var n=r.displayCheck,o=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var i=sn.call(t,"details>summary:first-of-type"),s=i?t.parentElement:t;if(sn.call(s,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof o=="function"){for(var l=t;t;){var a=t.parentElement,c=ko(t);if(a&&!a.shadowRoot&&o(a)===!0)return Eu(t);t.assignedSlot?t=t.assignedSlot:!a&&c!==t.ownerDocument?t=c.host:t=a}t=l}if(Zm(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return Eu(t);return!1},tg=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var o=r.children.item(n);if(o.tagName==="LEGEND")return sn.call(r,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}r=r.parentElement}return!1},rg=function(t,r){return!(r.disabled||Lo(r)||jm(r)||eg(r,t)||Ym(r)||tg(r))},Iu=function(t,r){return!(Jm(r)||_u(r)<0||!rg(t,r))},ng=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},og=function e(t){var r=[],n=[];return t.forEach(function(o,i){var s=!!o.scopeParent,l=s?o.scopeParent:o,a=$m(l,s),c=s?e(o.candidates):l;a===0?s?r.push.apply(r,c):r.push(l):n.push({documentOrder:i,tabIndex:a,item:o,isScope:s,content:c})}),n.sort(qm).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(r)},an=function(t,r){r=r||{};var n;return r.getShadowRoot?n=Vm([t],r.includeContainer,{filter:Iu.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:ng}):n=Gm(t,r.includeContainer,Iu.bind(null,r)),og(n)};var pn=E(Gs());function No(){return No=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},No.apply(this,arguments)}var Pe=typeof document<"u"?_r.useLayoutEffect:_r.useEffect,ms=!1,ig=0,Ru=()=>"floating-ui-"+ig++;function sg(){let[e,t]=S.useState(()=>ms?Ru():void 0);return Pe(()=>{e==null&&t(Ru())},[]),S.useEffect(()=>{ms||(ms=!0)},[]),e}var ag=S["useId".toString()],Do=ag||sg;function Hu(){let e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(o=>o(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){e.set(t,(e.get(t)||[]).filter(n=>n!==r))}}}var Uu=S.createContext(null),Wu=S.createContext(null),dn=()=>{var e;return((e=S.useContext(Uu))==null?void 0:e.id)||null},Ar=()=>S.useContext(Wu),xI=e=>{let t=Do(),r=Ar(),n=dn(),o=e||n;return Pe(()=>{let i={id:t,parentId:o};return r?.addNode(i),()=>{r?.removeNode(i)}},[r,t,o]),t},TI=e=>{let{children:t,id:r}=e,n=dn();return S.createElement(Uu.Provider,{value:S.useMemo(()=>({id:r,parentId:n}),[r,n])},t)},CI=e=>{let{children:t}=e,r=S.useRef([]),n=S.useCallback(s=>{r.current=[...r.current,s]},[]),o=S.useCallback(s=>{r.current=r.current.filter(l=>l!==s)},[]),i=S.useState(()=>Hu())[0];return S.createElement(Wu.Provider,{value:S.useMemo(()=>({nodesRef:r,addNode:n,removeNode:o,events:i}),[r,n,o,i])},t)};function Je(e){return e?.ownerDocument||document}function zu(){let e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function lg(){let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:r,version:n}=t;return r+"/"+n}).join(" "):navigator.userAgent}function Cs(e){return Je(e).defaultView||window}function at(e){return e?e instanceof Cs(e).Element:!1}function Ir(e){return e?e instanceof Cs(e).HTMLElement:!1}function cg(e){if(typeof ShadowRoot>"u")return!1;let t=Cs(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Gu(e){if(e.mozInputSource===0&&e.isTrusted)return!0;let t=/Android/i;return(t.test(zu())||t.test(lg()))&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Vu(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType!=="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0}function xs(){return/apple/i.test(navigator.vendor)}function $u(){return zu().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Bo(e,t){let r=["mouse","pen"];return t||r.push("",void 0),r.includes(e)}function Ht(e){let t=(0,_r.useRef)(e);return Pe(()=>{t.current=e}),t}var Mu="data-floating-ui-safe-polygon";function gs(e,t,r){return r&&!Bo(r)?0:typeof e=="number"?e:e?.[t]}var SI=function(e,t){let{enabled:r=!0,delay:n=0,handleClose:o=null,mouseOnly:i=!1,restMs:s=0,move:l=!0}=t===void 0?{}:t,{open:a,onOpenChange:c,dataRef:u,events:p,elements:{domReference:f,floating:d},refs:h}=e,m=Ar(),v=dn(),y=Ht(o),b=Ht(n),x=S.useRef(),I=S.useRef(),T=S.useRef(),w=S.useRef(),D=S.useRef(!0),N=S.useRef(!1),_=S.useRef(()=>{}),C=S.useCallback(()=>{var P;let R=(P=u.current.openEvent)==null?void 0:P.type;return R?.includes("mouse")&&R!=="mousedown"},[u]);S.useEffect(()=>{if(!r)return;function P(){clearTimeout(I.current),clearTimeout(w.current),D.current=!0}return p.on("dismiss",P),()=>{p.off("dismiss",P)}},[r,p]),S.useEffect(()=>{if(!r||!y.current||!a)return;function P(){C()&&c(!1)}let R=Je(d).documentElement;return R.addEventListener("mouseleave",P),()=>{R.removeEventListener("mouseleave",P)}},[d,a,c,r,y,u,C]);let g=S.useCallback(function(P){P===void 0&&(P=!0);let R=gs(b.current,"close",x.current);R&&!T.current?(clearTimeout(I.current),I.current=setTimeout(()=>c(!1),R)):P&&(clearTimeout(I.current),c(!1))},[b,c]),k=S.useCallback(()=>{_.current(),T.current=void 0},[]),O=S.useCallback(()=>{if(N.current){let P=Je(h.floating.current).body;P.style.pointerEvents="",P.removeAttribute(Mu),N.current=!1}},[h]);return S.useEffect(()=>{if(!r)return;function P(){return u.current.openEvent?["click","mousedown"].includes(u.current.openEvent.type):!1}function R(A){if(clearTimeout(I.current),D.current=!1,i&&!Bo(x.current)||s>0&&gs(b.current,"open")===0)return;u.current.openEvent=A;let F=gs(b.current,"open",x.current);F?I.current=setTimeout(()=>{c(!0)},F):c(!0)}function W(A){if(P())return;_.current();let F=Je(d);if(clearTimeout(w.current),y.current){a||clearTimeout(I.current),T.current=y.current({...e,tree:m,x:A.clientX,y:A.clientY,onClose(){O(),k(),g()}});let L=T.current;F.addEventListener("mousemove",L),_.current=()=>{F.removeEventListener("mousemove",L)};return}g()}function G(A){P()||y.current==null||y.current({...e,tree:m,x:A.clientX,y:A.clientY,onClose(){O(),k(),g()}})(A)}if(at(f)){let A=f;return a&&A.addEventListener("mouseleave",G),d?.addEventListener("mouseleave",G),l&&A.addEventListener("mousemove",R,{once:!0}),A.addEventListener("mouseenter",R),A.addEventListener("mouseleave",W),()=>{a&&A.removeEventListener("mouseleave",G),d?.removeEventListener("mouseleave",G),l&&A.removeEventListener("mousemove",R),A.removeEventListener("mouseenter",R),A.removeEventListener("mouseleave",W)}}},[f,d,r,e,i,s,l,g,k,O,c,a,m,b,y,u]),Pe(()=>{var P;if(r&&a&&(P=y.current)!=null&&P.__options.blockPointerEvents&&C()){let G=Je(d).body;if(G.setAttribute(Mu,""),G.style.pointerEvents="none",N.current=!0,at(f)&&d){var R,W;let A=f,F=m==null||(R=m.nodesRef.current.find(L=>L.id===v))==null||(W=R.context)==null?void 0:W.elements.floating;return F&&(F.style.pointerEvents=""),A.style.pointerEvents="auto",d.style.pointerEvents="auto",()=>{A.style.pointerEvents="",d.style.pointerEvents=""}}}},[r,a,v,d,f,m,y,u,C]),Pe(()=>{a||(x.current=void 0,k(),O())},[a,k,O]),S.useEffect(()=>()=>{k(),clearTimeout(I.current),clearTimeout(w.current),O()},[r,k,O]),S.useMemo(()=>{if(!r)return{};function P(R){x.current=R.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove(){a||s===0||(clearTimeout(w.current),w.current=setTimeout(()=>{D.current||c(!0)},s))}},floating:{onMouseEnter(){clearTimeout(I.current)},onMouseLeave(){p.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),g(!1)}}}},[p,r,s,a,c,g])};function wr(e){let t=e.activeElement;for(;((r=t)==null||(n=r.shadowRoot)==null?void 0:n.activeElement)!=null;){var r,n;t=t.shadowRoot.activeElement}return t}function Qe(e,t){if(!e||!t)return!1;let r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&cg(r)){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}return!1}var ku=0;function Ft(e,t){t===void 0&&(t={});let{preventScroll:r=!1,cancelPrevious:n=!0,sync:o=!1}=t;n&&cancelAnimationFrame(ku);let i=()=>e?.focus({preventScroll:r});o?i():ku=requestAnimationFrame(i)}function ug(e,t){var r;let n=[],o=(r=e.find(i=>i.id===t))==null?void 0:r.parentId;for(;o;){let i=e.find(s=>s.id===o);o=i?.parentId,i&&(n=n.concat(i))}return n}function cn(e,t){let r=e.filter(o=>{var i;return o.parentId===t&&((i=o.context)==null?void 0:i.open)})||[],n=r;for(;n.length;)n=e.filter(o=>{var i;return(i=n)==null?void 0:i.some(s=>{var l;return o.parentId===s.id&&((l=o.context)==null?void 0:l.open)})})||[],r=r.concat(n);return r}function Uo(e){return"composedPath"in e?e.composedPath()[0]:e.target}var pg="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function qu(e){return Ir(e)&&e.matches(pg)}function Xe(e){e.preventDefault(),e.stopPropagation()}var Fo=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function ju(e,t){let r=an(e,Fo());t==="prev"&&r.reverse();let n=r.indexOf(wr(Je(e)));return r.slice(n+1)[0]}function Yu(){return ju(document.body,"next")}function Ku(){return ju(document.body,"prev")}function un(e,t){let r=t||e.currentTarget,n=e.relatedTarget;return!n||!Qe(r,n)}function dg(e){an(e,Fo()).forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")})}function fg(e){e.querySelectorAll("[data-tabindex]").forEach(r=>{let n=r.dataset.tabindex;delete r.dataset.tabindex,n?r.setAttribute("tabindex",n):r.removeAttribute("tabindex")})}var mg=S["useInsertionEffect".toString()],gg=mg||(e=>e());function fn(e){let t=S.useRef(()=>{});return gg(()=>{t.current=e}),S.useCallback(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.current==null?void 0:t.current(...n)},[])}var Ss={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Ts,Es;function Lu(e){e.key==="Tab"&&(Ts=e.target,clearTimeout(Es))}function hg(e){let t=Ts===e.relatedTarget;return Ts=e.relatedTarget,clearTimeout(Es),t}var Ho=S.forwardRef(function(t,r){let n=fn(t.onFocus),[o,i]=S.useState();return Pe(()=>(xs()&&i("button"),document.addEventListener("keydown",Lu),()=>{document.removeEventListener("keydown",Lu)}),[]),S.createElement("span",No({},t,{ref:r,tabIndex:0,role:o,"aria-hidden":o?void 0:!0,"data-floating-ui-focus-guard":"",style:Ss,onFocus:s=>{xs()&&$u()&&!hg(s)?(s.persist(),Es=window.setTimeout(()=>{n(s)},50)):n(s)}}))}),Xu=S.createContext(null),yg=function(e){let{id:t,enabled:r=!0}=e===void 0?{}:e,[n,o]=S.useState(null),i=Do(),s=Qu();return Pe(()=>{if(!r)return;let l=t?document.getElementById(t):null;if(l)l.setAttribute("data-floating-ui-portal",""),o(l);else{let a=document.createElement("div");t!==""&&(a.id=t||i),a.setAttribute("data-floating-ui-portal",""),o(a);let c=s?.portalNode||document.body;return c.appendChild(a),()=>{c.removeChild(a)}}},[t,s,i,r]),n},EI=e=>{let{children:t,id:r,root:n=null,preserveTabOrder:o=!0}=e,i=yg({id:r,enabled:!n}),[s,l]=S.useState(null),a=S.useRef(null),c=S.useRef(null),u=S.useRef(null),p=S.useRef(null),f=!!s&&!s.modal&&!!(n||i)&&o;return S.useEffect(()=>{if(!i||!o||s!=null&&s.modal)return;function d(h){i&&un(h)&&(h.type==="focusin"?fg:dg)(i)}return i.addEventListener("focusin",d,!0),i.addEventListener("focusout",d,!0),()=>{i.removeEventListener("focusin",d,!0),i.removeEventListener("focusout",d,!0)}},[i,o,s?.modal]),S.createElement(Xu.Provider,{value:S.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:a,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:p,portalNode:i,setFocusManagerState:l}),[o,i])},f&&i&&S.createElement(Ho,{"data-type":"outside",ref:a,onFocus:d=>{if(un(d,i)){var h;(h=u.current)==null||h.focus()}else{let m=Ku()||s?.refs.domReference.current;m?.focus()}}}),f&&i&&S.createElement("span",{"aria-owns":i.id,style:Ss}),n?(0,pn.createPortal)(t,n):i?(0,pn.createPortal)(t,i):null,f&&i&&S.createElement(Ho,{"data-type":"outside",ref:c,onFocus:d=>{if(un(d,i)){var h;(h=p.current)==null||h.focus()}else{let m=Yu()||s?.refs.domReference.current;m?.focus(),s?.closeOnFocusOut&&s?.onOpenChange(!1)}}}))},Qu=()=>S.useContext(Xu),vg=S.forwardRef(function(t,r){return S.createElement("button",No({},t,{type:"button",ref:r,tabIndex:-1,style:Ss}))});function II(e){let{context:t,children:r,order:n=["content"],guards:o=!0,initialFocus:i=0,returnFocus:s=!0,modal:l=!0,visuallyHiddenDismiss:a=!1,closeOnFocusOut:c=!0}=e,{refs:u,nodeId:p,onOpenChange:f,events:d,dataRef:h,elements:{domReference:m,floating:v}}=t,y=Ht(n),b=Ar(),x=Qu(),[I,T]=S.useState(null),w=typeof i=="number"&&i<0,D=S.useRef(null),N=S.useRef(null),_=S.useRef(!1),C=S.useRef(null),g=S.useRef(!1),k=x!=null,O=m&&m.getAttribute("role")==="combobox"&&qu(m),P=S.useCallback(function(A){return A===void 0&&(A=v),A?an(A,Fo()):[]},[v]),R=S.useCallback(A=>{let F=P(A);return y.current.map(L=>m&&L==="reference"?m:v&&L==="floating"?v:F).filter(Boolean).flat()},[m,v,y,P]);S.useEffect(()=>{if(!l)return;function A(L){if(L.key==="Tab"){P().length===0&&!O&&Xe(L);let U=R(),Z=Uo(L);y.current[0]==="reference"&&Z===m&&(Xe(L),L.shiftKey?Ft(U[U.length-1]):Ft(U[1])),y.current[1]==="floating"&&Z===v&&L.shiftKey&&(Xe(L),Ft(U[0]))}}let F=Je(v);return F.addEventListener("keydown",A),()=>{F.removeEventListener("keydown",A)}},[m,v,l,y,u,O,P,R]),S.useEffect(()=>{if(!c)return;function A(){g.current=!0,setTimeout(()=>{g.current=!1})}function F(L){let U=L.relatedTarget,Z=!(Qe(m,U)||Qe(v,U)||Qe(U,v)||Qe(x?.portalNode,U)||U!=null&&U.hasAttribute("data-floating-ui-focus-guard")||b&&(cn(b.nodesRef.current,p).find(X=>{var Q,re;return Qe((Q=X.context)==null?void 0:Q.elements.floating,U)||Qe((re=X.context)==null?void 0:re.elements.domReference,U)})||ug(b.nodesRef.current,p).find(X=>{var Q,re;return((Q=X.context)==null?void 0:Q.elements.floating)===U||((re=X.context)==null?void 0:re.elements.domReference)===U})));U&&Z&&!g.current&&U!==C.current&&(_.current=!0,setTimeout(()=>f(!1)))}if(v&&Ir(m))return m.addEventListener("focusout",F),m.addEventListener("pointerdown",A),!l&&v.addEventListener("focusout",F),()=>{m.removeEventListener("focusout",F),m.removeEventListener("pointerdown",A),!l&&v.removeEventListener("focusout",F)}},[m,v,l,p,b,x,f,c]),S.useEffect(()=>{var A;let F=Array.from((x==null||(A=x.portalNode)==null?void 0:A.querySelectorAll("[data-floating-ui-portal]"))||[]);function L(){return[D.current,N.current].filter(Boolean)}if(v&&l){let U=[v,...F,...L()],Z=Su(y.current.includes("reference")||O?U.concat(m||[]):U);return()=>{Z()}}},[m,v,l,y,x,O]),S.useEffect(()=>{if(l&&!o&&v){let A=[],F=Fo(),L=an(Je(v).body,F),U=R(),Z=L.filter(X=>!U.includes(X));return Z.forEach((X,Q)=>{A[Q]=X.getAttribute("tabindex"),X.setAttribute("tabindex","-1")}),()=>{Z.forEach((X,Q)=>{let re=A[Q];re==null?X.removeAttribute("tabindex"):X.setAttribute("tabindex",re)})}}},[v,l,o,R]),Pe(()=>{if(!v)return;let A=Je(v),F=s,L=!1,U=wr(A),Z=h.current;C.current=U;let X=R(v),Q=(typeof i=="number"?X[i]:i.current)||v;!w&&Ft(Q,{preventScroll:Q===v});function re(M){if(M.type==="escapeKey"&&u.domReference.current&&(C.current=u.domReference.current),["referencePress","escapeKey"].includes(M.type))return;let te=M.data.returnFocus;typeof te=="object"?(F=!0,L=te.preventScroll):F=te}return d.on("dismiss",re),()=>{if(d.off("dismiss",re),Qe(v,wr(A))&&u.domReference.current&&(C.current=u.domReference.current),F&&Ir(C.current)&&!_.current)if(!u.domReference.current||g.current)Ft(C.current,{cancelPrevious:!1,preventScroll:L});else{var M;Z.__syncReturnFocus=!0,(M=C.current)==null||M.focus({preventScroll:L}),setTimeout(()=>{delete Z.__syncReturnFocus})}}},[v,R,i,s,h,u,d,w]),Pe(()=>{if(x)return x.setFocusManagerState({...t,modal:l,closeOnFocusOut:c}),()=>{x.setFocusManagerState(null)}},[x,l,c,t]),Pe(()=>{if(w||!v)return;function A(){T(P().length)}if(A(),typeof MutationObserver=="function"){let F=new MutationObserver(A);return F.observe(v,{childList:!0,subtree:!0}),()=>{F.disconnect()}}},[v,P,w,u]);let W=o&&(k||l)&&!O;function G(A){return a&&l?S.createElement(vg,{ref:A==="start"?D:N,onClick:()=>f(!1)},typeof a=="string"?a:"Dismiss"):null}return S.createElement(S.Fragment,null,W&&S.createElement(Ho,{"data-type":"inside",ref:x?.beforeInsideRef,onFocus:A=>{if(l){let L=R();Ft(n[0]==="reference"?L[0]:L[L.length-1])}else if(x!=null&&x.preserveTabOrder&&x.portalNode)if(_.current=!1,un(A,x.portalNode)){let L=Yu()||m;L?.focus()}else{var F;(F=x.beforeOutsideRef.current)==null||F.focus()}}}),O?null:G("start"),S.cloneElement(r,I===0||n.includes("floating")?{tabIndex:0}:{}),G("end"),W&&S.createElement(Ho,{"data-type":"inside",ref:x?.afterInsideRef,onFocus:A=>{if(l)Ft(R()[0]);else if(x!=null&&x.preserveTabOrder&&x.portalNode)if(_.current=!0,un(A,x.portalNode)){let L=Ku()||m;L?.focus()}else{var F;(F=x.afterOutsideRef.current)==null||F.focus()}}}))}function Ou(e){return Ir(e.target)&&e.target.tagName==="BUTTON"}function Nu(e){return qu(e)}var wI=function(e,t){let{open:r,onOpenChange:n,dataRef:o,elements:{domReference:i}}=e,{enabled:s=!0,event:l="click",toggle:a=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0}=t===void 0?{}:t,p=S.useRef();return S.useMemo(()=>s?{reference:{onPointerDown(f){p.current=f.pointerType},onMouseDown(f){f.button===0&&(Bo(p.current,!0)&&c||l!=="click"&&(r?a&&(!o.current.openEvent||o.current.openEvent.type==="mousedown")&&n(!1):(f.preventDefault(),n(!0)),o.current.openEvent=f.nativeEvent))},onClick(f){if(!o.current.__syncReturnFocus){if(l==="mousedown"&&p.current){p.current=void 0;return}Bo(p.current,!0)&&c||(r?a&&(!o.current.openEvent||o.current.openEvent.type==="click")&&n(!1):n(!0),o.current.openEvent=f.nativeEvent)}},onKeyDown(f){p.current=void 0,u&&(Ou(f)||(f.key===" "&&!Nu(i)&&f.preventDefault(),f.key==="Enter"&&(r?a&&n(!1):n(!0))))},onKeyUp(f){u&&(Ou(f)||Nu(i)||f.key===" "&&(r?a&&n(!1):n(!0)))}}}:{},[s,o,l,c,u,i,a,r,n])};function hs(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);let r=e;return r.target!=null&&t.contains(r.target)}var bg={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},xg={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Tg=function(e){var t,r;return e===void 0&&(e=!0),{escapeKeyBubbles:typeof e=="boolean"?e:(t=e.escapeKey)!=null?t:!0,outsidePressBubbles:typeof e=="boolean"?e:(r=e.outsidePress)!=null?r:!0}},PI=function(e,t){let{open:r,onOpenChange:n,events:o,nodeId:i,elements:{reference:s,domReference:l,floating:a},dataRef:c}=e,{enabled:u=!0,escapeKey:p=!0,outsidePress:f=!0,outsidePressEvent:d="pointerdown",referencePress:h=!1,referencePressEvent:m="pointerdown",ancestorScroll:v=!1,bubbles:y=!0}=t===void 0?{}:t,b=Ar(),x=dn()!=null,I=fn(typeof f=="function"?f:()=>!1),T=typeof f=="function"?I:f,w=S.useRef(!1),{escapeKeyBubbles:D,outsidePressBubbles:N}=Tg(y);return S.useEffect(()=>{if(!r||!u)return;c.current.__escapeKeyBubbles=D,c.current.__outsidePressBubbles=N;function _(P){if(P.key==="Escape"){let R=b?cn(b.nodesRef.current,i):[];if(R.length>0){let W=!0;if(R.forEach(G=>{var A;if((A=G.context)!=null&&A.open&&!G.context.dataRef.current.__escapeKeyBubbles){W=!1;return}}),!W)return}o.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),n(!1)}}function C(P){let R=w.current;if(w.current=!1,R||typeof T=="function"&&!T(P))return;let W=Uo(P);if(Ir(W)&&a){let F=a.ownerDocument.defaultView||window,L=W.scrollWidth>W.clientWidth,U=W.scrollHeight>W.clientHeight,Z=U&&P.offsetX>W.clientWidth;if(U&&F.getComputedStyle(W).direction==="rtl"&&(Z=P.offsetX<=W.offsetWidth-W.clientWidth),Z||L&&P.offsetY>W.clientHeight)return}let G=b&&cn(b.nodesRef.current,i).some(F=>{var L;return hs(P,(L=F.context)==null?void 0:L.elements.floating)});if(hs(P,a)||hs(P,l)||G)return;let A=b?cn(b.nodesRef.current,i):[];if(A.length>0){let F=!0;if(A.forEach(L=>{var U;if((U=L.context)!=null&&U.open&&!L.context.dataRef.current.__outsidePressBubbles){F=!1;return}}),!F)return}o.emit("dismiss",{type:"outsidePress",data:{returnFocus:x?{preventScroll:!0}:Gu(P)||Vu(P)}}),n(!1)}function g(){n(!1)}let k=Je(a);p&&k.addEventListener("keydown",_),T&&k.addEventListener(d,C);let O=[];return v&&(at(l)&&(O=Ve(l)),at(a)&&(O=O.concat(Ve(a))),!at(s)&&s&&s.contextElement&&(O=O.concat(Ve(s.contextElement)))),O=O.filter(P=>{var R;return P!==((R=k.defaultView)==null?void 0:R.visualViewport)}),O.forEach(P=>{P.addEventListener("scroll",g,{passive:!0})}),()=>{p&&k.removeEventListener("keydown",_),T&&k.removeEventListener(d,C),O.forEach(P=>{P.removeEventListener("scroll",g)})}},[c,a,l,s,p,T,d,o,b,i,r,n,v,u,D,N,x]),S.useEffect(()=>{w.current=!1},[T,d]),S.useMemo(()=>u?{reference:{[bg[m]]:()=>{h&&(o.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),n(!1))}},floating:{[xg[d]]:()=>{w.current=!0}}}:{},[u,o,h,d,m,n])};var Du=!1,Is="ArrowUp",Wo="ArrowDown",Pr="ArrowLeft",mn="ArrowRight";function Oo(e,t,r){return Math.floor(e/t)!==r}function ln(e,t){return t<0||t>=e.current.length}function Me(e,t){let{startingIndex:r=-1,decrement:n=!1,disabledIndices:o,amount:i=1}=t===void 0?{}:t,s=e.current,l=r;do{var a,c;l=l+(n?-i:i)}while(l>=0&&l<=s.length-1&&(o?o.includes(l):s[l]==null||(a=s[l])!=null&&a.hasAttribute("disabled")||((c=s[l])==null?void 0:c.getAttribute("aria-disabled"))==="true"));return l}function zo(e,t,r){switch(e){case"vertical":return t;case"horizontal":return r;default:return t||r}}function Bu(e,t){return zo(t,e===Is||e===Wo,e===Pr||e===mn)}function ys(e,t,r){return zo(t,e===Wo,r?e===Pr:e===mn)||e==="Enter"||e==" "||e===""}function Cg(e,t,r){return zo(t,r?e===Pr:e===mn,e===Wo)}function Sg(e,t,r){return zo(t,r?e===mn:e===Pr,e===Is)}function vs(e,t){return Me(e,{disabledIndices:t})}function Fu(e,t){return Me(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}var _I=function(e,t){let{open:r,onOpenChange:n,refs:o,elements:{domReference:i}}=e,{listRef:s,activeIndex:l,onNavigate:a=()=>{},enabled:c=!0,selectedIndex:u=null,allowEscape:p=!1,loop:f=!1,nested:d=!1,rtl:h=!1,virtual:m=!1,focusItemOnOpen:v="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:b=!0,disabledIndices:x=void 0,orientation:I="vertical",cols:T=1,scrollItemIntoView:w=!0}=t===void 0?{listRef:{current:[]},activeIndex:null,onNavigate:()=>{}}:t,D=dn(),N=Ar(),_=fn(a),C=S.useRef(v),g=S.useRef(u??-1),k=S.useRef(null),O=S.useRef(!0),P=S.useRef(_),R=S.useRef(r),W=S.useRef(!1),G=S.useRef(!1),A=Ht(x),F=Ht(r),L=Ht(w),[U,Z]=S.useState(),X=S.useCallback(function(M,te,K){K===void 0&&(K=!1);let ee=M.current[te.current];m?Z(ee?.id):Ft(ee,{preventScroll:!0,sync:$u()&&xs()?Du||W.current:!1}),requestAnimationFrame(()=>{let Ce=L.current;Ce&&ee&&(K||!O.current)&&(ee.scrollIntoView==null||ee.scrollIntoView(typeof Ce=="boolean"?{block:"nearest",inline:"nearest"}:Ce))})},[m,L]);Pe(()=>{document.createElement("div").focus({get preventScroll(){return Du=!0,!1}})},[]),Pe(()=>{c&&(r?C.current&&u!=null&&(G.current=!0,_(u)):R.current&&(g.current=-1,P.current(null)))},[c,r,u,_]),Pe(()=>{if(c&&r)if(l==null){if(W.current=!1,u!=null)return;R.current&&(g.current=-1,X(s,g)),!R.current&&C.current&&(k.current!=null||C.current===!0&&k.current==null)&&(g.current=k.current==null||ys(k.current,I,h)||d?vs(s,A.current):Fu(s,A.current),_(g.current))}else ln(s,l)||(g.current=l,X(s,g,G.current),G.current=!1)},[c,r,l,u,d,s,I,h,_,X,A]),Pe(()=>{if(c&&R.current&&!r){var M,te;let K=N==null||(M=N.nodesRef.current.find(ee=>ee.id===D))==null||(te=M.context)==null?void 0:te.elements.floating;K&&!Qe(K,wr(Je(K)))&&K.focus({preventScroll:!0})}},[c,r,N,D]),Pe(()=>{k.current=null,P.current=_,R.current=r});let Q=l!=null,re=S.useMemo(()=>{function M(K){if(!r)return;let ee=s.current.indexOf(K);ee!==-1&&_(ee)}return{onFocus(K){let{currentTarget:ee}=K;M(ee)},onClick:K=>{let{currentTarget:ee}=K;return ee.focus({preventScroll:!0})},...y&&{onMouseMove(K){let{currentTarget:ee}=K;M(ee)},onPointerLeave(){if(O.current&&(g.current=-1,X(s,g),(0,pn.flushSync)(()=>_(null)),!m)){var K;(K=o.floating.current)==null||K.focus({preventScroll:!0})}}}}},[r,o,X,y,s,_,m]);return S.useMemo(()=>{if(!c)return{};let M=A.current;function te(j){if(O.current=!1,W.current=!0,!F.current&&j.currentTarget===o.floating.current)return;if(d&&Sg(j.key,I,h)){Xe(j),n(!1),Ir(i)&&i.focus();return}let _e=g.current,le=vs(s,M),V=Fu(s,M);if(j.key==="Home"&&(g.current=le,_(g.current)),j.key==="End"&&(g.current=V,_(g.current)),T>1){let H=g.current;if(j.key===Is){if(Xe(j),H===-1)g.current=V;else if(g.current=Me(s,{startingIndex:H,amount:T,decrement:!0,disabledIndices:M}),f&&(H-T<le||g.current<0)){let me=H%T,pe=V%T,Ne=V-(pe-me);pe===me?g.current=V:g.current=pe>me?Ne:Ne-T}ln(s,g.current)&&(g.current=H),_(g.current)}if(j.key===Wo&&(Xe(j),H===-1?g.current=le:(g.current=Me(s,{startingIndex:H,amount:T,disabledIndices:M}),f&&H+T>V&&(g.current=Me(s,{startingIndex:H%T-T,amount:T,disabledIndices:M}))),ln(s,g.current)&&(g.current=H),_(g.current)),I==="both"){let me=Math.floor(H/T);j.key===mn&&(Xe(j),H%T!==T-1?(g.current=Me(s,{startingIndex:H,disabledIndices:M}),f&&Oo(g.current,T,me)&&(g.current=Me(s,{startingIndex:H-H%T-1,disabledIndices:M}))):f&&(g.current=Me(s,{startingIndex:H-H%T-1,disabledIndices:M})),Oo(g.current,T,me)&&(g.current=H)),j.key===Pr&&(Xe(j),H%T!==0?(g.current=Me(s,{startingIndex:H,disabledIndices:M,decrement:!0}),f&&Oo(g.current,T,me)&&(g.current=Me(s,{startingIndex:H+(T-H%T),decrement:!0,disabledIndices:M}))):f&&(g.current=Me(s,{startingIndex:H+(T-H%T),decrement:!0,disabledIndices:M})),Oo(g.current,T,me)&&(g.current=H));let pe=Math.floor(V/T)===me;ln(s,g.current)&&(f&&pe?g.current=j.key===Pr?V:Me(s,{startingIndex:H-H%T-1,disabledIndices:M}):g.current=H),_(g.current);return}}if(Bu(j.key,I)){if(Xe(j),r&&!m&&wr(j.currentTarget.ownerDocument)===j.currentTarget){g.current=ys(j.key,I,h)?le:V,_(g.current);return}ys(j.key,I,h)?f?g.current=_e>=V?p&&_e!==s.current.length?-1:le:Me(s,{startingIndex:_e,disabledIndices:M}):g.current=Math.min(V,Me(s,{startingIndex:_e,disabledIndices:M})):f?g.current=_e<=le?p&&_e!==-1?s.current.length:V:Me(s,{startingIndex:_e,decrement:!0,disabledIndices:M}):g.current=Math.max(le,Me(s,{startingIndex:_e,decrement:!0,disabledIndices:M})),ln(s,g.current)?_(null):_(g.current)}}function K(j){v==="auto"&&Gu(j.nativeEvent)&&(C.current=!0)}function ee(j){C.current=v,v==="auto"&&Vu(j.nativeEvent)&&(C.current=!0)}let Ce=m&&r&&Q&&{"aria-activedescendant":U};return{reference:{...Ce,onKeyDown(j){O.current=!1;let _e=j.key.indexOf("Arrow")===0;if(m&&r)return te(j);if(!r&&!b&&_e)return;if((_e||j.key==="Enter"||j.key===" "||j.key==="")&&(k.current=j.key),d){Cg(j.key,I,h)&&(Xe(j),r?(g.current=vs(s,M),_(g.current)):n(!0));return}Bu(j.key,I)&&(u!=null&&(g.current=u),Xe(j),!r&&b?n(!0):te(j),r&&_(g.current))},onFocus(){r&&_(null)},onPointerDown:ee,onMouseDown:K,onClick:K},floating:{"aria-orientation":I==="both"?void 0:I,...Ce,onKeyDown:te,onPointerMove(){O.current=!0}},item:re}},[i,o,U,A,F,s,c,I,h,m,r,Q,d,u,b,p,T,f,v,_,n,re])};function AI(e){return S.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})},e)}var RI=function(e,t){let{open:r}=e,{enabled:n=!0,role:o="dialog"}=t===void 0?{}:t,i=Do(),s=Do();return S.useMemo(()=>{let l={id:i,role:o};return n?o==="tooltip"?{reference:{"aria-describedby":r?i:void 0},floating:l}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":o==="alertdialog"?"dialog":o,"aria-controls":r?i:void 0,...o==="listbox"&&{role:"combobox"},...o==="menu"&&{id:s}},floating:{...l,...o==="menu"&&{"aria-labelledby":s}}}:{}},[n,o,r,i,s])};var MI=function(e,t){var r;let{open:n,dataRef:o,refs:i}=e,{listRef:s,activeIndex:l,onMatch:a=()=>{},enabled:c=!0,findMatch:u=null,resetMs:p=1e3,ignoreKeys:f=[],selectedIndex:d=null}=t===void 0?{listRef:{current:[]},activeIndex:null}:t,h=S.useRef(),m=S.useRef(""),v=S.useRef((r=d??l)!=null?r:-1),y=S.useRef(null),b=fn(a),x=Ht(u),I=Ht(f);return Pe(()=>{n&&(clearTimeout(h.current),y.current=null,m.current="")},[n]),Pe(()=>{if(n&&m.current===""){var T;v.current=(T=d??l)!=null?T:-1}},[n,d,l]),S.useMemo(()=>{if(!c)return{};function T(w){var D;let N=Uo(w.nativeEvent);if(at(N)&&(wr(Je(N))!==w.currentTarget?(D=i.floating.current)!=null&&D.contains(N)&&N.closest('[role="dialog"],[role="menu"],[role="listbox"],[role="tree"],[role="grid"]')!==w.currentTarget:!w.currentTarget.contains(N)))return;m.current.length>0&&m.current[0]!==" "&&(o.current.typing=!0,w.key===" "&&Xe(w));let _=s.current;if(_==null||I.current.includes(w.key)||w.key.length!==1||w.ctrlKey||w.metaKey||w.altKey)return;_.every(R=>{var W,G;return R?((W=R[0])==null?void 0:W.toLocaleLowerCase())!==((G=R[1])==null?void 0:G.toLocaleLowerCase()):!0})&&m.current===w.key&&(m.current="",v.current=y.current),m.current+=w.key,clearTimeout(h.current),h.current=setTimeout(()=>{m.current="",v.current=y.current,o.current.typing=!1},p);let g=v.current,k=[..._.slice((g||0)+1),..._.slice(0,(g||0)+1)],O=x.current?x.current(k,m.current):k.find(R=>R?.toLocaleLowerCase().indexOf(m.current.toLocaleLowerCase())===0),P=O?_.indexOf(O):-1;P!==-1&&(b(P),y.current=P)}return{reference:{onKeyDown:T},floating:{onKeyDown:T}}},[c,o,s,p,I,x,b,i])};function Eg(e,t){let[r,n]=e,o=!1,i=t.length;for(let s=0,l=i-1;s<i;l=s++){let[a,c]=t[s]||[0,0],[u,p]=t[l]||[0,0];c>=n!=p>=n&&r<=(u-a)*(n-c)/(p-c)+a&&(o=!o)}return o}function Ig(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function kI(e){let{restMs:t=0,buffer:r=.5,blockPointerEvents:n=!1}=e===void 0?{}:e,o,i=!1,s=!1,l=a=>{let{x:c,y:u,placement:p,elements:f,onClose:d,nodeId:h,tree:m}=a;return function(y){function b(){clearTimeout(o),d()}if(clearTimeout(o),!f.domReference||!f.floating||p==null||c==null||u==null)return;let{clientX:x,clientY:I}=y,T=[x,I],w=Uo(y),D=y.type==="mouseleave",N=Qe(f.floating,w),_=Qe(f.domReference,w),C=f.domReference.getBoundingClientRect(),g=f.floating.getBoundingClientRect(),k=p.split("-")[0],O=c>g.right-g.width/2,P=u>g.bottom-g.height/2,R=Ig(T,C);if(N&&(s=!0,!D))return;if(_&&(s=!1),_&&!D){s=!0;return}if(D&&at(y.relatedTarget)&&Qe(f.floating,y.relatedTarget)||m&&cn(m.nodesRef.current,h).some(F=>{let{context:L}=F;return L?.open}))return;if(k==="top"&&u>=C.bottom-1||k==="bottom"&&u<=C.top+1||k==="left"&&c>=C.right-1||k==="right"&&c<=C.left+1)return b();let W=[];switch(k){case"top":W=[[g.left,C.top+1],[g.left,g.bottom-1],[g.right,g.bottom-1],[g.right,C.top+1]],i=x>=g.left&&x<=g.right&&I>=g.top&&I<=C.top+1;break;case"bottom":W=[[g.left,g.top+1],[g.left,C.bottom-1],[g.right,C.bottom-1],[g.right,g.top+1]],i=x>=g.left&&x<=g.right&&I>=C.bottom-1&&I<=g.bottom;break;case"left":W=[[g.right-1,g.bottom],[g.right-1,g.top],[C.left+1,g.top],[C.left+1,g.bottom]],i=x>=g.left&&x<=C.left+1&&I>=g.top&&I<=g.bottom;break;case"right":W=[[C.right-1,g.bottom],[C.right-1,g.top],[g.left+1,g.top],[g.left+1,g.bottom]],i=x>=C.right-1&&x<=g.right&&I>=g.top&&I<=g.bottom;break}function G(F){let[L,U]=F,Z=g.width>C.width,X=g.height>C.height;switch(k){case"top":{let Q=[Z?L+r/2:O?L+r*4:L-r*4,U+r+1],re=[Z?L-r/2:O?L+r*4:L-r*4,U+r+1],M=[[g.left,O||Z?g.bottom-r:g.top],[g.right,O?Z?g.bottom-r:g.top:g.bottom-r]];return[Q,re,...M]}case"bottom":{let Q=[Z?L+r/2:O?L+r*4:L-r*4,U-r],re=[Z?L-r/2:O?L+r*4:L-r*4,U-r],M=[[g.left,O||Z?g.top+r:g.bottom],[g.right,O?Z?g.top+r:g.bottom:g.top+r]];return[Q,re,...M]}case"left":{let Q=[L+r+1,X?U+r/2:P?U+r*4:U-r*4],re=[L+r+1,X?U-r/2:P?U+r*4:U-r*4];return[...[[P||X?g.right-r:g.left,g.top],[P?X?g.right-r:g.left:g.right-r,g.bottom]],Q,re]}case"right":{let Q=[L-r,X?U+r/2:P?U+r*4:U-r*4],re=[L-r,X?U-r/2:P?U+r*4:U-r*4],M=[[P||X?g.left+r:g.right,g.top],[P?X?g.left+r:g.right:g.left+r,g.bottom]];return[Q,re,...M]}}}let A=i?W:G([c,u]);if(!i){if(s&&!R)return b();Eg([x,I],A)?t&&!s&&(o=setTimeout(b,t)):b()}}};return l.__options={blockPointerEvents:n},l}function LI(e){e===void 0&&(e={});let{open:t=!1,onOpenChange:r,nodeId:n}=e,o=Tu(e),i=Ar(),s=S.useRef(null),l=S.useRef({}),a=S.useState(()=>Hu())[0],[c,u]=S.useState(null),p=S.useCallback(y=>{let b=at(y)?{getBoundingClientRect:()=>y.getBoundingClientRect(),contextElement:y}:y;o.refs.setReference(b)},[o.refs]),f=S.useCallback(y=>{(at(y)||y===null)&&(s.current=y,u(y)),(at(o.refs.reference.current)||o.refs.reference.current===null||y!==null&&!at(y))&&o.refs.setReference(y)},[o.refs]),d=S.useMemo(()=>({...o.refs,setReference:f,setPositionReference:p,domReference:s}),[o.refs,f,p]),h=S.useMemo(()=>({...o.elements,domReference:c}),[o.elements,c]),m=fn(r),v=S.useMemo(()=>({...o,refs:d,elements:h,dataRef:l,nodeId:n,events:a,open:t,onOpenChange:m}),[o,n,a,t,m,d,h]);return Pe(()=>{let y=i?.nodesRef.current.find(b=>b.id===n);y&&(y.context=v)}),S.useMemo(()=>({...o,context:v,refs:d,reference:f,positionReference:p}),[o,d,v,f,p])}function bs(e,t,r){let n=new Map;return{...r==="floating"&&{tabIndex:-1},...e,...t.map(o=>o?o[r]:null).concat(e).reduce((o,i)=>(i&&Object.entries(i).forEach(s=>{let[l,a]=s;if(l.indexOf("on")===0){if(n.has(l)||n.set(l,[]),typeof a=="function"){var c;(c=n.get(l))==null||c.push(a),o[l]=function(){for(var u,p=arguments.length,f=new Array(p),d=0;d<p;d++)f[d]=arguments[d];(u=n.get(l))==null||u.forEach(h=>h(...f))}}}else o[l]=a}),o),{})}}var OI=function(e){e===void 0&&(e=[]);let t=e,r=S.useCallback(i=>bs(i,e,"reference"),t),n=S.useCallback(i=>bs(i,e,"floating"),t),o=S.useCallback(i=>bs(i,e,"item"),e.map(i=>i?.item));return S.useMemo(()=>({getReferenceProps:r,getFloatingProps:n,getItemProps:o}),[r,n,o])};var Oe={REPLACE_SELECTION:"397f0c89-596c-4433-be95-02faeccee083",INSERT_BELOW:"d0b0b2a0-0b7e-4b1e-9b0e-5b7b6b2b4b2b",INSERT:"5fd6256c-f03c-4520-8df4-64b248247216",CONTINUE_WRITING:"207d0f63-7905-479f-9962-1e3ebd0b65ee",INSERT_ABOVE:"1f755cfe-cc56-4a73-9cc4-d2baf2c39624",TRY_AGAIN:"6b9f9cb4-b1b1-4897-9156-903dbc52b2a1",DISCARD:"82dc6fe3-da3d-437c-aa0e-268e4f602787",MAKE_LONGER:"2bd23d4b-6f6b-491c-a42f-f6c24a3b075d",MAKE_SHORTER:"44ea14bf-e81d-4e24-9627-b2ce9b1546dd",COPY:"8fcccd1e-eb6e-419e-8c79-d8bc7c10e72c"},Rr=[{id:Oe.REPLACE_SELECTION,text:"Replace selection",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"Done"},children:[]},{id:Oe.INSERT,text:"Insert",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"NoteRight"},children:[]},{id:Oe.INSERT_BELOW,text:"Insert below",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"NoteDown"},children:[]},{id:Oe.CONTINUE_WRITING,text:"Continue writing",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"DefaultIcon",actions:[{type:"FETCH_ACTIONS",parameters:{template:"c0f7a642-9e34-4b1f-a2ee-1c4c5e93fa23"}}]},children:[]},{id:Oe.COPY,text:"Copy",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"Copy"},children:[]},{id:Oe.TRY_AGAIN,text:"Try again",parent:"root",droppable:!1,data:{icon:"Replay",type:"shortcuts",editable:!1},children:[]},{id:Oe.DISCARD,text:"Discard",parent:"root",droppable:!1,data:{icon:"Delete",type:"shortcuts",editable:!1},children:[]}];var Ju=new pt("ChatBoxInputMediator"),ws=class{constructor(){this.inputValue="";this.subscribers=[]}subscribe(t){this.subscribers.push(t)}unsubscribe(t){this.subscribers=this.subscribers.filter(r=>r!==t)}updateInputValue(t,r){Ju.info("updateInputValue",t),this.inputValue=t,this.notifySubscribers(r)}getInputValue(){return this.inputValue}notifySubscribers(t){this.subscribers.forEach(r=>{r(this.inputValue,t)})}},Ps=class{constructor(){this.inputValue="";this.subscribers=[]}subscribe(t){this.subscribers.push(t)}unsubscribe(t){this.subscribers=this.subscribers.filter(r=>r!==t)}updateInputValue(t,r){Ju.info("updateInputValue",t),this.inputValue=t,this.notifySubscribers(r)}getInputValue(){return this.inputValue}notifySubscribers(t){this.subscribers.forEach(r=>{r(this.inputValue,t)})}},_s=class e{static{this.mediators={chatBoxInputMediator:new ws,floatingMenuInputMediator:new Ps}}static getMediator(t){return e.mediators[t]}},gn=e=>_s.getMediator(e);var Zu=e=>{let t=[],r=gi(e,"parent"),n=o=>{o.children=r[o.id]||[],o.children.length>0&&mi(o.children,n)};return mi(r.root,o=>{n(o),t.push(o)}),t},ep=(e,t)=>!(e.left>=t.left&&e.right<=t.right&&e.top>=t.top&&e.bottom<=t.bottom),wg=(e,t)=>e.left<=t.right&&e.right>=t.left&&e.top<=t.bottom&&e.bottom>=t.top,Pg=(e,t,r)=>!wg(e,t)&&ep(t,r),KI=(e,t=220,r=400,n={offset:8,directions:["bottom","top","right","left"]})=>{let{offset:o=16,directions:i}=n,s={left:0,right:window.innerWidth,top:0,bottom:window.innerHeight},l=i||["bottom","top","right","left"],a=[];l.map(u=>{switch(u){case"bottom":a.push({left:e.left,right:e.left+t,top:e.bottom+o,bottom:e.bottom+o+r,direction:u});break;case"top":a.push({left:e.left,right:e.left+t,top:e.top-o-r,bottom:e.top-o,direction:u});break;case"left":a.push({left:e.left-o-t,right:e.left-o,top:e.top,bottom:e.top+r,direction:u}),a.push({left:e.left-o-t,right:e.left-o,top:s.bottom-r-o,bottom:s.bottom-o,direction:u});break;case"right":a.push({left:e.right+o,right:e.right+o+t,top:e.top,bottom:e.top+r,direction:u}),a.push({left:e.right+o,right:e.right+o+t,top:s.bottom-r-o,bottom:s.bottom-o,direction:u});break;default:break}});let c=a.find((u,p)=>!Pg(e,u,s));return c?{x:c.left-62,y:c.top}:{x:o,y:o}},qe=e=>({left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top,x:e.x||e.left,y:e.y||e.top}),As=(e,t=.8)=>{let{width:r,height:n}=e,o={left:0,right:window.innerWidth,top:0,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight,x:0,y:0};return r*n>o.width*o.height*t?{x:o.width/2,y:o.height/2,left:o.width/2,right:o.width/2,top:o.height/2,bottom:o.height/2,width:0,height:0}:e},tp=(e,t,r)=>{let o=t.toLowerCase().trim().split(/\s+/).filter(Boolean),i=ue(e.filter(a=>{let{data:{searchText:c}}=a,u=r?.[a.id]||c;if(!u)return!1;let p=u.split(/\s/),f=!0;for(let d of o){let h=p.findIndex(m=>m.includes(d));if(h===-1){f=!1;break}p.splice(h,1)}return f})),s=[],l=gi(lr(i,"id"),"parent");return Object.keys(l).forEach(a=>{let c=l[a].filter(u=>u.data.type!=="group");if(c.length>0)if(a==="root"){s.push(...c);return}else{let u=e.find(p=>p.id===a);u&&s.push({...u,children:c})}}),s};var XI=[en({fallbackPlacements:["top-start","right","left"]}),rn(),tn({crossAxis:!0,padding:16}),Tr(e=>{if(e.placement.indexOf("bottom")>-1){let t={left:0,right:window.innerWidth,top:0,bottom:window.innerHeight+window.scrollY};return ep({top:e.y,left:e.x,bottom:e.y+e.rects.floating.height+50,right:e.rects.floating.width+e.x},t)?e.rects.reference.y-e.y-e.rects.floating.height-8:8}else return 8})];var Rs=()=>{let e=kn()?.querySelector(`#${$s}`);return e&&e.getAttribute("aria-hidden")==="false"},QI=e=>Object.values(Oe).find(t=>t===e)!==void 0,JI=e=>Object.values(Rr).find(t=>t.id===e),ZI=e=>{let t;return Object.keys(Oe).forEach(r=>{Oe[r]===e&&(t=r)}),t},rp=()=>{let e=gn("floatingMenuInputMediator").getInputValue();if(!e)return;let t=3*1e3,r=setInterval(()=>{let o=Lr()?.querySelector(`#${Pn}`);o&&(clearInterval(r),gn("chatBoxInputMediator").updateInputValue(e),setTimeout(()=>{o?.focus()},100))},50);setTimeout(()=>{clearInterval(r)},t)};var _g=(e,t,r=!0)=>{let n=Va(e),{favoriteContextMenuGroup:o}=ja(e),{contextMenuSearchTextWithCurrentLanguage:i}=la(),s=(0,hn.useRef)([]),l=(0,hn.useMemo)(()=>{let c=lr(ue(n?.contextMenu||[]),"id");s.current=c;let u=Zu(c);return u=sa(u,p=>p.data.editable?n?.contextMenuPosition==="end"?0:2:1),o&&r&&u.unshift(o),u},[n,o]);return{contextMenuList:(0,hn.useMemo)(()=>t?.trim()?tp(s.current,t,i):l,[l,e,t,r]),originContextMenuList:n?.contextMenu||[]}};var Vo=E($());var sp=E($());var Ag=()=>{let e=de();return!!(e&&e==="mail.google.com")},yn=class e{static{this.rangeMap=new Map}static setRange(t,r){r&&e.rangeMap.set(t,r)}static getRange(t){return e.rangeMap.get(t)}static removeAllRange(){e.rangeMap.clear()}},np=(e,t)=>{yn.setRange(e,t)},op=e=>yn.getRange(e)||null,Rg=()=>{yn.removeAllRange()},ap=async()=>(await navigator.permissions.query({name:"clipboard-write"})).state==="granted",lp=e=>{let t=0,r=e.ownerDocument||e.document,n=r.defaultView||r.parentWindow,o;if(typeof n.getSelection<"u"&&(o=n.getSelection(),o.rangeCount>0)){let i=n.getSelection().getRangeAt(0),s=i.cloneRange();s.selectNodeContents(e),s.setEnd(i.endContainer,i.endOffset),t=s.toString().length}return t},Mg=e=>{let t=0,r=0,n,o,i,s,l,a=e.ownerDocument||e.document;return typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"?(t=e.selectionStart,r=e.selectionEnd):(o=a.selection.createRange(),o&&o.parentElement()==e&&(s=e.value.length,n=e.value.replace(/\r\n/g,`
`),i=e.createTextRange(),i.moveToBookmark(o.getBookmark()),l=e.createTextRange(),l.collapse(!1),i.compareEndPoints("StartToEnd",l)>-1?t=r=s:(t=-i.moveStart("character",-s),t+=n.slice(0,t).split(`
`).length-1,i.compareEndPoints("EndToEnd",l)>-1?r=s:(r=-i.moveEnd("character",-s),r+=n.slice(0,r).split(`
`).length-1)))),{start:t,end:r}},cp=e=>{let t=e||document;if(t){if(t.getSelection)return String(t.getSelection())?.replace(/\u200B/g,"");if(t.selection)return t.selection.createRange().text?.replace(/\u200B/g,"");if(window.getSelection)return String(window.getSelection())?.replace(/\u200B/g,"")}return""},ks=e=>{try{if(e){let t=e.ownerDocument||e.document,r=t.defaultView||t.parentWindow,n,o=`usechatgpt-start-marker-${ie()}`,i=`usechatgpt-end-marker-${ie()}`,s="";if(typeof t.getSelection<"u"&&(n=t.getSelection()||r.getSelection(),n.rangeCount>0)){dp();let l=r.getSelection().getRangeAt(0).cloneRange();if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"){let a=e,{start:c,end:u}=Mg(a);e.setAttribute("data-usechatgpt-start-offset",c.toString()),e.setAttribute("data-usechatgpt-end-offset",u.toString()),e.setAttribute("data-usechatgpt-marker","usechatgpt-marker"),e.setAttribute("data-usechatgpt-marker-start-id",o),e.setAttribute("data-usechatgpt-marker-end-id",i);let p=a.value.substring(c,u).trim().replace(/\u200B/g,""),f=(p||a.value.substring(0,c).trim()||a.value.trim()||"").replace(/\u200B/g,"");return{startMarkerId:o,endMarkerId:i,selectionText:f,editableElementSelectionText:p}}else{let a=(n.toString()||l.toString()).trim().replace(/\u200B/g,""),c=l.cloneRange();c.selectNodeContents(e),c.setEnd(l.endContainer,l.endOffset);let u=c.toString().trim().replace(/\u200B/g,""),p=(a||u||e.innerText.trim()||"").replace(/\u200B/g,"");document.activeElement?.tagName!=="IFRAME"&&l.startContainer?.tagName==="BODY"&&l.startContainer?.isSameNode(l.endContainer)&&(p="");let f=de();if(!Ag())return np(o,l.cloneRange()),np(i,l.cloneRange()),{startMarkerId:o,endMarkerId:i,selectionText:p,editableElementSelectionText:a};let d=l.cloneRange();d.collapse(!0);let h=t.createElement("span");h.id=o,h.style.lineHeight="0",h.style.display="none",h.textContent=s,h.setAttribute("data-usechatgpt-marker","usechatgpt-marker"),h.setAttribute("contenteditable","false"),h.setAttribute("data-usechatgpt-marker-start-id",o),d.insertNode(h),d=l.cloneRange(),d.collapse(!1);let m=t.createElement("span");return m.id=i,m.style.lineHeight="0",m.style.display="none",m.textContent=s,m.setAttribute("data-usechatgpt-marker","usechatgpt-marker"),m.setAttribute("contenteditable","false"),m.setAttribute("data-usechatgpt-marker-end-id",i),d.insertNode(m),{startMarkerId:o,endMarkerId:i,selectionText:p,editableElementSelectionText:a}}}}}catch{}return{startMarkerId:"",endMarkerId:"",selectionText:"",editableElementSelectionText:""}},up=e=>{let t=de(),r="",n="";try{if(e){let o=e.ownerDocument||e.document,i=o.defaultView||o.parentWindow,s;if(typeof i.getSelection<"u"&&(s=i.getSelection(),s.rangeCount>0)){let l=null;switch(t){case"notion.so":l=o.querySelector(".notion-page-content")||o.querySelector('[data-content-editable-root="true"]');break;case"larksuite.com":l=o.querySelector(".page-block-children")||o.querySelector(".page-block")||o.querySelector(".root-block");break;case"writer.zoho.com":if(l=document.querySelector("#editorpane"),l){let a=l.querySelectorAll(".overlay"),c=[];if(a.length>0){a.forEach(p=>{let f=p.parentElement?.querySelector(".zw-line-content");f&&(c.find(d=>d===f)||c.push(f))});let u=c.map(p=>p.innerText).join("").trim().replace(/\u200B/g,"");u&&(r=u)}else{let u=l.querySelector(".cursor");if(u){let p=document.createRange();p.selectNode(l);let f=p.cloneRange();f.setEndBefore(u),i.getSelection()?.removeAllRanges(),i.getSelection()?.addRange(f);let d=i.getSelection()?.toString().trim().replace(/\u200B/g,"");if(d)return n=d,{editableElementSelectionText:r,selectionText:n}}}}break;default:{let a=3,c=e.parentElement;for(;a>0&&c;){let u=Mr(c);if(u.isEditableElement&&u.editableElement)if(u.editableElement?.innerText){l=u.editableElement;break}else u.editableElement?.parentElement&&(c=u.editableElement.parentElement,a--);else break}}break}return l?(document.createRange().selectNode(l),n=i.getSelection()?.toString().trim().replace(/\u200B/g,"")||l.innerText,{selectionText:n,editableElementSelectionText:r}):{selectionText:n,editableElementSelectionText:r}}}}catch{}return{selectionText:n,editableElementSelectionText:r}},kg=(e,t,r)=>{let n=e.ownerDocument||document;if(e.focus(),e.setSelectionRange(t,r),e.tagName==="TEXTAREA"){let o=e,i=getComputedStyle(o),s=o.value.match(/\w/)?.[0]||"M",l=i.fontSize,a=i.fontFamily,c=n.createElement("span");c.style.fontSize=l,c.style.fontFamily=a,c.style.position="absolute",c.style.top="-9999px",c.style.left="-9999px",c.innerText=s,n.body.appendChild(c);let u=c.offsetWidth;c.remove();let p=Math.floor(o.getBoundingClientRect().width/u)||30,f=o.value.substring(0,r),d=aa(f.split(/\n/).map(m=>{let v=Math.ceil(m.length/p);return Math.max(v,1)})),h=o.clientHeight/o.rows;o.scrollTop=h*d}else if(e.tagName==="INPUT"){let o=e;o.scrollLeft=o.scrollWidth}},pp=async(e,t,r,n)=>{let o=null,i=document.querySelector(`[data-usechatgpt-marker-start-id="${e}"`),s=document.querySelector(`[data-usechatgpt-marker-end-id="${t}"`),l=null;if(!(!i&&!s&&(l=op(e)||op(t),!l))){if(i&&(i.tagName==="INPUT"||i.tagName==="TEXTAREA")){let a=i;o=a;let c=a?.ownerDocument||document,u=Number(a.getAttribute("data-usechatgpt-start-offset")),p=Number(a.getAttribute("data-usechatgpt-end-offset"));if(hi(u)&&hi(p)){a.tagName==="TEXTAREA"?r=r.replace(/\n+/,`
`):(r=r.replace(/\n+/," "),r=r.replace(/\s+/," "));let f="",d="",h="";n==="REPLACE_SELECTION"?(d=a.value.substring(0,u),h=a.value.substring(p,a.value.length)):n==="INSERT_BELOW"?(d=a.value.substring(0,p),h=a.value.substring(p,a.value.length),!d.endsWith(`
`)&&a.tagName==="TEXTAREA"?r=`
`+r:!d.endsWith(" ")&&a.tagName==="INPUT"&&(r=" "+r)):n==="INSERT_ABOVE"?(d=a.value.substring(0,u),h=a.value.substring(u,a.value.length),!h.startsWith(`
`)&&a.tagName==="TEXTAREA"?r=r+`
`:!h.startsWith(" ")&&a.tagName==="INPUT"&&(r=r+" ")):n==="INSERT"&&(d=a.value.substring(0,p),h=a.value.substring(p,a.value.length)),f=d+r+h;try{await ap()?(await navigator.clipboard.writeText(f),a.focus(),a.select(),c.execCommand("paste",!1,"")):(a.focus(),a.select(),c.execCommand("insertText",!1,f))}catch{a.focus(),a.select(),c.execCommand("insertText",!1,f)}kg(a,d.length,d.length+r.length)}}else if(l){n==="INSERT_BELOW"?r=(`
`+r).replace(/^\n+/,`
`):n==="INSERT_ABOVE"&&(r=(r+`
`).replace(/\n+$/,`
`));try{let a=l.cloneRange();n==="REPLACE_SELECTION"||(n==="INSERT"||n==="INSERT_BELOW"?(a.setStart(l.endContainer,l.endOffset),a.setEnd(l.endContainer,l.endOffset)):n==="INSERT_ABOVE"&&(a.setStart(l.startContainer,l.startOffset),a.setEnd(l.startContainer,l.startOffset))),await ip(a,r)}catch{}}else if(i&&s){let{editableElement:a}=Mr(i);if(!a)return;o=a;let c=a.ownerDocument||document,u=c.createRange();if(u.selectNode(a),u.setStartAfter(i),u.setEndBefore(s),n==="INSERT_BELOW"?(r=(`
`+r).replace(/^\n+/,`
`),u.setStart(u.endContainer,u.endOffset)):n==="INSERT_ABOVE"?(r=(r+`
`).replace(/\n+$/,`
`),u.setEnd(u.startContainer,u.startOffset)):n==="REPLACE_SELECTION"||n==="INSERT"&&(r=r.replace(/^\n+/,""),u.setStart(u.endContainer,u.endOffset)),i.parentElement&&s.parentElement&&i.parentElement.isSameNode(s.parentElement)){let m=u.startOffset,v=u.endOffset,y=i.parentElement;i.remove(),s.remove();let b=!0;for(let x=0;x<y.childNodes.length;x++)if(y.childNodes[x].nodeType!==Node.TEXT_NODE){b=!1;break}if(b){let x=u.toString(),I=c.createTextNode(y.innerText);if(y.innerHTML="",y.appendChild(I),x.length>0){let T=Math.max(y.innerText.indexOf(x),0),w=T+x.length;u.setStart(y.childNodes[0],T),u.setEnd(y.childNodes[0],w)}else if(m===v){let T=y.childNodes[0];if(!T)return;v===0?(u.setStart(T,0),u.setEnd(T,0)):(u.setStart(T,T.nodeValue?.length||0),u.setEnd(T,T.nodeValue?.length||0))}}}let p=()=>{c.getSelection()?.removeAllRanges(),n==="INSERT_BELOW"||n==="INSERT"?(u.setStart(u.endContainer,u.endOffset),u.setEnd(u.endContainer,u.endOffset)):n==="INSERT_ABOVE"&&(u.setStart(u.startContainer,u.startOffset),u.setEnd(u.startContainer,u.startOffset)),c.getSelection()?.addRange(u)},f=()=>{a&&a.focus()},d=(m,v)=>{let y=u.cloneRange();n==="REPLACE_SELECTION"&&y.deleteContents(),c.getSelection()?.removeAllRanges(),c.getSelection()?.addRange(y);let{separator:b=`

`,tagName:x="div",className:I="",cssText:T="",onSeparator:w}=v||{};m.split(b).reverse().forEach((D,N,_)=>{let C=c.createElement(x);if(I&&(C.className=I),T&&(C.style.cssText=T),C.innerText=D,y.insertNode(C),w&&_[N+1]){let g=w(D);y.insertNode(g)}}),c.getSelection()?.removeAllRanges(),c.getSelection()?.addRange(y)};switch(de()){case"mail.google.com":f(),p(),d(r,{cssText:"white-space: pre-wrap;",onSeparator:()=>{let m=c.createElement("div"),v=c.createElement("br");return m.appendChild(v),m}});break;default:f(),p(),await ip(u,r)}if(o){let m=new KeyboardEvent("keyup",{bubbles:!0,cancelable:!0});i.dispatchEvent(m)}}dp(),Rg()}},dp=()=>{typeof document>"u"||document.querySelectorAll("[data-usechatgpt-marker]").forEach(e=>{if(e.tagName==="SPAN"||e?.id.includes("usechatgpt-marker")){e.remove();return}e.removeAttribute("data-usechatgpt-marker"),e.removeAttribute("data-usechatgpt-start-offset"),e.removeAttribute("data-usechatgpt-end-offset"),e.removeAttribute("data-usechatgpt-marker-start-id"),e.removeAttribute("data-usechatgpt-marker-end-id")})},bw=()=>{typeof document>"u"||document.getSelection()?.removeAllRanges()},Mr=(e,t=10)=>{if(!e)return{isEditableElement:!1,editableElement:null};let r=e,n=null,o=t;for(;r&&o>0;){if(Go(r)){n=r;break}r=r.parentElement,o--}return n?{isEditableElement:!0,editableElement:n}:{isEditableElement:!1,editableElement:null}},xw=(e,t)=>{let r=e,n=cp(),o="",{isEditableElement:i,editableElement:s}=Mr(r),l="",a="",c=0;i&&s&&(c=lp(s));let u=qe(r.getBoundingClientRect()),p=null;try{let d=window.getSelection()?.getRangeAt(0)?.getBoundingClientRect();d&&(p=qe(d),i&&d.width+d.height===0&&(p=qe(e.getBoundingClientRect())))}catch{}if(!p){let d={left:0,right:window.innerWidth,top:0,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight,x:0,y:0};p={x:d.width/2,y:d.height/2,left:d.width/2,right:d.width/2,top:d.height/2,bottom:d.height/2,width:0,height:0}}return{isEmbedPage:!1,virtual:!1,tagName:r.tagName,eventType:"mouseup",target:r,isEditableElement:i,selectionText:n,selectionHTML:n,selectionRect:p,caretOffset:c,startMarkerId:l,endMarkerId:a,editableElementSelectionText:o,editableElementSelectionHTML:o,targetRect:u,...t}},Tw=(e=!0)=>{let t,r;if(document.selection)return t=document.selection.createRange(),t.collapse(e),t.parentElement();{let n=window.getSelection();if(n?.getRangeAt?n?.rangeCount>0&&(t=n.getRangeAt(0)):(t=document.createRange(),t.setStart(n?.anchorNode,n?.anchorOffset),t.setEnd(n?.focusNode,n?.focusOffset),t.collapsed!==n?.isCollapsed&&(t.setStart(n?.focusNode,n?.focusOffset),t.setEnd(n?.anchorNode,n?.anchorOffset))),t){r=t[e?"startContainer":"endContainer"];let o=r.nodeType===3?r.parentNode:r;if(o.tagName==="BODY"||o.tagName==="HTML"||o.tagName==="IFRAME")return;if(Go(o))return o;if(o.querySelector){let l=o.querySelector('[contenteditable="true"]');if(l&&Go(l))return l;let a=o.querySelector("input,textarea");if(a&&Go(a))return a}let{editableElement:i,isEditableElement:s}=Mr(o);return s?i:void 0}}};var Go=e=>{if(!e?.tagName)return!1;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.getAttribute?.("contenteditable")==="true"){let t=e.getAttribute("type"),r=e.getAttribute("readonly"),n=e.getAttribute("aria-readonly"),o=e.getAttribute("disabled"),i=e.getAttribute("aria-disabled");return!(t&&["password","file","checkbox","radio","submit","reset","button","image","hidden"].includes(t)||r==="true"||o==="true"||n==="true"||i==="true"||r===""||o===""||e.id===Pn||e.id===Vs)}return!1},ip=async(e,t)=>{let r=e.cloneRange(),n=e.cloneRange(),o=(e.startContainer||e.endContainer)?.ownerDocument||document;if(!(!o||o.getElementById(ui)))try{let i=o.getSelection(),s=t,l=o.createElement("div");if(l.id=ui,l.setAttribute("contenteditable","true"),l.style.cssText="width: 1px;height: 1px;position: fixed;top: 0px;left:0px;overflow: hidden; z-index: -1;",o.body.appendChild(l),l.addEventListener("paste",p=>{p.stopPropagation()},!0),l.addEventListener("copy",p=>{p.stopPropagation(),s=o?.getSelection()?.toString()||s},!0),await ap()){await navigator.clipboard.writeText(t),l.focus();let p=o.createRange();p.selectNodeContents(l),i?.removeAllRanges(),i?.addRange(p),o.execCommand("paste",!1,"")}else{l.focus();let p=o.createRange();p.selectNodeContents(l),i?.removeAllRanges(),i?.addRange(p),o.execCommand("insertText",!1,t)}try{l.focus();let p=o.createRange();p.selectNodeContents(l),i?.removeAllRanges(),i?.addRange(p),o.execCommand("copy",!1,"")}catch{let f=l.innerText.trim();try{let d=new Zn;d.addRule("pre",{filter:"pre",replacement:function(m,v){return"```\n"+v.textContent+"\n```"}});let h=d.turndown(l);await navigator.clipboard.writeText(h||f)}catch{await navigator.clipboard.writeText(f)}}finally{l.remove()}let a=o.getSelection(),{editableElement:c}=Mr(r.startContainer||r.endContainer),u=de();if(a&&r){["discord.com"].includes(de())&&await navigator.clipboard.writeText(s),a.removeAllRanges(),a.addRange(r);let p=f=>new Promise(d=>setTimeout(d,f));i?.removeAllRanges(),i?.addRange(n),await p(0),["evernote.com","web.whatsapp.com","outlook.live.com","outlook.office.com"].includes(u)||window.location.href.startsWith("https://www.youtube.com/shorts")?(i?.toString().trim()&&o.execCommand("Delete",!1,""),o.execCommand("insertText",!1,s)):o.execCommand("paste",!1,""),n.collapse(!1),i?.collapseToEnd()}}catch{}},Lg=e=>{try{let t=e.target,n=(t.ownerDocument||t.document).getSelection();if(n&&n.rangeCount>0){let o=n.getRangeAt(0),i=o.startContainer||o.endContainer;if(i&&i.nodeType===3)i=i.parentNode;else if(i.childNodes.length>0&&o.startOffset===o.endOffset&&o.startOffset>=0){let c=o.startContainer,u=o.startOffset,p=c.childNodes[u];p.isSameNode(document.getElementById("max-ai-rich-text-editor-placeholder"))?p.nextSibling&&(i=p.nextSibling):p&&(i=p)}let s=i?.tagName?.toLowerCase(),l=de();l="";let a="1";switch(l){case"notion.so":break;case"larksuite.com":if(s==="span"&&i.getAttribute("data-string")==="true"){if(i?.parentElement?.parentElement?.getAttribute("data-placeholder"))break;a=i.innerText}break;case"mail.google.com":break;case"outlook.live.com":case"outlook.office.com":case"outlook.office365.com":{let c=de(),u=!1,p=i;if(location.href.startsWith(`https://${c}/mail/`)){s==="br"&&(u=!0,i?.parentElement?.parentElement&&(p=i.parentElement.parentElement)),(s==="span"||s==="div")&&i.childNodes.length===1&&i.childNodes[0].nodeName.toLowerCase()==="br"&&(u=!0,p=i.parentElement);let f=p.getAttribute("role"),d=p.getAttribute("contenteditable");f==="textbox"&&d==="true"&&(u?a="":a=i.innerText)}}break;case"writer.zoho.com":{let c=document.querySelector("#editorpane")?.querySelector(".cursor");if(!c)break;i=c.parentElement,c?.previousElementSibling&&(i=c.previousElementSibling,a=i.innerText)}break;default:break}return{richTextEditorLineText:a.trim().replace(/\u200B/g,""),richTextEditorLineTextElement:i}}return{richTextEditorLineText:"1",richTextEditorLineTextElement:null}}catch{return{richTextEditorLineText:"1",richTextEditorLineTextElement:null}}},Og=(e,t)=>{if(!t){Ms();return}let r=window.getComputedStyle(e),n=r.getPropertyValue("font-size"),o=r.getPropertyValue("color"),i=r.getPropertyValue("font-family"),s=r.getPropertyValue("font-weight"),l=r.getPropertyValue("font-style");Ms();let a=document.createElement("span");a.id="max-ai-rich-text-editor-placeholder",a.style.fontSize=n,a.style.color=o,a.style.fontFamily=i,a.style.fontWeight=s,a.style.fontStyle=l,a.style.zIndex="999999999",a.style.pointerEvents="none",a.style.opacity="0.5",a.style.position="relative",a.style.display="inline",a.style.whiteSpace="nowrap",a.setAttribute("data-placeholder",t);let c=de();if(c==="larksuite.com")a.style.lineHeight="18px";else if(c==="writer.zoho.com"){let u=e?.parentElement?.parentElement?.getAttribute("data-textformat");try{let p=JSON.parse(u||"{}").size||12;a.style.fontSize=`${Number(p)}pt`}catch{a.style.fontSize="12pt"}e.insertBefore(a,e.firstChild);return}e.tagName.toLowerCase()==="br"?e.parentElement?.insertBefore(a,e):e.appendChild(a)},Ms=()=>{document.getElementById("max-ai-rich-text-editor-placeholder")?.remove()},Cw=()=>{let{chatBoxShortCutKey:e,floatingMenuShortCutKey:t}=Ya(),r=ae(sr);(0,sp.useEffect)(()=>{let n=a=>{let{richTextEditorLineText:c,richTextEditorLineTextElement:u}=Lg(a);if(!c&&u){let p=t&&r.userSettings?.shortcutHintEnable?`Press '${t}' for AI`:"";Og(u,p)}else Ms()},o=a=>{n(a)},i=a=>{},s=a=>{n(a)},l=a=>{n(a)};return document.addEventListener("focus",l,!0),document.addEventListener("keyup",o,!0),document.addEventListener("keydown",i,!0),document.addEventListener("mouseup",s,!0),()=>{document.removeEventListener("focus",l,!0),document.removeEventListener("keyup",o,!0),document.removeEventListener("keydown",i,!0),document.removeEventListener("mouseup",s,!0)}},[e,t,r.userSettings?.shortcutHintEnable])};var Sw=e=>{let t=document.querySelectorAll("iframe"),r=[],n=[];return t.forEach(o=>{if(o.getAttribute("sandbox")){if(o.getAttribute("sandbox")?.includes("allow-scripts"))return;o.contentDocument&&o.contentWindow&&r.push(o)}}),r.forEach(o=>{let i=o?.contentDocument,s=o?.contentWindow;if(!i||!s)return;let l=[],a=null,c=p=>{try{let f=a||p.target,d=cp(i),h="",{isEditableElement:m,editableElement:v}=Mr(f),y="",b="",x=0;if(m&&v){x=lp(v);let g=ks(v);y=g.startMarkerId,b=g.endMarkerId,d=g.selectionText,h=g.editableElementSelectionText}a=null;let I=qe(i.body.getBoundingClientRect()),T=qe(f.getBoundingClientRect()),w=s.getSelection()?.getRangeAt(0)?.getBoundingClientRect(),D=null;if(f.tagName==="INPUT"||f.tagName==="TEXTAREA"){let g=Math.max(T.left,0),k=Math.max(T.top,0),O=(i.documentElement.clientWidth||i.body.clientWidth||i.body.offsetWidth)-g,P=i.documentElement.clientHeight||i.body.clientHeight||i.body.offsetHeight,R=Math.max(T.left,0),W=Math.max(T.left,0),G=Math.min(k,P),A=Math.min(k,P),F=Math.min(T.left>0?T.width:T.width+T.left,O),L=Math.min(T.top>0?T.height:T.height+T.top,P);D={left:R,x:W,top:G,y:A,width:F,height:L,right:Math.max(Math.min(T.width,O),O),bottom:Math.min(T.bottom,P)},D.height=Math.min(P-D.top,D.height)}else if(w){let g=Math.max(w.left,0),k=Math.max(w.top,0),O=(i.documentElement.clientWidth||i.body.clientWidth||i.body.offsetWidth)-g,P=i.documentElement.clientHeight||i.body.clientHeight||i.body.offsetHeight,R=Math.max(w.left,0),W=Math.max(w.left,0),G=Math.min(k,P),A=Math.min(k,P);D={left:R,x:W,top:G,y:A,width:Math.min(w.width,O),height:Math.min(w.height,P),right:Math.max(Math.min(w.right,O),O),bottom:Math.min(w.bottom,P)},D.height=Math.min(P-D.top,D.height)}let N=[l[0]-window.screenLeft,l[1]-window.screenTop],_=qe(o.getBoundingClientRect()),C={virtual:!0,iframeId:"",tagName:f.tagName,id:f.id,className:f.className,windowRect:qe(I),targetRect:qe(T),selectionRect:w?qe(w):void 0,iframeSelectionRect:D?qe(D):void 0,iframePosition:N,selectionText:d||"",selectionHTML:d||"",editableElementSelectionText:h,editableElementSelectionHTML:h,eventType:p.type==="mouseup"?"mouseup":"keyup",isEmbedPage:!1,isEditableElement:m,caretOffset:x,startMarkerId:y,endMarkerId:b};C.selectionRect.top+=_.top,C.selectionRect.left+=_.left,C.selectionRect.right+=_.left,C.selectionRect.bottom+=_.top,e(C)}catch{}},u=p=>{let f=p.target;(f.tagName==="INPUT"||f.tagName==="TEXTAREA")&&(a=f),l=[p.screenX,p.screenY]};i.addEventListener("mousedown",u),i.addEventListener("mouseup",c),i.addEventListener("keyup",c),n.push(()=>{i.removeEventListener("mousedown",u),i.removeEventListener("mouseup",c),i.removeEventListener("keyup",c)})}),()=>{n.forEach(o=>{o()})}};var fp=new pt("ContextMenu/useFloatingContextMenu"),Ls=()=>{let e=ct(An),{saveCurrentSelection:t,show:r,hideRangy:n,tempSelection:o}=is(),[i,s]=ne(Kc),l=(0,Vo.useMemo)(()=>i.open,[i.open]),a=(0,Vo.useCallback)((f,d,h)=>{let m=f;if(!Rs()&&m&&(m?.selectionText||m?.isEditableElement)){if(fp.info("open",m),m.isEditableElement&&m.target){let y=ks(m.target),b=ue(m);if(b.editableElementSelectionText=y.editableElementSelectionText,b.editableElementSelectionHTML=y.editableElementSelectionText,b.selectionText=y.selectionText,!b.editableElementSelectionText&&!b.selectionText){let x=up(m.target);y.selectionText=x.selectionText,y.editableElementSelectionText=x.editableElementSelectionText,fp.info(`Get special host selection text: 
`,x.editableElementSelectionText||x.selectionText)}y&&(b.startMarkerId=y.startMarkerId,b.endMarkerId=y.endMarkerId,b.selectionText=y.selectionText,b.editableElementSelectionText=y.editableElementSelectionText,m=b)}if(d&&(m={...m,...d}),!m?.isEditableElement&&m.selectionText||m?.editableElementSelectionText||h){t({selectionText:m.editableElementSelectionText||m.selectionText||"",selectionHTML:m.editableElementSelectionText||m.selectionText||"",selectionRect:m.selectionRect,activeElement:m.target,selectionInputAble:m.isEditableElement,selectionElement:m}),n(),s({open:!0,rootRect:As(m.selectionRect)});return}}let v=Rs();if(v&&rp(),n(),s({open:!1,rootRect:null}),v){Or(),e(y=>({...y,open:!0}));return}ea()?(Zs(),e(y=>({...y,open:!1}))):(Or(),e(y=>({...y,open:!0})))},[]),c=(f,d)=>{let h=qe(f.getBoundingClientRect()),m={selectionText:d,selectionHTML:d,selectionRect:As(h),isEditableElement:!1,target:f,editableElementSelectionText:"",editableElementSelectionHTML:""};a(m)};return{isFloatingMenuVisible:l,showFloatingContextMenu:()=>{r&&!i.open&&o&&a(o.selectionElement,{},!0)},hideFloatingContextMenu:()=>{s({open:!1,rootRect:null})},haveSelection:r,floatingDropdownMenuOpen:i.open,showFloatingContextMenuWithElement:c,showFloatingContextMenuWithVirtualElement:a}};var mp=E($());var Ng=()=>{let{currentSelection:e}=ae(To);return(0,mp.useMemo)(()=>e?.selectionElement?.editableElementSelectionText?Rr.filter(t=>![Oe.INSERT].includes(t.id)):Rr.filter(t=>![Oe.REPLACE_SELECTION,Oe.INSERT_BELOW].includes(t.id)),[e])};var gp=new pt("InitChatGPT"),Dg=()=>{let e=ct(Nt),t=ct(sr),r=ct(tt),{showFloatingContextMenu:n}=Ls(),o=(0,vn.useRef)(n);(0,vn.useEffect)(()=>{o.current=n},[n]),Dn(async(i,s,l)=>{switch(gp.info("message",i,s),i){case"Client_ChatGPTStatusUpdate":return gp.info("useInitChatGPTClient listener",s.status),e(a=>s.status!=="success"?(a.aborts.forEach(c=>c()),{loaded:!1,status:s.status,aborts:[]}):{loaded:!0,status:s.status,aborts:a.aborts}),{success:!0,message:"",data:{}};case"Client_listenOpenChatMessageBox":break;case"Client_updateAppSettings":return t(await qa()),r(await ve()),{success:!0,data:{},message:""};case"Client_listenUpdateIframeInput":return s.startMarkerId&&s.endMarkerId&&await pp(s.startMarkerId,s.endMarkerId,s.value,s.type),{success:!0,data:{},message:""};default:break}}),(0,vn.useEffect)(()=>{let i=async()=>{let a=await s.postMessage({event:"Client_checkChatGPTStatus"});a.success&&a.data.status&&e(c=>a.data.status!=="success"?(c.aborts.forEach(u=>u()),{loaded:!1,status:a.data.status,aborts:[]}):{loaded:!0,status:a.data.status,aborts:c.aborts})},s=new oe({runtime:"client"}),l=async()=>{await i()};return s.postMessage({event:"Client_checkChatGPTStatus"}),i(),window.addEventListener("focus",l),()=>{window.removeEventListener("focus",l),s?.destroy()}},[])};var lt=E($());var $o=E(fi()),Tn=E(_n());var xn="chatgpt-request-time-record",bn="chatgpt-request-count-record",Bg=2,Fg=1e3*60*5,qo=async e=>(await Tn.default.storage.local.get(e))[e],jo=e=>{Tn.default.storage.local.remove(e)},Hg=async(e=Date.now(),t=!1)=>{await qo(xn)&&!t||await Tn.default.storage.local.set({[xn]:e})},Cn=async(e,t)=>{try{let r=await qo(bn)||{},o=(await ve()).currentAIProvider||"UNKNOWN_PROVIDER",i=(0,$o.default)().format("YYYY-MM-DD");if(Object.keys(r).forEach(a=>{Object.prototype.hasOwnProperty.call(r[a],"prompt_cnt")||delete r[a]}),(!r[i]||!Object.prototype.hasOwnProperty.call(r[i],"prompt_cnt"))&&(r[i]={error_cnt:0,success_cnt:0,total_cnt:0,prompt_cnt:{}}),e==="error")r[i].error_cnt+=1;else if(e==="success")r[i].success_cnt+=1;else if(e==="total")r[i].total_cnt+=1;else if(e==="prompt"&&t){let{name:a,host:c,id:u}=t;r[i].prompt_cnt[u]||(r[i].prompt_cnt[u]={name:a,ai_provider_cnt:{}}),o&&(r[i].prompt_cnt[u].ai_provider_cnt[o]||(r[i].prompt_cnt[u].ai_provider_cnt[o]={}),r[i].prompt_cnt[u].ai_provider_cnt[o][c]||(r[i].prompt_cnt[u].ai_provider_cnt[o][c]={total_cnt:0}),r[i].prompt_cnt[u].ai_provider_cnt[o][c].total_cnt+=1)}Hg(Date.now()),await Tn.default.storage.local.set({[bn]:r});let s=ia(r),{ON_BOARDING_RECORD_FIRST_MESSAGE:l}=await ua();l?Object.keys(s).length>=Bg?Os():Ug():(Os(),await ca("ON_BOARDING_RECORD_FIRST_MESSAGE",!0))}catch{jo(xn),jo(bn)}},Ug=ar(()=>{Os()},Fg),Os=async()=>{try{if(document.hidden)return;let e=await Wn(),t=await qo(xn),r=await qo(bn);if(!r)return;let n=0,o=0;if(Object.keys(r).forEach(s=>{r[s].total_cnt>0&&(n+=1,o+=r[s].total_cnt)}),n===0||o===0)return;let i=await Mt();if(t&&r&&i){let s=rl(r);fetch(`${ir}/user/log`,{method:"POST",body:JSON.stringify({start_timestamp:(0,$o.default)(t).unix(),end_timestamp:(0,$o.default)().unix(),info_object:s}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`,fp:`${e}`}}).then(async l=>{try{let a=await l.json();jo(xn),jo(bn)}catch{}})}}catch{}};var xp=E(fi()),Tp=E(hp());var Cp=E(_n());var Wg=()=>ae(Yn),yp=Wg;xp.default.extend(Tp.default);var vp=new oe({runtime:"client"}),bp=new pt("UseMessageWithChatGPT"),zg=e=>{let t=yp(),r=ae(vt),n=ae(pr),o=(0,lt.useRef)(r),i=(0,lt.useRef)(n),{createConversation:s,cleanConversation:l,updateConversation:a}=fr(),c=uc(),{currentUserPlan:u}=Gr(),p=(0,lt.useRef)(e||""),[f,d]=ne(dt),h=(0,lt.useRef)(f);(0,lt.useEffect)(()=>{h.current=f},[f]);let m=()=>({conversationRef:h,currentConversationIdRef:o,currentSidebarSettingsRef:i}),v=async()=>{w(""),await l()},y=async(_,C)=>{let g=de(),k=C?.meta?.contextMenu,O=null,P=async V=>O?(await Xt("add",V,0,[za(c[O.sceneType])]),hr("show",O.sceneType),Or(),{success:!1,answer:"",error:""}):null;if(u.name==="free"&&k?.id&&!u.isNewUser){let V=new URL(location.href),H=`${Cp.default.runtime.id}/pages/pdf/web/viewer.html`;V.href.includes(H)&&(O=c.PDF_AI_VIEWER)}let R=n.type==="Chat"?"chat":"summary_chat",{data:W}=await vp.postMessage({event:"Client_logCallApiRequest",data:{name:k?.text||R,id:k?.id||R,host:g}});W&&(O=c.TOTAL_CHAT_DAILY_LIMIT);let{question:G,messageId:A,parentMessageId:F}=_,{regenerate:L=!1,includeHistory:U=!1,maxHistoryMessageCnt:Z=0,retry:X=!1}=C||{};if(!G||f.loading)return{success:!1,answer:"",error:""};d(V=>({...V,loading:!0}));let Q=await s();bp.info("createConversation",Q);let re=Z;if(!Z&&U){let V=0;for(let H=t.length-1;H>=0;H--){let me=t[H];if(me.type==="user"&&me.extra?.includeHistory===!1){V++;break}V++}re=V}let M=A||ie(),te=F||"",K=await Js(),ee={type:"user",messageId:M,parentMessageId:te,text:G,extra:{includeHistory:U,regenerate:L,maxHistoryMessageCnt:re,meta:{contextMenu:C?.meta?.contextMenu,attachments:K}}};d(V=>({...V,lastMessageId:M,loading:!0})),await Xt("add",Q,0,[ee]);let Ce=[],j=!1,_e=!1,le="";try{let V=await P(Q);if(V)return V;await Cn("total"),await Cn("prompt",{name:k?.text||"chat",id:k?.id||"chat",host:g});let H=null,me="";return await va({conversationId:Q,question:U?G:qs+G,messageId:M,parentMessageId:te},{retry:X,includeHistory:U,regenerate:L,meta:C?.meta,maxHistoryMessageCnt:re},{onMessage:pe=>{let Ne={messageId:pe.messageId||ie(),parentMessageId:pe.parentMessageId||ie(),text:pe.text||"",type:"ai"};H=Ne,pe.conversationId&&(me=pe.conversationId),d(or=>({...or,loading:!0,writingMessage:Ne}))},onError:async pe=>{_e=!0,H?.messageId&&Ce.push(H);let Ne=typeof pe=="string"&&pe?.trim()==="403";if(pe==="Conversation not found"||Ne){await l();return}if(le=pe?.message||pe||"Error detected. Please try again.",typeof le!="string"&&(le="Network error. Please try again."),le==="manual aborted request.")j=!0;else{if(Cn("error"),Ne&&(le="Log into ChatGPT web app and pass Cloudflare check. We recommend enabling our new [ChatGPT Stable Mode](key=options&query=#chatgpt-stable-mode) to avoid frequent interruptions and network errors."),le.startsWith("Too many requests in 1 hour")&&(le=`Too many requests in 1 hour. Try again later, or use our new AI provider for free by selecting "MaxAI.me" from the AI Provider options at the top of the sidebar.
                ![switch-provider](https://www.maxai.me/assets/chrome-extension/switch-provider.png)`),Wa(le)){O=c[le];let or=await P(Q);if(or)return or}Ce.push({type:"system",messageId:ie(),parentMessageId:M,text:le,extra:{status:"error"}})}}}),!_e&&H&&H?.messageId&&H?.text?(await Cn("success"),me&&await a({meta:{AIConversationId:me}},Q),Ce.push(H),Promise.resolve({success:!0,answer:H?.text||"",error:""})):Promise.resolve({success:j,answer:H?.text||"",error:le})}catch(V){return bp.error("send question error",V),Promise.resolve({success:!1,answer:"",error:V.message||V})}finally{w(""),d(V=>({...V,writingMessage:null,loading:!1})),await Xt("add",Q,0,Ce)}},b=async _=>{let C=t.find(g=>g.messageId===_);C&&(d(g=>({...g,loading:!0})),await y({question:C.text,messageId:ie(),parentMessageId:C.messageId},{retry:!0,regenerate:!1,includeHistory:!0}))},x=(0,lt.useCallback)(async()=>{let _=null;for(let C=t.length-1;C>=0;C--){let g=t[C];if(g.type==="user"){_=g;break}}return _?y({question:_.text,messageId:_.messageId,parentMessageId:_.parentMessageId},{regenerate:!0,includeHistory:Object.prototype.hasOwnProperty.call(_.extra,"includeHistory")?_.extra.includeHistory:!0,meta:_.extra.meta}):null},[t,y]),I=async()=>{(f.writingMessage?.parentMessageId||f.lastMessageId)&&await vp.postMessage({event:"Client_abortAskChatGPTQuestion",data:{messageId:f.lastMessageId}})},T=async(_,C)=>{(C||r)&&await Xt("add",C||r,0,[_])},w=_=>{gn("chatBoxInputMediator").updateInputValue(_)},D=()=>{d(_=>({..._,loading:!0}))},N=()=>{d(_=>({..._,loading:!1}))};return(0,lt.useEffect)(()=>{e&&(p.current=e)},[e]),(0,lt.useEffect)(()=>{i.current=ue(n),o.current=r},[n,r]),{sendQuestion:y,messages:t,resetConversation:v,conversation:f,retryMessage:b,reGenerate:x,stopGenerateMessage:I,pushMessage:T,updateConversation:a,getSidebarRef:m,showLoading:D,hideLoading:N}};var Yo=E(_n());var gl=()=>{let e=typeof window<"u"?window.location.href:"";return e?["onedrive.live.com/edit.aspx","icloud.com/mail","navigator-lxa.mail.com/mail"].find(t=>e.includes(t)):!1},JP=()=>{let e=document.documentElement,t=typeof window<"u"?window.location.href:"";t&&Nn(async(r,n,o)=>{switch(r){case"Iframe_ListenGetPageContent":{let{taskId:i}=n,s="";return t.includes("word-edit.officeapps.live.com/we/wordeditorframe.aspx")&&(s=e.querySelector("#PageContentContainer")?.innerText||""),t.includes("icloud-sandbox.com/applications/mail2-message")&&(s=e.querySelector(".mail-message-defaults")?.innerText||""),t.includes("mail.com/mail/client/mailbody")&&(s=e?.ownerDocument?.body?.innerText||""),s=s.trim(),s?(await new oe().postMessage({event:"Iframe_sendPageContent",data:{taskId:i,pageContent:s}}),{success:!0,data:"",message:""}):{success:!1,data:"",message:"no page content"}}}})},hl=()=>new Promise(async e=>{let t=new oe,r=ie();(await t.postMessage({event:"Client_getIframePageContent",data:{taskId:r}})).success||e("");let o=!1,i=s=>{if(s.id===pi&&s.event==="Client_ListenGetIframePageContentResponse"&&s.data.taskId===r){if(o)return;o=!0,e(s.data.pageContent),Yo.default.runtime.onMessage.removeListener(i)}};Yo.default.runtime.onMessage.addListener(i),setTimeout(()=>{o||(o=!0,e(""),Yo.default.runtime.onMessage.removeListener(i))},1e4)});export{Xa as a,Nt as b,Yt as c,dt as d,pr as e,vt as f,Kn as g,bt as h,JP as i,Sh as j,Eh as k,Ih as l,wh as m,Hr as n,Ph as o,Xn as p,Ni as q,Uh as r,Wh as s,Xh as t,Kt as u,eo as v,Qh as w,nt as x,ly as y,ro as z,Xt as A,xl as B,fr as C,Tl as D,xt as E,Fi as F,wl as G,so as H,Wi as I,Ll as J,ao as K,ef as L,Hl as M,Qt as N,Tt as O,$l as P,Yl as Q,Gr as R,Vr as S,po as T,Kl as U,Jl as V,hf as W,ji as X,px as Y,mx as Z,Sf as _,bx as $,xx as aa,Tx as ba,cc as ca,hr as da,If as ea,uc as fa,mo as ga,fc as ha,hc as ia,He as ja,kf as ka,Lf as la,Of as ma,Nf as na,Df as oa,Bf as pa,Ff as qa,ts as ra,Ac as sa,jr as ta,ns as ua,Hc as va,sm as wa,zc as xa,lm as ya,mm as za,BE as Aa,Kc as Ba,FE as Ca,HE as Da,gm as Ea,UE as Fa,hm as Ga,WE as Ha,is as Ia,en as Ja,Tr as Ka,tn as La,vu as Ma,dn as Na,Ar as Oa,xI as Pa,TI as Qa,CI as Ra,SI as Sa,EI as Ta,II as Ua,wI as Va,PI as Wa,_I as Xa,AI as Ya,RI as Za,MI as _a,kI as $a,LI as ab,OI as bb,gn as cb,ep as db,KI as eb,qe as fb,As as gb,tp as hb,XI as ib,Rs as jb,QI as kb,JI as lb,ZI as mb,rp as nb,_g as ob,lp as pb,cp as qb,ks as rb,pp as sb,dp as tb,bw as ub,Mr as vb,xw as wb,Tw as xb,Cw as yb,Sw as zb,Ls as Ab,Ng as Bb,Dg as Cb,yp as Db,zg as Eb};
/*! Bundled license information:

tabbable/dist/index.esm.js:
  (*!
  * tabbable 6.2.0
  * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
  *)
*/
