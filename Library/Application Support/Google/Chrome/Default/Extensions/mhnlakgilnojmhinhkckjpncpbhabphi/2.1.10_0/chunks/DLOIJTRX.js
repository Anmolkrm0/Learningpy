import{a as X}from"./DX2SVB3M.js";import{a as I}from"./QZ23CPMF.js";import{a as Q}from"./66EZUONK.js";import{a as C}from"./IY5DEXVR.js";import{a as B}from"./ZEWA56E6.js";import{a as K}from"./WLFEWMGP.js";import{b as Z}from"./TCYBICPB.js";import{R as J,da as V}from"./V4ZRBBRM.js";import"./ZCBNEERI.js";import"./UJFWRGEF.js";import{d as ce,e as ue}from"./FHWSD74W.js";import"./KCNKM736.js";import"./UWHLKP4U.js";import"./T5Z34CQF.js";import"./EYWU5WEI.js";import"./6ZK62RKC.js";import"./A3K6JWQV.js";import"./L33QHTPD.js";import"./OSRZ6DNI.js";import"./KGHUEQWQ.js";import"./FCNFS543.js";import{a as H}from"./AXYDMQKC.js";import{d as W,h as G}from"./NDPIADS7.js";import"./6VUFQDOJ.js";import"./WUKZVFME.js";import{d as q}from"./AWXXSJ4S.js";import{a as $}from"./PZ6W2FT2.js";import{d as v}from"./RU4PPZ26.js";import"./OMYZCSY2.js";import"./P65BW6FB.js";import{a,b as j}from"./SOBQVLGH.js";import"./H3PWEBSP.js";import"./QZNWBGPK.js";import{j as U}from"./QZVUH6Z4.js";import"./6NCLE6FY.js";import"./TJ4IOIPR.js";import"./QWFQ577U.js";import"./4XTFPKLI.js";import"./AO55PT7K.js";import"./LW65P6WP.js";import{c as b}from"./QPPETRF6.js";import{j as _}from"./3QCQTR6Z.js";import"./TLLLFF6C.js";import{L as O,m as T}from"./H75Y2WTH.js";import{a as h}from"./64D36THL.js";import{c as z,f as c}from"./PQ35KENF.js";var Y=z(M=>{"use strict";var fe=j();Object.defineProperty(M,"__esModule",{value:!0});M.default=void 0;var ge=fe(q()),xe=U(),be=(0,ge.default)((0,xe.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");M.default=be});var ae=z(w=>{"use strict";var Te=j();Object.defineProperty(w,"__esModule",{value:!0});w.default=void 0;var _e=Te(q()),Ie=U(),Me=(0,_e.default)((0,Ie.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}),"Code");w.default=Me});var t=c(h());var u=c(h());var R=c(Y()),ee=c(ce());var Ce=["www.linkedin.com"],ye=r=>{let{onEdit:e,onSave:s,editAble:i,message:l}=r,{t:p}=b(["common","client"]),[n,g]=(0,u.useState)("done");return u.default.createElement(a,{direction:"row",alignItems:"center",width:"100%",justifyContent:"flex-end"},u.default.createElement(C,{copyText:l.text,onCopy:()=>{r.onCopy?.(),Ce.includes(window.location.host)&&setTimeout(_,1)}}),n==="done"&&i&&u.default.createElement(B,{title:p("common:edit"),onClick:()=>{e(),g("edit")}},u.default.createElement(R.default,{sx:{fontSize:16}})),n==="edit"&&i&&u.default.createElement(B,{title:p("common:save"),onClick:()=>{s(),g("done")}},u.default.createElement(ee.default,{sx:{fontSize:16}})))},te=ye;var f=c(h());var oe=c(ue());var Se=["www.linkedin.com"],he=r=>{let{t:e}=b(["common","client"]),{message:s,insertAble:i}=r,l=(0,f.useMemo)(()=>i,[i]),p=f.default.useRef(null);return f.default.createElement(a,{direction:"row",alignItems:"center",spacing:1,ref:p},l&&f.default.createElement(v,{disableElevation:!0,size:"small",variant:"contained",title:"insert to draft",startIcon:f.default.createElement(oe.default,null),onClick:()=>{}},e("client:sidebar__button__insert")),f.default.createElement(C,{className:"max-ai__actions__button--copy",copyText:s.text,onCopy:()=>{r.onCopy?.(),Se.includes(window.location.host)&&setTimeout(_,1)}}),r.useChatGPTAble&&f.default.createElement(X,{className:"max-ai__actions__button--use-max-ai",iconButton:!0,onBeforeShowContextMenu:()=>({template:s.text,target:p.current?.parentElement})}))},re=he;var y=c(h());var ve=r=>{let{onRetry:e,message:s}=r,{t:i}=b(["common","client"]),{currentUserPlan:l,userInfo:p}=J(),n=s.extra.systemMessageType||"normal";return(0,y.useEffect)(()=>{n==="needUpgrade"&&l.name==="pro"&&Z("[Pricing] Pro show pricing card",JSON.stringify({message:s.text,user:p,plan:l}),{uuid:"7a04bc02-6155-4253-bcdb-ade3db6de492"})},[l.name,n]),y.default.createElement(a,{direction:"row",alignItems:"center",flexWrap:"wrap",gap:1},n==="needUpgrade"&&y.default.createElement(v,{fullWidth:!0,sx:{height:48,fontSize:"16px",fontWeight:500},variant:"contained",color:"primary",target:"_blank",href:`${O}/pricing`,onClick:g=>{s.extra.systemMessageType==="needUpgrade"&&s.extra.permissionSceneType&&V("click",s.extra.permissionSceneType)}},i("client:sidebar__button__upgrade_to_pro")),n==="normal"&&s.parentMessageId&&y.default.createElement(v,{size:"small",variant:"outlined",color:"error",onClick:e,sx:{border:"1px solid rgba(244, 67, 54, 0.5)",color:"#f44336"}},i("client:sidebar__button__retry")))},se=ve;var m=c(h());var ie=c(ae());var we=({message:r})=>{let e=(0,m.useMemo)(()=>JSON.stringify(r,null,2),[r]);return m.default.createElement(I,null,m.default.createElement($,{position:"absolute",top:16,left:16},m.default.createElement(G,{title:m.default.createElement(a,null,m.default.createElement("pre",{style:{fontSize:"12px"}},e),m.default.createElement(C,{copyText:e}))},m.default.createElement(ie.default,null))))},ne=we;var me=t.default.lazy(()=>import("./GQX2CKKM.js")),ke=r=>{let{message:e,editAble:s,insertAble:i,replaceAble:l,useChatGPTAble:p,onSave:n,onCopy:g,onRetry:E,className:le}=r,{isDarkMode:d}=H(),[k,pe]=(0,t.useState)(e.text||""),[F,P]=(0,t.useState)(!1),[D,N]=(0,t.useState)(!1),S=(0,t.useRef)(null),de=(0,t.useMemo)(()=>{let o=D?{"& *":{userSelect:"text!important"}}:{"& *":{userSelect:"none!important"}};return e.type==="ai"?{borderRadius:"8px",borderBottomLeftRadius:0,color:d?"#FFFFFFDE":"rgba(0,0,0,0.87)",border:"1px solid",borderColor:d?"customColor.borderColor":"transparent",bgcolor:d?"rgba(255, 255, 255, 0.04)":"rgb(233,233,235)!important",...o}:e.type==="user"||e.type==="third"?{flexDirection:"row",justifyContent:"flex-start",bgcolor:()=>d?"#6B23C259 !important":"#F1E2FD !important",border:"1px solid",borderColor:d?"customColor.borderColor":"transparent",color:d?"#FFFFFFDE":"rgba(0,0,0,0.87)!important",maxWidth:"100%",width:"auto",borderRadius:"8px",borderBottomRightRadius:0,flexWrap:"wrap",ml:"auto",mr:"0",overflow:"hidden",p:1,...o}:e?.extra?.systemMessageType==="needUpgrade"?{borderRadius:"8px",bgcolor:"#333","& > div":{maxWidth:450,bgcolor:"#333",padding:0,"& *":{color:"#FFFFFF!important"}},...o}:{borderRadius:"8px",border:{info:"1px solid #03a9f4!important",error:"1px solid rgb(239, 83, 80)!important",success:"1px solid #34A853!important"}[e?.extra?.status]||"1px solid #03a9f4!important",bgcolor:"background.paper",...o}},[e.type,D,d]);(0,t.useEffect)(()=>{pe(e.text||"")},[e.text]);let L=(0,t.useMemo)(()=>{if(e.type==="user"){let o=e?.extra?.meta?.attachments;if(o&&o.length)return o.filter(x=>x.uploadStatus==="success")}return[]},[e]);return t.default.createElement(a,{className:le,sx:{width:"100%",p:1,color:"text.primary",position:"relative","& .chat-message--text":{textAlign:"left",fontSize:"16px",lineHeight:1.4,fontWeight:400}},onCopy:o=>{o.preventDefault(),o.stopPropagation();let x=window.getSelection();if(x&&x.toString().trim()){let A=x.toString().trim();A&&navigator.clipboard.writeText(A)}},onMouseEnter:()=>{S.current&&clearTimeout(S.current),N(!0)},onMouseLeave:()=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{N(!1);let o=window.getSelection();o&&o.toString().trim()&&o.focusNode&&o.focusNode.isSameNode(document.body)&&o.removeAllRanges()},500)},spacing:1,key:e.messageId},t.default.createElement(I,null,t.default.createElement(ne,{message:e})),t.default.createElement(a,{className:"chat-message--text",whiteSpace:"pre-wrap",width:"100%",spacing:1,p:1,sx:{wordBreak:"break-word",...de}},t.default.createElement(K,null,e.type==="system"?t.default.createElement(W,{severity:e?.extra?.status||"info",sx:{p:1,"& .MuiAlert-message":{p:0},"& > div:first-child":{display:"none"},"& .markdown-body":{"& > p:first-child":{mt:0}}},icon:t.default.createElement(t.default.Fragment,null)},t.default.createElement("div",{className:`markdown-body ${d?"markdown-body-dark":""}`},t.default.createElement(me,null,k.replace(/^\s+/,"")))):t.default.createElement(a,{className:"chat-message--text",id:`${T}_chat_message_${e.messageId}`,contentEditable:F,whiteSpace:"pre-wrap",sx:{wordBreak:"break-word",borderColor:"primary.main",borderStyle:"solid",borderWidth:F?1:0}},e.type==="user"&&L.length>0&&t.default.createElement(Q,{size:"small",direction:"row",disabledRemove:!0,sx:{mb:1},files:L}),e.type!=="user"?t.default.createElement("div",{className:`markdown-body ${d?"markdown-body-dark":""}`},t.default.createElement(me,null,k.replace(/^\s+/,""))):k.replace(/^\s+/,""))),e.type==="user"&&t.default.createElement(te,{editAble:s,onCopy:g,message:e,onSave:()=>{P(!1);let o=document.getElementById(`${T}_chat_message_${e.messageId}`);n&&n(o?.innerText||e.text||"")},onEdit:()=>{P(!0),setTimeout(()=>{let o=document.getElementById(`${T}_chat_message_${e.messageId}`);o&&o.focus()},0)}}),e.type==="ai"&&t.default.createElement(re,{insertAble:i,replaceAble:l,useChatGPTAble:p,onCopy:g,message:e}),e.type==="system"&&t.default.createElement(se,{onRetry:()=>{e.parentMessageId&&E&&E(e.parentMessageId)},message:e})))},St=ke;export{St as default};
