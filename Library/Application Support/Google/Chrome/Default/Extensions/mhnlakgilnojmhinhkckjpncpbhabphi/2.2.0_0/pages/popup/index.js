import{a as $,b as P}from"../../chunks/XG4OB3T5.js";import"../../chunks/DGXYGUZ3.js";import"../../chunks/F2WWECM3.js";import{b as z}from"../../chunks/F4MPINSJ.js";import{a as q,d as h,j as L}from"../../chunks/773OEKYN.js";import{b as I,s as G}from"../../chunks/LLMPFG5R.js";import{c as _}from"../../chunks/ZSF23SB7.js";import"../../chunks/SH2AV755.js";import"../../chunks/SMO67HIN.js";import{a as f}from"../../chunks/PGNR3OFA.js";import"../../chunks/5EASWQBS.js";import{d as B}from"../../chunks/BEC6NYYF.js";import{a as p,u as s}from"../../chunks/JUQUTDV2.js";import"../../chunks/H3PWEBSP.js";import"../../chunks/QZNWBGPK.js";import"../../chunks/QZVUH6Z4.js";import"../../chunks/6NCLE6FY.js";import{f as v}from"../../chunks/WWJM5EAZ.js";import"../../chunks/GDFPIX4S.js";import"../../chunks/SJ3MEPLB.js";import"../../chunks/3X42KLOD.js";import{E as T,O as C}from"../../chunks/MT7GI5KY.js";import{c as A}from"../../chunks/QPPETRF6.js";import{m as u}from"../../chunks/BIAAAE54.js";import"../../chunks/T463YMPS.js";import{L as w,T as k,b as S,g as b}from"../../chunks/LZHALC2F.js";import{a as x}from"../../chunks/64D36THL.js";import{a as H}from"../../chunks/3JX3VARJ.js";import{f as c}from"../../chunks/PQ35KENF.js";var E=c($()),t=c(x());var M=c(G());var D=c(q()),i=c(H());var m=c(x());var K=e=>{let{textProps:n,pointProps:r,textList:o}=e;return m.default.createElement(p,{spacing:1},o.map((a,d)=>m.default.createElement(p,{key:d,direction:"row",alignItems:"baseline"},m.default.createElement(f,{sx:{top:-2,position:"relative",width:4,height:4,borderRadius:"50%",backgroundColor:"text.primary",mx:1,flexShrink:0,...r}}),typeof a=="string"?m.default.createElement(s,{...n},a):a)))},W=K;var j=(0,E.createRoot)(document.getElementById("root")),N=e=>{let n=b(k),{isSpecialPage:r}=e;z();let{t:o}=A(["common","client"]),[a,d]=(0,t.useState)(""),[y,O]=(0,t.useState)(),F=async()=>{let l=await i.default.commands.getAll()||[];d(l.find(U=>U.name==="_execute_action")?.shortcut||"unset");let g=await i.default.tabs.query({active:!0,currentWindow:!0});g&&g[0]&&O(g[0].id)};return T(()=>{F(),v().then(n)}),t.default.createElement(p,{minWidth:400,spacing:2,p:1,sx:{bgcolor:"background.paper"}},t.default.createElement(p,{boxSizing:"border-box",direction:"row",width:"100%",alignItems:"center",justifyContent:"space-between"},t.default.createElement(_,{sx:{flexShrink:0,textDecoration:"none!important"},href:w,target:"_blank"},t.default.createElement(p,{direction:"row",alignItems:"center",gap:1},t.default.createElement(I,{sx:{fontSize:28,color:"inherit"}}),t.default.createElement(s,{color:"text.primary",component:"h1",fontSize:20,fontWeight:800},o("client:popup__title")))),t.default.createElement(L,{title:o("common:settings"),size:"small",variant:"text",sx:{width:32,height:32,color:"inherit",minWidth:"unset"},onClick:l=>{l.stopPropagation(),l.preventDefault(),u({key:"options"})}},t.default.createElement(M.default,{sx:{fontSize:16,color:"text.primary"}}))),r?t.default.createElement(h,{severity:"info"},t.default.createElement(s,{fontSize:14,color:"text.primary",mb:1},o("client:popup__special_page__title")),t.default.createElement(W,{textProps:{fontSize:14},textList:[o("client:popup__special_page__item1"),o("client:popup__special_page__item2"),o("client:popup__special_page__item3")]})):t.default.createElement(h,{severity:"info"},t.default.createElement(s,{fontSize:14,color:"text.primary"},o("client:popup__refresh_page__title"))),!r&&t.default.createElement(B,{fullWidth:!0,color:"primary",variant:"contained",startIcon:t.default.createElement(D.default,{sx:{fontSize:16,color:"inherit"}}),onClick:async()=>{y&&(await i.default.tabs.reload(y),window.close())}},o("client:popup__refresh_page__button")),t.default.createElement(p,null,t.default.createElement(s,{fontSize:14,color:"text.secondary"},t.default.createElement("span",null,`${o("client:popup__set_shortcut__description1")} `),t.default.createElement(f,{sx:{p:"0 4px",display:"inline-block",minWidth:"40px",textAlign:"center",bgcolor:"rgba(0, 0, 0, 0.08)",border:"1px solid rgba(0, 0, 0, 0.16)",borderRadius:"4px",color:"text.primary"},component:"span"},a),t.default.createElement("span",null,` ${o("client:popup__set_shortcut__description2")} `),t.default.createElement(_,{href:"#",onClick:async()=>{await u({key:"shortcuts"})}},o("client:popup__set_shortcut__description3")),t.default.createElement("span",null,` ${o("client:popup__set_shortcut__description4")}`))))},J=async()=>{let e=await i.default.tabs.query({active:!0,currentWindow:!0});setTimeout(async()=>{let n=!1;try{let r=e&&e[0]&&e[0].id,o=e&&e[0]&&e[0].url||"chrome://";if(n=o.startsWith("chrome")||o.startsWith("https://chrome.google.com/webstore"),n&&!(o.includes("pages/pdf/web")&&o.includes(i.default.runtime.id)))throw new Error("isSpecialPage");if(r)if(await i.default.tabs.sendMessage(r,{}),await C(r,"Client_listenOpenChatMessageBox",{type:"shortcut"}))i.default.action.setPopup({popup:""}),window.close();else throw new Error("no result")}catch{if(n){u({url:i.default.runtime.getURL("/pages/chat/index.html")});return}j.render(t.default.createElement(t.default.StrictMode,null,t.default.createElement(S,null,t.default.createElement(P,null,t.default.createElement(N,{isSpecialPage:n})))))}},100)};J();
