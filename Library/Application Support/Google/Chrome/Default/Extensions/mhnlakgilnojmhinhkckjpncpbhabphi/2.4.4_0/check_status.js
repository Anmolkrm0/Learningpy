import"./chunks/R7ESC43Z.js";import"./chunks/F7SGTV27.js";import"./chunks/5QWZ7UE4.js";import"./chunks/FOUKVBQX.js";import"./chunks/NXGYST7J.js";import"./chunks/LP276KYG.js";import"./chunks/RO4X7EGV.js";import"./chunks/2N2SG5RC.js";import"./chunks/NNU75GHZ.js";import"./chunks/QJSKL7UD.js";import"./chunks/KXHDIDXQ.js";import"./chunks/XYZAUIQ2.js";import"./chunks/QONG524O.js";import"./chunks/ES4G5FSE.js";import"./chunks/6UCR6JSM.js";import"./chunks/IPNS2UUO.js";import"./chunks/FRAG5SMK.js";import"./chunks/HYW7LR6S.js";import"./chunks/6ER2OOH3.js";import"./chunks/DRCUZC3I.js";import"./chunks/RSO45DR6.js";import"./chunks/TY7U7FR6.js";import"./chunks/PF3XPTWR.js";import"./chunks/MWTIYFYH.js";import"./chunks/IQBPRLVE.js";import"./chunks/HEBGDMW5.js";import"./chunks/6LS5XNTR.js";import{a as r}from"./chunks/W2F53U5Z.js";import"./chunks/TYBXNNUH.js";import"./chunks/DUIWQHLB.js";import"./chunks/KG5SJQNS.js";import"./chunks/HQC5KEMG.js";import{h as i}from"./chunks/AAMCXCLO.js";import"./chunks/CAPNT4IP.js";import"./chunks/YN4XY6JW.js";import"./chunks/IPAGS25B.js";import"./chunks/3JX3VARJ.js";import"./chunks/PQ35KENF.js";var c=new r("ContentScript/CheckIsLogin"),s=new i({runtime:"client"}),u=t=>{let a=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(window.atob(a).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)},p=async()=>{let o=`UseChatGPTAuthServiceProvider.${window.localStorage.getItem("UseChatGPTAuthServiceProvider.email")}`,a=window.localStorage.getItem(o+".accessToken"),e=window.localStorage.getItem(o+".refreshToken");if(e){let n=u(e);n.exp*1e3>Date.now()&&(c.info("not expired"),await s.postMessage({event:"Client_updateUseChatGPTAuthInfo",data:{accessToken:a,refreshToken:e,userInfo:n}}))}else c.info("expired"),await s.postMessage({event:"Client_updateUseChatGPTAuthInfo",data:{}}),await s.postMessage({event:"Client_destroyWithLogout",data:{}})};p();var l=location.pathname,d=new MutationObserver(function(t){t.forEach(function(o){l!==location.pathname&&(l=location.pathname,p())})});d.observe(document.querySelector("body"),{attributes:!0,childList:!0,subtree:!0});
