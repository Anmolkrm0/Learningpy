import{b as u,d as i,e as c,f as n}from"./A6GK6HSJ.js";import{j as I}from"./JO7DYQAQ.js";import{h as m}from"./NXV7Z5NJ.js";import{c as r,f as g,g as d}from"./OIJDW6YB.js";import{a as p}from"./64D36THL.js";import{f as l}from"./PQ35KENF.js";var h=l(p());var E=r({key:"SearchWithAISourcesState",default:{loading:!1,sources:[]}}),S=r({key:"SearchWithAISettingsAtom",default:{loaded:!1,...i}}),y=r({key:"AutoTriggerAskEnableAtom",default:!0}),C=r({key:"SearchWithAIProviderLoadingAtom",default:!1}),x=r({key:"SearchWithAIConversationAtom",default:{conversationId:"",loading:!1,writingMessage:"",completedMessage:"",errorMessage:""}});var W=new m({runtime:"client"}),v=()=>{let s=d(S),o=(0,h.useRef)(!0);return(0,h.useEffect)(()=>{let a=async()=>{let t=await c();t&&(o.current?([I.MAXAI_CLAUDE,I.USE_CHAT_GPT_PLUS].includes(t.aiProvider)&&(await u()||(t.aiProvider=i.aiProvider,await n({aiProvider:i.aiProvider}),await W.postMessage({event:"SWAI_switchAIProvider",data:{provider:i.aiProvider}}))),s({...t,loaded:!0}),o.current=!1):s(e=>({...e,...t})))};return a(),window.addEventListener("focus",a),()=>{window.removeEventListener("focus",a)}},[]),null},G=v;var T=()=>{let[s,o]=g(S);return{searchWithAISettings:s,setSearchWithAISettings:async t=>{try{if(t instanceof Function){let e=await c(),A=t(e);o(f=>({...f,...A})),await n(A)}else o(e=>({...e,...t})),await n(t);return!0}catch{return!1}}}},q=T;export{E as a,y as b,C as c,x as d,G as e,q as f};
