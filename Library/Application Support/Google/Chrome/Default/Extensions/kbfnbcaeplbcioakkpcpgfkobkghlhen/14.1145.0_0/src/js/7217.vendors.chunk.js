/*! For license information please see 7217.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[7217],{46560:(e,t,n)=>{n.d(t,{B:()=>r});var i=n(27378);const r=({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.646 7.646a.5.5 0 0 1 .708 0L12 11.293l3.646-3.647a.5.5 0 0 1 .708.708L12.707 12l3.647 3.646a.5.5 0 0 1-.708.708L12 12.707l-3.646 3.647a.5.5 0 0 1-.708-.708L11.293 12 7.646 8.354a.5.5 0 0 1 0-.708Z",fill:"#646B81"}));r.__brand="color"},23871:(e,t,n)=>{n.d(t,{c:()=>r});var i=n(27378);const r=({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{d:"M7.053 10.842v1.908c0 .69.56 1.25 1.25 1.25h4.447c.69 0 1.25-.56 1.25-1.25V8.303c0-.69-.56-1.25-1.25-1.25h-1.908M8.947 3.25v4.447c0 .69-.56 1.25-1.25 1.25H3.25c-.69 0-1.25-.56-1.25-1.25V3.25C2 2.56 2.56 2 3.25 2h4.447c.69 0 1.25.56 1.25 1.25Z",stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round"}));r.__brand="color"},17579:(e,t,n)=>{n.d(t,{N:()=>r});var i=n(27378);const r=({title:e,titleId:t,desc:n,descId:r,...o})=>i.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{d:"M5.727 6.615H3V14h10V6.615h-2.727m-4.546 0V4.273a2.273 2.273 0 1 1 4.545 0v2.342m-4.545 0h4.546",stroke:"#646B81",strokeLinejoin:"round"}));r.__brand="color"},93986:(e,t,n)=>{n.d(t,{z:()=>g});var i=n(27378),r=n(64757),o=n(1509),s=n(76974),a=n(2844),l=n(77176),c=n(54001),u=n(44361),d=n(33498),m=n(45174),p=n(95835),h=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const g=e=>{var{className:t,compact:n=!1,theme:g="light",variant:f="primary",size:v=s.of("large"),style:x=s.of(void 0),flatUI:b,children:y,onClick:k}=e,w=h(e,["className","compact","theme","variant","size","style","flatUI","children","onClick"]);const C=i.useContext(m.N).view("flatUI");return i.createElement(r.zx.Animated,Object.assign({},(0,c.Sh)(a.aj([C,(0,d.D)(x),(0,d.D)(v)]).pipe(l.U((([e,t,i])=>(0,p.P_)({flatUI:null!=b?b:e,compact:n,theme:g,size:i,style:t,variant:f})))),t),w,{styleType:o.Z.Type.Button,onClick:(0,u.m)(k)}),y)}},95835:(e,t,n)=>{n.d(t,{Ih:()=>p,P_:()=>g,Rv:()=>m});var i=n(9546),r=n(88392),o=n(13578),s=n(62172),a=n(33053),l=n(89894),c=n(79378),u=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function d(e){var t,n;const i=null!==(t=e.default)&&void 0!==t?t:{},{$nest:r}=i,o=u(i,["$nest"]);return Object.assign(Object.assign({},o),{$nest:Object.assign({"&:not([data-disabled='true'])[data-hovered='true']":Object.assign({},e.hovered),"&:not([data-disabled='true']):hover":Object.assign({},e.hovered),"&[data-disabled='true']":Object.assign({},e.disabled),"&:not([data-disabled='true']):active":Object.assign({},e.active),"&[data-active='true']":Object.assign({},null!==(n=e.selected)&&void 0!==n?n:e.active),"&[hidden]":Object.assign({},e.hidden),"& > i":Object.assign({},e.icon),"&[data-textpos='left']":Object.assign({},e.textPosLeft),"&[data-textpos='right']":Object.assign({},e.textPosRight),"&[data-textpos='everywhere']":Object.assign({},e.textPosEverywhere)},r)})}function m(e){return{'&:focus:not(:active):not([data-active="true"])':{boxShadow:e,zIndex:1},'&:focus:not(:active):not(:focus-visible):not([data-active="true"])':{boxShadow:"none"},"&:focus-visible":{boxShadow:e,zIndex:1}}}const p=e=>`0 0 0 2px ${o.Il.Text.Base.Inverse}, 0 0 0 4px ${e}`;const h={primaryLightLegacy:{fontWeight:"bold",backgroundDefault:c.Z.BrandGreen60,colorDefault:o.Il.Text.Base.Inverse,backgroundHover:c.Z.BrandGreen80,colorHover:o.Il.Text.Base.Inverse,backgroundActive:c.Z.BrandGreen60,colorActive:o.Il.Background.Base.Default,focusOutline:c.Z.BrandGreen60},primaryDarkLegacy:void 0,primaryLight:{fontWeight:"bold",backgroundDefault:c.Z.BackgroundBrandDefault,colorDefault:o.Il.Text.Base.Inverse,backgroundHover:c.Z.BackgroundBrandHover,colorHover:o.Il.Text.Base.Inverse,backgroundActive:c.Z.BackgroundBrandActive,colorActive:o.Il.Background.Base.Default,focusOutline:c.Z.BorderBrandDefault},primaryDark:void 0,secondaryLightLegacy:{backgroundDefault:"transparent",colorDefault:s.BlueGray80,borderDefault:s.BlueGray5,backgroundHover:s.BlueGray0,colorHover:s.BlueGray80,borderHover:void 0,backgroundActive:void 0,colorActive:void 0,borderActive:void 0,focusOutline:c.Z.BlueGray80},secondaryDarkLegacy:void 0,secondaryLight:{backgroundDefault:"transparent",colorDefault:c.Z.ButtonTextSecondaryDefault,borderDefault:c.Z.BorderBrandDefault,backgroundHover:c.Z.ButtonBackgroundSecondaryHover,colorHover:c.Z.ButtonTextSecondaryHover,borderHover:c.Z.BorderBrandDefault,backgroundActive:c.Z.ButtonBackgroundSecondaryActive,colorActive:c.Z.ButtonTextSecondaryActive,borderActive:c.Z.BorderBrandDefault,focusOutline:c.Z.BorderBrandDefault},secondaryDark:void 0,tertiaryLightLegacy:{backgroundDefault:"transparent",colorDefault:o.Il.Background.Neutral.Default,borderDefault:"transparent",backgroundHover:s.BlueGray0,colorHover:o.Il.Text.Base.Subdued,borderHover:void 0,backgroundActive:s.BlueGray0,colorActive:o.Il.Text.Base.Subdued,borderActive:void 0,focusOutline:c.Z.BlueGray80},tertiaryDarkLegacy:{backgroundDefault:"transparent",colorDefault:c.Z.ButtonTextTertiaryDefaultInverse,borderDefault:"transparent",backgroundHover:c.Z.ButtonBackgroundTertiaryHoverInverse,colorHover:c.Z.ButtonTextTertiaryHoverInverse,borderHover:c.Z.ButtonBorderTertiaryHoverInverse,backgroundActive:c.Z.ButtonBackgroundTertiaryActiveInverse,colorActive:c.Z.ButtonTextTertiaryActiveInverse,borderActive:c.Z.ButtonBorderTertiaryActiveInverse,focusOutline:c.Z.BorderBrandDefault},tertiaryLight:{backgroundDefault:"transparent",colorDefault:c.Z.ButtonTextTertiaryDefault,borderDefault:"transparent",backgroundHover:c.Z.ButtonBackgroundTertiaryHover,colorHover:c.Z.ButtonTextTertiaryHover,borderHover:c.Z.ButtonBorderTertiaryHover,backgroundActive:c.Z.ButtonBackgroundTertiaryActive,colorActive:c.Z.ButtonTextTertiaryActive,borderActive:c.Z.ButtonBorderTertiaryActive,focusOutline:c.Z.BorderBrandDefault},tertiaryDark:{backgroundDefault:"transparent",colorDefault:c.Z.ButtonTextTertiaryDefaultInverse,borderDefault:"transparent",backgroundHover:c.Z.ButtonBackgroundTertiaryHoverInverse,colorHover:c.Z.ButtonTextTertiaryHoverInverse,borderHover:c.Z.ButtonBorderTertiaryHoverInverse,backgroundActive:c.Z.ButtonBackgroundTertiaryActiveInverse,colorActive:c.Z.ButtonTextTertiaryActiveInverse,borderActive:c.Z.ButtonBorderTertiaryActiveInverse,focusOutline:c.Z.BorderBrandDefault},roundLightLegacy:{borderRadius:"100%",backgroundDefault:o.Il.Background.Base.Default,colorDefault:c.Z.ButtonTextTertiaryDefault,borderDefault:c.Z.ButtonBorderTertiaryActive,backgroundHover:c.Z.ButtonBackgroundTertiaryHover,colorHover:c.Z.ButtonTextTertiaryHover,borderHover:c.Z.ButtonBorderTertiaryHover,backgroundActive:c.Z.ButtonBackgroundTertiaryActive,colorActive:c.Z.ButtonTextTertiaryActive,borderActive:c.Z.ButtonBorderTertiaryActive,focusOutline:c.Z.BlueGray80,boxShadow:a.dZ.boxShadow},roundDarkLegacy:void 0,roundLight:{borderRadius:"100%",backgroundDefault:o.Il.Background.Base.Default,colorDefault:c.Z.ButtonTextTertiaryDefault,borderDefault:c.Z.ButtonBorderTertiaryActive,backgroundHover:c.Z.ButtonBackgroundTertiaryHover,colorHover:c.Z.ButtonTextTertiaryHover,borderHover:c.Z.ButtonBorderTertiaryHover,backgroundActive:c.Z.ButtonBackgroundTertiaryActive,colorActive:c.Z.ButtonTextTertiaryActive,borderActive:c.Z.ButtonBorderTertiaryActive,focusOutline:c.Z.BorderBrandDefault,boxShadow:a.dZ.boxShadow},roundDark:void 0};function g(e){var t,n;const o=h[`${e.variant}${"dark"===e.theme?"Dark":"Light"}${e.flatUI?"":"Legacy"}`];return l.ux.style(function(e,t,n){const o="small"===e?1.5:"medium"===e?1.75:2,s=t?0:l.ux.rem(i.x);return d({default:{borderRadius:l.ux.rem(r.xB),display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",transform:"scale(1)",overflow:"hidden",padding:0,outline:"none",border:0,backgroundColor:"transparent",verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",fontWeight:"normal",fontSize:n?void 0:l.ux.rem(.75),minWidth:l.ux.rem(o),minHeight:l.ux.rem(o),lineHeight:l.ux.rem(o)},icon:{minWidth:l.ux.rem(o),minHeight:l.ux.rem(o),lineHeight:l.ux.rem(o)},hovered:{cursor:"pointer"},disabled:{opacity:.4,cursor:"not-allowed",$nest:{'& > i[data-disabled="true"]':{fill:"inherit",stroke:"inherit"}}},hidden:{display:"none"},textPosLeft:{padding:`0 0 0 ${s}`},textPosRight:{padding:`0 ${s} 0 0`},textPosEverywhere:{padding:`0 ${s} 0 ${s}`}})}(null!==(t=e.size)&&void 0!==t?t:"large",null!==(n=e.compact)&&void 0!==n&&n,e.flatUI),o?function(e,t){const n=(e,t)=>void 0!==e&&"transparent"!==e?`${t?`${t}, `:""} inset 0 0 0 1px ${e}`:t,i=n=>{const i=t?`0 0 0 2px ${e.focusOutline}`:p(e.focusOutline);return m(n?`${n}, ${i}`:i)},r=n(e.borderDefault,e.boxShadow),o=n(e.borderHover,e.boxShadow),s=n(e.borderActive,e.boxShadow);return d({default:{borderRadius:e.borderRadius,fontWeight:e.fontWeight,color:e.colorDefault,backgroundColor:e.backgroundDefault,boxShadow:r,$nest:i(r)},hovered:{color:e.colorHover,backgroundColor:e.backgroundHover,boxShadow:o,$nest:i(o)},active:{color:e.colorActive,backgroundColor:e.backgroundActive,boxShadow:s,$nest:i(s)},icon:{stroke:l.ux.important(e.colorDefault),fill:l.ux.important(e.colorDefault),$nest:{'&[data-hovered="true"]':{stroke:l.ux.important(e.colorHover),fill:l.ux.important(e.colorHover)}}}})}(o,"dark"===e.theme):void 0,...Array.from([]).concat(e.style).map((e=>d(null!=e?e:{}))))}},45578:(e,t,n)=>{n.d(t,{x:()=>g});var i=n(27378),r=n(13578),o=n(62172),s=n(31278),a=n(89894),l=n(94689),c=n(45174),u=n(93986);const d="closeBtn",m="closeIcon",p=(0,l.dD)({$nest:{[`& .${m}`]:Object.assign(Object.assign({},(0,l.fx)(1.5)),{stroke:a.ux.important(r.Il.Text.Base.Inverse)})}},d),h={closeButton:a.ux.joinClasses([d,a.ux.style(p)]),closeIcon:m},g=({name:e,style:t,onClick:n})=>{const r=i.useContext(c.N).view("flatUI");return i.createElement(u.z,{variant:"tertiary",style:r.view((e=>[e?void 0:x,t])),onClick:n,compact:!0,size:"small",theme:"dark",name:e},i.createElement(s.JO.Close,{className:h.closeIcon}))},f={stroke:a.ux.important(r.Il.Text.Base.Inverse),fill:a.ux.important(r.Il.Text.Base.Inverse)},v={backgroundColor:a.ux.color(o.BlueGray0).toRGBA().fade(.2).toString(),borderColor:"transparent",$nest:{"& > i":f}},x={icon:Object.assign(Object.assign({},(0,l.fx)(1.5)),f),hovered:v,active:v}},31956:(e,t,n)=>{n.d(t,{d:()=>s});var i=n(27378),r=n(18208),o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const s=i.forwardRef((function(e,t){var{children:n,rel:s}=e,a=o(e,["children","rel"]);const l=i.useMemo((()=>r.fg(10)),[]);return i.createElement(i.Fragment,null,i.createElement("span",{hidden:!0,id:l},"Opens an external site in a new window"),i.createElement("a",Object.assign({},a,{"aria-describedby":l,target:"_blank",rel:null!=s?s:"noopener noreferrer",ref:t}),n))}))},27995:(e,t,n)=>{n.d(t,{J2:()=>_,yS:()=>E});var i=n(27378),r=n(30116),o=n(37869),s=n(64840),a=n(5114),l=n(57050),c=n(9546),u=n(13578),d=n(88392),m=n(99517),p=n(89894),h=n(32952),g=n(80900),f=n(54001),v=n(40),x=n(79378),b=n(13713),y=n(45578),k=n(33829),w=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const C=(0,f.xb)(r.aV),E=i.createContext({closePopover:l.Q1});var S;!function(e){e.umount="unmount",e.interactOutside="interactOutside",e.closeButtonClick="closeButtonClick"}(S||(S={}));const _=e=>{var t,n,r,l,c,u,d,f,{reference:x,title:_,body:M,footer:U,className:F,placement:z,offset:j,containerPadding:P,onClose:G,onMount:L}=e,D=w(e,["reference","title","body","footer","className","placement","offset","containerPadding","onClose","onMount"]);const Z=i.useRef(null),[H,V]=i.useState(null),[$,K]=i.useState(null),W=(0,v.s)(),{styles:q,attributes:Q,state:Y}=(0,o.D)(x,H,{placement:null!=z?z:"top",modifiers:[{name:"offset",options:{offset:[0,6+(null!=j?j:0)]}},{name:"arrow",options:{element:$,padding:12}},{name:"preventOverflow",options:{padding:null!=P?P:5}},W]}),X=null!==(f=null===(d=null===(u=null===(c=null===(l=null===(r=null===(n=null===(t=q.arrow)||void 0===t?void 0:t.transform)||void 0===n?void 0:n.replace("translate3d(",""))||void 0===r?void 0:r.replace("translate(",""))||void 0===l?void 0:l.replace(")",""))||void 0===c?void 0:c.split(","))||void 0===u?void 0:u.map((e=>e.trim())))||void 0===d?void 0:d.map((e=>parseInt(e,10))))&&void 0!==f?f:[],J=i.useRef(new h.xQ),ee=i.useRef(null),te=(0,s.d)({defaultOpen:!1,onOpenChange:e=>{const t=ee.current;null!==t&&clearTimeout(t),e||(ee.current=setTimeout((()=>J.current.next(void 0)),500))}}),{overlayProps:ne,underlayProps:ie}=(0,k.I)({isOpen:te.isOpen,onClose:te.close,shouldCloseOnBlur:!0,isDismissable:!0,shouldCloseOnInteractOutside:(e,t)=>{const n=null==t?void 0:t.composedPath();let i=!1;return i=!n||!n.some((e=>e instanceof Node&&(null==H?void 0:H.contains(e)))),i&&(Z.current=S.interactOutside),i}},{current:H}),{portalContainer:re}=i.useContext(b.l);i.useEffect((()=>{const e=g.H(0).subscribe((()=>te.open()));return()=>e.unsubscribe()}),[]),i.useEffect((()=>{te.isOpen&&H&&(null==L||L(H))}),[te.isOpen,H]),i.useEffect((()=>{const e=J.current.subscribe((()=>{var e;return null==G?void 0:G(null!==(e=Z.current)&&void 0!==e?e:S.umount)}));return()=>e.unsubscribe()}),[J]);const oe=i.useCallback((e=>{Z.current=e,te.close()}),[te]);return x?i.createElement(C,{portalContainer:re.view(a.toUndefined)},i.createElement(m.n,{in:te.isOpen},((e,t)=>{var n,r;return i.createElement(i.Fragment,null,te.isOpen&&i.createElement("div",Object.assign({},ie,{className:A})),i.createElement("div",Object.assign({},D,Q.popper,ne,{ref:e=>V(e),style:Object.assign(Object.assign({},q.popper),ne.style),className:p.ux.joinClasses([B,F,e]),onTransitionEnd:e=>{if(e.target===H&&(t(),!te.isOpen)){const e=ee.current;null!==e&&clearTimeout(e),J.current.next(void 0)}}}),i.createElement("div",{ref:K},i.createElement("svg",{className:N,"data-placement":(null===(n=null==Y?void 0:Y.placement)||void 0===n?void 0:n.startsWith("bottom"))?"bottom":(null==Y?void 0:Y.placement.startsWith("top"))?"top":(null==Y?void 0:Y.placement.startsWith("right"))?"right":(null===(r=null==Y?void 0:Y.placement)||void 0===r?void 0:r.startsWith("left"))?"left":void 0,viewBox:"0 0 12 12",style:{position:"absolute",left:0!==X[0]&&Number.isFinite(X[0])?X[0]:void 0,top:0!==X[1]&&Number.isFinite(X[1])?X[1]:void 0}},i.createElement("path",{d:"M0 0 L6 6 L12 0"}))),i.createElement(E.Provider,{value:{closePopover:oe}},i.createElement(y.x,{style:I,onClick:()=>oe(S.closeButtonClick),name:"tooltipClose"}),_?i.createElement("div",{className:O},_):null,M?i.createElement("div",{className:R},M):null,U?i.createElement("div",{className:T},U):null)))}))):null},I={default:{position:"absolute",top:p.ux.rem(c.x),right:p.ux.rem(c.x)}},A=p.ux.style({position:"fixed",inset:0}),B=p.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:p.ux.rem(c.yC),background:x.Z.PopoverBackgroundBaseSubdued,border:`1px solid ${u.Il.Border.Base.Default}`,color:u.Il.Text.Base.Inverse,borderRadius:p.ux.rem(d.ze),minWidth:p.ux.rem(9.375),maxWidth:p.ux.rem(15),fontSize:p.ux.rem(.875),lineHeight:p.ux.rem(1.375),padding:p.ux.rem(c.mh),$nest:{"&[data-popper-reference-hidden='true']":{visibility:"hidden"}}}),O=p.ux.style({fontWeight:700,color:u.Il.Text.Base.Inverse}),R=p.ux.style({color:u.Il.Border.Base.Subdued}),T=p.ux.style({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:p.ux.rem(c.x),marginTop:p.ux.rem(c.mh-c.yC),width:"100%"}),N=p.ux.style({position:"absolute",stroke:u.Il.Border.Base.Default,fill:x.Z.PopoverBackgroundBaseSubdued,strokeWidth:"1px",width:p.ux.rem(.75),height:p.ux.rem(.75),$nest:{'&[data-placement="top"]':{top:"100%",transform:"translateX(-50%)"},'&[data-placement="bottom"]':{bottom:"100%",transform:"translateX(-50%) rotate(180deg)"},'&[data-placement="left"]':{left:"100%",transform:"translateY(-50%) rotate(-90deg)"},'&[data-placement="right"]':{right:"100%",transform:"translateY(-50%) rotate(90deg)"}}})},40:(e,t,n)=>{n.d(t,{s:()=>r});var i=n(27378);const r=function(){return i.useMemo((()=>({name:"forcePopperUpdateEffect",phase:"afterMain",enabled:!0,fn:()=>{},effect:({instance:e})=>{const t=setTimeout((()=>e.forceUpdate()),0);return()=>clearTimeout(t)}})),[])}},24435:(e,t,n)=>{n.d(t,{F:()=>c});var i=n(27378),r=n(90845),o=n(80544),s=n(79692),a=n(60797),l=n(28043);function c(e){const{ref:t,onMount:n}=r.P.useElWatcher(),c=i.useMemo((()=>t.pipe(o.QV(s.E),a.oA,l.x(),e)),[t]);return r.P.useSubscriptionTo(c),{ref:t,onMount:n}}},25530:(e,t,n)=>{n.d(t,{aU:()=>g,pY:()=>p,Xy:()=>h});var i=n(31699),r=n(95195),o=n(73975),s=n(45701),a=n(17889),l=n(57050),c=n(22232),u=n(8125),d=n(5114),m=n(87683);var p,h,g,f=n(69693);!function(e){let t,n,i;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.create=function(e,t){return{id:e,kind:"string",value:t}}}(n=e.StringValue||(e.StringValue={})),function(e){e.create=function(e,t){return{id:e,kind:"radio",value:t}}}(i=e.RadioValue||(e.RadioValue={}))}(p||(p={})),function(e){e.match=e=>t=>{const n=t.kind;return"string"===n?e.string(t):"radio"===n?e.radio(t):void(0,c.L0)(n)}}(h||(h={})),function(e){function t(e){return"followUpQuestion"===e.kind}function n(e){return"quickAction"===e.kind}let c,h,g,v,x,b,y;e.isFollowUpQuestionActionValue=t,e.isQuickActionValue=n,e.isListableActionValue=(0,u.Kg)(t,n),e.isUserPromptActionValue=function(e){return"userPrompt"===e.kind},e.isQuickRewriteActionValue=function(e){return"quickRewrite"===e.kind},e.isFollowUpQuestionActionInput=function(e){return"followUpQuestion"===e.kind},e.isQuickActionInput=function(e){return"quickAction"===e.kind},e.isSkillAction=function(e){return"skillAction"===e.kind},e.isToneAction=function(e){return"toneAction"===e.kind},e.isPlagiarismAction=function(e){return"plagiarismAction"===e.kind},e.extractActionIcon=function(e){return"plagiarismAction"===e.kind?r.left("plagiarism"):r.right(e.iconUrl)},e.createFollowUpQuestionActionInputOrQuickActionInput=function(t,n,r,o,s){var c;const u=Array.from(new Set(n.map((e=>e.group)).filter((0,l.ff)(g.isPinned)))).findIndex((e=>t.group===e)),v=g.isPinned(t.group)?h.knownStores.pinned:h.knownStores.ideas,x={id:e.Id.create(t.id),contextId:s,iconUrl:t.iconUrl,store:{id:v,label:g.isPinned(t.group)?"":f.w.isQuickReply(r)?"Ways to reply":d.isSome(o)?`Work with: ${o.value}`:"Ideas for you",view:g.isPinned(t.group)?e.Store.View.pinned:e.Store.View.normal,rank:null!==(c=h.ranks[v])&&void 0!==c?c:Number.MAX_SAFE_INTEGER,maxCountBeforeClipping:f.w.isQuickReply(r)?d.none:d.some(3)},group:{id:g.Id.create(t.group),label:t.group,rank:u>-1?u:Number.MAX_SAFE_INTEGER},label:(0,i.sanitize)(t.label,{ALLOWED_TAGS:m.ap}),searchLabel:(0,i.sanitize)(t.label,{ALLOWED_TAGS:[]}),searchTags:t.searchTags,generatesTextType:d.fromNullable(t.generatesTextType),disabled:void 0!==t.disabled,notificationOnAttempt:(0,l.zG)(d.fromNullable(t.disabled),d.chain((({onActionNotification:e})=>d.fromNullable(e))),d.map((({text:e})=>e)))};if(1===t.args.length){const e=t.args[0],n={id:p.Id.create(e.name),label:e.label,hints:(0,l.zG)(d.fromNullable(e.hint),d.map((e=>({header:e.header,items:e.text}))))};return"string"===e.valueType?d.some(Object.assign(Object.assign({},x),{kind:"followUpQuestion",args:[Object.assign(Object.assign({},n),{kind:"string"})],generatesTextType:d.fromNullable(t.generatesTextType)})):"radioButtonGroup"===e.valueType?(0,l.zG)(e.radioButtonGroupValues,a.nI,d.map((e=>Object.assign(Object.assign({},x),{kind:"followUpQuestion",args:[Object.assign(Object.assign({},n),{kind:"radio",radioOptions:e})],generatesTextType:d.fromNullable(t.generatesTextType)})))):d.none}return 0===t.args.length?d.some(Object.assign(Object.assign({},x),{kind:"quickAction",args:[]})):d.none},function(e){e.create=function(e){return e},e.eq=o.yv}(c=e.Id||(e.Id={})),function(e){let t,n;!function(e){e.eq=o.yv}(t=e.Id||(e.Id={})),function(e){e.normal="normal",e.pinned="pinned"}(n=e.View||(e.View={})),e.knownStores={ideas:"ideas",pinned:"pinned",tools:"tools"},e.ranks={[e.knownStores.ideas]:0,[e.knownStores.pinned]:1,[e.knownStores.tools]:2}}(h=e.Store||(e.Store={})),function(t){let n;!function(e){e.create=function(e){return e},e.eq=o.yv}(n=t.Id||(t.Id={})),t.isPinned=function(t){return t===e.knownGroup.pinned}}(g=e.Group||(e.Group={})),e.knownGroup={tools:g.Id.create("tools"),pinned:g.Id.create("pinned")},e.knownGroupRank={[e.knownGroup.tools]:-2,[e.knownGroup.pinned]:-1},e.knowGroupLabels={[e.knownGroup.tools]:"Tools",[e.knownGroup.pinned]:""},function(e){e.fromTextInput=function(e,t){return Object.assign(Object.assign({},e),{args:[p.StringValue.create(e.args[0].id,t)]})},e.fromRadioInput=function(e,t){return Object.assign(Object.assign({},e),{args:[p.RadioValue.create(e.args[0].id,t)]})}}(v=e.FollowUpQuestionActionValue||(e.FollowUpQuestionActionValue={})),e.createSkillAction=function(t,n){var r;const o=h.knownStores.tools;return{kind:"skillAction",id:c.create(t.id),store:{id:o,label:"App actions",view:e.Store.View.normal,rank:null!==(r=h.ranks[o])&&void 0!==r?r:Number.MAX_SAFE_INTEGER,maxCountBeforeClipping:f.w.isQuickReply(n)?d.some(1):d.some(3)},group:{id:e.knownGroup.tools,label:"App actions",rank:Number.MAX_SAFE_INTEGER},iconUrl:t.iconUrl,label:(0,i.sanitize)(t.displayName,{ALLOWED_TAGS:m.ap}),searchLabel:(0,i.sanitize)(t.displayName,{ALLOWED_TAGS:[]}),searchTags:t.tags,generatesTextType:d.none,args:[],skill:t,disabled:!1,notificationOnAttempt:d.none}},e.createToneAction=function(t){const n="Check my tone";return{kind:"toneAction",id:c.create(t.name),store:{id:"",label:"",view:e.Store.View.normal,rank:Number.MAX_SAFE_INTEGER,maxCountBeforeClipping:d.none},group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},iconUrl:(r=t.emojiId,"https://assets.grammarly.com/emoji/v1/"+r+".svg"),label:n,searchLabel:(0,i.sanitize)(t.name,{ALLOWED_TAGS:[]}),searchTags:[n,t.name],generatesTextType:d.none,args:[],tone:t,disabled:!1,notificationOnAttempt:d.none};var r},e.createPlagiarismAction=function(){const t="Check for plagiarism";return{kind:"plagiarismAction",id:c.create("plagiarism"),store:{id:"",label:"",view:e.Store.View.normal,rank:Number.MAX_SAFE_INTEGER,maxCountBeforeClipping:d.none},group:{id:e.knownGroup.tools,label:"Tools",rank:Number.MAX_SAFE_INTEGER},iconUrl:"",label:t,searchLabel:"plagiarism",searchTags:[t],generatesTextType:d.none,args:[],disabled:!1,notificationOnAttempt:d.none}},function(e){e.ordByGroup=s.contramap((e=>e.group.rank))(s.ordNumber)}(x=e.ListableActionInput||(e.ListableActionInput={})),function(e){e.fromInput=function(e,t,n,i){return Object.assign(Object.assign({},e),{arg:p.StringValue.create(e.arg.id,t),useReferences:n,omitReferenceIds:i})}}(b=e.UserPromptActionValue||(e.UserPromptActionValue={})),function(e){e.fromInput=function(e){return Object.assign(Object.assign({},e),{args:[]})}}(y=e.QuickRewriteActionValue||(e.QuickRewriteActionValue={}))}(g||(g={}))},83289:(e,t,n)=>{n.d(t,{i:()=>i});var i,r=n(8125),o=n(22232);!function(e){let t;!function(e){e.mount="mount",e.unmount="unmount",e.headerCloseButtonClick="headerCloseButtonClick",e.headerGoBackButtonClick="headerGoBackButtonClick",e.headerVoiceButtonClick="headerVoiceButtonClick",e.setVoiceButtonClick="setVoiceButtonClick",e.voiceProfileCloseButtonClick="voiceProfileCloseButtonClick",e.voiceProfileUseVoiceButtonClick="voiceProfileUseVoiceButtonClick",e.toneToggleClick="toneToggleClick",e.styleToggleClick="styleToggleClick",e.roleTypeaheadSelectionChange="roleTypeaheadSelectionChange",e.dialectDropdownSelectionChange="dialectDropdownSelectionChange",e.promptFieldTextChange="promptFieldTextChange",e.promptFieldFocusChange="promptFieldFocusChange",e.promptFieldAndMenuFocusChange="promptFieldAndMenuFocusChange",e.actionBrickClick="actionBrickClick",e.promptSubmitButtonClick="promptSubmitButtonClick",e.generateStopButtonClick="generateStopButtonClick",e.promptFieldKeyPressEscape="promptFieldKeyPressEscape",e.promptFieldKeyPressEnter="promptFieldKeyPressEnter",e.promptFieldKeyPressArrowDown="promptFieldKeyPressArrowDown",e.promptFieldKeyPressArrowUp="promptFieldKeyPressArrowUp",e.promptMenuKeyPressArrowDown="promptMenuKeyPressArrowDown",e.promptMenuKeyPressArrowUp="promptMenuKeyPressArrowUp",e.resultCardInsertButtonClick="resultCardInsertButtonClick",e.resultCardRephraseButtonClick="resultCardRephraseButtonClick",e.resultCardDismissButtonClick="resultCardDismissButtonClick",e.resultCardToggleGenericVoiceButtonClick="resultCardToggleGenericVoiceButtonClick",e.errorCardOkButtonClick="errorCardOkButtonClick",e.openFeedbackFormButtonClick="openFeedbackFormButtonClick",e.feedbackFormChange="feedbackFormChange",e.feedbackFormSubmitButtonClick="feedbackFormSubmitButtonClick",e.reportOffensiveResultButtonClick="reportOffensiveResultButtonClick",e.reportOffensiveActionsButtonClick="reportOffensiveActionsButtonClick",e.resultCardHeaderClick="resultCardHeaderClick",e.collapsePromptMenuButtonClick="collapsePromptMenuButtonClick",e.creditsInfoHover="creditsInfoHover",e.creditsInfoClick="creditsInfoClick",e.resultCardHoverChange="resultCardHoverChange",e.resultCardFocusChange="resultCardFocusChange",e.resultCardCopy="resultCardCopy",e.reportMenuVisibilityChange="reportMenuVisibilityChange",e.referencesVisibilityChange="referencesVisibilityChange",e.voiceProfileTabChange="voiceProfileTabChange",e.voiceTagClick="voiceTagClick",e.voiceTagPopoverClose="voiceTagPopoverClose",e.voiceTagPopoverKeepButtonClick="voiceTagPopoverKeepButtonClick",e.voiceTagPopoverRemoveButtonClick="voiceTagPopoverRemoveButtonClick",e.voiceDialectDropdownSelectionChange="voiceDialectDropdownSelectionChange",e.voiceRoleDropdownSelectionChange="voiceRoleDropdownSelectionChange",e.voiceSelectionsSaveButtonClick="voiceSelectionsSaveButtonClick",e.voiceSelectionsCancelButtonClick="voiceSelectionsCancelButtonClick",e.voiceSelectionsEditButtonClick="voiceSelectionsEditButtonClick",e.surveyRatingSelectionChange="surveyRatingSelectionChange",e.surveyOpenAnswerChange="surveyOpenAnswerChange",e.surveySubmitButtonClick="surveySubmitButtonClick",e.surveyKeyPressShiftEnter="surveyKeyPressShiftEnter",e.surveyCancelButtonClick="surveyCancelButtonClick",e.surveyCloseButtonClick="surveyCloseButtonClick",e.regenerateWithoutReferenceButtonClick="regenerateWithoutReferenceButtonClick",e.restoreHistoryButtonClick="restoreHistoryButtonClick",e.userPromptSubmit="userPromptSubmit",e.radioOptionsSubmitButtonClick="radioOptionsSubmitButtonClick",e.radioOptionsCancelButtonClick="radioOptionsCancelButtonClick",e.removeSelectionContextClick="removeSelectionContextClick",e.selectionContextInteraction="selectionContextInteraction",e.settingsButtonClick="settingsButtonClick",e.toneReportToneLikeButtonClick="toneReportToneLikeButtonClick",e.toneReportToneDislikeButtonClick="toneReportToneDislikeButtonClick"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e},e.isResultAction=(0,r.Kg)(e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.reportOffensiveResultButtonClick),e.is(e.Kind.regenerateWithoutReferenceButtonClick)),e.isToneDetectorAction=(0,r.Kg)(e.is(e.Kind.toneReportToneLikeButtonClick),e.is(e.Kind.toneReportToneDislikeButtonClick)),e.isSurveyAction=(0,r.Kg)(e.is(e.Kind.surveyOpenAnswerChange),e.is(e.Kind.surveySubmitButtonClick),e.is(e.Kind.surveyKeyPressShiftEnter),e.is(e.Kind.surveyCancelButtonClick),e.is(e.Kind.surveyCloseButtonClick),e.is(e.Kind.surveyRatingSelectionChange)),e.isSurveyImplicitDismissAction=(0,r.Kg)(e.is(e.Kind.promptSubmitButtonClick),e.is(e.Kind.actionBrickClick),e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.resultCardHeaderClick))}(i||(i={})),(0,o.L0)(void 0)},33148:(e,t,n)=>{n.d(t,{J4:()=>u,JS:()=>r});var i,r,o=n(69243),s=n(59502),a=n(73915),l=n(8125),c=n(79662);!function(e){e.Codec=o.OT(o.dt({action:o.OT(o.Z_)}))}(i||(i={})),function(e){let t,n,i,r,u,d;!function(e){e.Codec=o.OT(o.dt({action:o.OT(o.i0("error"))})),e.is=function(t){return e.Codec.is(t)}}(t=e.Error||(e.Error={})),function(e){e.Codec=o.OT(o.dt({action:o.OT(o.i0("finished"))})),e.is=function(t){return e.Codec.is(t)}}(n=e.Finished||(e.Finished={})),function(e){e.Codec=o.OT(o.dt({action:o.OT(o.i0("async_check_finished"))})),e.is=function(t){return e.Codec.is(t)}}(i=e.AsyncCheckFinished||(e.AsyncCheckFinished={})),function(e){e.Codec=o.OT(o.dt({action:o.OT(o.i0("emotions"))})),e.is=function(t){return e.Codec.is(t)}}(r=e.TonesResult||(e.TonesResult={})),function(e){e.Codec=o.OT(o.dt({action:o.OT(o.i0("show_survey"))})),e.is=function(t){return e.Codec.is(t)}}(u=e.ShowSurvey||(e.ShowSurvey={})),function(e){let t,n;!function(e){e.Codec=o.OT(o.dt({action:o.OT(o.i0("cheetah")),id:o.OT(o.pk)})),e.is=e.Codec.is}(t=e.CheetahAck||(e.CheetahAck={})),function(e){e.is=a.n(c.Pb.extend(s.Schemable)({any:s.id(),sensitiveString:s.string,sensitiveDelta:s.id()}))(c.Pb.ServerMessageImplementations).is}(n=e.CheetahProtocolServerMessage||(e.CheetahProtocolServerMessage={})),e.is=(0,l.Kg)(t.is,n.is)}(d=e.CheetahInboundCAPIMessage||(e.CheetahInboundCAPIMessage={})),e.is=(0,l.Kg)(t.is,u.is,d.is,r.is,n.is,i.is)}(r||(r={}));const u=(0,l.Kg)(r.Finished.is,r.AsyncCheckFinished.is,r.TonesResult.is);r.CheetahInboundCAPIMessage.is},27278:(e,t,n)=>{n.d(t,{_:()=>i});var i,r=n(5114);!function(e){let t,n;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),e.isPending=function(e){return"pending"===e.kind},e.isReceived=function(e){return"received"===e.kind},function(e){e.empty=function(e){return{id:e,kind:"pending",availableActions:[],specialView:r.none,userPromptAction:r.none,intent:r.none,documentOverview:r.none,selection:r.none,isBoundary:!1,textRevision:r.none}}}(n=e.Pending||(e.Pending={}))}(i||(i={}))},819:(e,t,n)=>{n.d(t,{_:()=>i});var i,r=n(5114),o=n(57050),s=n(8125);!function(e){let t,n;function i(e){return e.kind===t.activeLimited||e.kind===t.activeUnlimited}function a(e){return e.kind===t.passive}function l(e){return e.kind===t.unknown}function c(e){return i(e)||l(e)}function u(n){if(void 0===n)return{kind:t.unknown,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}};const i=e.Active.parseRefillDate(n.usage.refillDate);return n.usage.promptsRemaining<0?{kind:t.unknown,userSettings:n.settings}:1e4===n.usage.promptsAllocated&&n.usage.promptsRemaining>0?{kind:t.activeUnlimited,promptsRemaining:n.usage.promptsRemaining,promptsAllocated:n.usage.promptsAllocated,refillDate:i,userSettings:n.settings}:n.usage.promptsRemaining>0?{kind:t.activeLimited,promptsRemaining:n.usage.promptsRemaining,promptsAllocated:n.usage.promptsAllocated,refillDate:i,userSettings:n.settings}:{kind:t.passive,promptsRemaining:n.usage.promptsRemaining,promptsAllocated:n.usage.promptsAllocated,refillDate:i,userSettings:n.settings}}!function(e){e.activeLimited="activeLimited",e.activeUnlimited="activeUnlimited",e.passive="passive",e.unavailable="unavailable",e.disabled="disabled",e.pending="pending",e.unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){const t=(0,s.HP)((e=>{const t=Date.parse(e);return isNaN(t)?0:t}));function n(e){const t=e-Date.now();return Math.floor(t/36e5)}e.parseRefillDate=function(e){return t(e)},e.hoursUntilRefillDate=n,e.daysUntilRefillDate=function(e){return Math.floor(n(e)/24)}}(n=e.Active||(e.Active={})),e.isActive=i,e.isActiveUnlimited=function(e){return e.kind===t.activeUnlimited},e.isPassive=a,e.isActiveOrPassive=(0,s.Kg)(i,a),e.isUnknown=l,e.isUsable=c,e.isVisible=function(e){return c(e)||a(e)},e.isDisabled=function(e){return e.kind===t.disabled},e.isUnavailable=function(e){return e.kind===t.pending||e.kind===t.unavailable||e.kind===t.disabled},e.fromUserState=u,e.updateUsage=function(e,t){return u({usage:t,settings:e.userSettings})},e.getPromptsAllocated=function(t){return(0,o.zG)(t,r.fromPredicate(e.isActiveOrPassive),r.map((e=>e.promptsAllocated)))}}(i||(i={}))},98370:(e,t,n)=>{function i(e){return{kind:e.kind,source:e.source,name:e.name,jsonData:JSON.stringify(e.data)}}n.d(t,{L:()=>i})},89727:(e,t,n)=>{function i(e){return{kind:"error",source:"core",name:"lifecycleStartingFailed",data:e}}function r(e){return{kind:"error",source:"core",name:"lifecycleVisuallyReadyFailed",data:e}}function o(e){return{kind:"error",source:"core",name:"lifecycleReadyToDragFailed",data:e}}function s(e){return{kind:"error",source:"core",name:"lifecycleFocusStateChangedFailed",data:e}}function a(e){return{kind:"error",source:"core",name:"lifecycleCloseFailed",data:e}}function l(e){return{kind:"error",source:"core",name:"unsanitizeTextOnInboundCAPIMessageFailed",data:e}}function c(e){return{kind:"error",source:"core",name:"sanitizeTextOnOutboundCAPIMessageFailed",data:e}}function u(){return{kind:"error",source:"core",name:"getContextFailed",data:null}}function d(){return{kind:"error",source:"core",name:"getHistoryFailed",data:null}}function m(e){return{kind:"error",source:"core",name:"actionFailed",data:e}}function p(e){return{kind:"error",source:"core",name:"waitForContextTimeout",data:e}}function h(){return{kind:"error",source:"core",name:"waitForHistoryTimeout",data:null}}function g(){return{kind:"error",source:"core",name:"waitForResultTimeout",data:null}}function f(e){return{kind:"error",source:"core",name:"waitForAckTimeout",data:e}}function v(e){return{kind:"error",source:"core",name:"setVoiceProfileFailed",data:e}}function x(e){return{kind:"error",source:"core",name:"setNewVoiceProfileFailed",data:e}}function b(e){return{kind:"error",source:"core",name:"capiErrorUnhandled",data:e}}function y(e){return{kind:"error",source:"core",name:"regenerateResultFailed",data:e}}function k(e){return{kind:"error",source:"core",name:"stopInProgressResultFailed",data:e}}function w(e){return{kind:"error",source:"core",name:"getTextFailed",data:e}}function C(e){return{kind:"error",source:"core",name:"reportUphookShowFailed",data:e}}function E(e){return{kind:"error",source:"core",name:"reportUphookClickFailed",data:e}}function S(e){return{kind:"error",source:"core",name:"reportMetricFailed",data:e}}n.d(t,{$E:()=>u,Ax:()=>h,B$:()=>s,CN:()=>a,IL:()=>o,Jr:()=>x,Ld:()=>S,Lp:()=>k,No:()=>f,TX:()=>v,Z9:()=>b,bE:()=>g,bS:()=>c,g0:()=>y,g4:()=>m,gW:()=>p,ix:()=>C,o9:()=>r,ol:()=>E,pA:()=>i,q_:()=>w,tD:()=>d,xe:()=>l})},4068:(e,t,n)=>{n.d(t,{H:()=>i});var i,r=n(5114),o=n(64015),s=n(17889),a=n(57050);!function(e){let t,n;e.fromOuterContext=function(e){var n,i,l,c;const u=e=>(0,a.zG)(r.fromNullable(null==e?void 0:e.from),r.chain(o.YM),r.fold((()=>t.empty),t.fromNameAndEmailString)),d=e=>(0,a.zG)(r.fromNullable(null==e?void 0:e.to),r.chain(s.c2),r.map(s.UI(t.fromNameAndEmailString)),r.getOrElseW((()=>[]))),m=(0,a.zG)(r.fromNullable(e.items),r.chain(o.YM),r.getOrElseW((()=>{})));return{previousMessageInfo:{author:u(null==m?void 0:m.people),directRecipients:d(null==m?void 0:m.people),text:null!==(n=null==m?void 0:m.text)&&void 0!==n?n:""},title:null!==(i=e.title)&&void 0!==i?i:"",author:u(e.people),directRecipients:d(e.people),indirectRecipients:(0,a.zG)(r.fromNullable(null===(l=e.people)||void 0===l?void 0:l.cc),r.chain(s.c2),r.map(s.UI(t.fromNameAndEmailString)),r.getOrElseW((()=>[]))),undisclosedRecipients:(0,a.zG)(r.fromNullable(null===(c=e.people)||void 0===c?void 0:c.bcc),r.chain(s.c2),r.map(s.UI(t.fromNameAndEmailString)),r.getOrElseW((()=>[])))}},e.toOuterContext=function(t){return{title:t.title,people:{from:[e.Person.extractNameAndEmailString(t.author)],to:t.directRecipients.map(e.Person.extractNameAndEmailString),cc:t.indirectRecipients.map(e.Person.extractNameAndEmailString),bcc:t.undisclosedRecipients.map(e.Person.extractNameAndEmailString)},items:[{text:t.previousMessageInfo.text,people:{from:[e.Person.extractNameAndEmailString(t.previousMessageInfo.author)],to:t.previousMessageInfo.directRecipients.map(e.Person.extractNameAndEmailString)}}]}},e.empty={previousMessageInfo:{author:{name:"",email:""},directRecipients:[],text:""},title:"",author:{name:"",email:""},directRecipients:[],indirectRecipients:[],undisclosedRecipients:[]},function(e){e.empty={name:"",email:""},e.fromNameAndEmailString=function(t){return(0,a.zG)(r.fromNullable(t.match(/^([^<]*)<(.*)>$/)),r.map((e=>{var t,n,i,r;return{name:null!==(n=null===(t=e[1])||void 0===t?void 0:t.trim())&&void 0!==n?n:"",email:null!==(r=null===(i=e[2])||void 0===i?void 0:i.trim())&&void 0!==r?r:""}})),r.getOrElse((()=>e.empty)))},e.extractNameAndEmailString=function(e){const t=""!==e.email?`<${e.email}>`:"";return[e.name,t].filter((e=>""!==e)).join(" ")}}(t=e.Person||(e.Person={})),function(e){e.empty={author:{name:"",email:""},directRecipients:[],text:""}}(n=e.PreviousMessageInfo||(e.PreviousMessageInfo={}))}(i||(i={}))},14047:(e,t,n)=>{n.d(t,{x:()=>i});var i,r=n(73975),o=n(5114),s=n(64015),a=n(17889),l=n(57050),c=n(8709),u=n(8125),d=n(95195),m=n(65602),p=n(3299);!function(e){let t,n,i,h,g,f,v;function x(e){return"complete"===e.kind}function b(e){return"history"===e.kind}function y(e){return"inProgressOngoing"===e.kind}function k(e){return"inProgressPending"===e.kind}!function(e){e.create=function(e){return`${e}`},e.toPrimitive=function(e){return parseInt(e,10)},e.eq=r.yv}(t=e.Id||(e.Id={})),function(e){e.insert="insert",e.reportOffensive="reportOffensive"}(n=e.Feedback||(e.Feedback={})),function(e){e.insert="insert",e.copy="copy",e.rephrase="rephrase"}(i=e.SupportedAction||(e.SupportedAction={})),e.hasId=function(e){return"id"in e},e.isComplete=x,e.isHistory=b,e.isAIUsageNotification=function(e){return"aiUsageNotification"===e.kind},e.isStandardCompletedResult=(0,u.Kg)(x,b),e.isInProgressOngoing=y,e.isInProgressPending=k,e.isInProgressInterrupted=function(e){return"inProgressInterrupted"===e.kind},e.isInProgress=(0,u.Kg)(y,k),function(e){e.generic="generic",e.user="user"}(h=e.GeneratedTextVoice||(e.GeneratedTextVoice={})),function(t){t.createFromResultMessage=function(t){var n,i;const r=(0,l.zG)((0,m.DO)(null===(n=t.text)||void 0===n?void 0:n.delta),o.getOrElse((()=>new c.i)));return(0,l.zG)((0,m.DO)(null===(i=t.withVoiceText)||void 0===i?void 0:i.delta),d.fromOption((()=>r)),d.map((n=>({generic:r,user:n,preferVoice:!0===(null==t?void 0:t.showVoiceTextByDefault)?e.GeneratedTextVoice.user:e.GeneratedTextVoice.generic}))))}}(g=e.ResultDelta||(e.ResultDelta={})),function(t){t.createFromCard=function(t,n){return{kind:"history",id:e.Id.create(t.id),header:"action"===t.title.kind?{label:t.title.label,iconUrl:""!==t.title.iconUrl.trim()?o.some(t.title.iconUrl):o.none,copiablePrompt:o.none}:{label:t.title.text,iconUrl:o.none,copiablePrompt:""!==t.title.text.trim()?o.some(t.title.text):o.none},replacementDelta:g.createFromResultMessage({text:t.text,withVoiceText:t.text.plain===t.withVoiceText.plain?void 0:t.withVoiceText,showVoiceTextByDefault:t.text.plain===t.withVoiceText.plain?void 0:t.showVoiceTextByDefault}),supportedActions:new Set([e.SupportedAction.insert].concat(n?[e.SupportedAction.copy]:[])),references:(0,l.zG)(t.references,s.UI(p.s.create),a.c2)}}}(f=e.History||(e.History={})),function(e){e.fromInProgressResult=function(e,t){return Object.assign(Object.assign({},e),{kind:"aiUsageNotification",text:t})}}(v=e.AIUsageNotification||(e.AIUsageNotification={}))}(i||(i={}))},7903:(e,t,n)=>{n.d(t,{z:()=>i});var i,r=n(5114),o=n(22232);!function(e){let t,n,i;!function(e){e.restoreDisabled="restoreDisabled",e.unknown="unknown",e.hasHistory="hasHistory",e.noHistory="noHistory",e.historyRequested="historyRequested",e.historyRestored="historyRestored"}(t=e.HistoryStatus||(e.HistoryStatus={})),function(e){e.unknown="unknown",e.static="static",e.dynamic="dynamic"}(n=e.SelectionContextStatus||(e.SelectionContextStatus={})),e.toStarting=function(e){return"starting"===e.kind?r.some(e):r.none},e.toStarted=function(e){return"started"===e.kind?r.some(e):r.none},e.fold=function(e){return t=>"starting"===t.kind?e.starting(t):"started"===t.kind?e.started(t):void(0,o.L0)(t)},e.isStartedWithInProgressResult=function(e){return"started"===e.kind&&r.isSome(e.inProgressResult)},function(e){e.initial=e=>({kind:"starting",mode:e,selectedRange:r.none,selectedText:r.none,quickReplyContext:r.none,historyStatus:t.unknown,writingExpertContext:r.none,error:r.none,textRevision:0,selectionContextStatus:n.unknown})}(i=e.Starting||(e.Starting={}))}(i||(i={}))},69693:(e,t,n)=>{n.d(t,{w:()=>i});var i,r=n(8125);!function(e){function t(e){return"rewrite"===e}function n(e){return"quickRewrite"===e}e.isIdeation=function(e){return"ideation"===e},e.isRewrite=t,e.isQuickReply=function(e){return"quickReply"===e},e.isQuickRewrite=n,e.isPushRewrite=function(e){return"pushRewrite"===e},e.isRewriteOrQuickRewrite=(0,r.Kg)(t,n)}(i||(i={}))},12968:(e,t,n)=>{n.d(t,{u:()=>i});const i={flatUI:!1}},99877:(e,t,n)=>{var i,r;n.d(t,{e:()=>i,n:()=>r}),function(e){e.intentCard="intentCard",e.initialActionsList="initialActionsList",e.followUpActionsList="followUpActionsList",e.appActionsList="appActionsList",e.creditsInfoButton="creditsInfoButton",e.promptInput="promptInput",e.promptInputAndMenuContainer="promptInputAndMenuContainer",e.promptMenuContent="promptMenuContent",e.skill="skill",e.referencesList="referencesList",e.historyButton="historyButton",e.historyButtonActive="historyButtonActive",e.toneReport="toneReport"}(i||(i={})),function(e){e.initialPopupAnchor="initialPopupAnchor",e.initialBTSPopupAnchor="initialBTSPopupAnchor",e.rewriteTooltipAnchor="rewriteTooltipAnchor"}(r||(r={}))},79662:(e,t,n)=>{n.d(t,{Pb:()=>o,XU:()=>s});var i=n(71761),r=n(9090);const o=i,s=r.i},43254:(e,t,n)=>{n.d(t,{t:()=>D});var i=n(99950),r=n(62965),o=n(57050),s=n(71761),a=n(85985),l=n(71032),c=n(12126),u=n(82900),d=n(18775),m=n(50858),p=n(55818),h=n(95195),g=n(40154),f=n(36991),v=n(98314),x=n(11452),b=n(83257),y=n(55415);function k(e){return{encode:function(t){var n=Object.entries(e).filter((function(e){return(0,v._)(e,1)[0]in t})).map((function(e){var n=(0,v._)(e,2),i=n[0],s=n[1];return(0,o.zG)(void 0===t[i]?r.F2(void 0):s.encode(t[i]),r.UI((function(e){return[i,e]})))}));return(0,o.zG)(r.RD(n),r.UI((function(e){return y.sq(e)})))}}}var w=k,C=w;function E(){return{encode:function(e){return r.F2(e)}}}var S,_=function(e){return null===e?"null":void 0===e?"undefined":(0,x._)(e)},I=function(e,t){if(void 0!==e&&void 0!==t){var n=_(e),i=_(t);if("object"===n||"object"===i)return Object.assign({},e,t)}return t},A={URI:"io-ts/EncoderAsync",literal:function(){return E()},string:E(),number:E(),boolean:E(),nullable:function(e){return{encode:function(t){return null===t?r.F2(null):e.encode(t)}}},type:C,struct:w,partial:k,record:function(e){return{encode:function(t){var n=Object.entries(t).map((function(t){var n=(0,v._)(t,2),i=n[0],s=n[1];return(0,o.zG)(e.encode(s),r.UI((function(e){return[i,e]})))}));return(0,o.zG)(r.RD(n),r.UI((function(e){return y.sq(e)})))}}},array:function(e){return{encode:function(t){return r.RD(t.map((function(t){return e.encode(t)})))}}},tuple:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{encode:function(e){return r.RD(t.map((function(t,n){return t.encode(e[n])})))}}},intersect:function(e){return function(t){return{encode:function(n){return(0,o.zG)(t.encode(n),r.tS((function(t){return(0,o.zG)(e.encode(n),r.UI((function(e){return I(t,e)})))})))}}}},sum:b.Sm,lazy:function(e,t){return b.Vo(t)},readonly:b.OT},B=n(73915);b.ov,b.id(),b.id(),b.id(),b.AG,b.dt,b.n_,b.r$,b.IM,b.IX,b.bc,b.wf,b.Sm,b.OT;!function(e){e.interpreter=(0,o.MZ)(B.n);e.extend=function(e){return function(t){return(0,m._)({},e,t)}}}(S||(S={}));var O=n(50693),R=n(74923),T=n(31099),N=n(71346),M=function(e){(0,T._)(n,e);var t=(0,N._)(n);function n(e,i){var r;return(0,u._)(this,n),r=t.call(this,"DLP Sanitizer: Schema mismatch error. ".concat(e)),(0,d._)((0,O._)(r),"decodeError",void 0),r.decodeError=i,r}return(0,R._)(n,[{key:"toString",value:function(){return"Decode error:\n      Message: ".concat(this.message,"\n      Details: ").concat(this.decodeError)}}]),n}(n(22232).sH),U=function e(t){var n=this;(0,u._)(this,e),(0,d._)(this,"_sanitizationFunctions",void 0),(0,d._)(this,"sanitizeMessage",void 0),(0,d._)(this,"unsanitizeMessage",void 0),(0,d._)(this,"replaceInDelta",void 0),(0,d._)(this,"sanitizeDelta",void 0),(0,d._)(this,"unsanitizeDelta",void 0),(0,d._)(this,"sensitiveDecoder",void 0),(0,d._)(this,"sanitizingEncoder",void 0),(0,d._)(this,"unsanitizingEncoder",void 0),(0,d._)(this,"getMessageHandler",void 0),this._sanitizationFunctions=t,this.sanitizeMessage=function(e,t){var i=n.getMessageHandler(t);return(0,o.zG)(i.decode(e),h.fold((function(e){return r.t$(new M("Sanitization failed",g.ii(e)))}),(function(e){return i.sanitizer.encode(e)})))},this.unsanitizeMessage=function(e,t){var i=n.getMessageHandler(t);return(0,o.zG)(i.decode(e),h.fold((function(e){return r.t$(new M("Unsanitization failed",g.ii(e)))}),(function(e){return i.unsanitizer.encode(e)})))},this.replaceInDelta=function(e,t){return(0,o.zG)(r.RD(e.ops.map((function(e){return f.s.isInsertString(e)?(0,o.zG)(t(e.insert),r.UI((function(t){return(0,p._)((0,m._)({},e),{insert:t})}))):r.F2(e)}))),r.UI((function(e){return{ops:e}})))},this.sanitizeDelta=function(e){return n.replaceInDelta(e,n._sanitizationFunctions.sanitizeText)},this.unsanitizeDelta=function(e){return n.replaceInDelta(e,n._sanitizationFunctions.unsanitizeText)},this.sensitiveDecoder=S.extend(z)({any:g.id(),sensitiveString:g.Z_,sensitiveDelta:g.id()}),this.sanitizingEncoder=S.extend(A)({any:E(),sensitiveString:{encode:this._sanitizationFunctions.sanitizeText},sensitiveDelta:{encode:this.sanitizeDelta}}),this.unsanitizingEncoder=S.extend(A)({any:E(),sensitiveString:{encode:this._sanitizationFunctions.unsanitizeText},sensitiveDelta:{encode:this.unsanitizeDelta}}),this.getMessageHandler=function(e){return(0,p._)((0,m._)({},S.interpreter(n.sensitiveDecoder)(e)),{sanitizer:S.interpreter(n.sanitizingEncoder)(e),unsanitizer:S.interpreter(n.unsanitizingEncoder)(e)})}},F=function e(){(0,u._)(this,e),(0,d._)(this,"sanitizeMessage",(function(e,t){return r.F2(e)})),(0,d._)(this,"unsanitizeMessage",(function(e,t){return r.F2(e)}))},z=(0,p._)((0,m._)({},g.z2),{struct:g.z2.partial,type:g.z2.partial}),j=n(33148),P=n(98370),G=n(89727),L=n(2735);class D{constructor(e){this._params=e,this.relevantInboundCAPIMessages=this._getRelevantInboundCAPIMessagesObs();const t=e.dlpOptions;this._dlpSanitizer=t?new U({sanitizeText:e=>r.Y3((()=>t.sanitizeText(e)),L.N),unsanitizeText:e=>r.Y3((()=>t.unsanitizeText(e)),L.N)}):new F}cheetahGetContext(e){return(0,o.zG)(this._sanitizeOutboundCheetahMessage("cheetah:getContext",e,s.MessageGetContext),r.tS((e=>this._params.sendCAPIMessage({action:"cheetah:getContext",shouldInjectRev:!0,data:e,shouldInjectSessionId:!1}))))}cheetahAction(e){return(0,o.zG)(this._sanitizeOutboundCheetahMessage("cheetah:action",e,s.MessageAction),r.tS((e=>this._params.sendCAPIMessage({action:"cheetah:action",shouldInjectRev:!0,data:e,shouldInjectSessionId:!1}))))}cheetahGetHistory(){return this._params.sendCAPIMessage({action:"cheetah:getHistory",shouldInjectRev:!1,data:{},shouldInjectSessionId:!1})}cheetahGetUserState(){return this._params.sendCAPIMessage({action:"cheetah:getUserState",data:{},shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahInterrupt(e){return this._params.sendCAPIMessage({action:"cheetah:interrupt",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSearchReferences(e){return this._params.sendCAPIMessage({action:"cheetah:searchReferences",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSetVoice(e){return this._params.sendCAPIMessage({action:"cheetah:setVoice",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSetVoiceProfile(e){return this._params.sendCAPIMessage({action:"cheetah:setVoiceProfile",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}user_action(e){return this._params.sendCAPIMessage({action:"user_action",data:e,shouldInjectRev:!1,shouldInjectSessionId:!0})}set_context(e){return this._params.sendCAPIMessage({action:"set_context",data:e,shouldInjectRev:!0,shouldInjectSessionId:!1})}submit_survey_result(e){return this._params.sendCAPIMessage({action:"submit_survey_result",data:e,shouldInjectRev:!0,shouldInjectSessionId:!1})}feedback(e){return this._params.sendCAPIMessage({action:"feedback",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}toggle_checks(e){return this._params.sendCAPIMessage({action:"toggle_checks",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}_getRelevantInboundCAPIMessagesObs(){return this._params.inboundCAPIMessages.pipe(a.h(j.JS.is),l.b((e=>c.D((0,o.zG)(e,(e=>{switch(e.action){case"cheetah:setContext":return this._dlpSanitizer.unsanitizeMessage(e,s.MessageSetContext);case"cheetah:chunk":return this._dlpSanitizer.unsanitizeMessage(e,s.MessageChunk);case"cheetah:result":return this._dlpSanitizer.unsanitizeMessage(e,s.MessageResult);default:return r.F2(e)}}),r.g_((t=>(this._params.monitoringService.notify((0,P.L)((0,G.xe)({capiMessageAction:e.action,rawError:(0,L.N)(t)}))),i.of(e))),i.of),(e=>e()))))))}_sanitizeOutboundCheetahMessage(e,t,n){return(0,o.zG)(this._dlpSanitizer.sanitizeMessage(t,n),r.Vn((t=>(this._params.monitoringService.notify((0,P.L)((0,G.bS)({capiMessageAction:e,rawError:(0,L.N)(t)}))),t))))}}},92627:(e,t,n)=>{n.d(t,{L:()=>p});var i=n(5114),r=n(57050),o=n(9922),s=n(85985),a=n(77176),l=n(60797),c=n(98403),u=n(23239),d=n(33148),m=n(819);class p{constructor(e,t){this._capiService=e,this._genAIFeaturesState=t,this._subs=new o.w.Keeper,this._availability=u.h.create({kind:m._.Kind.pending,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}}),this.availability=this._availability.view(),this._subs.push(this._genAIFeaturesState.subscribe((e=>this._availability.set(e.enabled?m._.fromUserState(e.userState):{kind:m._.Kind.unavailable,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}})))),this._subs.push((0,r.zG)(this._capiService.relevantInboundCAPIMessages,s.h(d.JS.CheetahInboundCAPIMessage.is),a.U((e=>"cheetah:setUserState"===e.action?i.some(e.state):i.none)),l.oA,a.U(m._.fromUserState)).subscribe(c.wW(this._availability))),this._subs.push((0,r.zG)(this._capiService.relevantInboundCAPIMessages,s.h(d.JS.CheetahInboundCAPIMessage.is),a.U((e=>{switch(e.action){case"cheetah:setContext":case"cheetah:result":return i.some(e.usage);default:return i.none}})),l.oA,a.U((e=>m._.updateUsage(this._availability.get(),e)))).subscribe(c.wW(this._availability)))}dispose(){this._subs.dispose()}}},63346:(e,t,n)=>{n.d(t,{W:()=>i});class i{constructor(e){this.namespace=e}static configureAllLoggers(e){i._isEnabled="prod"!==e.env}trace(e,t,n){this._printToConsole("trace",e,t,n)}warn(e,t,n){this._printToConsole("warn",e,t,n)}debug(e,t,n){this._printToConsole("debug",e,t,n)}info(e,t,n){this._printToConsole("info",e,t,n)}error(e,t,n){this._printToConsole("error",e,t,n)}fatal(e,t,n){this._printToConsole("fatal",e,t,n)}_getMsgWithNamespace(e){return`[${i._rootNamespace}.${this.namespace}]: ${e}`}_printToConsole(e,t,n,r){if("fatal"===e)return void console.error(t,n,r);if(!i._isEnabled)return;const o=this._getMsgWithNamespace(t);n&&r?console[e](o,n,r):!n&&r?console[e](o,r):n&&!r?console[e](o,n):console[e](o)}}i._rootNamespace="CheetahWeb",i._isEnabled=!1},35298:(e,t,n)=>{n.d(t,{j:()=>s});var i=n(14601),r=n(98403),o=n(23239);class s{constructor(e){this._hostAvailability=e,this._availability=o.h.create(null),this.availability=this._availability.view(),this._sub=new i.w,this._sub=e.subscribe(r.wW(this._availability))}augment(e){this._sub.unsubscribe(),this._sub=e(this._hostAvailability).subscribe(r.wW(this._availability))}dispose(){this._sub.unsubscribe()}}},85746:(e,t,n)=>{n.d(t,{Z:()=>Te});var i=n(17771),r=n(95195),o=n(64015),s=n(17889),a=n(13853),l=n(62965),c=n(57050),u=n(28043),d=n(50628),m=n(84966),p=n(9922),h=n(98403),g=n(38062),f=n(85985),v=n(80900),x=n(23063),b=n(77176),y=n(66310),k=n(55935),w=n(60797),C=n(66081),E=n(2834),S=n(40151),_=n(12126),I=n(22232),A=n(5114),B=n(83078),O=n(73975),R=n(8125),T=n(23239),N=n(25530);function M(e){return(0,c.zG)(A.fromNullable(e.changesSummary),A.filter((({title:e})=>""!==e)),A.chain((({title:e,description:t})=>(0,c.zG)(s.c2(t),A.map((t=>({title:e,description:t})))))))}var U,F=n(27278),z=n(50687);!function(e){let t;function n(e){switch(e){case"sensitiveResult":return{header:"Assistance is unavailable",text:"Assistance is unavailable for that text or prompt.\nTry something else."};case"overload":return{header:"Couldnt generate text",text:"Were handling a lot of prompts right now and couldnt generate that text.\nPlease try again later."};case"unsupportedLanguage":return{header:"Hmm, dont know that language",text:"Assistance is currently only available for English."};case"critical":case"timeout":case"emptyResult":case"truncatedResult":case"usageExceeded":return{header:"Something went wrong",text:"Were not sure what happened, but we couldnt generate that text.\nPlease try again."};default:return(0,c.Rz)(e)}}!function(e){e.create=function(e){switch(e){case z.oS.Generic:return"critical";case z.oS.Overflow:return"truncatedResult";case z.oS.PromptsLimitExceeded:return"usageExceeded";case z.oS.SensitiveContent:return"sensitiveResult";case z.oS.ServerOverloaded:return"overload";case z.oS.UnsupportedLanguage:return"unsupportedLanguage";default:return(0,c.Rz)(e)}}}(t=e.Reason||(e.Reason={})),e.create=function(e){const r=t.create(e.kind),o=(0,c.zG)(i.Y(A.Applicative)({header:(0,c.zG)(A.fromNullable(e.title),A.filter((e=>""!==e.trim()))),text:(0,c.zG)(A.fromNullable(e.text),A.filter((e=>""!==e.trim())))}),A.getOrElse((()=>n(r))));return Object.assign({reason:r},o)},e.createCriticalError=function(e){return{reason:"critical",header:"Something went wrong",text:e?"Were not sure what happened.\nPlease try again later.":"Were not sure what happened, but we couldnt generate that text.\nPlease try again."}},e.createEmptyResultError=function(){return Object.assign({reason:"emptyResult"},n("emptyResult"))}}(U||(U={}));var j=n(98370),P=n(89727);var G=n(14047),L=n(7903),D=n(69693);function Z(e){return D.w.isRewriteOrQuickRewrite(e.mode)}function H(e){return D.w.isQuickReply(e.mode)}function V(e){return D.w.isPushRewrite(e.mode)}var $,K=n(8709);!function(e){const t={"Cheetah/_System/Push/SimplifyRewrite":{copiablePrompt:A.none,iconUrl:A.some("https://assets.grammarly.com/cheetah/v1/actions/simplify.svg"),label:"Simplify your text"},"Cheetah/_System/Push/ImproveParagraph":{copiablePrompt:A.none,iconUrl:A.some("https://assets.grammarly.com/cheetah/v1/actions/improve.svg"),label:"Improve your text"}};e.toPreviousText=function(e){return(0,c.zG)(e,A.fromPredicate((e=>e.alertPname in t)),A.map((e=>({kind:"writerExpert",suggestionId:e.alertId,pname:e.alertPname,text:e.replacementText}))))},e.getInitialResult=function(e,n){const i=r.left((new K.i).insert(e.replacementText));return(0,c.zG)(A.fromNullable(t[e.alertPname]),A.map((t=>({kind:"complete",id:G.x.Id.create(0),header:t,replacementDelta:i,text:e.replacementText,references:A.none,source:A.none,changesSummary:A.none,timestamp:Date.now(),supportedActions:new Set([G.x.SupportedAction.insert].concat(n?[G.x.SupportedAction.copy]:[])),boundaryContextId:A.none}))))}}($||($={}));var W=n(2735),q=n(26320),Q=n(63817),Y=n(3299),X=n(41866),J=n(33305),ee=n(45630),te=n(63346),ne=n(30816),ie=n(31699),re=n(32426),oe=n(4068),se=n(65602),ae=n(87683);const le=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function ce(e,t,n,i,r){let o,s,a,l,c,u,d,m,p,h,g,f,v;for(;r>=64;){for(o=t[0],s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],d=t[6],m=t[7],h=0;h<16;h++)g=i+4*h,e[h]=(255&n[g])<<24|(255&n[g+1])<<16|(255&n[g+2])<<8|255&n[g+3];for(h=16;h<64;h++)p=e[h-2],f=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=e[h-15],v=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,e[h]=(f+e[h-7]|0)+(v+e[h-16]|0);for(h=0;h<64;h++)f=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&d)|0)+(m+(le[h]+e[h]|0)|0)|0,v=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&s^o&a^s&a)|0,m=d,d=u,u=c,c=l+f|0,l=a,a=s,s=o,o=f+v|0;t[0]+=o,t[1]+=s,t[2]+=a,t[3]+=l,t[4]+=c,t[5]+=u,t[6]+=d,t[7]+=m,i+=64,r-=64}return i}class ue{constructor(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(let e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()}update(e,t=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(ce(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=ce(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this}finish(e){if(!this.finished){const e=this.bytesHashed,t=this.bufferLength,n=e/536870912|0,i=e<<3,r=e%64<56?64:128;this.buffer[t]=128;for(let e=t+1;e<r-8;e++)this.buffer[e]=0;this.buffer[r-8]=n>>>24&255,this.buffer[r-7]=n>>>16&255,this.buffer[r-6]=n>>>8&255,this.buffer[r-5]=n>>>0&255,this.buffer[r-4]=i>>>24&255,this.buffer[r-3]=i>>>16&255,this.buffer[r-2]=i>>>8&255,this.buffer[r-1]=i>>>0&255,ce(this.temp,this.state,this.buffer,0,r),this.finished=!0}for(let t=0;t<8;t++)e[4*t+0]=this.state[t]>>>24&255,e[4*t+1]=this.state[t]>>>16&255,e[4*t+2]=this.state[t]>>>8&255,e[4*t+3]=this.state[t]>>>0&255;return this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}_saveState(e){for(let t=0;t<this.state.length;t++)e[t]=this.state[t]}_restoreState(e,t){for(let t=0;t<this.state.length;t++)this.state[t]=e[t];this.bytesHashed=t,this.finished=!1,this.bufferLength=0}}new Uint8Array(32);var de=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};function me(e,t){switch(e.historyStatus){case L.z.HistoryStatus.restoreDisabled:return e.historyStatus;case L.z.HistoryStatus.unknown:case L.z.HistoryStatus.noHistory:case L.z.HistoryStatus.hasHistory:return void 0!==t?t>0?L.z.HistoryStatus.hasHistory:L.z.HistoryStatus.noHistory:L.z.HistoryStatus.unknown;case L.z.HistoryStatus.historyRequested:case L.z.HistoryStatus.historyRestored:return"started"===e.kind&&void 0!==e.results.find(G.x.isHistory)?L.z.HistoryStatus.historyRestored:L.z.HistoryStatus.restoreDisabled;default:(0,I.L0)(e.historyStatus)}}function pe(e,t=!1){return(0,c.zG)(e.replacementDelta,r.fold(c.yR,(({preferVoice:e,generic:n,user:i})=>t?e===G.x.GeneratedTextVoice.generic?n:i:n)),(e=>(0,se.l)(e,"")))}function he(e){return l.fj((()=>"started"===e.kind?r.right(e):r.left(new Error("Session not started"))))}function ge(e,t,n,i){var r;const s=(0,c.zG)(L.z.toStarted(n),A.fold((()=>[]),(e=>e.voiceProfile.roles)));return{kind:"newVoiceProfile",userName:e.userName,title:e.title,subTitle:e.subTitle,profiles:e.profiles,isEnabledByDefault:e.myVoiceIsEnabledByDefault.state,isEnabledByDefaultLabel:e.myVoiceIsEnabledByDefault.label,dialects:J.L.Dialect.all(),roles:(0,c.zG)(null!==(r=t.roles)&&void 0!==r?r:[],o.UI((e=>({id:J.L.Role.Id.create(e),label:e}))),(e=>e.length>0?e:s)),selectedDialect:(0,c.zG)(L.z.toStarted(n),A.fold((()=>J.L.Dialect.Id.create(i)),(e=>e.voiceProfile.selectedDialect))),selectedRole:(0,c.zG)(A.fromNullable(t.selectedRole),A.map((e=>e.trim())),A.filter((e=>""!==e)),A.map(J.L.Role.Id.create)),needsSetup:!1}}function fe(e,t,n){var i,r;const s=(0,c.zG)(L.z.toStarted(t),A.map((e=>e.voiceProfile)),A.chain(J.L.toLegacyVoiceProfile),A.fold((()=>[]),(e=>e.styles))),a=(0,c.zG)(L.z.toStarted(t),A.fold((()=>[]),(e=>e.voiceProfile.roles))),l=(0,c.zG)(null!==(i=e.styles)&&void 0!==i?i:[],o.UI((e=>({id:J.L.Style.Id.create(e.button.label),label:e.button.label,iconUrl:e.button.iconUrl,tones:e.tones.map((e=>({id:J.L.Tone.Id.create(e.label),label:e.label,iconUrl:e.iconUrl,description:e.description}))),maxTones:e.maxTones,description:e.button.description}))),(e=>e.length>0?e:s)),u=J.L.Style.Id.create(e.selectedStyle),d=l.find((e=>J.L.Style.Id.eq.equals(e.id,u)));return{kind:"legacyVoiceProfile",styles:l,roles:(0,c.zG)(null!==(r=e.roles)&&void 0!==r?r:[],o.UI((e=>({id:J.L.Role.Id.create(e),label:e}))),(e=>e.length>0?e:a)),selectedStyle:u,selectedTonesPerStyle:(new Map).set(u,new Set(e.selectedTones.filter((e=>null==d?void 0:d.tones.map((e=>e.id.toString())).includes(e))))),selectedRole:(0,c.zG)(A.fromNullable(e.selectedRole),A.map((e=>e.trim())),A.filter((e=>""!==e)),A.map(J.L.Role.Id.create)),dialects:J.L.Dialect.all(),selectedDialect:(0,c.zG)(L.z.toStarted(t),A.fold((()=>J.L.Dialect.Id.create(n)),(e=>e.voiceProfile.selectedDialect))),needsSetup:e.needSetup}}function ve(e,t,n,i,r){return[...(0,c.zG)(t,o.UI((n=>N.aU.createFollowUpQuestionActionInputOrQuickActionInput(n,t,i,r,e))),o.oA),...n.map((e=>N.aU.createSkillAction(e,i)))]}function xe(e,t){const n=(0,c.zG)(e.args,o.YM,A.map((t=>({id:N.aU.Id.create(e.id),kind:"userPrompt",arg:{id:N.pY.Id.create(t.name),kind:"string",label:t.label,hints:(0,c.zG)(A.fromNullable(t.hint),A.map((e=>({header:e.header,items:e.text}))))},generatesTextType:A.some(z.cX.Insertable),useReferences:A.none,omitReferenceIds:A.none,disabled:void 0!==e.disabled,notificationOnAttempt:(0,c.zG)(A.fromNullable(e.disabled),A.chain((({onActionNotification:e})=>A.fromNullable(e))),A.map((({text:e})=>e)))}))));return A.isNone(n)&&t.warn("_extractUserPromptAction() - failed to extract user prompt action, received empty action args",{promptAction:e}),n}function be(e){return{kind:"quickRewrite",id:N.aU.Id.create(e.id),label:(0,ie.sanitize)(e.label,{ALLOWED_TAGS:ae.ap}),iconUrl:e.iconUrl,generatesTextType:A.fromNullable(e.generatesTextType),disabled:void 0!==e.disabled,notificationOnAttempt:(0,c.zG)(A.fromNullable(e.disabled),A.chain((({onActionNotification:e})=>A.fromNullable(e))),A.map((({text:e})=>e)))}}function ye(e){return(0,c.zG)(A.fromNullable(e),A.map((e=>(0,ie.sanitize)(e,{ALLOWED_TAGS:[...ae.ap,"person"]}))),A.map((e=>e.trim())),A.filter((e=>e.length>0)))}function ke(e){return{kind:G.x.isComplete(e)?"regular":G.x.isHistory(e)?"history":(0,I.L0)(e),text:pe(e)}}function we(e){return(0,c.zG)(A.fromNullable(e.references),A.map((t=>t.map((t=>{var n;return Object.assign(Object.assign({},t),{id:Y.s.Id.create(t.id),url:A.fromNullable(t.url),contextText:(0,c.zG)(A.fromNullable(null===(n=e.metadata)||void 0===n?void 0:n.knowledge_engine_references),A.chainNullableK((e=>{const n=Array.isArray(e)?e.find((e=>e.id===t.id)):void 0,i=null==n?void 0:n.contextText;return"string"==typeof i?i:void 0})))})})))))}const Ce=A.fromNullable;function Ee(e){switch(e){case"ideation":return z.s2.Ideation;case"rewrite":return z.s2.Rewrite;case"quickRewrite":return z.s2.QuickRewrite;case"quickReply":return z.s2.QuickReply;case"pushRewrite":return z.s2.PushRewrite;default:return(0,I.L0)(e)}}function Se(e){const t=(0,c.zG)(e,A.fromPredicate((e=>function(e){return D.w.isIdeation(e.mode)}(e)&&!!e.documentUrl)),A.map((e=>e.documentUrl)),A.chain(A.fromNullable),A.chain(Ie),A.map((e=>({pageIdHash:e})))),n=(0,c.zG)(e,A.fromPredicate(H),A.map((e=>oe.H.toOuterContext(e.quickReplyContext))));return A.getMonoid((0,re.getFirstSemigroup)()).concat(t,n)}function _e(e){return(0,c.zG)(e.quickReplyContext,A.map(oe.H.toOuterContext))}function Ie(e){var t;return(0,c.zG)(null!==(t=function(e){var t;return null===(t=e.match(/^https:\/\/docs.google.com\/[a-zA-Z0-9-_]+\/d\/([a-zA-Z0-9-_]+)/))||void 0===t?void 0:t[1]}(e))&&void 0!==t?t:function(e){var t;const n=null!==(t=e.match(/^https:\/\/([a-zA-Z0-9-_]+).atlassian.net\/wiki\/spaces\/[a-zA-Z0-9-_]+\/pages\/([0-9]+)/))&&void 0!==t?t:[];return n[1]&&n[2]?`${n[1]}:${n[2]}`:void 0}(e),A.fromNullable,A.map(Ae))}function Ae(e){const t=(new TextEncoder).encode(e);return ne.Buffer.from(function(e){const t=(new ue).update(e),n=t.digest();return t.clean(),n}(t)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Be(e,t,n,o,s){var a,l;return de(this,void 0,void 0,(function*(){if((null==s?void 0:s.contextUpdatesServer)&&!F._.isPending(e)&&n.textRevision===A.toUndefined(e.textRevision)){const s=(0,c.zG)(A.isNone(n.selectedRange)?(0,c.zG)(A.fromNullable(null===(a=t.context)||void 0===a?void 0:a.textScope),A.filter((e=>e.start!==e.end))):(0,c.zG)(i.Y(A.option)({currentSelectionRange:n.selectedRange,backendSelectionRange:A.fromNullable(null===(l=t.context)||void 0===l?void 0:l.textScope)}),A.filter((({currentSelectionRange:e,backendSelectionRange:t})=>e.start!==t.start||e.end!==t.end)),A.map((({backendSelectionRange:e})=>e))),A.toUndefined);if(s){if(s.start===s.end)return r.right(A.none);{const t=yield o(s)();return r.right((0,c.zG)(A.fromEither(t),A.map((e=>({text:e,range:s}))),A.alt((()=>e.selection))))}}return r.left(void 0)}return r.left(void 0)}))}var Oe=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},Re=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class Te{constructor(e){var t,n,i,r,o;if(this._params=e,this._subs=new p.w.Keeper,this._session=T.h.create(L.z.Starting.initial(this._params.startSessionOptions.mode)),this._resultById=new Map,this._contextIdByResultId=new Map,this._contextById=new Map,this._historyResultIdByGetContextMessageId=new Map,this._contextMessageIdsTriggeredBySelectionChanges=new Set,this._stateBlobByContextId=new Map,this._initialReceivedContext=null,this._upstreamDialect=T.h.create(J.L.Dialect.Id.create("american")),this._cheetahAckIds=new Set,this._searchReferencesUrlsById=new Map,this._cheetahAckHandlers=new Array,this._resultTimeout=void 0,this._contextTimeout=void 0,this._historyTimeout=void 0,this._cheetahAckTimeout=void 0,this._historyAckHandler=void 0,this._skills=[],this._resultTimeoutMs=null!==(t=this._params.resultTimeoutMs)&&void 0!==t?t:2e4,this._contextTimeoutMs=null!==(n=this._params.contextTimeoutMs)&&void 0!==n?n:2e4,this._historyTimeoutMs=null!==(i=this._params.historyTimeoutMs)&&void 0!==i?i:2e4,this._cheetahAckTimeoutMs=null!==(r=this._params.cheetahAckTimeoutMs)&&void 0!==r?r:2e4,this._logger=null!==(o=this._params.logger)&&void 0!==o?o:new te.W(Te.name),this._notificationHandler=null,this.session=this._session.view(),this._handleCAPIMessage=e=>{switch(e.action){case"error":return this._handleError(e);case"cheetah":return this._handleCheetahAck(e);case"cheetah:setContext":return void this._handleCheetahSetContext(e);case"cheetah:chunk":return this._handleCheetahChunk(e);case"cheetah:result":return void this._handleCheetahResult(e);case"cheetah:error":return this._handleCheetahError(e);case"cheetah:setUserState":return this._handleCheetahSetUserState(e);case"cheetah:searchReferencesResult":return this._handleCheetahSearchReferencesResult(e);case"cheetah:invalidateContext":return this._getContext();case"cheetah:setHistory":return this._handleCheetahSetHistory(e);case"show_survey":case"emotions":case"finished":case"async_check_finished":return;default:return this._logger.warn("Received unexpected CAPI message",e),(0,I.L0)(e)}},Z(this._params.startSessionOptions)){const e=this._params.textEditorService.selectedRange.get();(0,c.zG)(e,A.fold((()=>this._init()),(e=>(0,q.t)("getText",this._params.textEditorService.getText(e),this._logger,(t=>this._init({selectedRange:e,selectedText:t})),(t=>{this._logger.warn("getText() - failed to get text from host, defaulting to empty text",{selectedRange:e,error:t}),this._params.monitoringService.notify((0,j.L)((0,P.q_)({textRange:e,rawError:(0,W.N)(t)}))),this._init()})))))}else this._init()}registerNotificationHandler(e){this._notificationHandler=e}_pushNotification(e){var t;null===(t=this._notificationHandler)||void 0===t||t.call(this,e)}_init(e){var t,n;this._session.set({kind:"starting",mode:this._params.startSessionOptions.mode,selectedRange:A.fromNullable(null==e?void 0:e.selectedRange),selectedText:(0,c.zG)(A.fromNullable(null==e?void 0:e.selectedText),A.filter((e=>e.length>0))),quickReplyContext:A.fromNullable(H(this._params.startSessionOptions)?this._params.startSessionOptions.quickReplyContext:void 0),writingExpertContext:A.fromNullable(V(this._params.startSessionOptions)?this._params.startSessionOptions.writingExpertContext:void 0),historyStatus:L.z.HistoryStatus.unknown,error:A.none,textRevision:0,selectionContextStatus:this._params.selectionContextAvailability&&(null===(t=this._params.selectionContextAvailability.get())||void 0===t?void 0:t.contextUpdatesClient)?L.z.SelectionContextStatus.dynamic:L.z.SelectionContextStatus.static}),this._subs.push(this._params.capiService.relevantInboundCAPIMessages.subscribe((e=>this._handleCAPIMessage(e)))),this._subs.push(this._params.userService.user.view("dialect").view(J.L.Dialect.Id.create).subscribe(h.wW(this._upstreamDialect))),this._subs.push(this._upstreamDialect.subscribe((e=>this._handleUpstreamDialectChange(e)))),this._subs.push(this._session.subscribe((e=>this._logger.debug("Session updated:",e)))),this._subs.push(this._session.pipe((0,u.x)(((e,t)=>e.kind===t.kind)),(0,d.P)((e=>"started"===e.kind))).subscribe((()=>{this._params.trackingService.trackReadyToInteract()}))),this._params.selectionContextAvailability&&this._setUpSelectionAvailabilityChangeHandlers(this._params.selectionContextAvailability),this._params.selectionContextAvailability&&null===this._params.selectionContextAvailability.get()?g.S3([this._params.selectionContextAvailability.pipe(f.h((e=>null!==e))),v.H(null!==(n=this._params.selectionContextAvailabilityWaitTimeoutMs)&&void 0!==n?n:2e3)]).pipe(x.q(1)).subscribe((()=>{this._startSession(this._params.startSessionOptions)})):this._startSession(this._params.startSessionOptions)}_startSession(e,t){(0,q.t)("flush",this._params.textEditorService.flush(),this._logger,(()=>{var n,r;const o=Z(e)?this._params.textEditorService.selectedRange.get():A.fromNullable(void 0),s=Se(e),a=A.fromNullable(V(e)?e.writingExpertContext:void 0),u={generationMode:Ee(e.mode),selectedRange:A.toUndefined(o),outerContext:A.toUndefined(s),stateBlob:t,metadata:e.metadata,previousText:(0,c.zG)(a,A.chain($.toPreviousText),A.toUndefined),includeDisabledActions:this._params.selectionContextAvailability&&(null===(n=this._params.selectionContextAvailability.get())||void 0===n?void 0:n.contextUpdatesServer)&&(null===(r=this._params.selectionContextAvailability.get())||void 0===r?void 0:r.contextUpdatesClient)};if(this._params.skillService){const e={skills:this._params.skillService.getSkills(),shouldShowSkills:(0,c.zG)(this._params.experimentService?this._params.experimentService.isGateEnabled(ee.CI.CheetahFetchSkills):l.F2(!1),l.Vn((e=>new Error(e))))};(0,q.t)("getSkills",i.Y(q.L)(e),this._logger,(({skills:e,shouldShowSkills:t})=>{t&&(this._skills=e,(0,c.zG)(L.z.toStarted(this._session.get()),A.filter((e=>!e.activeContext.availableActions.some((e=>"skillAction"===e.kind)))),B.bw((e=>this._session.set(Object.assign(Object.assign({},e),{activeContext:Object.assign(Object.assign({},e.activeContext),{availableActions:e.activeContext.availableActions.concat(this._skills.map((e=>N.aU.createSkillAction(e,this._session.get().mode))))}),activeBoundaryContext:Object.assign(Object.assign({},e.activeBoundaryContext),{availableActions:e.activeBoundaryContext.availableActions.concat(this._skills.map((e=>N.aU.createSkillAction(e,this._session.get().mode))))})}))))))}),(e=>this._params.monitoringService.notify((0,j.L)((0,X.YC)({rawError:(0,W.N)(e)})))))}this._getContext(u)}))}_setUpSelectionAvailabilityChangeHandlers(e){const t=e.pipe(b.U((e=>!!(null==e?void 0:e.contextUpdatesClient))));this._subs.push(t.pipe(y.w((e=>e?this._params.textEditorService.selectedRange.pipe(k.T(1),w.oA,C.e(500),E.b((e=>{this._handleSelectedRangeUpdate(e)}))):S.E))).subscribe()),this._subs.push(t.pipe(y.w((e=>e?_.D(this._params.textEditorService.textUpdated).pipe(E.b((()=>{this._handleTextUpdated()}))):S.E))).subscribe()),this._subs.push(t.pipe(E.b((e=>{this._session.modify((t=>Object.assign(Object.assign({},t),{selectionContextStatus:e?L.z.SelectionContextStatus.dynamic:L.z.SelectionContextStatus.static})))}))).subscribe())}_handleSelectedRangeUpdate(e){this._logger.debug("_handleSelectedRangeUpdate()",{selectedRange:e}),(0,q.t)("getText",this._params.textEditorService.getText(e),this._logger,(t=>{t.trim().length?(this._session.modify(L.z.fold({starting:c.yR,started:n=>Object.assign(Object.assign({},n),{mode:"rewrite",activeContext:Object.assign(Object.assign({},n.activeContext),{kind:"pending",isBoundary:!0,textRevision:A.some(n.textRevision),selection:A.some({text:t,range:e})}),activeBoundaryContext:Object.assign(Object.assign({},n.activeBoundaryContext),{kind:"pending",isBoundary:!0,textRevision:A.some(n.textRevision),selection:A.some({text:t,range:e})}),selectedRange:A.some(e),selectedText:(0,c.zG)(A.some(t),A.filter((e=>e.length>0)))})})),this._getContext(void 0,void 0,!0)):this._session.modify((e=>Object.assign(Object.assign({},e),{selectedRange:A.none,selectedText:A.none})))}))}_handleTextUpdated(){this._logger.debug("_handleTextUpdated()"),this._session.modify(L.z.fold({starting:c.yR,started:e=>Object.assign(Object.assign({},e),{textRevision:e.textRevision+1})}))}submitAction(e,t){this._logger.debug("submitAction()",{actionValue:e,selectedVoice:t}),this._submitAction(e,void 0,void 0,void 0,void 0,t)}setVoiceProfile(e){return this._logger.debug("setVoiceProfile()",{voiceProfileSelections:e}),(0,c.zG)(he(this._session.get()),l.UI((t=>(this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),e),activeContext:Object.assign(Object.assign({},t.activeContext),{kind:"pending"})})),t))),l.tS((t=>(0,c.zG)(this._params.capiService.cheetahSetVoice({voice:{selectedStyle:e.selectedStyle,selectedTones:Array.from(e.selectedTonesPerStyle.get(e.selectedStyle)||[]),selectedRole:(0,c.zG)(e.selectedRole,A.toUndefined),needSetup:!1}}),l.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!J.L.Dialect.Id.eq.equals(t.voiceProfile.selectedDialect,e.selectedDialect))),l.tS((t=>t?i.g(l.qA)((0,c.zG)(this._params.capiService.set_context({documentContext:{dialect:e.selectedDialect}}),l.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,c.zG)(this._params.userService.setDialect(e.selectedDialect),l.Vn((e=>new Error(`CAPIService.setDialect error: ${e.message}`))))):l.of(null))),l.Pd((e=>(this._params.monitoringService.notify((0,j.L)((0,P.TX)({rawError:(0,W.N)(e)}))),e)),c.Q1)))))}setNewVoiceProfile(e){var{selectedDialect:t}=e,n=Re(e,["selectedDialect"]);return this._logger.debug("setNewVoiceProfile()",{dialect:t,voiceProfile:n}),(0,c.zG)(he(this._session.get()),l.UI((e=>(this._session.set(Object.assign(Object.assign({},e),{activeContext:Object.assign(Object.assign({},e.activeContext),{kind:"pending"})})),e))),l.tS((e=>(0,c.zG)(this._params.capiService.cheetahSetVoiceProfile({role:(0,c.zG)(n.selectedRole,A.toUndefined),isEnabledByDefault:n.isEnabledByDefault,profiles:n.profiles}),l.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!J.L.Dialect.Id.eq.equals(e.voiceProfile.selectedDialect,t))),l.tS((e=>e?i.g(l.qA)((0,c.zG)(this._params.capiService.set_context({documentContext:{dialect:t}}),l.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,c.zG)(this._params.userService.setDialect(t),l.Vn((e=>new Error(`CAPIService.setDialect error: ${e.message}`))))):l.of(null))),l.Pd((e=>(this._params.monitoringService.notify((0,j.L)((0,P.Jr)({rawError:(0,W.N)(e)}))),e)),c.Q1)))))}stopInProgressResult(){return this._logger.debug("stopInProgressResult()"),(0,c.zG)(this._session.get(),l.DT(L.z.isStartedWithInProgressResult,(()=>new Error("Session has no in-progress result."))),l.tS((e=>(this._clearResultRelatedTimeouts(),this._session.modify((t=>Object.assign(Object.assign({},t),{activeContext:(0,c.zG)(e.results.length>0?this._extractLatestResultContext(e):this._extractInitialContext(),A.getOrElse((()=>e.activeContext))),inProgressResult:G.x.isInProgressPending(e.inProgressResult.value)?A.some(Object.assign(Object.assign({},e.inProgressResult.value),{kind:"inProgressInterrupted"})):G.x.isInProgressInterrupted(e.inProgressResult.value)?e.inProgressResult:G.x.isInProgressOngoing(e.inProgressResult.value)?A.none:(0,I.L0)(e.inProgressResult.value)}))),(0,c.zG)(e.inProgressResult.value,A.fromPredicate(G.x.isInProgressOngoing),A.fold((()=>l.of(-1)),(e=>this._params.capiService.cheetahInterrupt({promptId:G.x.Id.toPrimitive(e.id)}))))))),l.Pd((e=>(this._params.monitoringService.notify((0,j.L)((0,P.Lp)({rawError:(0,W.N)(e)}))),e)),c.Q1))}regenerateResult(e,t,n){this._logger.debug("regenerateResult()",{resultId:e,options:t,selectedVoice:n}),(0,c.zG)(L.z.toStarted(this._session.get()),B.ew((()=>this._logger.warn("regenerateResult() - trying to regenerate result with a session that is not `started`, skipping",{session:this._session.get(),resultId:e}))),A.chain((t=>(0,c.zG)(A.fromNullable(this._resultById.get(e)),A.filter(G.x.isComplete),A.filter((e=>e.supportedActions.has(G.x.SupportedAction.rephrase))),A.map((e=>({session:t,result:e}))),B.ew((()=>{this._logger.warn("regenerateResult() - could not find a rephraseable result for provided result ID, skipping",{session:t,resultId:e}),this._params.monitoringService.notify((0,j.L)((0,P.g0)({resultId:e,reason:"not-found"})))}))))),A.chain((({session:t,result:n})=>(0,c.zG)(i.Y(A.option)({resultSource:n.source,boundaryContextId:n.boundaryContextId}),A.map((({resultSource:e,boundaryContextId:i})=>({resultSource:e,boundaryContextId:i,resultText:pe(n),session:t}))),B.ew((()=>{this._logger.warn("regenerateResult() - trying to regenerate result without source action or boundaryContext",{session:t,result:n}),this._params.monitoringService.notify((0,j.L)((0,P.g0)({resultId:e,reason:"no-source-action"})))}))))),A.map((({resultSource:i,boundaryContextId:r,resultText:o})=>{const a=i.actionValue,l=A.getMonoid(s.jG()).concat,u=(0,c.zG)(a,A.fromPredicate(N.aU.isUserPromptActionValue),A.fold((0,c.a9)(a),(e=>Object.assign(Object.assign({},e),{omitReferenceIds:l(e.omitReferenceIds,t.omitReferenceIds)})))),d=this._contextIdByResultId.get(e);void 0===d&&this._params.monitoringService.notify((0,j.L)({kind:"warn",source:"core",name:"regenerateResultContextNotFound",data:null})),this._submitAction(u,i.contextId,d,r,{kind:"regular",text:o},n),this._params.trackingService.trackResultRephrase(d)})))}searchReferences(e){const t=this._session.get();"started"===t.kind?t.detectedReferences.has(e)||(this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(e,A.none)})),this._setupCheetahAckHandler("searchReferences",(t=>{this._searchReferencesUrlsById.set(t,e)})),(0,q.t)("cheetahSearchReferences",this._params.capiService.cheetahSearchReferences({url:e}),this._logger)):this._logger.warn("searchReferences() - trying to search a reference with a session that is not `started`, skipping",{session:t})}dismissResult(e){this._logger.debug("dismissResult()",{resultId:e});const t=this._session.get();let n=null;if("started"===t.kind){if(this._resultById.delete(e)){const i=t.results.findIndex((t=>t.id===e));n=t.results[i];let r=t.activeContext,o=t.activeBoundaryContext,s=null;if(0===i&&t.results.length>1){this._logger.debug("dismissResult() - dismissing latest result, will try to restore context from previous result",{session:t,resultId:e});const n=A.toUndefined(this._extractPreviousResultContext(t)),i=(0,c.zG)(this._extractPreviousResultBoundaryContext(t),A.alt((()=>A.fromNullable(this._initialReceivedContext))),A.toUndefined),a=A.toUndefined(this._extractLatestResultBoundaryContext(t));n?i!==a?(this._logger.debug("dismissResult() - previous result was for different boundary context, will keep currently active boundary context",{session:t,resultId:e}),r=t.activeBoundaryContext):(this._logger.debug("dismissResult() - found context for previous result, will restore its context",{session:t,resultId:e,previousResultContext:n}),r=n,i&&(o=i)):t.results[1]&&G.x.isHistory(t.results[1])&&(0,c.zG)(A.fromNullable(this._contextIdByResultId.get(t.results[1].id)),A.chain((e=>A.fromNullable(this._contextById.get(e)))),A.isNone)?s=t.results[1].id:this._logger.warn("dismissResult() - could not find context for previous result, context will not be updated",{session:t,resultId:e})}else 1===t.results.length&&(r=t.activeBoundaryContext);this._session.set(Object.assign(Object.assign({},t),{activeContext:Object.assign(Object.assign({},r),{kind:null!==s?"pending":r.kind,availableActions:s?[]:r.availableActions}),activeBoundaryContext:o,results:t.results.filter((t=>!G.x.Id.eq.equals(t.id,e)))}));const a=this._contextIdByResultId.get(e);this._params.trackingService.trackResultDismiss(a,G.x.isHistory(n)?e:void 0),"aiUsageNotification"===n.kind&&this._params.trackingService.trackAINotificationDismiss("document"),s&&this._getContext(void 0,s)}else this._logger.warn("dismissResult() - could not find result for provided result ID, skipping",{session:t,resultId:e})}else this._logger.warn("dismissResult() - trying to dismiss result with a session that is not `started`, skipping",{session:t,resultId:e})}dismissError(){this._logger.debug("dismissError()"),this._session.lens("error").set(A.none)}restoreHistory(){this._getHistory()}trackResultInsert(e,t=!1){this._logger.debug("trackResultInsert()",{resultId:e});const n=this._resultById.get(e);if(n){const i=this._contextIdByResultId.get(e);this._params.trackingService.trackResultInsert(i,G.x.isHistory(n)?n.id:void 0,t)}else this._logger.warn("trackResultInsert() - could not find result for provided result ID, skipping",{resultId:e})}trackResultCopy(e){this._logger.debug("trackResultCopy()",{resultId:e});const t=this._resultById.get(e);if(t){const n=this._contextIdByResultId.get(e);this._params.trackingService.trackResultCopy(n,G.x.isHistory(t)?t.id:void 0)}else this._logger.warn("trackResultCopy() - could not find result for provided result ID, skipping",{resultId:e})}_trackResultGenerationCompleted(e){this._logger.debug("trackResultGenerationCompleted()",{resultId:e});const t=this._resultById.get(e);if(t){const n=this._contextIdByResultId.get(e);this._params.trackingService.trackResultGenerationCompleted(n,G.x.isHistory(t)?t.id:void 0)}else this._logger.warn("trackResultGenerationCompleted() - could not find result for provided result ID, skipping",{resultId:e})}trackResultOffensive(e){this._logger.debug("trackResultOffensive()",{resultId:e});const t=this._resultById.get(e);if(t){const n=this._contextIdByResultId.get(e);this._params.trackingService.trackResultOffensive(n,G.x.isHistory(t)?t.id:void 0)}else this._logger.warn("trackResultOffensive() - could not find result for provided result ID, skipping",{resultId:e})}trackActionsOffensive(){this._logger.debug("trackActionsOffensive()");const e=this._session.get();if("started"!==e.kind)return this._logger.warn("trackActionsOffensive() - tracking actions as offensive with a session that is not `started`, skipping");this._params.trackingService.trackActionsOffensive(e.activeContext.id)}getContextById(e){return A.fromNullable(this._contextById.get(e))}dismissActiveBoundaryContext(){if(this._logger.debug("dismissActiveBoundaryContext()"),(0,c.zG)(L.z.toStarted(this._session.get()),B.wo((e=>e.activeContext.id!==e.activeBoundaryContext.id))))return this._logger.warn("dismissActiveBoundaryContext() - there are results within this boundary, can't remove");const e=A.toNullable((0,c.zG)(this._session.get(),L.z.toStarted,A.chain((e=>this._extractLatestResultContext(e))))),t=A.toNullable((0,c.zG)(this._session.get(),L.z.toStarted,A.chain((e=>this._extractLatestResultBoundaryContext(e))),A.alt((()=>this._extractInitialContext()))));this._session.modify(L.z.fold({starting:c.yR,started:n=>e&&t?Object.assign(Object.assign({},n),{mode:n.results.length?n.mode:"ideation",activeContext:e,activeBoundaryContext:t}):Object.assign(Object.assign({},n),{kind:"starting",activeContext:Object.assign(Object.assign({},n.activeContext),{selection:A.none,kind:"pending"}),activeBoundaryContext:void 0,selectedRange:A.none,selectedText:A.none})})),e&&t||this._getContext()}dispose(){this._subs.dispose()}_getContext(e,t,n=!1){var i,r;this._logger.debug("_getContext()",{data:e,fetchContextForHistoryCardId:t}),this._setupCheetahAckHandler("getContext",(e=>{this._setupContextTimeout("getContext"),void 0!==t&&this._historyResultIdByGetContextMessageId.set(e,t),n&&this._contextMessageIdsTriggeredBySelectionChanges.add(e)}));const o=this._session.get();(0,q.t)("cheetahGetContext",this._params.capiService.cheetahGetContext(null!=e?e:{generationMode:Ee(n?"rewrite":o.mode),selectedRange:A.toUndefined(o.selectedRange),outerContext:A.toUndefined(_e(o)),stateBlob:(0,c.zG)(L.z.toStarted(o),A.map((e=>e.activeContext)),A.fold(c.r5,(e=>this._stateBlobByContextId.get(e.id)))),previousText:!n&&"started"===o.kind&&o.results.length>0&&G.x.isStandardCompletedResult(o.results[0])?ke(o.results[0]):void 0,includeDisabledActions:this._params.selectionContextAvailability&&(null===(i=this._params.selectionContextAvailability.get())||void 0===i?void 0:i.contextUpdatesServer)&&(null===(r=this._params.selectionContextAvailability.get())||void 0===r?void 0:r.contextUpdatesClient)}),this._logger,(()=>this._params.monitoringService.notify((0,j.L)({kind:"info",source:"core",name:"getContextSuccessful",data:null}))),(()=>{const e=U.createCriticalError((0,c.zG)(L.z.toStarting(this._session.get()),A.isSome));this._session.modify(L.z.fold({starting:t=>Object.assign(Object.assign({},t),{error:A.some(e)}),started:t=>Object.assign(Object.assign({},t),{error:A.some(e),inProgressResult:A.none})})),this._params.monitoringService.notify((0,j.L)((0,P.$E)()))}))}_handleCheetahSetContext(e){var t,n;return Oe(this,void 0,void 0,(function*(){this._logger.debug("_handleCheetahSetContext()",{message:e}),this._clearContextTimeout();const o=this._session.get(),s=(0,c.zG)(A.fromNullable(null===(t=e.context)||void 0===t?void 0:t.voiceProfileSettings),A.fold((()=>fe(e.context.voice,o,this._upstreamDialect.get())),(t=>ge(t,e.context.voice,o,this._upstreamDialect.get())))),a={id:F._.Id.create(e.context.id),availableActions:ve(F._.Id.create(e.context.id),e.context.availableActions,this._skills,o.mode,o.selectedText),userPromptAction:xe(e.context.promptAction,this._logger),quickRewriteAction:be(e.context.quickRewriteAction),intent:ye(e.context.intent),documentOverview:Ce(e.context.documentOverview),specialView:A.fromNullable(e.context.specialView),selection:this._historyResultIdByGetContextMessageId.has(e.promptId)?A.none:(0,c.zG)(i.Y(A.option)({text:o.selectedText,range:o.selectedRange})),textRevision:A.some(o.textRevision)},l=0===this._contextById.size;let u=e.progressMessage?Object.assign(Object.assign({},a),{kind:"pending",isBoundary:!1}):Object.assign(Object.assign({},a),{kind:"received",isBoundary:l||this._contextMessageIdsTriggeredBySelectionChanges.has(e.promptId)});if(this._shouldSkipContextUpdate(e))return void this._logger.debug("skipping context update for missing history card");const d=yield Be(u,e,this._session.get(),(e=>this._params.textEditorService.getText(e)),null===(n=this._params.selectionContextAvailability)||void 0===n?void 0:n.get());u=(0,c.zG)(A.fromEither(d),A.fold((()=>u),(t=>Object.assign(Object.assign({},u),{isBoundary:!0,selection:t,availableActions:ve(F._.Id.create(e.context.id),e.context.availableActions,this._skills,o.mode,(0,c.zG)(t,A.map((({text:e})=>e))))})))),0===this._contextById.size&&F._.isReceived(u)&&(this._initialReceivedContext=u),this._contextById.set(u.id,u),this._stateBlobByContextId.set(u.id,e.context.stateBlob),this._bindContextToHistoryCardIfNeeded(e,u.id);const m=(0,c.zG)(o.writingExpertContext,A.chain((e=>$.getInitialResult(e,void 0!==this._params.textEditorService.copyText))),B.bw((e=>{this._resultById.set(e.id,e),this._contextIdByResultId.set(e.id,u.id)})),A.fold((()=>[]),(e=>[e])));if(this._session.set(Object.assign(Object.assign({},o),{kind:"started",voiceProfile:s,activeContext:u,activeBoundaryContext:u.isBoundary?u:"started"===o.kind?o.activeBoundaryContext:u,inProgressResult:"started"===o.kind?(0,c.zG)(o.inProgressResult,A.map((e=>Object.assign(Object.assign({},e),{boundaryContextId:u.isBoundary?A.some(u.id):e.boundaryContextId})))):A.none,results:"started"===o.kind?o.results:m,detectedReferences:"started"===o.kind?o.detectedReferences:new Map,selectedRange:(0,c.zG)(d,r.fold((()=>o.selectedRange),(e=>(0,c.zG)(e,A.map((({range:e})=>e)))))),selectedText:(0,c.zG)(d,r.fold((()=>o.selectedText),(e=>(0,c.zG)(e,A.map((({text:e})=>e))))))})),(0,c.zG)(A.fromNullable(e.context.contextNotification),B.bw((({text:t})=>{this._pushNotification(Q.C.create("information",t,`contextNotification:${e.id}`,!0)),this._params.trackingService.trackContexNotification("context")}))),l&&D.w.isQuickRewrite(o.mode)){const t=N.aU.QuickRewriteActionValue.fromInput(be(e.context.quickRewriteAction));this._logger.debug("_handleCheetahSetContext() - received initial context for quick rewrite session, submitting quick rewrite action",{session:o,message:e,quickRewriteAction:t}),this._submitAction(t)}}))}_shouldSkipContextUpdate(e){return(0,c.zG)(A.fromNullable(this._historyResultIdByGetContextMessageId.get(e.promptId)),A.fold(c.jv,(e=>(0,c.zG)(L.z.toStarted(this._session.get()),A.map((e=>e.results)),A.fold(c.W8,(t=>!t.some((t=>t.id===e))))))))}_bindContextToHistoryCardIfNeeded(e,t){(0,c.zG)(A.fromNullable(this._historyResultIdByGetContextMessageId.get(e.promptId)),A.filter((e=>(0,c.zG)(A.fromNullable(this._contextIdByResultId.get(e)),A.fold(c.W8,(e=>void 0===this._contextById.get(e)))))),B.bw((e=>this._contextIdByResultId.set(e,t))))}_handleCheetahSetUserState(e){this._logger.debug("_handleCheetahUserState()",{message:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{historyStatus:me(t,e.state.historyItems)})))}_getHistory(){if(this._logger.debug("_getHistory()"),void 0!==this._historyAckHandler)return this._logger.warn("_getHistory() called when a cheetah:getHistory request hasn't been ack'ed yet, skipping");this._historyAckHandler=()=>{this._historyAckHandler=void 0,this._setupHistoryTimeout()},this._setupCheetahAckHandler("getHistory",this._historyAckHandler),this._session.lens("historyStatus").set(L.z.HistoryStatus.historyRequested),(0,q.t)("cheetahGetHistory",this._params.capiService.cheetahGetHistory(),this._logger,(()=>this._params.monitoringService.notify((0,j.L)({kind:"info",source:"core",name:"getHistorySuccessful",data:null}))),(()=>this._params.monitoringService.notify((0,j.L)((0,P.tD)()))))}_handleCheetahSetHistory(e){void 0!==this._historyAckHandler&&(this._removeCheetahAckHandler(this._historyAckHandler),this._historyAckHandler=void 0),this._clearHistoryTimeout();const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahSetHistory() - trying to handle `cheetah:setHistory` result with a session that is not `started`, skipping",{session:t});(0,c.zG)(e.cards,o.UI((e=>G.x.History.createFromCard(e,void 0!==this._params.textEditorService.copyText))),o.GY,s.c2,A.fold((()=>this._session.lens("historyStatus").set(L.z.HistoryStatus.noHistory)),(e=>{e.forEach((e=>this._resultById.set(e.id,e))),this._session.set(Object.assign(Object.assign({},t),{activeContext:Object.assign(Object.assign({},t.activeContext),{kind:"pending",textRevision:A.none,availableActions:[],selection:A.none}),historyStatus:L.z.HistoryStatus.historyRestored,results:[...t.results,...e],selectedRange:A.none,selectedText:A.none})),this._getContext(void 0,e[0].id)})))}_handleCheetahChunk(e){this._logger.debug("_handleCheetahChunk()",{message:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahChunk() - received chunk with a session that is not `started`, skipping",{session:t,message:e});const n=G.x.Id.create(e.promptId);(0,c.zG)(t.inProgressResult,A.filter(G.x.isInProgressOngoing),A.filter((e=>G.x.Id.eq.equals(e.id,n))),A.fold((()=>{const e=(0,c.zG)(t.inProgressResult,A.filter(G.x.isInProgressOngoing),A.map((e=>e.id)),A.toNullable);this._params.monitoringService.notify((0,j.L)(function(e){return{kind:"warn",source:"core",name:"unexpectedChunkReceived",data:e}}({expectedInProgressResultId:e,receivedInProgressResultId:n})))}),(n=>{this._clearResultRelatedTimeouts(),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:A.some(Object.assign(Object.assign({},n),{text:n.text+e.token}))})),this._setupResultTimeout()})))}_handleCheetahResult(e){return Oe(this,void 0,void 0,(function*(){this._logger.debug("_handleCheetahResult()",{message:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahResult() - received result with a session that is not `started`, skipping",{session:t,message:e});const n=G.x.Id.create(e.promptId);try{yield(0,c.zG)(t.inProgressResult,A.filter(G.x.isInProgressOngoing),A.filter((e=>G.x.Id.eq.equals(e.id,n))),A.fold((()=>{const e=(0,c.zG)(t.inProgressResult,A.filter(G.x.isInProgressOngoing),A.map((e=>e.id)),A.toNullable);return this._params.monitoringService.notify((0,j.L)(function(e){return{kind:"warn",source:"core",name:"unexpectedResultReceived",data:e}}({expectedInProgressResultId:e,receivedInProgressResultId:n}))),Promise.resolve(void 0)}),(n=>Oe(this,void 0,void 0,(function*(){var i,o,s,l;if(this._clearResultRelatedTimeouts(),e.error||!e.text||""===e.text.plain){const n=e.error?U.create(e.error):U.createEmptyResultError();this._logger.warn("_handleCheetahResult() - received result with error, adding error to session",{session:t,message:e,error:n}),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:A.none,error:A.some(n)}))}else if(e.text.interrupted)this._logger.debug("_handleCheetahResult() - received result with interrupted text, skipping",{session:t,message:e});else{let u,d,m,p;u="aiUsageAlert"===(null===(o=null===(i=e.context)||void 0===i?void 0:i.specialView)||void 0===o?void 0:o.kind)?G.x.AIUsageNotification.fromInProgressResult(n,e.text.plain):Object.assign(Object.assign({},n),{text:e.text.plain,kind:"complete",timestamp:Date.now(),replacementDelta:G.x.ResultDelta.createFromResultMessage(e),supportedActions:(0,c.zG)((l=n.source,(0,c.zG)(l,A.map((e=>e.actionValue.generatesTextType)),A.filter(B.FX(z.cX.Insertable)),A.fold((()=>a.cS),(()=>a.Sq(new Set([G.x.SupportedAction.rephrase,G.x.SupportedAction.insert])))))),this._params.textEditorService.copyText?a.$T(O.yv)(G.x.SupportedAction.copy):c.yR),references:we(e),changesSummary:M(e)}),this._logger.debug("_handleCheetahResult() - received complete result, saving complete result into history",{session:t,message:e,result:u});let h=r.left(void 0);if(e.context){const i=e.context;m=i.voiceProfileSettings?ge(i.voiceProfileSettings,i.voice,t,this._upstreamDialect.get()):fe(i.voice,t,this._upstreamDialect.get()),d={kind:"received",id:F._.Id.create(i.id),availableActions:ve(F._.Id.create(e.context.id),i.availableActions,this._skills,t.mode,t.selectedText),userPromptAction:xe(i.promptAction,this._logger),intent:ye(i.intent),documentOverview:Ce(i.documentOverview),specialView:A.fromNullable(i.specialView),selection:this._historyResultIdByGetContextMessageId.has(e.promptId)?A.none:(0,c.zG)(n.boundaryContextId,A.chain((e=>(0,c.zG)(A.fromNullable(this._contextById.get(e)),A.chain((({selection:e})=>e)))))),isBoundary:!1,textRevision:(0,c.zG)((0,c.zG)(n.boundaryContextId,A.chain((e=>A.fromNullable(this._contextById.get(e)))),A.chain((({textRevision:e})=>e))))},h=yield Be(d,e,this._session.get(),(e=>this._params.textEditorService.getText(e)),null===(s=this._params.selectionContextAvailability)||void 0===s?void 0:s.get()),d=(0,c.zG)(A.fromEither(h),A.fold((()=>d),(e=>Object.assign(Object.assign({},d),{isBoundary:!0,selection:e,availableActions:ve(F._.Id.create(i.id),i.availableActions,this._skills,t.mode,(0,c.zG)(e,A.map((({text:e})=>e))))})))),d.isBoundary&&(u=Object.assign(Object.assign({},u),{boundaryContextId:A.some(d.id)})),p=i.stateBlob,this._logger.debug("_handleCheetahResult() - received result with context, will update voice profile and context accordingly",{session:t,message:e,voiceProfile:m,context:d})}else this._logger.warn("_handleCheetahResult() - received result without context, keeping latest voice profile and context",{session:t,message:e}),m=t.voiceProfile,d=t.activeContext,p=this._stateBlobByContextId.get(t.activeContext.id);this._contextById.set(d.id,d),void 0!==p&&this._stateBlobByContextId.set(d.id,p),this._resultById.set(u.id,u),this._contextIdByResultId.set(u.id,d.id),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:m,activeContext:d,inProgressResult:A.none,results:[u,...t.results],selectedRange:(0,c.zG)(h,r.fold((()=>t.selectedRange),(e=>(0,c.zG)(e,A.map((({range:e})=>e)))))),selectedText:(0,c.zG)(h,r.fold((()=>t.selectedText),(e=>(0,c.zG)(e,A.map((({text:e})=>e))))))})),this._trackResultGenerationCompleted(u.id)}})))))}catch(e){return this._logger.warn("_handleCheetahResult() - cannot handle cheetah result",{session:t,incomingResultId:n,error:e})}}))}_handleCheetahSearchReferencesResult(e){const t=this._session.get();if("started"===t.kind){const n=this._searchReferencesUrlsById.get(e.promptId);if(n){const i=e.references[0];i&&this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(n,A.some(Y.s.create(i)))}))}else this._logger.warn("_handleCheetahSearchReferencesResult() - trying to handle a search references result that did not have a corresponding cheetah:searchReferences request, skipping",{message:e})}else this._logger.warn("_handleCheetahSearchReferencesResult() - trying to handle a search references result with a session that is not `started`, skipping",{session:t})}_handleCheetahError(e){this._logger.debug("_handleCheetahError",{message:e}),this._clearAllTimeouts();const t=U.create(e.error);this._logger.warn("_handleCheetahError - received error, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:A.none,error:A.some(t)})))}_handleUpstreamDialectChange(e){this._logger.debug("_handleUpstreamDialectChange()",{upstreamDialect:e});const t=this._session.get();if("started"===t.kind){const n=J.L.Dialect.Id.create(e);this._logger.debug("_handleUpstreamDialectChange() - dialect changed on upstream services, updating selected dialect on voice profile",{session:t,selectedDialect:n}),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),{selectedDialect:n})}))}}_handleCheetahAck(e){this._logger.debug("_handleCheetahAck()",{message:e}),this._clearCheetahAckTimeout(),this._cheetahAckIds.add(e.id);const t=this._cheetahAckHandlers.length>0?this._cheetahAckHandlers[0]:void 0;t&&(this._logger.debug("_handleCheetahAck() - extracting `cheetah:ack` handler from queue and executing it",{message:e,cheetahAckHandlers:this._cheetahAckHandlers}),this._cheetahAckHandlers=this._cheetahAckHandlers.slice(1),t(e.id))}_handleError(e){if(this._cheetahAckIds.has(e.id))if(this._clearAllTimeouts(),e.error===m.jK.SESSION_NOT_INITIALIZED){const t=(0,c.zG)(L.z.toStarted(this._session.get()),A.map((e=>this._stateBlobByContextId.get(e.activeContext.id))),A.toUndefined);this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:A.none}))),this._startSession(this._params.startSessionOptions,t),this._params.monitoringService.notify((0,j.L)(function(e){return{kind:"warn",source:"core",name:"capiErrorHandled",data:e}}({capiError:e})))}else{const t=U.createCriticalError((0,c.zG)(L.z.toStarting(this._session.get()),A.isSome));this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:A.none,error:A.some(t)}))),this._params.monitoringService.notify((0,j.L)((0,P.Z9)({capiError:e})))}else this._params.monitoringService.notify((0,j.L)((0,P.Z9)({capiError:e})))}_submitAction(e,t,n,i,r,o){var a,u;this._logger.debug("_submitAction()",{actionValue:e,contextId:t,triggerContextId:n,boundaryContextId:i,previousText:r,selectedVoice:o});const d=this._session.get();if("started"===d.kind){const m=null!==(a=null!=t?t:null==e?void 0:e.contextId)&&void 0!==a?a:d.activeContext.id,p=null!=n?n:m,h=null!=i?i:d.activeBoundaryContext.id,g=(null!=r?r:void 0!==(null==e?void 0:e.contextId))?void 0:d.results.length>0&&G.x.isStandardCompletedResult(d.results[0])?ke(d.results[0]):void 0,f=this._stateBlobByContextId.get(m);if(void 0===f)return this._logger.warn("_submitAction() - cannot find state blob for context ID, skipping",{session:d,contextId:m,triggerContextId:n,contextStateBlob:f});const v="aiUsageNotification"===(null===(u=d.results[0])||void 0===u?void 0:u.kind)?d.results.slice(1):d.results;this._session.set(Object.assign(Object.assign({},d),{results:v,historyStatus:L.z.HistoryStatus.restoreDisabled,activeContext:Object.assign(Object.assign({},d.activeContext),{kind:"pending"}),inProgressResult:A.isSome(e.generatesTextType)?A.some({kind:"inProgressPending",header:{label:N.aU.isUserPromptActionValue(e)?e.arg.value:e.label,iconUrl:N.aU.isUserPromptActionValue(e)||""===e.iconUrl.trim()?A.none:A.some(e.iconUrl),copiablePrompt:N.aU.isUserPromptActionValue(e)&&""!==e.arg.value.trim()?A.some(e.arg.value):A.none},text:"",source:A.some({contextId:m,actionValue:e}),boundaryContextId:A.some(h)}):A.none,error:A.none})),this._setupCheetahAckHandler("action",(e=>{(0,c.zG)(L.z.toStarted(this._session.get()),A.chain((e=>e.inProgressResult)),A.filter((0,R.Kg)(G.x.isInProgressPending,G.x.isInProgressInterrupted)),A.fold((()=>(this._logger.warn("received `cheetah:ack` related to in-progress-pending result but we don't have an in-progress-pending result, skipping",{ackId:e}),l.of(void 0))),(t=>{if(G.x.isInProgressInterrupted(t))return this._logger.info("received `cheetah:ack` related to in-progress-interrupted result, sending `cheetah:interrupt`",{ackId:e}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:A.none}))),this._params.capiService.cheetahInterrupt({promptId:e});if(G.x.isInProgressPending(t)){this._setupContextTimeout("action"),this._setupResultTimeout();const n=Object.assign(Object.assign({},t),{kind:"inProgressOngoing",id:G.x.Id.create(e)});return this._logger.debug("received `cheetah:ack` related to in-progress-pending result, transitioning result to in-progress-ongoing",{ackId:e,inProgressResult:n}),this._resultById.set(n.id,n),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:A.some(n)}))),l.of(void 0)}(0,I.L0)(t)})))()}));const x=Object.assign({contextId:m,triggerContextId:p,actionId:e.id,args:N.aU.isUserPromptActionValue(e)?[{name:e.arg.id,value:e.arg.value}]:(0,c.zG)(s.c2(e.args),A.fold((()=>[]),(e=>e.map((e=>({name:e.id,value:e.value})))))),stateBlob:f,previousText:g},o?{metadata:{selectedVoice:o}}:null),b=(0,c.zG)(e,A.fromPredicate(N.aU.isUserPromptActionValue),A.fold((0,c.a9)(x),(e=>Object.assign(Object.assign({},x),{useReferences:A.toUndefined(e.useReferences),omitReferenceIds:A.toUndefined(e.omitReferenceIds)}))));this._logger.debug("_submitAction() - sending `cheetah:action` to CAPI",{data:b}),(0,q.t)("cheetahAction",this._params.capiService.cheetahAction(b),this._logger,(()=>this._params.monitoringService.notify((0,j.L)(function(e){return{kind:"info",source:"core",name:"actionSuccessful",data:e}}({actionId:e.id})))),(()=>this._params.monitoringService.notify((0,j.L)((0,P.g4)({actionId:e.id})))))}else this._logger.warn("_submitAction() - submitting action with a session that is not `started`, skipping",{session:d,actionValue:e,contextId:t})}_extractLatestResultContext(e){return this._extractContextFromResults(e,0)}_extractLatestResultBoundaryContext(e){return this._extractBoundaryContextFromResults(e,0)}_extractPreviousResultContext(e){return this._extractContextFromResults(e,1)}_extractPreviousResultBoundaryContext(e){return this._extractBoundaryContextFromResults(e,1)}_extractContextFromResults(e,t){const n=(0,c.zG)(A.fromNullable(e.results[t]),A.map((e=>e.id)),A.chain((e=>A.fromNullable(this._contextIdByResultId.get(e)))),A.chain((e=>A.fromNullable(this._contextById.get(e)))));return A.isNone(n)&&this._logger.warn("_extractContextFromResults() - could not find context for result",{session:e,resultIndex:t}),n}_extractBoundaryContextFromResults(e,t){return(0,c.zG)(A.fromNullable(e.results[t]),A.filter(G.x.isComplete),A.chain((({boundaryContextId:e})=>e)),A.chain((e=>A.fromNullable(this._contextById.get(e)))),B.ew((()=>{this._logger.warn("_extractBoundaryContext() - could not find boundary context for result index")})))}_extractInitialContext(){return null!==this._initialReceivedContext?A.some(this._initialReceivedContext):(this._logger.warn("_extractInitialContext() - could not find initial context"),A.none)}_setupResultTimeout(){this._clearResultTimeout(),this._resultTimeout=v.H(this._resultTimeoutMs).subscribe((()=>{this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:A.none,error:A.some(U.createCriticalError((0,c.zG)(L.z.toStarting(this._session.get()),A.isSome)))}))),this._params.monitoringService.notify((0,j.L)((0,P.bE)()))}))}_setupContextTimeout(e){this._logger.debug("_setupContextTimeout()",{sourceCommand:e}),this._clearContextTimeout(),this._contextTimeout=v.H(this._contextTimeoutMs).subscribe((()=>{const t=U.createCriticalError((0,c.zG)(L.z.toStarting(this._session.get()),A.isSome));this._logger.warn("waited too long to receive `cheetah:setContext`, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:A.none,error:A.some(t)}))),this._params.monitoringService.notify((0,j.L)((0,P.gW)({sourceCommand:e})))}))}_setupHistoryTimeout(){this._clearHistoryTimeout(),this._historyTimeout=v.H(this._historyTimeoutMs).subscribe((()=>{const e=U.createCriticalError((0,c.zG)(L.z.toStarting(this._session.get()),A.isSome));this._logger.warn("waited too long to receive `cheetah:setHistory`, adding error to session",{error:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{inProgressResult:A.none,error:A.some(e)}))),this._params.monitoringService.notify((0,j.L)((0,P.Ax)()))}))}_setupCheetahAckTimeout(e){this._logger.debug("_setupCheetahAckTimeout()",{sourceCommand:e}),this._clearCheetahAckTimeout(),this._cheetahAckTimeout=v.H(this._cheetahAckTimeoutMs).subscribe((()=>{const t=U.createCriticalError((0,c.zG)(L.z.toStarting(this._session.get()),A.isSome));this._logger.warn("waited too long to receive an ACK for a `cheetah:*` command, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:A.none,error:A.some(t)}))),this._params.monitoringService.notify((0,j.L)((0,P.No)({sourceCommand:e})))}))}_clearResultTimeout(){var e;null===(e=this._resultTimeout)||void 0===e||e.unsubscribe(),this._resultTimeout=void 0}_clearContextTimeout(){var e;null===(e=this._contextTimeout)||void 0===e||e.unsubscribe(),this._contextTimeout=void 0}_clearHistoryTimeout(){var e;null===(e=this._historyTimeout)||void 0===e||e.unsubscribe(),this._historyTimeout=void 0}_clearCheetahAckTimeout(){var e;null===(e=this._cheetahAckTimeout)||void 0===e||e.unsubscribe(),this._cheetahAckTimeout=void 0}_clearResultRelatedTimeouts(){this._clearContextTimeout(),this._clearResultTimeout(),this._clearCheetahAckTimeout()}_clearAllTimeouts(){this._clearResultTimeout(),this._clearContextTimeout(),this._clearHistoryTimeout(),this._clearCheetahAckTimeout()}_setupCheetahAckHandler(e,t){this._setupCheetahAckTimeout(e),this._cheetahAckHandlers.push(t)}_removeCheetahAckHandler(e){this._cheetahAckHandlers=this._cheetahAckHandlers.filter((t=>t!==e)),0===this._cheetahAckHandlers.length&&this._clearCheetahAckTimeout()}}},84403:(e,t,n)=>{n.d(t,{c:()=>u});var i,r=n(57050),o=n(22232),s=n(5114),a=n(71249);!function(e){let t,n,i,l,c,u,d,m,p;!function(e){let t;!function(e){e.rephrase="rephrase",e.dismiss="dismiss",e.insert="insert",e.offensive="offensive",e.copy="copy",e.generationCompleted="generationCompleted"}(t=e.UserAction||(e.UserAction={}))}(t=e.Result||(e.Result={})),function(e){let t;!function(e){e.open="open",e.skip="skip",e.openFromBanner="openFromBanner",e.keepVoiceTag="keepTag",e.removeVoiceTag="removeTag",e.toggleToMyVoice="toggleToMyVoice",e.toggleToNeutral="toggleToNeutral"}(t=e.UserAction||(e.UserAction={}))}(n=e.VoiceProfile||(e.VoiceProfile={})),function(e){let t;!function(e){e.openStore="openStore",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(i=e.Actions||(e.Actions={})),function(e){let t;!function(e){e.search="search"}(t=e.UserAction||(e.UserAction={}))}(l=e.Prompt||(e.Prompt={})),function(e){let t;!function(e){e.hover="hover",e.click="click"}(t=e.UserAction||(e.UserAction={}))}(c=e.UsageInfo||(e.UsageInfo={})),function(e){let t;!function(e){e.view="view"}(t=e.UserAction||(e.UserAction={}))}(u=e.HistoryButton||(e.HistoryButton={})),function(e){let t;!function(e){e.view="view",e.skip="skip",e.next="next"}(t=e.UserAction||(e.UserAction={}))}(d=e.Onboarding||(e.Onboarding={})),function(e){let t;!function(e){e.close="close",e.readyToInteract="readyToInteract"}(t=e.UserAction||(e.UserAction={}))}(m=e.Assistant||(e.Assistant={})),function(e){let t,n;!function(e){e.view="view"}(t=e.UserAction||(e.UserAction={})),function(e){e.dontShowOnDocument="dontShowOnDocument",e.dontShowForever="dontShowForever"}(n=e.AIUsageUserAction||(e.AIUsageUserAction={}))}(p=e.Notification||(e.Notification={})),e.getComponentId=function(e,t,n,l={}){const c=(0,r.zG)(e.kind,(t=>{switch(t){case"result":return"card";case"voiceProfile":return"voice";case"actions":return e.userAction===i.UserAction.openStore?"group":"card";case"assistant":return"widget";case"onboardingPromptsTooltip":return"onboardingPromptTooltip";case"onboardingReviewTooltip":return"onboardingReviewtextTooltip";case"usageInfo":case"historyButton":case"prompt":case"onboardingPopup":case"BTSonboardingPopup":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":case"onboardingReferencesTooltip":case"onboardingHistoryTooltip":case"aiUsageNotification":case"contextNotification":case"actionNotification":return t;default:return(0,o.L0)(t)}}));return(0,r.zG)(s.fromNullable(n),s.map((e=>`cheetah:history-card:${e}`)),s.getOrElse((()=>`cheetah:${c}${t?`:${t}`:""}`)),(u=l,e=>(0,r.zG)(Object.entries(u),a.u4(e,((e,[t,n])=>{const i=e.includes("?")?"&":"?";return e+`${i}${t}=${n}`})))));var u},e.getUserAction=function(e){return(0,r.zG)(e.kind,(t=>{switch(t){case"actions":return e.userAction===i.UserAction.openStore?"All Ideas":e.userAction;case"assistant":return e.userAction===m.UserAction.close?"dismiss":e.userAction;case"result":case"voiceProfile":case"prompt":case"usageInfo":case"historyButton":case"onboardingPopup":case"BTSonboardingPopup":case"onboardingPromptsTooltip":case"onboardingReviewTooltip":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":case"onboardingReferencesTooltip":case"onboardingHistoryTooltip":case"aiUsageNotification":case"contextNotification":case"actionNotification":return e.userAction;default:return(0,o.L0)(t)}}))}}(i||(i={}));var l=n(26320),c=n(63346);class u{constructor(e,t=new c.W(u.name)){this._capiService=e,this._logger=t}trackResultInsert(e,t,n=!1){this._logger.debug("trackResultInsert()",{contextId:e,historyResultId:t}),e||this._logger.warn("trackResultInsert() - tracking result insert without context"),this._trackUxInteraction({kind:"result",userAction:i.Result.UserAction.insert},e,t,{withVoiceProfile:n})}trackResultOffensive(e,t){this._logger.debug("trackResultOffensive()",{contextId:e,historyResultId:t}),e||this._logger.warn("trackResultOffensive() - tracking result offensive without context"),this._trackUxInteraction({kind:"result",userAction:i.Result.UserAction.offensive},e,t)}trackResultDismiss(e,t){this._logger.debug("trackResultDismiss()",{contextId:e,historyResultId:t}),e||this._logger.warn("trackResultDismiss() - tracking result dismiss without context"),this._trackUxInteraction({kind:"result",userAction:i.Result.UserAction.dismiss},e,t)}trackResultRephrase(e){this._logger.debug("trackResultRephrase()",{contextId:e}),e||this._logger.warn("trackResultRephrase() - tracking result rephrase without context"),this._trackUxInteraction({kind:"result",userAction:i.Result.UserAction.rephrase},e)}trackResultCopy(e,t){this._logger.debug("trackCopy()"),this._trackUxInteraction({kind:"result",userAction:i.Result.UserAction.copy},e,t)}trackResultGenerationCompleted(e,t){this._logger.debug("trackResultGenerationCompleted()"),this._trackUxInteraction({kind:"result",userAction:i.Result.UserAction.generationCompleted},e,t)}trackVoiceProfileOpen(e){this._logger.debug("trackVoiceProfileOpen()",{source:e}),this._trackUxInteraction({kind:"voiceProfile",userAction:"toolbar"===e?i.VoiceProfile.UserAction.open:i.VoiceProfile.UserAction.openFromBanner})}trackVoiceProfileSkip(){this._logger.debug("trackVoiceProfileSkip()"),this._trackUxInteraction({kind:"voiceProfile",userAction:i.VoiceProfile.UserAction.skip})}trackActionsOpenStore(){this._logger.debug("trackActionsOpenStore()"),this._trackUxInteraction({kind:"actions",userAction:i.Actions.UserAction.openStore})}trackActionsOffensive(e){this._logger.debug("trackActionsOffensive()"),e||this._logger.warn("trackActionsOffensive() - tracking actions offensive without context"),this._trackUxInteraction({kind:"actions",userAction:i.Actions.UserAction.offensive},e)}trackPromptSearch(){this._logger.debug("trackPromptSearch()"),this._trackUxInteraction({kind:"prompt",userAction:i.Prompt.UserAction.search})}trackUsageInfoClick(){this._logger.debug("trackUsageInfoClick()"),this._trackUxInteraction({kind:"usageInfo",userAction:i.UsageInfo.UserAction.click})}trackUsageInfoHover(){this._logger.debug("trackUsageInfoHover()"),this._trackUxInteraction({kind:"usageInfo",userAction:i.UsageInfo.UserAction.hover})}trackHistoryButtonView(){this._logger.debug("trackHistoryButtonView()"),this._trackUxInteraction({kind:"historyButton",userAction:i.HistoryButton.UserAction.view})}trackOnboardingPopupView(){this._logger.debug("trackOnboardingPopupView()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:i.Onboarding.UserAction.view})}trackOnboardingPopupSkip(){this._logger.debug("trackOnboardingPopupSkip()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:i.Onboarding.UserAction.skip})}trackOnboardingPopupNext(){this._logger.debug("trackOnboardingPopupNext()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:i.Onboarding.UserAction.next})}trackBTSOnboardingPopupView(){this._logger.debug("trackBTSOnboardingPopupView()"),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:i.Onboarding.UserAction.view})}trackBTSOnboardingPopupSkip(){this._logger.debug("trackBTSOnboardingPopupSkip()"),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:i.Onboarding.UserAction.skip})}trackBTSOnboardingPopupNext(){this._logger.debug("trackBTSOnboardingPopupNext()"),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:i.Onboarding.UserAction.next})}trackOnboardingPromptsTooltipView(){this._logger.debug("trackOnboardingPromptsTooltipView()"),this._trackUxInteraction({kind:"onboardingPromptsTooltip",userAction:i.Onboarding.UserAction.view})}trackOnboardingReviewTooltipView(){this._logger.debug("trackOnboardingReviewTooltipView()"),this._trackUxInteraction({kind:"onboardingReviewTooltip",userAction:i.Onboarding.UserAction.view})}trackOnboardingRewriteTooltipView(){this._logger.debug("trackOnboardingRewriteTooltipView()"),this._trackUxInteraction({kind:"onboardingRewriteTooltip",userAction:i.Onboarding.UserAction.view})}trackOnboardingKnowledgeHubTooltipView(){this._logger.debug("trackOnboardingRewriteTooltipView()"),this._trackUxInteraction({kind:"onboardingKnowledgeHubTooltip",userAction:i.Onboarding.UserAction.view})}trackOnboardingReferencesTooltipView(){this._logger.debug("trackOnboardingReferencesTooltipView()"),this._trackUxInteraction({kind:"onboardingReferencesTooltip",userAction:i.Onboarding.UserAction.view})}trackOnboardingHistoryTooltipView(){this._logger.debug("trackOnboardingHistoryTooltipView()"),this._trackUxInteraction({kind:"onboardingHistoryTooltip",userAction:i.Onboarding.UserAction.view})}trackAssistantClose(){this._logger.debug("trackAssistantClose()"),this._trackUxInteraction({kind:"assistant",userAction:i.Assistant.UserAction.close})}trackVoiceProfileRemoveTag(){this._logger.debug("trackVoiceProfileRemoveTag()"),this._trackUxInteraction({kind:"voiceProfile",userAction:i.VoiceProfile.UserAction.removeVoiceTag})}trackVoiceProfileKeepTag(){this._logger.debug("trackVoiceProfileKeepTag()"),this._trackUxInteraction({kind:"voiceProfile",userAction:i.VoiceProfile.UserAction.keepVoiceTag})}trackAINotificationDismiss(e){this._logger.debug("trackAINotificationDismiss()"),this._trackUxInteraction({kind:"aiUsageNotification",userAction:"document"===e?i.Notification.AIUsageUserAction.dontShowOnDocument:i.Notification.AIUsageUserAction.dontShowForever})}trackReadyToInteract(){this._logger.debug("trackReadyToInteract()"),this._trackUxInteraction({kind:"assistant",userAction:i.Assistant.UserAction.readyToInteract})}trackMyVoiceCardToggle(e){this._logger.debug("trackMyVoiceCardToggle"),this._trackUxInteraction({kind:"voiceProfile",userAction:e?i.VoiceProfile.UserAction.toggleToMyVoice:i.VoiceProfile.UserAction.toggleToNeutral})}trackContexNotification(e){this._logger.debug("trackContexNotification()",e),this._trackUxInteraction({kind:"context"===e?"contextNotification":"actionNotification",userAction:i.Notification.UserAction.view})}_trackUxInteraction(e,t,n,r={}){const o=i.getComponentId(e,t,n,r),s=i.getUserAction(e);this._logger.debug("_trackUxInteraction() - sending `user_action` to CAPI",{componentId:o,userAction:s,uxInteraction:e,contextId:t}),(0,l.t)("sendUserAction",this._capiService.user_action({componentId:o,userAction:s}),this._logger)}}},94689:(e,t,n)=>{n.d(t,{Ki:()=>s,dD:()=>a,fx:()=>r,s4:()=>o});var i=n(89894);function r(e,t){return Object.assign(Object.assign({},function(e){return{width:i.ux.rem(e),minWidth:i.ux.rem(e)}}(e)),function(e){return{height:i.ux.rem(e),minHeight:i.ux.rem(e)}}(null!=t?t:e))}function o(e,t){return`.${e}`.repeat(t)}const s=7;function a(e,t){return function(e,t,n){return{$nest:{[`&${o(t,n)}`]:e}}}(e,t,s)}},65602:(e,t,n)=>{n.d(t,{DO:()=>c,l:()=>u});var i=n(5114),r=n(57050),o=n(69243),s=n(8709),a=n(36991);const l=o.OT(o.dt({ops:o.Bk(o.G0([o.dt({insert:o.OT(o.Z_)}),o.dt({retain:o.OT(o.pk)}),o.dt({delete:o.OT(o.pk)})]))}));function c(e){return(0,r.zG)(e,i.fromPredicate(l.is),i.map((e=>new s.i([...e.ops]))))}function u(e,t){return e.reduce(((e,t)=>(a.s.isInsertString(t)?(e.text=`${e.text.substring(0,e.index)}${t.insert}${e.text.substring(e.index)}`,e.index+=t.insert.length):a.s.isDelete(t)?e.text=`${e.text.substring(0,e.index)}${e.text.substring(e.index+t.delete)}`:a.s.isRetain(t)?e.index+=t.retain:function(e){var t;return a.s.isInsertEmbed(e)&&!0===(null===(t=e.insert)||void 0===t?void 0:t.linebreak)}(t)&&(e.text=`${e.text.substring(0,e.index)}\n${e.text.substring(e.index)}`,e.index+=1),e)),{text:t,index:0}).text}},79378:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(62172);const r=Object.assign(Object.assign({},i),{BrandGreen60:"#018374",BrandGreen80:"#017467",BorderBaseSubduedColor:"#CDD1DC",TextBaseSubduedColor:"#646B81",TextBaseDefault:"#161719",BorderBaseInverse:"#ffffff",BackgroundNeutralDefault:"#646B81",BackgroundAdditionSubdued:"#DEF7F5",BackgroundBaseSubdued:"#F4F4F6",BackgroundBrandDefault:"#027E6F",BackgroundBrandHover:"#017467",BackgroundBrandActive:"#014C43",BorderBrandDefault:"#027E6F",ColorBrandDefault:"#027E6F",ButtonBackgroundSecondaryHover:"#DEF7F5",ButtonBackgroundSecondaryActive:"#B1F0E8",ButtonTextSecondaryDefault:"#027E6F",ButtonTextSecondaryHover:"#014C43",ButtonTextSecondaryActive:"#014C43",ButtonBackgroundTertiaryHover:"#E2E4E9",ButtonBackgroundTertiaryActive:"#CDD1DC",ButtonTextTertiaryDefault:"#646B81",ButtonTextTertiaryHover:"#474B58",ButtonTextTertiaryActive:"#474B58",ButtonBorderTertiaryHover:"#878DA2",ButtonBorderTertiaryActive:"#878DA2",ButtonTextTertiaryDefaultInverse:"#C2C6D4",ButtonTextTertiaryHoverInverse:"#C2C6D4",ButtonBackgroundTertiaryHoverInverse:"#27282E",ButtonBorderTertiaryHoverInverse:"#C2C6D4",ButtonTextTertiaryActiveInverse:"#C2C6D4",ButtonBackgroundTertiaryActiveInverse:"#474B58",ButtonBorderTertiaryActiveInverse:"#C2C6D4",PopoverBackgroundBaseSubdued:"#27282E",IndicatorDotDefault:"#E7E9F5",IndicatorDotActive:"#4A6EE0",OnBrandBadge:"#EDF5FF",OnBrandBadgeLabel:"#4A6EE0",OnBrandBadgeIcon:"#3659B5",OffBrandBadge:"#FDF0F3",OffBrandBadgeLabel:"#CE1331",OffBrandBadgeIcon:"#CE1331",MenuBackgroundSelected:"#F4F4F6",MenuIconSelected:"#646B81",MenuBorderDefault:"#878DA2",MenuBackgroundHover:"#E2E4E9",MenuIconHover:"#474B58"})},87683:(e,t,n)=>{n.d(t,{$Q:()=>o,E:()=>c,Re:()=>a,ap:()=>l,vY:()=>s});var i=n(31699),r=n(77176);function o(e,t=3){if(e&&t>0){const n=function(e){const t=(null===(r=null===(i=(n=e).ownerDocument)||void 0===i?void 0:i.defaultView)||void 0===r?void 0:r.getComputedStyle(n))||null;var n,i,r;return t?"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowY||"scroll"===t.overflowY||"auto"===t.overflowX||"scroll"===t.overflowX:null}(e);return n?e:null===n?null:o(null==e?void 0:e.parentElement,t-1)}return null}function s(e){var t,n;return null===(n=(null===(t=e.activeElement)||void 0===t?void 0:t.shadowRoot)||e)||void 0===n?void 0:n.activeElement}function a(e){return e instanceof HTMLElement}const l=["b","i"];function c(e,t=l){return"string"==typeof e?{dangerouslySetInnerHTML:{__html:(0,i.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}}:{dangerouslySetInnerHTML:e.pipe(r.U((e=>({__html:(0,i.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}))))}}},2735:(e,t,n)=>{function i(e){const t=e;return null!=t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}function r(e){return i(e)?e:{message:String(e),name:"",stack:void 0}}n.d(t,{N:()=>r,x:()=>i})},44361:(e,t,n)=>{function i(e){return t=>{(null==t?void 0:t.isTrusted)&&(null==e||e(t))}}n.d(t,{m:()=>i})},33498:(e,t,n)=>{n.d(t,{D:()=>o});var i=n(44586),r=n(76974);function o(e){return e instanceof i.y?e:(0,r.of)(e)}},26320:(e,t,n)=>{n.d(t,{L:()=>c,t:()=>l});var i=n(95195),r=n(62965),o=n(57050),s=n(2735),a=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};function l(e,t,n,r,o){return a(this,void 0,void 0,(function*(){try{const s=yield t();i.isLeft(s)?(null==n||n.error("runTaskEither() - error running task",{taskName:e,result:s}),null==o||o(s.left)):(null==n||n.debug("runTaskEither() - task successful",{taskName:e,result:s.right}),null==r||r(s.right))}catch(t){null==o||o(t instanceof Error?t:new Error(String(t))),null==n||n.error("runTaskEither() - promise rejection running task",(0,s.x)(t)?t:new Error(String(t)),{taskName:e})}}))}const c={URI:r.ov,map:r.dO.map,ap:(e,t)=>(0,o.zG)(e,r.ap(t))}},13713:(e,t,n)=>{n.d(t,{l:()=>s});var i=n(27378),r=n(5114),o=n(23239);const s=i.createContext({portalContainer:o.h.create(r.none)})},2906:(e,t,n)=>{n.d(t,{e:()=>Yk});var i=n(5114),r=n(34217),o=n(63346),s=n(57050),a=n(98370),l=n(89727),c=n(79662),u=n(2735);const d="71.3.1";var m=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};class p{constructor(e){this._params=e,this._commonLabels={version:d,cheetahClientProtocolVersion:c.XU,clientType:this._params.lifecycleService.hostInfo.clientType,clientVersion:this._params.lifecycleService.hostInfo.clientVersion,environment:this._params.lifecycleService.hostInfo.environment,isMergedExperience:(0,s.zG)(this._params.revisionEngine,i.fold((0,s.a9)("false"),(0,s.a9)("true")))},this._markedMetricNames=new Set}report(e,t,n){return m(this,void 0,void 0,(function*(){if("test"===this._params.lifecycleService.hostInfo.environment)return this._params.logger.debug("test environment; skipping metric report",e);performance.mark(e.name),this._markedMetricNames.add(e.name);const r=Object.keys(this._commonLabels).map((e=>({key:e,value:this._commonLabels[e]}))).concat((0,s.zG)(i.fromNullable(e.labels),i.fold((()=>[]),(e=>Object.keys(e).map((t=>({key:t,value:e[t]}))))))),o=this._getDurationMetrics(null!=t?t:[],e.name,r).concat(this._getDurationMetrics(null!=n?n:[],e.name,r));try{const t=yield fetch(`${p.FEMETRICS_ENDPOINT}/batch/import`,{method:"POST",body:JSON.stringify([{name:`${e.name}_total`,type:"counter",value:1,labels:r},...o])});if(!t.ok){const e=yield t.text();throw Error(e)}}catch(t){this._params.monitoringService.notify((0,a.L)((0,l.Ld)({rawError:(0,u.N)(t),metric:e})))}}))}_getDurationMetrics(e,t,n){return e.map((e=>{try{const i=performance.measure(`${e}_to_${t}`,e,t).duration;return{name:`${t}_duration_ms`,type:"histogram",value:i,labels:n.concat([{key:"startMark",value:e}])}}catch(n){return void this._params.logger.warn(`failed to measure '${e}' to '${t}'`,n)}})).filter(Boolean)}dispose(){this._markedMetricNames.forEach((e=>{performance.clearMarks(e),performance.clearMeasures(e)}))}}p.FEMETRICS_ENDPOINT="https://assistant.femetrics.grammarly.io";const h=p;var g=n(32952),f=n(23239),v=n(12968);class x{constructor(){this._notifications=new g.xQ,this.notifications=this._notifications.asObservable()}notify(e){this._notifications.next(e)}}var b=n(12126),y=n(66081),k=n(93508),w=n(66310),C=n(77176),E=n(60797),S=n(28043),_=n(19751);var I=n(14601),A=n(83289),B=n(26320);class O{constructor(e){this._params=e,this._sub=new I.w,this._domain=f.h.create(i.none),this._state=f.h.create({}),this.stagingFeedbackFormData=this._state.view(),this.domain=this._domain.view(),this._sub.add(this._params.feedbackService.domain.subscribe((e=>this._domain.set(i.fromNullable(e))))),this._sub.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._sub.unsubscribe()}_handleUIAction(e){switch(e.kind){case A.i.Kind.openFeedbackFormButtonClick:return this._openFeedbackForm(e.source);case A.i.Kind.feedbackFormChange:return this._updateFeedbackForm(e.feedbackData);case A.i.Kind.feedbackFormSubmitButtonClick:return this._submitFeedbackForm(e.feedbackData);default:return}}_openFeedbackForm(e){this._params.routingViewModel.push({kind:"feedbackForm"}),this._state.set({source:e})}_updateFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},t),e)))}_submitFeedbackForm(e){this._params.routingViewModel.pop(),this._state.set({}),(0,B.t)("submitFeedback",this._params.feedbackService.submitFeedback(e),this._params.logger,void 0,(e=>this._params.monitoringService.notify((0,a.L)({source:"feedback",kind:"error",name:"submitFeedbackFailed",data:{rawError:(0,u.N)(e)}}))))}}var R=n(64015),T=n(80900),N=n(85985),M=n(23063),U=n(76974),F=n(2834),z=n(8125),j=n(63817);class P{constructor(e,t,n,i=3e3,r=300,o=1){this._notificationService=e,this._assistantUIActions=t,this._activeView=n,this._notificationsDurationMs=i,this._mouseOutHoldBackDurationMs=r,this._maxNotificationsCountAtOnce=o,this._state=f.h.create([]),this._notificationsSubs=new Map,this._subs=new I.w,this._hovered=f.h.create(!1),this.state=this._state.view(),this._subs.add(this._showFeedbackSubmittedToast().subscribe()),this._subs.add(this._clearNotificationsOnViewChange().subscribe()),this._subs.add(this._removeVoiceTagNotification().subscribe()),this._subs.add(this._showServiceNotifications().subscribe())}dismiss(e){var t;null===(t=this._notificationsSubs.get(e))||void 0===t||t.unsubscribe(),this._notificationsSubs.delete(e),this._state.modify(R.hX((t=>t.id!==e))),this._hovered.set(!1)}hover(e){this._hovered.set(e)}clearAll(){this._notificationsSubs.forEach((e=>e.unsubscribe())),this._notificationsSubs.clear(),this._state.set([])}dispose(){this._subs.unsubscribe(),this.clearAll()}_showNotification(e){e.persistent||this._notificationsSubs.set(e.id,T.H(e.customTimeout||this._notificationsDurationMs).pipe(w.w((()=>this._hovered.get()?this._hovered.pipe(y.e(10),N.h((e=>!e)),M.q(1),w.w((()=>T.H(this._mouseOutHoldBackDurationMs)))):U.of(null)))).subscribe((()=>this.dismiss(e.id)))),this._state.modify((0,s.ls)(R.QI(e),R.ke(this._maxNotificationsCountAtOnce)))}_showFeedbackSubmittedToast(){return this._assistantUIActions.pipe(N.h((0,z.Kg)(A.i.is(A.i.Kind.feedbackFormSubmitButtonClick),A.i.is(A.i.Kind.reportOffensiveResultButtonClick),A.i.is(A.i.Kind.reportOffensiveActionsButtonClick),A.i.is(A.i.Kind.toneReportToneLikeButtonClick),A.i.is(A.i.Kind.toneReportToneDislikeButtonClick))),F.b((()=>this._showNotification(j.C.create("feedbackSubmitted")))))}_removeVoiceTagNotification(){return this._assistantUIActions.pipe(N.h(A.i.is(A.i.Kind.voiceTagPopoverRemoveButtonClick)),F.b((()=>this._showNotification(j.C.create("voiceTagRemoved")))))}_showServiceNotifications(){return this._notificationService.notifications.pipe(F.b((e=>this._showNotification(e))))}_clearNotificationsOnViewChange(){return this._activeView.view("kind").pipe(S.x(),F.b((()=>this.clearAll())))}}var G=n(2844),L=n(98403),D=n(22232),Z=n(99877);function H(e){switch(e){case Z.e.historyButtonActive:return i.some("historyButton");case Z.e.initialActionsList:return i.some("homeGenAIActionsList");case Z.e.referencesList:return i.some("genAIResultReferences");case Z.e.promptInputAndMenuContainer:return i.some("promptInput");case Z.e.followUpActionsList:return i.some("genAIResultFollowUpActionsList");case Z.e.appActionsList:return i.some("homeAppActionsList");case Z.e.creditsInfoButton:case Z.e.intentCard:case Z.e.historyButton:case Z.e.promptInput:case Z.e.promptMenuContent:case Z.e.skill:case Z.e.toneReport:return i.none;default:(0,D.L0)(e)}}class V{constructor(e){this._params=e,this._subs=new I.w,this._references=f.h.create(new Map),this._onboardingStep=f.h.create(i.none),this.onboardingStep=this._onboardingStep.view(),(0,s.zG)(this._params.onboardingService,i.map((e=>{this._subs.add(this._params.assistantUIActions.pipe(N.h(A.i.is(A.i.Kind.mount))).subscribe((({name:t,element:n})=>(0,s.zG)(H(t),i.map((t=>{this._references.modify((e=>new Map(e).set(t,n))),e.notify({kind:"onboardingTargetMount",target:t})})))))),this._subs.add(this._params.assistantUIActions.pipe(N.h(A.i.is(A.i.Kind.unmount))).subscribe((({name:t})=>(0,s.zG)(H(t),i.map((t=>{this._references.modify((e=>{const n=new Map(e);return n.delete(t),n})),e.notify({kind:"onboardingTargetUnmount",target:t})})))))),this._subs.add(G.aj([this._references,b.D(e.onboardingStepRequest).pipe(C.U(i.fromNullable))]).pipe(C.U((([e,t])=>(0,s.zG)(t,i.chain((t=>(0,s.zG)(i.fromNullable(e.get(t.target)),i.map((e=>Object.assign(Object.assign({},t),{reference:e})))))))))).subscribe(L.wW(this._onboardingStep)))})))}notify(e){switch(e.kind){case"onboardingStepUnmount":(0,s.zG)(this._params.onboardingService,i.map((t=>t.notify({kind:"onboardingStepUnmount",stepId:e.stepId,reason:e.reason}))));break;case"onboardingStepMount":(0,s.zG)(this._params.onboardingService,i.map((t=>t.notify({kind:"onboardingStepMount",stepId:e.stepId}))));break;default:(0,D.L0)(e)}}dispose(){this._subs.unsubscribe()}}var $=n(17771),K=n(17889),W=n(25530),q=n(819),Q=n(7903),Y=n(73975);function X(e){return"home"===e.kind||"thread"===e.kind}const J={legacyVoiceProfile:!0,voiceProfile:!0,feedbackForm:!0,skill:!0,toneReport:!0,settings:!0,plagiarism:!0};function ee(e){return!0===J[e.kind]}var te;!function(e){e.eq=Y.f7(((e,t)=>e.kind===t.kind))}(te||(te={}));var ne,ie=n(41398),re=n(16118),oe=n(90488);!function(e){e.isLoadedNonEmpty=e=>"loadedNonEmpty"===e.kind,e.isLoaded=e=>"loadedNonEmpty"===e.kind||"loadedEmpty"===e.kind}(ne||(ne={}));class se{constructor(e){this._params=e,this._subscriptions=new I.w,this.state=f.h.combine(this._params.toneDetectorService.state,this._params.userService.user.view("institution").view(i.map((e=>e.name))),((e,t)=>(0,s.zG)(e,i.fold((()=>({kind:"loading"})),(({tones:e,hidden:n,brandTonesEnabled:r,institutionLogo:o})=>(0,s.zG)(K.c2(e),i.filter((e=>!n)),i.fold((()=>({kind:"loadedEmpty",brandToneInfo:r?i.some({institutionName:t,institutionLogo:o}):i.none})),(e=>({kind:"loadedNonEmpty",tones:e,brandToneInfo:r?i.some({institutionName:t,institutionLogo:o}):i.none}))))))))),this._subscriptions.add(this._params.assistantUIActions.pipe(N.h((0,z.Kg)(A.i.isToneDetectorAction,A.i.is(A.i.Kind.actionBrickClick),A.i.is(A.i.Kind.mount))),ie.M(this.state)).subscribe((([e,t])=>this._handleUIAction(e,t)))),this._subscriptions.add(this.state.pipe(re.G(),N.h((([e,t])=>"loadedNonEmpty"===e.kind&&"loadedNonEmpty"!==t.kind)),ie.M(this._params.routingViewModel.activeView.view("kind")),N.h((([e,t])=>"toneReport"===t))).subscribe((()=>this._params.routingViewModel.pop())))}dispose(){this._subscriptions.unsubscribe()}_handleUIAction(e,t){var n,r;switch(e.kind){case A.i.Kind.toneReportToneLikeButtonClick:this._params.toneDetectorService.submitToneFeedback(e.toneName,oe.RO.positive);break;case A.i.Kind.toneReportToneDislikeButtonClick:this._params.toneDetectorService.submitToneFeedback(e.toneName,oe.RO.negative);break;case A.i.Kind.actionBrickClick:{const t=e.action;"regularAction"===t.kind&&W.aU.isToneAction(t.action)&&this._params.routingViewModel.push({kind:"toneReport"});break}case A.i.Kind.mount:e.name===Z.e.toneReport&&ne.isLoadedNonEmpty(t)&&(null===(r=(n=this._params.toneDetectorService).trackToneReportShow)||void 0===r||r.call(n,{tones:t.tones,brandTonesEnabled:i.isSome(t.brandToneInfo)}));break;default:(0,D.L0)(e)}}}class ae{constructor(e,t,n,r,o){this._session=e,this._activeView=t,this._genAIAvailability=n,this._toneDetectorViewModel=r,this._plagiarismViewModel=o,this.contextualActions=f.h.combine(this._session,this._activeView.view(i.fromPredicate(X)),this._genAIAvailability,((e,t,n)=>(0,s.zG)($.Y(i.option)({session:Q.z.toStarted(e),view:(0,s.zG)(t,i.map((e=>e.kind)))}),i.map((({session:e,view:t})=>"home"===t?e.activeBoundaryContext:"thread"===t?e.activeContext:(0,D.L0)(t))),(t=>function(e,t,n){return(0,s.zG)(e,i.fold((()=>({loading:!t,actions:[],context:{kind:"pending",isBoundary:!1,textRevision:i.none,selection:i.none}})),(e=>({loading:!t&&"pending"===e.kind,actions:q._.isUnavailable(n)||i.exists((({kind:e})=>"aiUsageAlert"===e))(e.specialView)?[]:e.availableActions.filter((0,s.ff)(W.aU.isSkillAction)),context:e}))))}(t,i.isSome(e.error),n))))),this.toneAction=(0,s.zG)(this._toneDetectorViewModel,i.fold((()=>f.h.create(i.none)),(e=>e.state.view((0,s.ls)(i.fromPredicate(ne.isLoadedNonEmpty),i.map((({tones:e})=>(0,s.zG)(e,K.YM,W.aU.createToneAction)))))))),this.plagiarismAction=(0,s.zG)(this._plagiarismViewModel,i.fold((()=>f.h.create(i.none)),(e=>e.plagiarismAction))),this.skillActions=this._session.view((0,s.ls)(Q.z.toStarted,i.map((e=>e.activeContext)),i.map((e=>e.availableActions)),i.fold((()=>[]),R.hX(W.aU.isSkillAction))))}}var le=n(87847),ce=n(78674),ue=n(83078),de=n(87683),me=n(45701);function pe(e){return e.split(/\s+/).map((e=>e.trim())).filter((e=>""!==e))}var he=n(27378),ge=n(95195),fe=n(54001),ve=n(8543),xe=n(93986),be=n(13578),ye=n(31278);const ke=e=>he.createElement(ye.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),he.createElement("path",{d:"M14 11.5H16.7929L8.92289 19.37L10.4851 13.1213L10.6404 12.5H10H7.20711L15.0771 4.62999L13.5149 10.8787L13.3596 11.5H14Z",stroke:be.Il.Text.Base.Subdued,strokeMiterlimit:"4.25735"})),we=e=>he.createElement(ye.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),he.createElement("rect",{x:"4.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:be.Il.Text.Base.Subdued}),he.createElement("rect",{x:"4.5",y:"13.5",width:"6",height:"6",rx:"1.5",stroke:be.Il.Text.Base.Subdued}),he.createElement("rect",{x:"13.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:be.Il.Text.Base.Subdued}),he.createElement("path",{d:"M14.5513 15.8162L12.9269 16.3577C12.7902 16.4033 12.7902 16.5967 12.9269 16.6423L14.5513 17.1838C15.1485 17.3828 15.6172 17.8515 15.8162 18.4487L16.3577 20.0731C16.4033 20.2098 16.5967 20.2098 16.6423 20.0731L17.1838 18.4487C17.3828 17.8515 17.8515 17.3828 18.4487 17.1838L20.0731 16.6423C20.2098 16.5967 20.2098 16.4033 20.0731 16.3577L18.4487 15.8162C17.8515 15.6172 17.3828 15.1485 17.1838 14.5513L16.6423 12.9269C16.5967 12.7902 16.4033 12.7902 16.3577 12.9269L15.8162 14.5513C15.6172 15.1485 15.1485 15.6172 14.5513 15.8162Z",fill:be.Il.Text.Base.Subdued,stroke:be.Il.Text.Base.Subdued})),Ce=e=>he.createElement(ye.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16"},e),he.createElement("path",{d:"M10.3009 10.6376C11.3878 10.4069 11.9799 9.817 12.2614 8.91408C11.0802 8.91408 10.1227 7.99306 10.1227 6.85694C10.1227 5.72082 11.0802 4.7998 12.2614 4.7998C13.4425 4.7998 14.4 5.66246 14.4 6.85694C14.4 8.05142 14.1624 11.0708 10.3009 11.9998V10.6376Z",fill:"#027E6F",stroke:"none"}),he.createElement("path",{d:"M4.97826 10.6376C6.06509 10.4069 6.65721 9.817 6.93871 8.91408C5.75756 8.91408 4.80005 7.99306 4.80005 6.85694C4.80005 5.72082 5.75756 4.7998 6.93871 4.7998C8.11986 4.7998 9.07737 5.66246 9.07737 6.85694C9.07737 8.05142 8.83974 11.0708 4.97826 11.9998V10.6376Z",fill:"#027E6F",stroke:"none"}));var Ee=n(9546),Se=n(62172),_e=n(89894),Ie=n(94689),Ae=n(79378);const Be="brick",Oe=(0,Ie.dD)({padding:`0 ${_e.ux.rem(Ee.x)} 0 ${_e.ux.rem(Ee.F2)}`},Be),Re={display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x)},Te=(0,Ie.dD)({minHeight:_e.ux.rem(1.75),fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),color:Se.BlueGray80},Be),Ne=(0,Ie.dD)({minHeight:_e.ux.rem(2),fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.375),color:be.Il.Text.Base.Default},Be),Me=(0,Ie.dD)({boxShadow:`inset 0 0 0 ${_e.ux.rem(.125)} ${Ae.Z.BrandGreen60}`},Be),Ue=(0,Ie.dD)({boxShadow:"none",color:Se.NeutralGray70,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{color:Ae.Z.BlueGray80,boxShadow:`inset 0 0 0 1px ${Ae.Z.BlueGray40}`,backgroundColor:Ae.Z.BlueGray5}}},Be),Fe={textAlign:"left",whiteSpace:"initial",lineHeight:_e.ux.rem(1.125),margin:`${_e.ux.rem(.25)} 0 ${_e.ux.rem(.25)} 0`},ze=Object.assign({},(0,Ie.fx)(1.5)),je=_e.ux.joinClasses([Be,_e.ux.style(Oe)]),Pe=_e.ux.style(Re),Ge=_e.ux.style(Te),Le=_e.ux.style(Ne),De=_e.ux.style(Me),Ze=_e.ux.style(Ue),He=_e.ux.style(Fe),Ve=_e.ux.style(ze),$e=_e.ux.style(ze),Ke=_e.ux.style(ze),We=(0,fe.xb)(xe.z),qe="actionBrick",Qe=r.UI.Node.make((({view:e,notify:t})=>he.createElement(We,Object.assign({flatUI:!1,variant:"secondary",onClick:e("action").pipe(C.U((e=>t({kind:A.i.Kind.actionBrickClick,action:e})))),name:"actionBrick"},(0,fe.Sh)(qe,je,e("action").pipe(C.U((({kind:e})=>"go"===e?De:null))),e("mode").pipe(C.U((e=>"compact"===e?Ge:"standard"===e?Le:(0,D.L0)(e)))),e("customViewOpts").pipe(C.U((e=>(null==e?void 0:e.isPinned)?Ze:null))))),he.createElement(ve.F.div,{className:Pe},e("icon").pipe(C.U(ge.fold((e=>{switch(e){case"allResults":return he.createElement(we,{className:Ve});case"go":return he.createElement(ke,{className:$e});case"plagiarism":return he.createElement(Ce,{className:Ke});default:return(0,D.L0)(e)}}),(e=>he.createElement("img",{src:e,style:{width:20,height:20}}))))),he.createElement(ve.F.span,Object.assign({className:He},(0,de.E)(e("label"))))))));var Ye=n(95835);const Xe="action-row-btn",Je=({icon:e,label:t,style:n,onClick:i})=>he.createElement(xe.z,{variant:"tertiary",onClick:i,name:"actionBrick",size:"large",style:[at,n],className:Xe},(0,s.zG)(e,ge.fold((e=>"more"===e?he.createElement(we,null):"plagiarism"===e?he.createElement(Ce,null):(0,D.L0)(e)),(e=>he.createElement("img",{src:e,style:{width:_e.ux.rem(et),height:_e.ux.rem(et)}})))),he.createElement(ve.F.div,Object.assign({},(0,de.E)(t),{className:lt}))),et=1.25,tt=Ee.mh,nt=Ee.mh,it=Ee.qp,rt=tt+et+it,ot=nt,st=(0,Ye.Rv)(`inset 0 0 0 2px ${Ae.Z.BorderBrandDefault}`),at={default:{fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),minHeight:_e.ux.rem(2.5),gap:_e.ux.rem(it),padding:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(nt)} ${_e.ux.rem(Ee.x)} ${_e.ux.rem(tt)}`,justifyContent:"flex-start",alignItems:"flex-start",color:be.Il.Text.Base.Default,boxShadow:"none",borderRadius:0,$nest:st},hovered:{color:be.Il.Text.Base.Default,boxShadow:"none",$nest:st},active:{color:be.Il.Text.Base.Default,boxShadow:"none",$nest:st},icon:(0,Ie.fx)(et)},lt=_e.ux.style({whiteSpace:"initial",textAlign:"left",lineHeight:_e.ux.rem(1.3125)});var ct;!function(e){e.isActionStore=function(e){return"actionStore"===e.kind},e.isSearchResults=function(e){return"searchResults"===e.kind}}(ct||(ct={}));class ut{constructor(e,t,n,r,o,a,l,c){this._trackingService=a,this._focusPromptField=c,this._subs=new I.w,this._state=f.h.create(i.none),this._userTyped=new g.xQ,this._promptOrMenuFocused=new g.xQ,this._promptMenuActions=new g.xQ,this._promptMenuContainer=f.h.create(i.none),this._promptMenuContentContainer=i.none,this._cachedActionBricks=i.none,this.state=this._state.view(),this._subs.add(e.subscribe((e=>this._handleUIAction(e)))),this._subs.add(this._userTyped.pipe(le.D((e=>e.trim().length>0?T.H(150):U.of(null))),C.U((e=>e.trim())),F.b((e=>{""===e&&this._promptMenuActions.next({kind:"close"})})),N.h((e=>""!==e)),N.h((()=>!l())),ie.M(this._state.view(i.fold((()=>s.W8),(e=>e.filterPredicate)))),F.b((([e,t])=>this._promptMenuActions.next({kind:"showSearchResults",search:e,filterPredicate:t})))).subscribe()),this._subs.add(function(e,t,n,r,o,a){const l=r;return G.aj([e.pipe(w.w((e=>"showSearchResults"===e.kind?f.h.combine(t,l,o,n,(({actions:t,loading:n},r,o,a)=>(0,s.zG)((0,s.zG)([r,o],R.oA).concat(a).concat(t.filter((0,s.ff)(W.aU.isSkillAction))),R.hX(e.filterPredicate),K.c2,i.filter((()=>""!==e.search.trim()&&!n)),i.chain((t=>function(e,t){return(0,s.zG)(e,R.DZ((e=>(0,s.zG)(function(e,t,n){const r=pe(e),o=[...pe(t),...(0,s.zG)(n,R.tS((e=>pe(e))))],a=r.map((()=>null));let l=0;for(const e of o){if(l>=r.length)break;e.toLowerCase().includes(r[l].toLowerCase())&&(a[l]=0,++l)}return a.includes(null)?i.none:i.some(a.map((e=>null!=e?e:0)).reduce(((e,t)=>e+t),0))}(t,e.searchLabel,e.searchTags),i.map((t=>({data:e,matchScore:t})))))),R.DY(me.contramap((({matchScore:e})=>e))(me.ordNumber)),R.UI((({data:e})=>e)),K.c2)}(t,e.search))),i.map((t=>({kind:"searchResults",actions:t,filterPredicate:e.filterPredicate})))))):"showActionStore"===e.kind?f.h.combine(t,l,o,n,(({actions:t,loading:n},r,o,a)=>(0,s.zG)((0,s.zG)([r,o],R.oA).concat(a).concat(t.filter((0,s.ff)(W.aU.isSkillAction))),R.hX(e.filterPredicate),K.c2,i.filter((()=>!n)),i.map((t=>({kind:"actionStore",actions:t,filterPredicate:e.filterPredicate})))))):"close"===e.kind?U.of(i.none):(0,D.L0)(e))),k.O(i.none)),a]).pipe(C.U((([e,t])=>(0,s.zG)(e,i.map((e=>Object.assign(Object.assign({},e),{promptMenuContainer:t})))))))}(this._promptMenuActions,t,n,r,o,this._promptMenuContainer).subscribe(L.wW(this._state))),this._subs.add(this._promptOrMenuFocused.pipe(ce.b(100),N.h((e=>!e))).subscribe((()=>this._promptMenuActions.next({kind:"close"})))),this._subs.add(this.state.pipe(re.G(),N.h((([e,t])=>i.isNone(e)&&i.isSome(t))),C.U((([e,t])=>t)),E.oA).subscribe((e=>{"actionStore"===e.kind?this._trackingService.trackActionsOpenStore():"searchResults"===e.kind&&this._trackingService.trackPromptSearch()}))),this._subs.add(this._promptMenuActions.pipe(N.h((e=>"close"===e.kind))).subscribe((()=>this._invalidateActionBricks())))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case A.i.Kind.mount:return void(e.name===Z.e.promptMenuContent?this._promptMenuContentContainer=i.some(e.element):e.name===Z.e.promptInputAndMenuContainer&&this._promptMenuContainer.set(i.some(e.element)));case A.i.Kind.unmount:return void(e.name===Z.e.promptInputAndMenuContainer&&this._promptMenuContainer.set(i.none));case A.i.Kind.promptMenuKeyPressArrowDown:return this._onPromptMenuKeyPressArrowDown();case A.i.Kind.promptMenuKeyPressArrowUp:return this._onPromptMenuKeyPressArrowUp();case A.i.Kind.promptFieldKeyPressArrowUp:return this._focusLastBrick();case A.i.Kind.promptFieldKeyPressArrowDown:return this._focusFirstBrick();case A.i.Kind.promptFieldTextChange:return this._invalidateActionBricks(),this._userTyped.next(e.text);case A.i.Kind.promptFieldKeyPressEscape:return e.menuOpened?this._promptMenuActions.next({kind:"close"}):void 0;case A.i.Kind.collapsePromptMenuButtonClick:case A.i.Kind.promptSubmitButtonClick:return this._promptMenuActions.next({kind:"close"});case A.i.Kind.promptFieldKeyPressEnter:return void(e.text.trim().length>0&&this._promptMenuActions.next({kind:"close"}));case A.i.Kind.actionBrickClick:return"allResults"===e.action.kind?this._promptMenuActions.next({kind:"showActionStore",filterPredicate:e.action.filterPredicate}):this._promptMenuActions.next({kind:"close"});case A.i.Kind.promptFieldAndMenuFocusChange:return this._promptOrMenuFocused.next(e.focused);default:return}}_invalidateActionBricks(){this._cachedActionBricks=i.none}_getActionBricks(){return(0,s.zG)(this._cachedActionBricks,i.getOrElse((()=>{const e=(0,s.zG)(this._promptMenuContentContainer,i.fold((()=>[]),(e=>R.nI(Array.from(e.querySelectorAll(".actionBrick, .action-row-btn")).filter(de.Re)))));return this._cachedActionBricks=i.some(e),e})))}_onPromptMenuKeyPressArrowDown(){var e;const t=this._getActionBricks(),n=(0,de.vY)((null===(e=i.toNullable(this._promptMenuContentContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,s.zG)(i.fromNullable(t.findIndex((e=>e===n))),ue.bw((e=>{var n;e+1>=t.length?this._focusPromptField():null===(n=t[e+1])||void 0===n||n.focus()})))}_onPromptMenuKeyPressArrowUp(){var e;const t=this._getActionBricks(),n=(0,de.vY)((null===(e=i.toNullable(this._promptMenuContentContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,s.zG)(i.fromNullable(t.findIndex((e=>e===n))),ue.bw((e=>{var n;e-1<0?this._focusPromptField():null===(n=t[e-1])||void 0===n||n.focus()})))}_focusFirstBrick(){var e;null===(e=this._getActionBricks()[0])||void 0===e||e.focus()}_focusLastBrick(){var e;const t=this._getActionBricks();null===(e=t[t.length-1])||void 0===e||e.focus()}}var dt=n(33148),mt=n(13853),pt=n(85321),ht=n(49143),gt=n(91224),ft=n(38194),vt=n(24209);var xt=n(64681),bt=n(92843);const yt=()=>xt.k4();function kt(e){return(0,s.zG)(yt().unwrap(e),(({items:e})=>e.size))}function wt(e){return(0,s.zG)(yt().unwrap(e),(({order:e})=>Tt(e)))}function Ct(e){return(0,s.zG)(yt().unwrap(e),(({items:t})=>(0,s.zG)(wt(e),R.UI((e=>i.fromNullable(t.get(e)))),R.oA)))}function Et(e){return(0,s.zG)(yt().unwrap(e),(({items:e,order:t})=>(0,s.zG)(t.focus,i.chain((t=>i.fromNullable(e.get(t)))))))}function St(e){return(0,s.zG)(yt().unwrap(e),(({order:e})=>(0,s.zG)(e.focus,i.map((()=>e.lefts.length)))))}function _t(e){return(0,s.ls)(yt().unwrap,(({items:t,order:n})=>({items:t,order:(0,s.zG)(n.focus,i.fold((()=>Ot(n.lefts.concat(n.rights),i.some(e))),(t=>function(e,t){const n=e(t.lefts.length);return Ot(Tt(t),i.some(n))}((()=>e),Rt(n.lefts,i.some(t),n.rights)))),i.getOrElse((()=>n)))})),yt().wrap)}function It(e){return(0,s.zG)(yt().unwrap(e).order.lefts.length,(t=>(0,s.zG)(e,_t(t+1))))}function At(e){return(0,s.zG)(yt().unwrap(e).order.lefts.length,(t=>(0,s.zG)(e,_t(t-1))))}function Bt(e,t){return me.fromCompare(((n,i)=>{const r=e.get(n),o=e.get(i);return void 0!==r&&void 0!==o?t.compare(r,o):0}))}function Ot(e,t){return R.xb(e)||(0,s.zG)(t,i.exists((t=>R.dC(t,e))))?i.none:i.some((0,s.zG)(t,i.fold((()=>({lefts:e,focus:i.none,rights:[]})),(t=>({lefts:(0,s.zG)(e.slice(),R.ke(t)),focus:i.fromNullable(e[t]),rights:(0,s.zG)(e.slice(),R.md(t+1))})))))}function Rt(e,t,n){return{lefts:e,focus:t,rights:n}}function Tt(e){return e.lefts.concat(R.oA([e.focus])).concat(e.rights)}function Nt(e){const t=e.lefts.length,n=e.rights.length;return Ot(e.lefts.concat(e.rights),i.some(n>0?t:t-1))}const Mt=Y.MW({visibleAlerts:mt.Eh(Y.yv),emphasizedAlerts:mt.Eh(Y.yv)});class Ut{constructor(e){this._params=e,this._subs=new I.w,this._feedMounted=f.h.create(!1),this._subs.add((0,s.zG)(function(e,t){const n=e.pipe(ft.B()),r=n.pipe(C.U((0,s.ls)(i.chain((e=>Et(e.collection))),i.map((({id:e})=>e)))),_.skipBy(i.getEq(Y.yv))).pipe(w.w((()=>t.pipe(k.O(null)))));return G.aj([n,r]).pipe(C.U((([e,t])=>(0,s.zG)(e,i.map((({collection:e})=>({visibleAlerts:new Set(Array.from(Ct(e)).flatMap((e=>e.alertIds))),emphasizedAlerts:new Set(null!=t?t:(0,s.zG)(Et(e),i.fold((()=>[]),(({alertIds:e})=>e))))})))))),_.skipBy(i.getEq(Mt)))}(G.aj([this._params.feedState,this._feedMounted]).pipe(C.U((([e,t])=>t?e:i.none))),this._params.resetEmphasizedAlerts),Ft,F.b((e=>{var t;return null===(t=this._params.logger)||void 0===t?void 0:t.debug("AlertVisibilityChanges",e)})),pt.zg((({changes:e,isReset:t})=>t?b.D(this._params.alertService.setAlertsVisibility(e)).pipe(M.q(1),ht.l(),gt.K((t=>U.of({kind:"error",source:"revision",name:"setAlertsVisibilityFailed",data:{alertsVisibilityInfo:e,rawError:(0,u.N)(t)}})))):b.D(this._params.alertService.updateAlertsVisibility(e)).pipe(M.q(1),ht.l(),gt.K((t=>U.of({kind:"error",source:"revision",name:"updateAlertsVisibilityFailed",data:{alertsVisibilityInfo:e,rawError:(0,u.N)(t)}}))))))).subscribe((e=>this._params.monitoringService.notify((0,a.L)(e)))))}notifyFeedMount(){this._feedMounted.set(!0)}notifyFeedUnmount(){this._feedMounted.set(!1)}dispose(){this._subs.unsubscribe()}}function Ft(e){return e.pipe(_.skipBy(i.getEq(Mt)),ft.B(),(e=>{const t=e.pipe(N.h(i.isNone),C.U((()=>({isReset:!0,changes:[]})))),n=e.pipe(k.O(i.none),re.G(),N.h((([e,t])=>i.isNone(e)&&i.isSome(t))),C.U((([e,t])=>t)),E.oA,C.U((e=>({isReset:!0,changes:(0,s.zG)(Array.from(e.visibleAlerts).filter((t=>!e.emphasizedAlerts.has(t))).map((e=>({alertId:e,visibility:"visible"}))).concat(Array.from(e.emphasizedAlerts).map((e=>({alertId:e,visibility:"emphasized"})))))})))),r=e.pipe(k.O(i.none),re.G(),N.h((([e,t])=>i.isNone(e)&&i.isSome(t))),w.w((([t,n])=>e.pipe(k.O(n),E.oA,re.G(),C.U((([e,t])=>{const n=mt.e5(Y.yv)(mt.Lf(Y.yv).concat(t.visibleAlerts,t.emphasizedAlerts))(mt.Lf(Y.yv).concat(e.visibleAlerts,e.emphasizedAlerts)),i=mt.e5(Y.yv)(e.emphasizedAlerts)(t.emphasizedAlerts),r=mt.e5(Y.yv)(t.emphasizedAlerts)(e.emphasizedAlerts),o=mt.Lf(Y.yv).concat(mt.e5(Y.yv)(e.visibleAlerts)(t.visibleAlerts),(0,s.zG)(r,mt.hX((e=>t.visibleAlerts.has(e)))));return{isReset:!1,changes:[...Array.from(n).map((e=>({alertId:e,visibility:"hidden"}))),...Array.from(o).map((e=>({alertId:e,visibility:"visible"}))),...Array.from(i).map((e=>({alertId:e,visibility:"emphasized"})))]}}))))));return vt.T(t,n,r)}))}var zt,jt,Pt=n(40151),Gt=n(2768),Lt=n(21038);class Dt{constructor(e){var t;this._params=e,this._subs=new I.w,this._disposed=new g.xQ,this._logger=null!==(t=this._params.logger)&&void 0!==t?t:new o.W(Dt.name),this._sduiFeedManagerLifecycleOnFeedEmpty(),this._sduiFeedManagerLifecycleOnFeedRemoved(),this._sduiFeedManagerLifecycleOnAlertsRefEmpty()}_sduiFeedManagerLifecycleOnAlertsRefEmpty(){this._subs.add(this._params.sduiManagerProxy.onAlertsRefEmpty.subscribe((e=>(0,s.zG)(this._params.feedManager.feed.get(),i.chain((e=>Et(e.collection))),i.filter((t=>t.id===e.sduiRootId)),ue.bw((()=>this._processActions(e.emptyStrongAlertRef.onEmpty,e.sduiId,e.emptyStrongAlertRef.alertIds,e.sduiId)))))))}_sduiFeedManagerLifecycleOnFeedEmpty(){this._subs.add(this._params.feedManager.onFeedEmpty.subscribe((e=>{var t;"assistantFeed"===e.content.type?this._processActions(null!==(t=e.content.onEmpty)&&void 0!==t?t:[],e.id,[],e.id):this._params.monitoringService.notify((0,a.L)({kind:"warn",source:"revision",name:"sduiFeedOnEmptyDSLActionsSkipped",data:null}))})))}_sduiFeedManagerLifecycleOnFeedRemoved(){this._subs.add(this._params.feedManager.onFeedRemove.subscribe((e=>{"assistantFeed"===e.content.type?this._processActions(e.content.onRemove,e.id,[],e.id):this._params.monitoringService.notify((0,a.L)({kind:"warn",source:"revision",name:"sduiFeedOnRemoveDSLActionsSkipped",data:null}))})))}_switchViewWithinFocusedItem(e){(0,s.zG)(this._params.feedManager.feed.get(),i.chain((e=>Et(e.collection))),i.filter((t=>e.sduiRootId!==t.id)),ue.bw((t=>this._params.sduiManagerProxy.pushSwitchView(Object.assign(Object.assign({},e),{sduiRootId:t.id})))))}_switchViewWithinCurrentFeed(e){(0,s.zG)(this._params.feedManager.feed.get(),i.filter((({id:t})=>e.sduiRootId!==t)),ue.bw((({id:t})=>this._params.sduiManagerProxy.pushSwitchView(Object.assign(Object.assign({},e),{sduiRootId:t})))))}_processActions(e,t,n,i){this._logger.debug("_processActions()",{actions:e,itemId:t,alertIdsInScope:n,sourceId:i}),e.forEach((r=>{var o,s,a,l,c,d,m,p;switch(r.type){case"notify":{const e=null!==(o=r.sourceId)&&void 0!==o?o:i;this._subscribeToCommand(b.D(this._params.capiService.user_action({userAction:r.userAction,componentId:e})()),(t=>({kind:"error",source:"revision",name:"sduiUserActionFailed",data:{componentId:e,userAction:r.userAction,rawError:(0,u.N)(t)}})));break}case"applyAlerts":{const e=n.map((e=>({alertId:e,alternativeIndex:r.alternativeIndex})));this._subscribeToCommand(b.D(this._params.alertService.applyAlerts(e)),(t=>({kind:"error",source:"revision",name:"applyAlertsFailed",data:{applyAlertsInfo:e,rawError:(0,u.N)(t)}})));break}case"removeAlerts":{const t=e.some((e=>"applyAlerts"===e.type)),i=n.map((e=>({alertId:e,removalReason:t?"alertApplied":"other"})));this._subscribeToCommand(b.D(this._params.alertService.removeAlerts(i)),(e=>({kind:"error",source:"revision",name:"removeAlertsFailed",data:{removeAlertsInfo:i,rawError:(0,u.N)(e)}})),(()=>this._params.sduiManagerProxy.pushRemovedAlerts([n.map(Lt.j.AlertId.from),"removeAlerts"])));break}case"removeRoot":this._params.sduiManagerProxy.pushRemovedRoot([t,"removeRoot"]);break;case"pushAssistantFeed":this._params.feedManager.pushFeed(r.feedId,r.cardId);break;case"popAssistantFeed":this._params.feedManager.popFeed(r.fallbackFeed);break;case"positionedClick":case"focusAssistantCard":this._params.feedManager.focusCard("focusAssistantCard"===r.type?Lt.j.Item.Id.from(r.cardId):t);break;case"prevCard":this._params.feedManager.focusPrev();break;case"nextCard":this._params.feedManager.focusNext();break;case"switchView":{const e={where:r.where,selected:r.selected,sduiRootId:t};this._params.sduiManagerProxy.pushSwitchView(e),this._switchViewWithinFocusedItem(e),this._switchViewWithinCurrentFeed(e);break}case"highlightAlert":return this._params.setEmphasizedAlerts([n[0]]);case"hoverStateChanged":return;case"hideHighlights":case"showHighlights":case"upgradeToPremium":case"selectAlternative":case"transition":break;case"openLink":this._subscribeToCommand(b.D(null!==(l=null===(a=(s=this._params.lifecycleService).openUrl)||void 0===a?void 0:a.call(s,r.url))&&void 0!==l?l:Pt.E),(e=>({kind:"error",source:"revision",name:"sduiCardOpenLinkFailed",data:{rawError:(0,u.N)(e)}})));break;case"copyToClipboard":this._subscribeToCommand(b.D(null!==(p=null===(m=null===(d=(c=this._params.textEditorService).copyText)||void 0===d?void 0:d.call(c,r.text))||void 0===m?void 0:m())&&void 0!==p?p:Pt.E),(e=>({kind:"error",source:"revision",name:"sduiCardCopyTextFailed",data:{rawError:(0,u.N)(e)}})));break;case"enablePlagiarismCheck":this._params.plagiarismService.enablePlagiarismChecks();break;case"disablePlagiarismCheck":this._params.plagiarismService.disablePlagiarismChecks();break;case"nativeOpenAssistant":case"openCreateSnippetModal":case"newRevision":case"interactPopover":case"closePopover":case"closeCard":case"openGrammarlyGo":case"openToneDetector":case"stopApplyingAlerts":case"openSettings":case"openFeedback":case"openPerformanceScore":case"nativeOpenUserSatisfactionFeedback":case"openLearnMore":this._logger.warn("Unsupported SDUI action",r);break;default:this._logger.warn("Unsupported SDUI action",r),(0,D.L0)(r)}}))}processActions(e,t,n,i){this._processActions(e,t,null!=n?n:[],null!=i?i:t)}dispose(){this._disposed.next(void 0),this._disposed.complete(),this._subs.unsubscribe()}_subscribeToCommand(e,t,n=s.Q1){return e.pipe(M.q(1),Gt.R(this._disposed)).subscribe(n,(e=>this._params.monitoringService.notify((0,a.L)(t(e)))))}}function Zt(e){return null!=e}!function(e){e.lensAllSuggestionFeedShortForm="lens-all-suggestions-feed-short-form",e.lensAllSuggestionFeed="lens-all-suggestions-feed",e.lensCorrectnessFeed="lens-correctness-feed",e.lensClarityFeed="lens-clarity-feed",e.lensDeliveryFeed="lens-delivery-feed",e.lensEngagementFeed="lens-engagement-feed",e.lensStyleGuideFeed="lens-style-guide-feed",e.plagiarismFeed="plagiarism-feed"}(zt||(zt={})),function(e){e.upgradeHookCardPrefix="upgrade_hook"}(jt||(jt={}));const Ht={[zt.lensAllSuggestionFeed]:"All suggestions",[zt.lensAllSuggestionFeedShortForm]:"All suggestions",[zt.lensCorrectnessFeed]:"Correctness",[zt.lensClarityFeed]:"Clarity",[zt.lensDeliveryFeed]:"Delivery",[zt.lensEngagementFeed]:"Engagement",[zt.lensStyleGuideFeed]:"Style guide",[zt.plagiarismFeed]:"Plagiarism"};const Vt={shortForm:zt.lensAllSuggestionFeedShortForm,longForm:zt.lensAllSuggestionFeed};var $t=n(48044),Kt=n(22690),Wt=n(93756),qt=n(95300),Qt=n(67434),Yt=n(95399),Xt=n(28811),Jt=n(79880),en=n(26393);function tn(e){return t=>{const n=nn(t.content);return!i.isNone(n)&&e.reduce(((e,t)=>!1===e?e:(0,s.zG)(n,i.chain((e=>i.fromNullable(e[t.property]))),i.fold((()=>t.condition===Jt.j2.NotEqualTo),(e=>t.condition===Jt.j2.EqualTo?e===t.value:e!==t.value)))),!0)}}function nn(e){for(const t of en.ab.traverse(e)){if("longFormCard"===t.type)return i.some(t.feedProperties);if("assistantCard"===t.type&&t.properties)return i.some(t.properties)}return i.none}var rn=n(35214);const on={show:e=>`[${e.id} - ${kt(e.collection)} items - focus at ${i.getShow(Kt._3).show((0,s.zG)(Et(e.collection),i.map((e=>e.id))))}]`};class sn{constructor(e){this._params=e,this._subs=new I.w,this._focusCommand=new g.xQ,this._feedStack=new qt.X([]),this._feed=f.h.create(i.none),this._feeds=f.h.create(new Map),this._sduiItemsCollectionDiff=this._params.sduiItemsCollection.pipe(k.O(Xt.a.empty),re.G(),C.U((([e,t])=>Xt.a.diff(e,t))),ft.B()),this.onFeedRemove=new g.xQ,this.onFeedEmpty=new g.xQ,this.feed=this._feed.view(),this.feeds=this._feeds.view(),this._subs.add(this._getFeeds().subscribe(L.wW(this._feeds))),this._subs.add(this._getFeed().pipe(F.b((e=>this._emitOnFeedEmptyIfNewFeedIsEmpty(e,this._feed.get())))).subscribe(L.wW(this._feed))),this._subs.add(this.feed.subscribe((e=>{var t;return null===(t=this._params.logger)||void 0===t?void 0:t.debug("feed state -",i.getShow(on).show(e))}))),this._subs.add(this.feeds.subscribe((e=>{var t;return null===(t=this._params.logger)||void 0===t?void 0:t.debug("feeds - ",Array.from(e.keys()))})))}pushFeed(e,t){const n=this._feedStack.getValue(),r=(0,s.zG)(this._feed.get(),i.chain((e=>Et(e.collection))),i.map((e=>e.id))),o=(0,s.zG)(n,R.YM,i.map((({feedId:e})=>({feedId:e,itemIdToFocus:r}))));this._feedStack.next(ln(n).concat(R.oA([o])).concat({feedId:Lt.j.Item.Id.from(e),itemIdToFocus:(0,s.zG)(i.fromNullable(t),i.map(Lt.j.Item.Id.from))}))}replaceFeed(e,t){this._feedStack.next(R.Ss(ln(this._feedStack.getValue()),{feedId:Lt.j.Item.Id.from(e),itemIdToFocus:(0,s.zG)(i.fromNullable(t),i.map(Lt.j.Item.Id.from))}))}popFeed(e){const t=this._feedStack.getValue();t.length>1?this._feedStack.next(ln(t)):(0,s.zG)(i.fromNullable(e),i.fold((()=>{var e;return null===(e=this._params.logger)||void 0===e?void 0:e.warn("Invoked 'popFeed()' when there are less than 2 feeds in the feed stack, this is a no-op. No fallback feed provided.")}),(e=>{var t;this.pushFeed(Lt.j.Item.Id.from(e.feedId),e.cardId),null===(t=this._params.logger)||void 0===t||t.debug(`Invoked 'popFeed()' when there are less than 2 feeds in the feed stack. Switching to the provided fallback feed. ${JSON.stringify(e)}`)})))}isFeedEmpty(e){return this._params.sduiItemsCollection.view((0,s.ls)(Xt.a.find(tn(e.content.filtering)),i.isNone))}focusCard(e){this._focusCommand.next({kind:"focusCard",cardId:e})}focusNext(){this._focusCommand.next({kind:"focusNext"})}focusPrev(){this._focusCommand.next({kind:"focusPrev"})}dispose(){this._subs.unsubscribe()}_getFeed(){return this._getActiveFeedMeta().pipe(w.w(i.fold((()=>U.of(i.none)),(({ordering:e,filtering:t,feedId:n,itemIdToFocus:r})=>{const o=this._getFeedItemsAndChanges(tn(t)).pipe(C.U((e=>({kind:"sduiChange",diff:e})))),a=(c=e,l=(0,rn.fold)(me.getMonoid())(c.map((e=>(0,s.zG)(me.ordNumber,me.contramap((0,s.ls)(nn,i.chain((t=>i.fromNullable(t[e.orderBy]))),i.fold((()=>Number.MAX_VALUE),(t=>e.direction===Jt.di.Asc?t:-1*t)))))))),me.contramap((e=>e.content))(l));var l,c;return vt.T(o,this._focusCommand).pipe(Qt.R(((e,t)=>{return(0,s.zG)(e,"sduiChange"===t.kind?function(e,t){return(0,s.ls)(yt().unwrap,(n=>(0,s.zG)(e,bt.v.reduce({items:new Map(n.items),added:new Set,removed:new Set},((e,t,n)=>(e.removed.add(n),e)),((e,t,n,i)=>(e.items.set(i,n),e)),((e,t,n)=>(e.items.set(n,t),e.added.add(n),e))),(({items:e,added:r,removed:o})=>{const a=(0,s.zG)(n.order.focus,i.exists((e=>o.has(e)))),l=(0,s.zG)(Tt(n.order).concat(Array.from(r)),R.hX((e=>!o.has(e)||(0,s.zG)(n.order.focus,i.exists((t=>t===e))))),R.DY(Bt(e,t))),c=(0,s.zG)(n.order.focus,i.fold((()=>Rt((0,s.zG)(l,R.hX((e=>!o.has(e)))),i.none,[])),(e=>(0,s.zG)(Ot(l,i.some(l.indexOf(e))),a?i.chain(Nt):s.yR,i.getOrElse((()=>Rt((0,s.zG)(l,R.hX((e=>!o.has(e)))),i.none,[])))))));return o.forEach((t=>e.delete(t))),{items:e,order:c}}))),yt().wrap)}(t.diff,a):s.yR,"focusNext"===t.kind?It:s.yR,"focusPrev"===t.kind?At:s.yR,"focusCard"===t.kind?_t(wt(e).findIndex((e=>e===t.cardId))):s.yR,(o=r,l=e=>!e.startsWith(jt.upgradeHookCardPrefix),n=e=>(0,s.zG)(o,i.fold((()=>{const t=wt(e).findIndex(l);return(0,s.zG)(e,_t(t>=0?t:0))}),(t=>{const n=wt(e).findIndex((e=>e===t));return(0,s.zG)(e,_t(n))}))),e=>i.isNone(Et(e))?n(e):e));var n,o,l}),yt().wrap({items:new Map,order:Rt([],i.none,[])})),C.U((e=>i.some({id:n,collection:e}))))}))))}_getFeedItemsAndChanges(e){return Yt.z(U.of(this._params.sduiItemsCollection.view((t=>bt.v.fromMutation((n=>{(0,s.zG)(t,Xt.a.reduce(n,((t,n)=>e(n)?t.set(n.id,Wt.F2(n)):t)))})))).get()),this._sduiItemsCollectionDiff.pipe(C.U(bt.v.filter((t=>e(t)),((t,n)=>e(n)),(t=>e(t))))))}_getActiveFeedMeta(){return this._feedStack.pipe(C.U(R.Z$),w.w(i.fold((()=>U.of(i.none)),(e=>this._feeds.pipe(C.U($t.P5(Lt.j.Item.Id.eq)(e.feedId)),C.U(i.map((t=>({ordering:t.content.ordering,filtering:t.content.filtering,feedId:e.feedId,itemIdToFocus:e.itemIdToFocus})))),_.skipBy(i.getEq(cn)))))))}_getFeeds(){return this._sduiItemsCollectionDiff.pipe(C.U((e=>{const t=new Map(this._feeds.get());return(0,s.zG)(e,bt.v.forEach((e=>{an(e)&&(t.delete(e.id),(0,s.zG)(this._feed.get(),i.map((e=>e.id)),i.filter((t=>t===e.id)),i.map((()=>this.onFeedRemove.next(e)))))}),((e,n)=>{an(n)&&t.set(n.id,n)}),(e=>{an(e)&&t.set(e.id,e)}))),t})))}_emitOnFeedEmptyIfNewFeedIsEmpty(e,t){(0,s.zG)($.Y(i.option)({currentFeed:t,newFeed:e}),i.filter((({currentFeed:e,newFeed:t})=>e.id===t.id&&kt(e.collection)>0&&0===kt(t.collection))),i.chain((({currentFeed:e})=>i.fromNullable(this._feeds.get().get(e.id)))),i.map((e=>this.onFeedEmpty.next(e))))}}function an(e){return"assistantFeed"===e.content.type}function ln(e){return(0,s.zG)(e,R.S1,i.getOrElse((()=>[])))}const cn=Y.MW({feedId:Lt.j.Item.Id.eq,itemIdToFocus:i.getEq(Lt.j.Item.Id.eq),filtering:R.Eh(Y.MW({property:Y.yv,value:Y.lr,condition:Y.yv})),ordering:R.Eh(Y.MW({orderBy:Y.yv,direction:Y.yv}))});class un extends sn{constructor(e){super(e),this._selectedAlertId=f.h.create(null),this._initialForm=null,this.allSuggestionsFeed=this.feeds.view((e=>(0,s.zG)(i.fromNullable(e.get(Lt.j.Item.Id.from("longForm"===this._initialForm?zt.lensAllSuggestionFeed:zt.lensAllSuggestionFeedShortForm)))))),this._initialForm=e.initialForm,this._subs.add(e.selectedAlertId.subscribe(L.wW(this._selectedAlertId))),this._subs.add(this._getCardToFocusOnActiveAlertChange().subscribe((e=>this.focusCard(e))))}pushFeed(e,t){super.pushFeed(Lt.j.Item.Id.from(e),null!=t?t:this._getCardIdForActiveAlert(e))}replaceFeed(e,t){super.replaceFeed(Lt.j.Item.Id.from(e),null!=t?t:this._getCardIdForActiveAlert(e))}popFeed(e){super.popFeed(null!=e?e:(0,s.zG)(this.allSuggestionsFeed.get(),i.map((e=>({feedId:e.id}))),i.toUndefined))}_getCardIdForActiveAlert(e){const t=this._selectedAlertId.get();return null!==t?i.toUndefined(function(e,t,n){const r=(0,s.zG)(e,Xt.a.find((e=>e.id===t)),i.map((e=>e.content)),i.filter((e=>"assistantFeed"===e.type)),i.map((e=>e.filtering)),i.fold((()=>s.jv),tn));return(0,s.zG)(e,Xt.a.find((e=>r(e)&&e.alertIds.includes(Lt.j.AlertId.from(n)))),i.map((e=>e.id)))}(this._params.sduiItemsCollection.get(),e,t)):void 0}_getCardToFocusOnActiveAlertChange(){return this._selectedAlertId.pipe(N.h(Zt),C.U((e=>(0,s.zG)(this.feed.get(),i.chain((t=>{var n;return i.fromNullable(null===(n=Ct(t.collection).find((t=>t.alertIds.includes(Lt.j.AlertId.from(e)))))||void 0===n?void 0:n.id)}))))),E.oA)}}class dn{constructor(e){this._params=e,this._disposed=new g.xQ}enablePlagiarismChecks(){b.D(this._params.capiService.toggle_checks({checks:{plagiarism:!0}})()).pipe(M.q(1),Gt.R(this._disposed)).subscribe(z.Q1,(e=>({kind:"error",source:"revision",name:"enablePlagiarismCheckFailed",data:{rawError:(0,u.N)(e)}})))}disablePlagiarismChecks(){b.D(this._params.capiService.toggle_checks({checks:{plagiarism:!1}})()).pipe(M.q(1),Gt.R(this._disposed)).subscribe(z.Q1,(e=>({kind:"error",source:"revision",name:"disablePlagiarismCheckFailed",data:{rawError:(0,u.N)(e)}})))}dispose(){this._disposed.next(void 0),this._disposed.complete()}}var mn,pn=n(36919),hn=n(44212),gn=n(71032),fn=n(17160),vn=n(78929),xn=n(24055),bn=n(71078),yn=n(19125);class kn{constructor(e=new o.W(kn.name)){this._logger=e,this._alertIds=new Set}hasAlert(e){return this._alertIds.has(e)}processChanges(e){for(const t of e)(0,bn.BG)(t)?this._alertIds.add(t.alertId):(0,bn.nq)(t)?this._alertIds.delete(t.alertId):(0,bn.Jg)(t)&&this._alertIds.clear();e.length>0&&this._logger.debug("Alert collection change",new Set(this._alertIds))}}class wn{constructor(e){var t;this._params=e,this._subs=new I.w,this._logger=null!==(t=this._params.logger)&&void 0!==t?t:new o.W(wn.name),this._sduiEvents=new g.xQ,this._alertCollection=new kn(this._params.logger),this._sduiManager=new vn.G(this._sduiEvents.asObservable(),i.fromPredicate((e=>this._alertCollection.hasAlert(e)))),this.state=this._sduiManager.state,this.onAlertsRefEmpty=this._sduiManager.onAlertsRefEmpty,this._subs.add(this._processAlertChanges()),this._subs.add(this._processInboundSDUIMessages()),this._subs.add(this._sduiEvents.pipe(pn.f(this._sduiEvents.pipe(ce.b(0)))).subscribe((e=>{const t=e.filter((e=>e.kind===xn.e.SduiEventKind.Add)),n=e.filter((e=>e.kind===xn.e.SduiEventKind.Update)),i=e.filter((e=>e.kind===xn.e.SduiEventKind.Remove));(t.length>0||n.length>0||i.length>0)&&this._logger.debug(`sdui events - insertions: [${t.map((e=>e.sduiRootId)).join(",")}] - updates: [${n.map((e=>e.sduiRootId)).join(",")}] - removals: [${i.map((e=>e.sduiRootId)).join(",")}]`)})))}pushRemovedRoot(e){this._sduiManager.pushRemovedRoot(e),this._sduiManager.flush()}pushRemovedAlerts([e,t]){this._sduiManager.pushRemovedAlerts([e,t])}pushSwitchView(e){this._sduiManager.pushSwitchView(e)}dispose(){this._subs.unsubscribe(),this._sduiManager.dispose()}_processInboundSDUIMessages(){var e;const t=e=>(0,s.zG)(e.sdui,(e=>i.some(e)));return b.D(this._params.sduiService.sduiItemCollectionChanges).pipe(hn.u(),C.U((e=>(0,yn.tC)(e)?(0,s.zG)(e,t,i.map((t=>({kind:xn.e.SduiEventKind.Add,sdui:t,sduiRootId:xn.e.RawSduiItem.Id.create(e.sduiRootId),rev:0})))):(0,yn.Y9)(e)?(0,s.zG)(e,t,i.map((t=>({kind:xn.e.SduiEventKind.Update,sdui:t,sduiRootId:xn.e.RawSduiItem.Id.create(e.sduiRootId),rev:0})))):(0,yn.zi)(e)?i.some({kind:xn.e.SduiEventKind.Remove,sduiRootId:xn.e.RawSduiItem.Id.create(e.sduiRootId),rev:0}):(0,yn.H$)(e)?i.none:(0,s.Rz)(e))),E.oA,gn.b(null!==(e=this._params.sduiEventTransformer)&&void 0!==e?e:R.of)).subscribe(this._sduiEvents)}_processAlertChanges(){return b.D(this._params.alertService.alertCollectionChanges).pipe(fn.e(0),hn.u()).subscribe((e=>{this._alertCollection.processChanges(e);const t=e.reduce(((e,t)=>{var n;return(0,bn.nq)(t)&&"textChange"===t.reason&&e.set("textChange",(null!==(n=e.get("textChange"))&&void 0!==n?n:[]).concat(Lt.j.AlertId.from(t.alertId))),e}),new Map);e.length>0&&(this._sduiManager.notifyAlertsChanged(),t.size>0&&this._logger.debug("optimistically removing alerts",t),t.forEach(((e,t)=>this.pushRemovedAlerts([e,t]))))}))}}function Cn(e){const t=[];if(e.kind===xn.e.SduiEventKind.Add||e.kind===xn.e.SduiEventKind.Update){if("longFormCard"===e.sdui.type&&e.sdui.id.startsWith(jt.upgradeHookCardPrefix))t.push(Object.assign(Object.assign({},e),{sdui:Object.assign(Object.assign({},e.sdui),{feedProperties:Object.assign(Object.assign({},e.sdui.feedProperties),{"long-form-suggestion-card":1,"feed-order":Number.MIN_SAFE_INTEGER,"short-form-feed-order":Number.MAX_SAFE_INTEGER})})}));else if("longFormCard"===e.sdui.type)t.push(Object.assign(Object.assign({},e),{sdui:Object.assign(Object.assign({},e.sdui),{feedProperties:Object.assign(Object.assign({},e.sdui.feedProperties),{"short-form-feed-order":e.sdui.feedProperties["feed-order"]})})}));else if("assistantFeed"===e.sdui.type&&e.sdui.id===String(zt.lensAllSuggestionFeed)){const n=xn.e.RawSduiItem.Id.create(zt.lensAllSuggestionFeedShortForm);t.push(e,Object.assign(Object.assign({},e),{sduiRootId:n,sdui:Object.assign(Object.assign({},e.sdui),{id:n,ordering:[{orderBy:"short-form-feed-order",direction:Jt.di.Asc},...e.sdui.ordering.filter((e=>"feed-order"!==e.orderBy))]})}))}}else e.sduiRootId===String(zt.lensAllSuggestionFeed)&&t.push(e,Object.assign(Object.assign({},e),{sduiRootId:xn.e.RawSduiItem.Id.create(zt.lensAllSuggestionFeedShortForm)}));return t.length>0?t:[e]}class En{constructor(e){this._params=e,this._subs=new I.w,this._firstCheckingFinished=f.h.create(!1),this.firstCheckingFinished=this._firstCheckingFinished.view(),this._subs.add(this._params.lastFinishedMessage.pipe(ce.b(100)).subscribe((()=>this._firstCheckingFinished.set(!0))))}dispose(){this._subs.unsubscribe()}}class Sn{constructor(e){this._params=e,this._feedForm=f.h.create(this._params.sduiService.supportedForms[0]),this.state=f.h.combine(this._feedForm,this._params.feedManager.feeds,((e,t)=>({feedForm:e,supportedForms:(0,s.zG)(new Set(this._params.sduiService.supportedForms),mt.hX((e=>t.has(Lt.j.Item.Id.from(Vt[e])))))})))}onToggleFeedForm(e){this._feedForm.set(e),this._params.feedManager.replaceFeed("longForm"===e?zt.lensAllSuggestionFeed:zt.lensAllSuggestionFeedShortForm,(0,s.zG)(this._params.feedManager.feed.get(),i.chain((e=>Et(e.collection))),i.map((e=>e.id)),i.toUndefined))}}class _n{constructor(e){this._params=e,this._subs=new I.w,this._outcomeScores=f.h.create(i.none),this.lenses=f.h.combine(this._outcomeScores,this._params.feedManager.feeds,((e,t)=>{const n=(0,s.zG)(t,$t.UI((e=>e.id)));return(0,s.zG)([zt.lensAllSuggestionFeed,zt.lensCorrectnessFeed,zt.lensClarityFeed,zt.lensEngagementFeed,zt.lensDeliveryFeed,zt.lensStyleGuideFeed],R.hX((e=>n.has(Lt.j.Item.Id.from(e)))),R.UI((t=>({lensId:t,label:Ht[t],percent:(0,s.zG)(e,i.fold((()=>0),(e=>e[t])))}))),(e=>new Map(e.map((e=>[e.lensId,e])))))})),this._subs.add(this._params.lastFinishedMessage.subscribe((({outcomeScores:e})=>this._outcomeScores.modify((t=>{var n,r,o,a,l,c,u,d,m,p,h,g;const f=(0,s.zG)(t,i.getOrElse((()=>({}))));return i.some({[zt.lensAllSuggestionFeed]:null!==(r=null!==(n=null==e?void 0:e.GeneralScore)&&void 0!==n?n:f[zt.lensAllSuggestionFeed])&&void 0!==r?r:0,[zt.lensClarityFeed]:null!==(a=null!==(o=null==e?void 0:e.Clarity)&&void 0!==o?o:f[zt.lensClarityFeed])&&void 0!==a?a:0,[zt.lensCorrectnessFeed]:null!==(c=null!==(l=null==e?void 0:e.Correctness)&&void 0!==l?l:f[zt.lensCorrectnessFeed])&&void 0!==c?c:0,[zt.lensEngagementFeed]:null!==(d=null!==(u=null==e?void 0:e.Engagement)&&void 0!==u?u:f[zt.lensEngagementFeed])&&void 0!==d?d:0,[zt.lensDeliveryFeed]:null!==(p=null!==(m=null==e?void 0:e.Tone)&&void 0!==m?m:f[zt.lensDeliveryFeed])&&void 0!==p?p:0,[zt.lensStyleGuideFeed]:null!==(g=null!==(h=null==e?void 0:e["Style guide"])&&void 0!==h?h:f[zt.lensStyleGuideFeed])&&void 0!==g?g:0})})))))}onToggleLens(e){(0,s.zG)(this._params.feedManager.feed.get(),i.map((e=>e.id)),i.exists((t=>t===e)))?this._params.feedManager.replaceFeed(zt.lensAllSuggestionFeed):this._params.feedManager.replaceFeed(e)}dispose(){this._subs.unsubscribe()}}!function(e){const t=[];e.notifyFeedUnmount=function(){t.forEach((e=>e()))},e.registerFeedUnmountHandler=function(e){return t.push(e),e},e.unregisterFeedUnmountHandler=function(e){const n=t.findIndex((t=>t===e));n>=0&&t.splice(n,1)}}(mn||(mn={}));class In{constructor(e){this._params=e,this.feed=this._params.feedManager.feed.view()}processActions(e,t,n,i){this._params.feedActionService.processActions(e,t.id,n.alertRefs,i)}onFocusedItemMount(e){(0,s.zG)(function(e){if("assistantCard"===e.content.type)return i.some(e.content);if("strongAlertRef"===e.content.type&&"assistantCard"===e.content.child.type)return i.some(e.content.child);if("longFormCard"===e.content.type&&"assistantCard"===e.content.fullContent.type)return i.some(e.content.fullContent);return i.none}(e),i.map((e=>e.onFocus)),ue.bw((t=>this._params.feedActionService.processActions(t,e.id))))}onFeedMount(){const e=mn.registerFeedUnmountHandler((()=>{mn.unregisterFeedUnmountHandler(e),this._params.alertVisibilityManager.notifyFeedUnmount()}));this._params.alertVisibilityManager.notifyFeedMount()}}class An{constructor(e){this._params=e,this._subs=new I.w,this._sourceCount=f.h.create(i.none),this._state=f.h.create(i.none),this._citationDropdown=f.h.create(i.none),this.plagiarismAction=this._params.feedManager.feeds.view((e=>e.has(Lt.j.Item.Id.from(zt.plagiarismFeed))?i.some(W.aU.createPlagiarismAction()):i.none)),this.state=f.h.combine(this._state,this._sourceCount,this._citationDropdown,((e,t,n)=>(0,s.zG)(e,i.map((e=>Object.assign(Object.assign({},e),{sourceCount:t,citationDropdown:n})))))),this._subs.add(this._params.assistantUIActions.pipe(N.h(A.i.is(A.i.Kind.actionBrickClick)),N.h((e=>"regularAction"===e.action.kind&&W.aU.isPlagiarismAction(e.action.action)))).subscribe((()=>{this._params.feedManager.pushFeed(zt.plagiarismFeed),this._params.routingViewModel.push({kind:"plagiarism"})}))),this._subs.add(this._params.routingViewModel.has({kind:"plagiarism"}).pipe(re.G(),N.h((([e,t])=>e&&!t))).subscribe((()=>this._params.feedManager.popFeed()))),this._subs.add(this._params.feedManager.feed.pipe(C.U(i.fold(s.gn,(e=>e.id))),S.x(),k.O(null),re.G()).subscribe((([e,t])=>{e!==zt.plagiarismFeed&&t===zt.plagiarismFeed?this._params.plagiarismService.enablePlagiarismChecks():e===zt.plagiarismFeed&&t!==zt.plagiarismFeed&&this._params.plagiarismService.disablePlagiarismChecks()}))),this._subs.add(this._params.lastAsyncCheckFinishedMessage.pipe(N.h((e=>"plagiarism"===e.check))).subscribe((e=>this._state.set(i.some({originality:e.outcomeScores.Originality,checking:!1}))))),this._subs.add(this._params.textUpdated.subscribe((()=>this._state.modify(i.map((e=>Object.assign(Object.assign({},e),{checking:!0})))))));const t=this._params.feedManager.feeds.view((e=>i.fromNullable(e.get(Lt.j.Item.Id.from(zt.plagiarismFeed)))));this._subs.add(t.view(i.chain((e=>{var t,n;for(const r of en.ab.traverse(e.content))if("tooltip"===r.type){const e=null===(n=null===(t=/from (?<sources>\d+) sources on the web/.exec(r.text))||void 0===t?void 0:t.groups)||void 0===n?void 0:n.sources;if(void 0!==e)return(0,s.zG)(i.fromNullable(Number.parseInt(e,10)),i.filter((e=>Number.isSafeInteger(e))))}return i.none}))).subscribe((e=>this._sourceCount.set(e)))),this._subs.add(t.view(i.chain((e=>{var t;for(const n of en.ab.traverse(e.content))if("selectableDropDownMenu"===n.type&&"citation-style"===(null===(t=n.name)||void 0===t?void 0:t.value))return i.some(n);return i.none}))).subscribe((e=>this._citationDropdown.set(e))))}seeAllSuggestions(){this._params.routingViewModel.popUntil((e=>"home"===e.kind))}onCitationDropdownSelect(e){this._params.feedActionService.processActions(e,Lt.j.Item.Id.from(zt.plagiarismFeed),[])}dispose(){this._subs.unsubscribe()}}class Bn{constructor(e){this._params=e,this._subs=new I.w,this._allSuggestionsCount=f.h.create(0),this._allSuggestionsEmpty=f.h.create(!0),this._someSuggestionsAddressed=f.h.create(!1),this.activeFeedSuggestionCount=this._params.feedManager.feed.view(i.fold((()=>0),(e=>kt(e.collection)))),this.allSuggestionCount=this._allSuggestionsCount.view(),this.allSuggestionsEmpty=this._allSuggestionsEmpty.view(),this.someSuggestionsAddressed=this._someSuggestionsAddressed.view(),this._subs.add(this._params.feedManager.allSuggestionsFeed.pipe(w.w(i.fold((()=>U.of(0)),(e=>{const t=tn(e.content.filtering);return this._params.sduiItemsCollection.pipe(C.U(Xt.a.reduce(0,((e,n)=>t(n)?e+1:e))))})))).subscribe(L.wW(this._allSuggestionsCount))),this._subs.add(this._params.feedManager.allSuggestionsFeed.pipe(w.w(i.fold((()=>U.of(!0)),(e=>this._params.feedManager.isFeedEmpty(e))))).subscribe((e=>{this._allSuggestionsEmpty.set(e),e||this._someSuggestionsAddressed.set(!1)})))}onSuggestionAddressed(){this._someSuggestionsAddressed.set(!0)}dispose(){this._subs.unsubscribe()}}var On=n(13463);class Rn{constructor(e){this._params=e,this._subs=new I.w,this._subs.add(this._params.assistantUIActions.subscribe((e=>{if(e.kind===A.i.Kind.settingsButtonClick)return"withView"===this._params.options.kind?this._params.routingViewModel.push({kind:"settings"}):this._params.options.onClick(e.buttonRect)})))}getView(){return"withView"===this._params.options.kind?i.some(this._params.options.getView()):i.none}dispose(){this._subs.unsubscribe()}}var Tn=n(62965),Nn=n(41866);class Mn{constructor(e,t,n,r){this._assistantUIActions=e,this._router=t,this._monitoringService=n,this._skillService=r,this._subs=new I.w,this._state=f.h.create(i.none),this.state=this._state.view(),this._skillService&&this._subs.add(this._skillService.skillRequests.subscribe((e=>{e.close?(this._onSkillClosed(),this._state.set(i.none)):e.size&&this._state.modify(i.map((t=>Object.assign(Object.assign({},t),{size:e.size}))))}))),this._subs.add(this._assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case A.i.Kind.actionBrickClick:if("regularAction"===e.action.kind&&W.aU.isSkillAction(e.action.action)){const t=e.action.action.skill;this._onSkillOpened(),this._state.set(i.some({skill:t,status:"loading",size:{width:416,height:245}}))}break;case A.i.Kind.mount:e.name===Z.e.skill&&(0,B.t)("initSkill",(0,s.zG)((0,s.zG)(this._state.get(),Tn.Yo((()=>new Error("Cannot init Skill. No Skill state available.")))),Tn.tS((t=>this._skillService?(0,s.zG)(this._skillService.initSkill(t.skill,e.element),Tn.UI((e=>Object.assign(Object.assign({},t),{size:e})))):Tn.t$(new Error("Cannot init Skill. No `SkillService` available."))))),void 0,(e=>this._state.set(i.some(Object.assign(Object.assign({},e),{status:"ready"})))),(e=>{this._state.modify(i.map((e=>Object.assign(Object.assign({},e),{status:"error"})))),this._monitoringService.notify((0,a.L)((0,Nn.iJ)({skillId:(0,s.zG)(this._state.get(),i.map((e=>e.skill.id)),i.toNullable),rawError:(0,u.N)(e)})))}));break;case A.i.Kind.unmount:e.name!==Z.e.skill||this._router.has({kind:"skill"}).get()||(0,B.t)("terminateSkill",(0,s.zG)((0,s.zG)(this._state.get(),Tn.Yo((()=>new Error("Cannot terminate Skill. No Skill state available.")))),Tn.tS((e=>this._skillService?(0,s.zG)(this._skillService.terminateSkill(e.skill),Tn.UI((()=>e))):Tn.t$(new Error("Cannot terminate Skill. No `SkillService` available."))))),void 0,(()=>this._state.set(i.none)),(e=>{this._state.set(i.none),this._monitoringService.notify((0,a.L)((0,Nn.go)({skillId:(0,s.zG)(this._state.get(),i.map((e=>e.skill.id)),i.toNullable),rawError:(0,u.N)(e)})))}))}}_onSkillOpened(){this._router.push({kind:"skill"})}_onSkillClosed(){"skill"===this._router.activeView.get().kind&&this._router.pop()}}var Un,Fn=n(31705);!function(e){e.empty={activeSurvey:i.none,stage:Fn.x.Stage.Type.Rating,transitionStage:Fn.x.Stage.Type.Rating,rating:i.none,errors:i.none,openAnswer:i.none}}(Un||(Un={}));class zn{constructor(e){this._params=e,this._state=f.h.create(Un.empty),this._subs=new I.w,this._stageTimeoutClear=void 0,this.state=this._state.view(),this._updateStageAfterTransition(),this._subscribeToActiveSurvey(),this._subs.add(this._params.assistantUIActions.subscribe((e=>{(0,z.Kg)(A.i.isSurveyAction,A.i.isSurveyImplicitDismissAction)(e)&&this._handleUIAction(e)})))}get _activeSurvey(){return this.state.get().activeSurvey}_subscribeToActiveSurvey(){this._subs.add(this._params.userSurveyService.activeSurvey.subscribe((e=>{(0,s.zG)(e,i.map((e=>{(0,s.zG)(this._activeSurvey,i.fold((()=>this._updateActiveSurvey(e)),(t=>{t.detailedPlacement!==e.detailedPlacement&&this._updateActiveSurvey(e)})))})))})))}_updateActiveSurvey(e){this._state.set(Object.assign(Object.assign({},Un.empty),{activeSurvey:i.some(e)}))}_handleUIAction(e){switch(e.kind){case A.i.Kind.surveySubmitButtonClick:case A.i.Kind.surveyKeyPressShiftEnter:this._onSurveyCompleted();break;case A.i.Kind.surveyCancelButtonClick:case A.i.Kind.surveyCloseButtonClick:this._onDismissExplicitly();break;case A.i.Kind.surveyOpenAnswerChange:this._onOpenAnswerChange(e.openAnswer);break;case A.i.Kind.surveyRatingSelectionChange:this._onRatingSelectionChange(e.rating);break;case A.i.Kind.promptSubmitButtonClick:case A.i.Kind.actionBrickClick:case A.i.Kind.resultCardInsertButtonClick:case A.i.Kind.resultCardRephraseButtonClick:case A.i.Kind.resultCardHeaderClick:case A.i.Kind.resultCardDismissButtonClick:this._onDismissImplicitly();break;default:(0,D.L0)(e)}}_onRatingSelectionChange(e){(0,s.zG)(this._activeSurvey,i.map((e=>e.skipOpenAnswerFrom)),i.map((t=>{e<t?this._state.modify((t=>Object.assign(Object.assign({},t),{rating:i.some(e),transitionStage:Fn.x.Stage.Type.Feedback}))):this._state.modify((t=>Object.assign(Object.assign({},t),{rating:i.some(e),transitionStage:Fn.x.Stage.Type.Completed}))),this._reportCompleting()})))}_onOpenAnswerChange(e){(0,s.zG)(this._activeSurvey,i.chain((({openAnswer:e})=>e)),i.map((({maxLen:t})=>{e.length<=t&&this._state.modify((t=>Object.assign(Object.assign({},t),{openAnswer:i.some(e),errors:i.none})))})))}_onSurveyCompleted(){(0,s.zG)(this._activeSurvey,i.chain((({openAnswer:e})=>e)),i.chain((({minLen:e})=>e)),i.fold((()=>this._complete()),(e=>{(0,s.zG)(this._state.get().openAnswer,i.fold((()=>this._setOpenAnswerError("This field is required.")),(t=>{t.length<e?this._setOpenAnswerError(e>0?`Please enter at least ${e} characters.`:"This field is required."):this._complete()})))})))}_complete(){this._reportCompleting(),this._state.lens("transitionStage").set(Fn.x.Stage.Type.Completed)}_reportCompleting(){(0,s.zG)(this._activeSurvey,i.chain((e=>(0,s.zG)(this._state.get().rating,i.map((t=>({survey:e,rating:t})))))),i.map((({survey:e,rating:t})=>this._params.userSurveyService.submitSurveyResult({rating:t,openAnswer:this._state.get().openAnswer,placement:e.placement,detailedPlacement:e.detailedPlacement,stage:this.state.get().stage,type:e.type}))))}_setOpenAnswerError(e){this._state.lens("errors").set(i.some({openAnswerError:i.some(e)}))}_onDismissExplicitly(){(0,s.zG)(this._activeSurvey,i.map((e=>{const t=this.state.get().stage;t===Fn.x.Stage.Type.Rating&&this._params.userSurveyService.dismissSurvey({placement:e.placement,detailedPlacement:e.detailedPlacement,type:e.type,stage:t})}))),this._state.lens("transitionStage").set(Fn.x.Stage.Type.Closed)}_onDismissImplicitly(){this._state.lens("transitionStage").set(Fn.x.Stage.Type.Closed)}_updateStageAfterTransition(){this._subs.add(this._state.subscribe((e=>{this._clearStageTimeout(),this._stageTimeoutClear=setTimeout((()=>{this._state.lens("stage").set(e.transitionStage)}),jn[e.transitionStage])})))}_clearStageTimeout(){void 0!==this._stageTimeoutClear&&(clearTimeout(this._stageTimeoutClear),this._stageTimeoutClear=void 0)}dispose(){this._subs.unsubscribe(),this._clearStageTimeout()}}const jn={[Fn.x.Stage.Type.Rating]:0,[Fn.x.Stage.Type.Feedback]:300,[Fn.x.Stage.Type.Completed]:0,[Fn.x.Stage.Type.Closed]:0};var Pn;!function(e){e.set=function(e,t){return n=>Object.assign(Object.assign({},n),{[e]:t})}}(Pn||(Pn={}));var Gn=n(33305);class Ln{constructor(e){this._params=e,this._subs=new I.w,this._state=f.h.create({stagingNewVoiceProfile:i.none,stagingVoiceProfile:i.none}),this.state=this._state.view(),this._subs.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case A.i.Kind.headerGoBackButtonClick:return this._handleGoBack(e.goBackFrom);case A.i.Kind.headerVoiceButtonClick:return this._openVoiceProfile("toolbar");case A.i.Kind.setVoiceButtonClick:return this._openVoiceProfile("banner");case A.i.Kind.voiceProfileCloseButtonClick:return this._closeVoiceProfile();case A.i.Kind.voiceProfileUseVoiceButtonClick:return this._applyVoiceProfile();case A.i.Kind.toneToggleClick:return this._toggleTone(e.id,e.selected);case A.i.Kind.styleToggleClick:return this._selectStyle(e.id);case A.i.Kind.roleTypeaheadSelectionChange:return this._selectRole((0,s.zG)(e.role,i.map((e=>e.id))));case A.i.Kind.dialectDropdownSelectionChange:return this._selectDialect(e.dialect.id);case A.i.Kind.voiceProfileTabChange:return this._switchNewVoiceProfileTab(e.profileName);case A.i.Kind.voiceTagPopoverRemoveButtonClick:return this._removeVoiceTag(e);case A.i.Kind.voiceTagPopoverClose:return this._closeVoiceTagPopover();case A.i.Kind.voiceTagPopoverKeepButtonClick:return this._keepVoiceTagPopover();case A.i.Kind.voiceTagClick:return this._toggleVoiceTag(e);case A.i.Kind.voiceDialectDropdownSelectionChange:return this._selectNewVoiceDialect(e.dialect.id);case A.i.Kind.voiceRoleDropdownSelectionChange:return this._selectNewVoiceRole(e.role.id);case A.i.Kind.voiceSelectionsSaveButtonClick:return this._saveNewVoiceSelections();case A.i.Kind.voiceSelectionsCancelButtonClick:return this._cancelNewVoiceSelectionChanges();case A.i.Kind.voiceSelectionsEditButtonClick:return this._editNewVoiceSelections();case A.i.Kind.promptFieldKeyPressEscape:case A.i.Kind.headerCloseButtonClick:return this._trySaveNewProfileIfChanged();default:return}}_handleGoBack(e){"voiceProfile"!==e.kind&&"legacyVoiceProfile"!==e.kind||(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),ue.bw((e=>{"newVoiceProfile"===e.voiceProfile.kind?(this._trySaveNewProfileIfChanged(),this._state.lens("stagingNewVoiceProfile").set(i.none)):"legacyVoiceProfile"===e.voiceProfile.kind&&this._state.lens("stagingVoiceProfile").set(i.none)})))}_createVoiceProfile(e){var t;return"newVoiceProfile"===e.kind?Pn.set("stagingNewVoiceProfile",i.some({selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles,activeTagId:i.none,activeProfileName:i.fromNullable(null===(t=e.profiles.find((e=>e.selected)))||void 0===t?void 0:t.name),stagingSelections:i.none})):Pn.set("stagingVoiceProfile",i.some({selectedStyle:e.selectedStyle,selectedTonesPerStyle:e.selectedTonesPerStyle,selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,needsSetup:e.needsSetup}))}_openVoiceProfile(e){(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),ue.bw((t=>{this._params.trackingService.trackVoiceProfileOpen(e),this._params.routingViewModel.push({kind:"newVoiceProfile"===t.voiceProfile.kind?"voiceProfile":"legacyVoiceProfile"}),this._state.modify(this._createVoiceProfile(t.voiceProfile))})))}_closeVoiceProfile(){this._params.trackingService.trackVoiceProfileSkip(),this._params.routingViewModel.pop(),this._state.lens("stagingVoiceProfile").set(i.none)}_applyVoiceProfile(){const e=this._state.get().stagingVoiceProfile;this._params.routingViewModel.pop(),this._state.lens("stagingVoiceProfile").set(i.none),(0,s.zG)(e,ue.bw((e=>{(0,B.t)("setVoiceProfile",this._params.sessionService.setVoiceProfile(e),this._params.logger)})))}_toggleTone(e,t){this._state.lens("stagingVoiceProfile").modify(i.map((n=>{return Object.assign(Object.assign({},n),{selectedTonesPerStyle:(0,s.zG)(n.selectedTonesPerStyle,t?(r=Gn.L.Style.Id.eq,(e,t)=>n=>(0,s.zG)(n,$t.cq(r)(e,(0,s.ls)(i.some,t)),i.getOrElse((()=>(0,s.zG)(n,$t.ZQ(r)(e,t(i.none)))))))(n.selectedStyle,i.fold((()=>new Set([e])),mt.$T(Gn.L.Tone.Id.eq)(e))):(0,s.ls)($t.cq(Gn.L.Style.Id.eq)(n.selectedStyle,mt.Od(Gn.L.Tone.Id.eq)(e)),i.getOrElse((()=>n.selectedTonesPerStyle))))});var r})))}_selectStyle(e){this._state.lens("stagingVoiceProfile").modify(i.map((t=>Object.assign(Object.assign({},t),{selectedStyle:e}))))}_selectRole(e){this._state.lens("stagingVoiceProfile").modify(i.map((t=>Object.assign(Object.assign({},t),{selectedRole:e}))))}_selectDialect(e){this._state.lens("stagingVoiceProfile").modify(i.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))}_editNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:i.some({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole})})))}_cancelNewVoiceSelectionChanges(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:i.none})))}_saveNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{selectedDialect:(0,s.zG)(e.stagingSelections,i.fold((()=>e.selectedDialect),(e=>e.selectedDialect))),selectedRole:(0,s.zG)(e.stagingSelections,i.fold((()=>e.selectedRole),(e=>e.selectedRole))),stagingSelections:i.none})))}_selectNewVoiceRole(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,s.zG)(t.stagingSelections,i.map((t=>Object.assign(Object.assign({},t),{selectedRole:i.some(e)}))))})))}_selectNewVoiceDialect(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,s.zG)(t.stagingSelections,i.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))})))}_updateNewProfileStateIfAny(e){this._state.lens("stagingNewVoiceProfile").modify(i.map(e))}_keepVoiceTagPopover(){this._params.trackingService.trackVoiceProfileKeepTag(),this._closeVoiceTagPopover()}_closeVoiceTagPopover(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{activeTagId:i.none})))}_toggleVoiceTag({tagName:e,sectionName:t,profileName:n}){this._updateNewProfileStateIfAny((r=>Object.assign(Object.assign({},r),{activeTagId:i.toNullable(r.activeTagId)===Gn.b.createId({tagName:e,sectionName:t,profileName:n})?i.none:i.some(Gn.b.createId({tagName:e,sectionName:t,profileName:n}))})))}_removeVoiceTag({tagName:e,profileName:t,sectionName:n}){this._params.trackingService.trackVoiceProfileRemoveTag(),this._updateNewProfileStateIfAny((i=>Object.assign(Object.assign({},i),{profiles:(0,s.zG)(i.profiles,R.UI((i=>i.name===t?Object.assign(Object.assign({},i),{sections:i.sections.map((t=>t.name===n?Object.assign(Object.assign({},t),{tags:t.tags.filter((t=>t.name!==e))}):t))}):i)))})))}_switchNewVoiceProfileTab(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{activeProfileName:i.some(e)})))}_trySaveNewProfileIfChanged(){(0,s.zG)($.Y(i.option)({editedVoiceProfile:this._state.view("stagingNewVoiceProfile").get(),sessionVoiceProfile:(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),i.map((e=>e.voiceProfile)),i.chain(Gn.L.toNewVoiceProfile))}),i.filter((({editedVoiceProfile:e,sessionVoiceProfile:t})=>!Gn.L.NewSelections.eqByRoleDialectProfileAndIsEnabledByDefault.equals(e,t))),ue.bw((({editedVoiceProfile:e})=>{(0,B.t)("setNewVoiceProfile",this._params.sessionService.setNewVoiceProfile({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles}),this._params.logger)})))}}var Dn,Zn=n(14047),Hn=n(65602);function Vn(e,t){return(0,s.zG)(Q.z.toStarted(e),i.filter((e=>(0,s.zG)(t?e.activeBoundaryContext.specialView:e.activeContext.specialView,ue.wo((({kind:e})=>"aiUsageAlert"!==e))))),i.map((e=>t?e.activeBoundaryContext.availableActions:e.activeContext.availableActions)),i.chain(K.c2))}function $n(e,t){return(0,s.zG)(Q.z.toStarted(e),i.chain((e=>(0,s.zG)(function(e){return(0,s.zG)(e.split(/\s/).filter((e=>e.length>3&&e.includes("."))),K.nI)}(t),i.map(R.DZ((t=>{var n;return null!==(n=e.detectedReferences.get(t))&&void 0!==n?n:i.none}))),i.chain(K.c2)))))}!function(e){e.eq=ge.getEq(Y.yv,Zn.x.Id.eq),e.card=function(e){return ge.right(e)},e.uiItem=function(e){return ge.left(e)},e.toCard=function(e){return i.fromEither(e)},e.toUIItem=function(e){return(0,s.zG)(e,ge.fold(i.some,(()=>i.none)))}}(Dn||(Dn={}));var Kn,Wn,qn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},Qn=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){let t;!function(e){e.make=function(e){return{kind:"regularAction",action:e}},e.ordByActionStore=me.contramap((e=>e.action.store.rank))(me.ordNumber)}(t=e.RegularAction||(e.RegularAction={}))}(Kn||(Kn={})),function(e){e.create=function(){return{textBox:"",selectedAction:i.none,promptAutofocusToken:0,cardsState:{hoveredCard:i.none,focusedCard:i.none},reportMenuVisible:i.none,referencesVisibility:new Map,detectedReferences:i.none,overrideCardVoice:new Map}}}(Wn||(Wn={}));class Yn{constructor(e){this._params=e,this._state=f.h.create(Wn.create()),this._subs=new I.w,this._reportMenuVisibleDebounced=f.h.create(i.none),this._textEmtpy=f.h.create(i.none),this._paramsStateDeps=f.h.combine(this._params.userService.user,this._params.genAIAvailabilityService.availability,this._params.sessionService.session,this._params.routingViewModel.activeView,this._params.themeViewModel.theme.view("flatUI"),((e,t,n,i,r)=>({user:e,genAIAvailability:t,session:n,activeView:i,flatUI:r}))),this.state=f.h.combine(this._state,this._paramsStateDeps,this._reportMenuVisibleDebounced,this._textEmtpy,((e,t,n,r)=>{var{cardsState:o,reportMenuVisible:a,textBox:l}=e,c=Qn(e,["cardsState","reportMenuVisible","textBox"]),u=t.user,d=t.genAIAvailability,m=t.session,p=t.activeView,h=t.flatUI;return Object.assign(Object.assign({},c),{textBox:l,user:u,genAIAvailability:d,session:m,userPromptAction:(0,s.zG)(Q.z.toStarted(m),i.chain((e=>e.activeContext.userPromptAction)),i.map((e=>Object.assign(Object.assign({},e),{arg:Object.assign(Object.assign({},e.arg),{kind:"string",label:h?(0,s.zG)(r,i.fold((()=>""),(0,z.RN)("Try Write an ode to the em dash","Try Is it persuasive?"))):"string"===e.arg.kind?e.arg.label:"Tell us to..."})})))),activeCards:new Set((0,s.zG)([o.hoveredCard,(0,s.zG)(o.focusedCard,ue.vx((0,s.zG)(n,i.chain(Dn.toCard))))],R.oA)),canScroll:i.isNone(a),contextualActions:Vn(m,"home"===p.kind)})})),this._subs.add(this.state.subscribe((e=>this._params.logger.debug("assistant view model state updated",e)))),this._subs.add(b.D(this._params.textEditorService.trimmedTextLength).pipe(C.U((e=>0===e))).subscribe((e=>this._textEmtpy.set(i.some(e))))),this._subs.add(this._updateActiveView().subscribe()),this._subs.add(vt.T(this._state.view("reportMenuVisible").pipe(E.oA,C.U(i.some)),this._state.view("reportMenuVisible").pipe(_.skipBy(i.getEq(Dn.eq)),ce.b(250),N.h(i.isNone))).subscribe(L.wW(this._reportMenuVisibleDebounced))),this._subs.add(this._params.routingViewModel.activeView.subscribe((()=>this._state.modify((0,s.ls)(Pn.set("reportMenuVisible",i.none),Pn.set("cardsState",{hoveredCard:i.none,focusedCard:i.none})))))),this._subs.add(this._params.assistantUIActions.subscribe((e=>{this._handleUIAction(e)})))}focusPromptField(){this._state.lens("promptAutofocusToken").modify((e=>e+1))}getContextById(e){return this._params.sessionService.getContextById(e)}dispose(){this._subs.unsubscribe()}_updateActiveView(){return vt.T(this._params.sessionService.session.view((0,s.ls)(Q.z.toStarting,i.chain((e=>e.error)),ue.bw((()=>this._params.routingViewModel.replace({kind:"error"}))))))}_handleUIAction(e){switch(e.kind){case A.i.Kind.headerCloseButtonClick:return void this._onClose(e);case A.i.Kind.headerGoBackButtonClick:case A.i.Kind.radioOptionsCancelButtonClick:return this._goBack();case A.i.Kind.promptFieldTextChange:return this._updateTextBox(e.text);case A.i.Kind.actionBrickClick:return this._executeAction(e.action);case A.i.Kind.promptSubmitButtonClick:return this._go(i.none);case A.i.Kind.userPromptSubmit:return this._go(i.some(e.prompt));case A.i.Kind.radioOptionsSubmitButtonClick:return this._submitSelectedAction({selectedRadioOption:e.selectedOption});case A.i.Kind.generateStopButtonClick:return this._stop();case A.i.Kind.resultCardInsertButtonClick:return this._insert(e.result,e.selectedVoice);case A.i.Kind.resultCardRephraseButtonClick:return this._rephrase(e.result,e.selectedVoice);case A.i.Kind.resultCardDismissButtonClick:return this._dismissResult(e.result);case A.i.Kind.errorCardOkButtonClick:return this._dismissError();case A.i.Kind.reportOffensiveResultButtonClick:return this._reportOffensiveResult(e.result);case A.i.Kind.reportOffensiveActionsButtonClick:return this._reportOffensiveActions();case A.i.Kind.resultCardHeaderClick:return this._clickResultHeader(e.prompt);case A.i.Kind.creditsInfoHover:return this._params.trackingService.trackUsageInfoHover();case A.i.Kind.creditsInfoClick:return this._onCreditsInfoClick();case A.i.Kind.resultCardHoverChange:return this._onCardHover(e.resultId,e.hovered);case A.i.Kind.resultCardFocusChange:return this._onCardFocus(e.resultId,e.focused);case A.i.Kind.resultCardCopy:return this._onCardCopy(e.resultId,e.voice);case A.i.Kind.resultCardToggleGenericVoiceButtonClick:return this._onToggleGenericVoice(e.resultId,e.voice);case A.i.Kind.reportMenuVisibilityChange:return this._onCardReportMenuVisibilityChange(e.trigger,e.visible);case A.i.Kind.referencesVisibilityChange:return this._onCardReferencesVisibilityChange(e.resultId,e.visible);case A.i.Kind.regenerateWithoutReferenceButtonClick:return this._regenerateWithoutReference(e.result,e.referenceId,e.selectedVoice);case A.i.Kind.mount:return this._handleMount(e);case A.i.Kind.promptFieldKeyPressEscape:return this._onPromptFieldKeyPressEscape(e);case A.i.Kind.promptFieldKeyPressEnter:return e.text.trim().length>0?this._go(i.none):this._tryInsertLatestResult();case A.i.Kind.restoreHistoryButtonClick:return this._handleHistoryButtonClick();case A.i.Kind.removeSelectionContextClick:return this._params.sessionService.dismissActiveBoundaryContext();case A.i.Kind.selectionContextInteraction:return this._params.textEditorService.setContextHighlight(e.range,e.visibility);default:return}}_handleHistoryButtonClick(){(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),i.map((e=>i.isSome(e.inProgressResult)||e.results.length>0)),ue.bw((e=>{e?this._params.routingViewModel.push({kind:"thread"}):(this._params.sessionService.restoreHistory(),this._subs.add(this._params.sessionService.session.view(Q.z.toStarted).pipe(E.oA,N.h((e=>void 0!==e.results.find(Zn.x.isHistory))),M.q(1)).subscribe((()=>this._params.routingViewModel.push({kind:"thread"})))))})))}_handleMount(e){e.name===Z.e.creditsInfoButton?(0,B.t)("reportUphookShow",this._params.uphookService.reportUphookShow(this._params.userService.user.get()),this._params.logger,void 0,(e=>this._params.monitoringService.notify((0,a.L)((0,l.ix)({rawError:(0,u.N)(e)}))))):e.name===Z.e.historyButtonActive&&this._params.trackingService.trackHistoryButtonView()}_onCardHover(e,t){this._state.lens("cardsState").lens("hoveredCard").modify(t?()=>i.some(e):i.filter((t=>t!==e)))}_onCardFocus(e,t){this._state.lens("cardsState").lens("focusedCard").modify(t?()=>i.some(e):i.filter((t=>t!==e)))}_onCardCopy(e,t){(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),i.map((e=>e.results)),i.chain(R.Ew((t=>t.id===e))),i.filter((e=>"aiUsageNotification"!==e.kind)),i.chain((e=>(0,s.zG)(i.fromNullable(this._params.textEditorService.copyText),i.map((t=>({result:e,copyText:t})))))),i.map((({copyText:n,result:i})=>(0,B.t)("copyText",n((0,Hn.l)((0,s.zG)(i.replacementDelta,ge.fold(s.yR,(e=>t===Zn.x.GeneratedTextVoice.user?e.user:e.generic))),"")),this._params.logger,(()=>{this._params.sessionService.trackResultCopy(e)})))))}_onCardReportMenuVisibilityChange(e,t){this._state.modify((n=>Object.assign(Object.assign({},n),{reportMenuVisible:t?i.some(e):(0,s.zG)(n.reportMenuVisible,i.filter((t=>!Dn.eq.equals(t,e)))),cardsState:Object.assign(Object.assign({},n.cardsState),{hoveredCard:(0,s.zG)(Dn.toCard(e),i.fold((()=>n.cardsState.hoveredCard),(e=>t?n.cardsState.hoveredCard:(0,s.zG)(n.cardsState.hoveredCard,i.filter((t=>t!==e))))))})})))}_onCardReferencesVisibilityChange(e,t){this._state.lens("referencesVisibility").modify((n=>new Map(n).set(e,t)))}_onToggleGenericVoice(e,t){this._state.lens("overrideCardVoice").modify((n=>{var i;const r=new Map(n),o=(null!==(i=n.get(e))&&void 0!==i?i:t)===Zn.x.GeneratedTextVoice.generic?Zn.x.GeneratedTextVoice.user:Zn.x.GeneratedTextVoice.generic;return r.set(e,o),this._params.trackingService.trackMyVoiceCardToggle(o===Zn.x.GeneratedTextVoice.user),r}))}_onClose(e){A.i.is(A.i.Kind.headerCloseButtonClick)(e)&&this._params.trackingService.trackAssistantClose(),this._params.lifecycleViewModel.onClose()}_goBack(){"followUpPrompt"===this._params.routingViewModel.activeView.get().kind&&this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:i.none,textBox:""}))),this._params.routingViewModel.pop()}_updateTextBox(e){this._state.lens("textBox").set(e),this._searchReferences(e)}_executeAction(e){if("regularAction"===e.kind)if(e.action.disabled)(0,s.zG)(e.action.notificationOnAttempt,ue.bw((e=>{this._params.notificationService.notify(j.C.create("information",e,void 0,void 0,5e3)),this._params.trackingService.trackContexNotification("action")})));else if(W.aU.isFollowUpQuestionActionInput(e.action)){const t=e.action;this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedAction:i.some(t)}))),this._params.routingViewModel.push({kind:"followUpPrompt",inputType:W.Xy.match({radio:()=>"radio",string:()=>"string"})(e.action.args[0])})}else W.aU.isQuickActionInput(e.action)?(this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:i.none,textBox:""}))),this._params.sessionService.submitAction(e.action,i.toUndefined(this._lastResultSelectedVoice())),this._params.routingViewModel.push({kind:"thread"})):(0,z.Kg)(W.aU.isSkillAction,W.aU.isToneAction,W.aU.isPlagiarismAction)(e.action)||(0,D.L0)(e.action);else"allResults"===e.kind||("go"===e.kind?this._go(i.none):(0,D.L0)(e))}_handleAIUsageNotificationOnPromptSubmit(){(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),i.chain((e=>e.activeContext.specialView)),i.filter((e=>"aiUsageAlert"===e.kind)),ue.bw((()=>this._params.trackingService.trackAINotificationDismiss("document"))))}_go(e){i.isSome(e)?(this._handleAIUsageNotificationOnPromptSubmit(),this._params.sessionService.submitAction(ue.MH(e),i.toUndefined(this._lastResultSelectedVoice())),this._params.routingViewModel.push({kind:"thread"})):i.isSome(this._state.get().selectedAction)?this._submitSelectedAction({textBox:this._state.get().textBox}):(this._handleAIUsageNotificationOnPromptSubmit(),this._submitUserPromptAction())}_stop(){return qn(this,void 0,void 0,(function*(){yield this._params.sessionService.stopInProgressResult()();(0,s.zG)(this._params.sessionService.session.get(),Q.z.fold({starting:s.jv,started:e=>0===e.results.length}))&&"thread"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.pop()}))}_insert(e,t){(0,B.t)("insertText",this._params.textEditorService.insertText((0,Hn.l)((0,s.zG)(e.replacementDelta,ge.fold(s.yR,(e=>t===Zn.x.GeneratedTextVoice.user?e.user:e.generic))),"")),this._params.logger,(()=>{this._params.sessionService.trackResultInsert(e.id,t===Zn.x.GeneratedTextVoice.user)}))}_tryInsertLatestResult(){(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),i.map((e=>e.results)),i.chain(R.YM),i.filter(Zn.x.isStandardCompletedResult),ue.bw((e=>this._insert(e,(0,s.zG)(this._lastResultSelectedVoice(),i.getOrElse((()=>Zn.x.GeneratedTextVoice.generic)))))))}_onPromptFieldKeyPressEscape(e){e.menuOpened||(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),i.chain((e=>e.inProgressResult)),i.fold((()=>this._onClose(e)),(()=>this._stop())))}_rephrase(e,t){this._params.sessionService.regenerateResult(e.id,{omitReferenceIds:i.none},t)}_dismissResult(e){this._params.sessionService.dismissResult(e.id),this._state.modify((t=>Object.assign(Object.assign({},t),{reportMenuVisible:(0,s.zG)(t.reportMenuVisible,i.filter((t=>!Dn.eq.equals(t,Dn.card(e.id))))),cardsState:{hoveredCard:(0,s.zG)(t.cardsState.hoveredCard,i.filter((t=>t!==e.id))),focusedCard:(0,s.zG)(t.cardsState.hoveredCard,i.filter((t=>t!==e.id)))}})));(0,s.zG)(this._params.sessionService.session.get(),Q.z.fold({starting:s.jv,started:e=>0===e.results.length&&i.isNone(e.inProgressResult)}))&&"thread"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.pop()}_dismissError(){this._params.sessionService.dismissError()}_reportOffensiveResult(e){this._params.sessionService.trackResultOffensive(e.id)}_reportOffensiveActions(){this._params.sessionService.trackActionsOffensive()}_clickResultHeader(e){this._state.modify((t=>Object.assign(Object.assign({},t),{textBox:e,promptAutofocusToken:t.promptAutofocusToken+1})))}_onCreditsInfoClick(){this._params.trackingService.trackUsageInfoClick(),(0,B.t)("reportUphookClick",this._params.uphookService.reportUphookClick(this._params.userService.user.get()),this._params.logger,void 0,(e=>this._params.monitoringService.notify((0,a.L)((0,l.ol)({rawError:(0,u.N)(e)})))))}_submitSelectedAction(e){(0,s.zG)(this._state.get().selectedAction,i.chain((t=>(0,s.zG)(t.args[0],W.Xy.match({string:()=>{var n;return(0,s.zG)(i.fromNullable(null===(n=e.textBox)||void 0===n?void 0:n.trim()),i.filter((e=>e.length>0)),i.map((e=>W.aU.FollowUpQuestionActionValue.fromTextInput(t,e))))},radio:()=>(0,s.zG)(i.fromNullable(e.selectedRadioOption),i.map((e=>W.aU.FollowUpQuestionActionValue.fromRadioInput(t,e))))})))),ue.bw((e=>{this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:i.none,textBox:""}))),this._params.sessionService.submitAction(e,i.toUndefined(this._lastResultSelectedVoice())),i.isSome(e.generatesTextType)&&(this._popFollowUpPromptViews(),"home"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.push({kind:"thread"}))})))}_lastResultSelectedVoice(){return(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),i.map((e=>e.results)),i.chain(R.YM),i.chain((e=>i.fromNullable(this._state.lens("overrideCardVoice").view((t=>t.get(e.id))).get()))))}_submitUserPromptAction(){(0,s.zG)(this._state.get().textBox.trim(),i.fromPredicate((e=>""!==e)),i.chain((e=>(0,s.zG)(Q.z.toStarted(this._params.sessionService.session.get()),i.chain((t=>(0,s.zG)(t.activeContext.userPromptAction,i.map((n=>({text:e,session:t,userPromptAction:n}))))))))),ue.bw((({text:e,session:t,userPromptAction:n})=>{this._state.lens("textBox").set(""),this._params.sessionService.submitAction(W.aU.UserPromptActionValue.fromInput(n,e,(0,s.zG)($n(t,e),i.map(R.DZ((e=>(0,s.zG)(e.url,i.map((t=>({url:t,referenceId:e.id}))))))),i.chain(K.nI)),i.none),i.toUndefined(this._lastResultSelectedVoice())),this._popFollowUpPromptViews(),"home"===this._params.routingViewModel.activeView.get().kind&&this._params.routingViewModel.push({kind:"thread"})})))}_popFollowUpPromptViews(){for(;"followUpPrompt"===this._params.routingViewModel.activeView.get().kind;)this._params.routingViewModel.pop()}_regenerateWithoutReference(e,t,n){this._params.sessionService.regenerateResult(e.id,{omitReferenceIds:i.some([t])},n)}_searchReferences(e){(0,s.zG)(function(e){return(0,s.zG)(e.split(/\s/).filter((e=>e.length>3&&e.includes("."))),K.nI)}(e),ue.bw((e=>e.forEach((e=>this._params.sessionService.searchReferences(e))))))}}var Xn=n(40649),Jn=n(5165);function ei(e){return b.D(e).pipe(M.q(1)).toPromise()}var ti=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};class ni{constructor(e){this._params=e,this._sub=new I.w,this._heightBehavior=f.h.create({kind:"fitContent",maxHeight:Jn.Z3}),this._widthBehavior=f.h.create({kind:"fitContent",minWidth:Jn.wU,maxWidth:Jn.jy}),this._dragBehavior=f.h.create({kind:"notDraggable"}),this._focusState=f.h.create({isFocused:!0}),this.heightBehavior=this._heightBehavior.view(),this.widthBehavior=this._widthBehavior.view(),this.dragBehavior=this._dragBehavior.view(),this._onStart(),this._sub.add(this._params.lifecycleService.sizeBehavior.subscribe((e=>{var t;this._heightBehavior.set("fitContent"===e.heightBehavior.kind?{kind:e.heightBehavior.kind,maxHeight:null!==(t=e.heightBehavior.maxHeight)&&void 0!==t?t:Jn.Z3}:{kind:e.heightBehavior.kind}),this._widthBehavior.set(function(e){var t,n,i,r;return"fitContent"===e.widthBehavior.kind?{kind:e.widthBehavior.kind,minWidth:null!==(t=e.widthBehavior.minWidth)&&void 0!==t?t:(r=e.widthBehavior.maxWidth,null!==r&&r<Jn.wU?r:Jn.wU),maxWidth:null!==(n=e.widthBehavior.maxWidth)&&void 0!==n?n:(i=e.widthBehavior.minWidth,i&&i>Jn.jy?i:Jn.jy)}:{kind:e.widthBehavior.kind}}(e))}))),this._sub.add(this._params.lifecycleService.dragBehavior.subscribe(L.wW(this._dragBehavior))),this._sub.add(this._focusState.pipe(ce.b(100),Xn.g("isFocused")).subscribe((e=>{ei(this._params.lifecycleService.focusStateChanged(e)).catch((t=>this._params.monitoringService.notify((0,a.L)((0,l.B$)({focusState:e,rawError:(0,u.N)(t)})))))})))}_onStart(){return ti(this,void 0,void 0,(function*(){try{const e=yield ei(this._params.lifecycleService.starting());this._params.metricsService.report({name:"assistant_lifecycle_starting",labels:void 0},void 0,e)}catch(e){this._params.monitoringService.notify((0,a.L)((0,l.pA)({rawError:(0,u.N)(e)})))}}))}onMount(e){return ti(this,void 0,void 0,(function*(){try{const t=yield ei(this._params.lifecycleService.visuallyReady({content:e}));this._params.metricsService.report({name:"assistant_lifecycle_visually_ready",labels:void 0},["assistant_lifecycle_starting"],t)}catch(e){this._params.monitoringService.notify((0,a.L)((0,l.o9)({rawError:(0,u.N)(e)})))}}))}onHeaderMount(e){return ti(this,void 0,void 0,(function*(){if("draggable"===this._dragBehavior.get().kind)try{const t=yield ei(this._params.lifecycleService.readyToDrag({dragHandle:e}));this._params.metricsService.report({name:"assistant_lifecycle_ready_to_drag",labels:void 0},["assistant_lifecycle_starting"],t)}catch(e){this._params.monitoringService.notify((0,a.L)((0,l.IL)({rawError:(0,u.N)(e)})))}}))}onFocus(e){this._focusState.set({isFocused:e})}onClose(){return ti(this,void 0,void 0,(function*(){try{yield new Promise((e=>setTimeout(e))),yield this._params.lifecycleService.close()}catch(e){this._params.monitoringService.notify((0,a.L)((0,l.CN)({rawError:(0,u.N)(e)})))}}))}dispose(){this._sub.unsubscribe()}}class ii{constructor(e,t){this._initialViewStack=e,this._viewEq=t,this._viewStack=f.h.create(this._initialViewStack),this.activeView=this._viewStack.view(K.YM)}push(e){this._viewStack.modify((t=>this._viewEq.equals(e,t[0])?t:K.QI(e,t)))}pop(){this._viewStack.modify((0,s.ls)(K.pW,(([e,t])=>(0,s.zG)(K.c2(t),i.getOrElse((()=>[e]))))))}popUntil(e){this._viewStack.modify((t=>{const n=t.findIndex(e);return(0,s.zG)(n>=0?i.some(n):i.some(0),i.chain((e=>K.c2(t.slice(e)))),i.getOrElse((()=>t)))}))}replace(e){this._viewStack.modify((t=>(0,s.zG)(K.QI(e,K.Gb(t)))))}has(e){return this._viewStack.view((t=>void 0!==t.find((t=>this._viewEq.equals(t,e)))))}}var ri=n(52528);function oi(e){return e.email.endsWith("@grammarly.com")&&(0,s.zG)(e.institution,i.fold(s.jv,(e=>624392205===e.id)))}class si{constructor(e){this._params=e,this.isGrammarlyInstitutionMember=this._params.userService.user.view(oi)}}function ai(e,t){var n;const r=new g.xQ,o=new ni({lifecycleService:e.lifecycleService,monitoringService:e.monitoringService,metricsService:t.metricsService}),a=new ii(function(e){const t=e.sessionService.session.get().mode;return K.Ss(R.oA(["initialView"in e&&"toneReport"===e.initialView?i.some({kind:"toneReport"}):i.none,"pushRewrite"===t||"quickRewrite"===t?i.some({kind:"thread"}):i.none]),{kind:"home"})}(e),te.eq),l=new ri.e(null!==(n=e.theme)&&void 0!==n?n:f.h.create(v.u)),c=new x;e.sessionService.registerNotificationHandler((e=>c.notify(e)));const u=function(e){var t;return Object.assign(Object.assign({},e),{trimmedTextLength:b.D(null!==(t=e.trimmedTextLength)&&void 0!==t?t:b.D(e.textUpdated).pipe(y.e(500),k.O(null),w.w((()=>e.getText({start:0,end:Number.MAX_SAFE_INTEGER})())),C.U(i.fromEither),E.oA,C.U((e=>e.trim().length)))).pipe(S.x(),_.shareReplay({bufferSize:1,refCount:!0}))})}(e.textEditorService),d=new Yn({assistantUIActions:r,lifecycleViewModel:o,routingViewModel:a,themeViewModel:l,feedbackService:e.feedbackService,genAIAvailabilityService:e.genAIAvailabilityService,monitoringService:e.monitoringService,sessionService:e.sessionService,textEditorService:u,trackingService:e.trackingService,uphookService:e.uphookService,userService:e.userService,notificationService:c,logger:t.logger}),m=new Ln({assistantUIActions:r,trackingService:e.trackingService,sessionService:e.sessionService,routingViewModel:a,logger:t.logger}),p=new O({assistantUIActions:r,feedbackService:e.feedbackService,monitoringService:e.monitoringService,routingViewModel:a,logger:t.logger}),h=(0,s.zG)(i.fromNullable(e.toneDetectorService),i.map((t=>new se({assistantUIActions:r,toneDetectorService:t,userService:e.userService,routingViewModel:a})))),A=(0,s.zG)(i.fromNullable(e.revisionEngine),i.map(On._),i.map((e=>function(e,t,n,i){var r;const o=new I.w,s=new g.xQ,a=null!==(r=e.sduiService.supportedForms)&&void 0!==r?r:"longForm"===e.sduiService.initialForm?["longForm","shortForm"]:["shortForm","longForm"],l=Object.assign(Object.assign({},e.sduiService),{supportedForms:a,initialForm:a[0]}),c=new wn({capiService:e.capiService,sduiService:l,alertService:e.alertService,monitoringService:e.monitoringService,sduiEventTransformer:Cn}),u=new dn({capiService:e.capiService}),d=new un({sduiItemsCollection:c.state,selectedAlertId:e.alertService.selectedAlertId,initialForm:l.supportedForms[0],logger:e.logger}),m=new Dt({feedManager:d,sduiManagerProxy:c,capiService:e.capiService,alertService:e.alertService,plagiarismService:u,textEditorService:e.textEditorService,monitoringService:e.monitoringService,lifecycleService:e.lifecycleService,setEmphasizedAlerts:e=>s.next(new Set(e)),logger:e.logger}),p=null!=i?i:d.allSuggestionsFeed.pipe(E.oA,M.q(1),C.U((e=>e.id)));o.add(p.subscribe((t=>{var n;null===(n=null==e?void 0:e.logger)||void 0===n||n.info("Pushing default feed",t),d.pushFeed(t)})));const h=new Ut({feedState:d.feed,resetEmphasizedAlerts:s,alertService:e.alertService,monitoringService:e.monitoringService,logger:e.logger}),f=new In({feedManager:d,feedActionService:m,alertVisibilityManager:h}),v=new En({lastFinishedMessage:e.capiService.relevantInboundCAPIMessages.pipe(N.h(dt.JS.Finished.is))}),x=new Sn({sduiService:l,feedManager:d}),y=new _n({feedManager:d,lastFinishedMessage:e.capiService.relevantInboundCAPIMessages.pipe(N.h(dt.JS.Finished.is))}),k=new Bn({feedManager:d,sduiItemsCollection:c.state}),w=new An({plagiarismService:u,feedManager:d,feedActionService:m,routingViewModel:t,assistantUIActions:n,lastAsyncCheckFinishedMessage:e.capiService.relevantInboundCAPIMessages.pipe(N.h(dt.JS.AsyncCheckFinished.is)),textUpdated:b.D(e.textEditorService.textUpdated)});return{viewModels:{feed:f,feedLens:y,feedForm:x,checkingState:v,suggestionCount:k,plagiarism:w},dispose:()=>{o.unsubscribe(),k.dispose(),w.dispose(),u.dispose(),y.dispose(),v.dispose(),h.dispose(),m.dispose(),d.dispose(),c.dispose()}}}(e,a,r)))),B=new ae(e.sessionService.session,a.activeView,e.genAIAvailabilityService.availability,h,(0,s.zG)(A,i.map((e=>e.viewModels.plagiarism)))),T=new ut(r,B.contextualActions,B.skillActions,B.toneAction,B.plagiarismAction,e.trackingService,(()=>i.isSome(d.state.get().selectedAction)),(()=>d.focusPromptField())),U=new P(c,r,a.activeView),F=new zn({userSurveyService:e.userSurveyService,assistantUIActions:r}),z=new Mn(r,a,e.monitoringService,e.skillService);e.selectionContextAvailabilityService&&e.selectionContextAvailabilityService.augment((e=>f.h.combine(e,a.activeView,((e,t)=>X(t)?e:{contextUpdatesClient:!1,contextUpdatesServer:!1}))));const j=(0,s.zG)(i.fromNullable(e.settingsOptions),i.map((e=>new Rn({assistantUIActions:r,routingViewModel:a,options:e})))),G=new si({userService:e.userService}),L=new V({assistantUIActions:r,onboardingService:i.fromNullable(e.onboardingService)});return{lifecycle:o,assistant:d,promptActions:B,promptMenu:T,notifications:U,voiceProfile:m,feedbackForm:p,userSurvey:F,skill:z,theme:l,settings:j,revision:(0,s.zG)(A,i.map((e=>e.viewModels))),toneDetector:h,onboarding:L,routing:a,user:G,logger:t.logger,notify:t=>{var n;null===(n=e.notifyAssistantUIAction)||void 0===n||n.call(e,t),r.next(t)},dispose:()=>{(0,s.zG)(A,i.map((e=>e.dispose()))),d.dispose(),T.dispose(),U.dispose(),m.dispose(),p.dispose(),F.dispose(),z.dispose(),t.metricsService.dispose(),L.dispose(),(0,s.zG)(h,i.map((e=>e.dispose())))}}}var li=n(88392),ci=n(45578);const ui=e=>he.createElement(ye.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:Se.Green30},e),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM18.2071 9.20711C18.5976 8.81658 18.5976 8.18342 18.2071 7.79289C17.8166 7.40237 17.1834 7.40237 16.7929 7.79289L10 14.5858L8.20711 12.7929C7.81658 12.4024 7.18342 12.4024 6.79289 12.7929C6.40237 13.1834 6.40237 13.8166 6.79289 14.2071L10 17.4142L18.2071 9.20711Z",stroke:"none"})),di=e=>he.createElement(ye.a1,Object.assign({width:"24",height:"25",viewBox:"0 0 24 25",fill:"none"},e),he.createElement("path",{d:"M11.9995 11.7307V16.681M11.9995 8.41401V8.43051M20.25 12.5005C20.25 17.0571 16.5562 20.751 11.9995 20.751C7.4429 20.751 3.74902 17.0571 3.74902 12.5005C3.74902 7.94388 7.4429 4.25 11.9995 4.25C16.5562 4.25 20.25 7.94388 20.25 12.5005Z",stroke:"#7CF4D8",strokeLinecap:"round",strokeLinejoin:"round"})),mi=r.UI.Node.make((({state:e,notify:t})=>he.createElement(ve.F.div,{className:hi,"data-id":e.pipe(C.U((({id:e})=>e))),onMouseOver:t({kind:"mouseOver"}),onMouseOut:t({kind:"mouseOut"})},e.pipe(C.U((e=>{switch(e.kind){case"feedbackSubmitted":return he.createElement(he.Fragment,null,he.createElement(ui,{className:gi}),he.createElement("div",null,"Thanks for the feedback!"));case"voiceTagRemoved":return he.createElement(he.Fragment,null,he.createElement(ui,{className:gi}),he.createElement("div",null,"Removed"));case"information":return he.createElement(he.Fragment,null,he.createElement(di,{className:fi}),he.createElement("div",null,e.text));default:return(0,D.L0)(e)}}))),e.pipe(C.U((({id:e})=>he.createElement(ci.x,{name:"notificationClose",onClick:t({kind:"dismissNotification",id:e})}))))))),pi=_e.ux.keyframes({from:{transform:`translateY(${_e.ux.rem(.25)})`,opacity:0},to:{transform:"translateY(0)",opacity:1}}),hi=_e.ux.style({background:Se.BlueGray100,color:be.S5.Content.Primary.Default,borderRadius:_e.ux.rem(li.xB+li.fe),display:"flex",flexDirection:"row",alignItems:"center",padding:`${_e.ux.rem(Ee.qp)} ${_e.ux.rem(Ee.qp)}`,gap:_e.ux.rem(Ee.qp),fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),animation:`${pi} 0.1s ease-in`}),gi=_e.ux.style(Object.assign({},(0,Ie.fx)(1.5))),fi=_e.ux.style({minWidth:"auto"}),vi=r.UI.List.make(R.bw,mi),xi=r.UI.Grid.make((({slots:e})=>he.createElement("div",{className:yi},e.content))),bi=r.UI.Knot.make(xi,{content:vi}),yi=_e.ux.style({display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.x),transition:"top 0.1s ease-in"});var ki,wi=n(27995);!function(e){e.interactOutside="interactOutside",e.closeButtonClick="closeButtonClick",e.unmount="unmount",e.other="other"}(ki||(ki={}));const Ci=r.UI.Node.make((({view:e,notify:t})=>he.createElement(ve.F.Fragment,null,e("step").pipe(C.U(i.fold(s.gn,(e=>he.createElement(wi.J2,{key:String(e.stepId),"data-name":`onboarding-${String(e.stepId)}`,reference:e.reference,placement:e.placement,offset:e.offset,containerPadding:e.containerPadding,title:e.title,body:e.body,onClose:n=>t({kind:"onboardingStepUnmount",stepId:e.stepId,reason:n in ki?ki[n]:ki.other})(),onMount:t({kind:"onboardingStepMount",stepId:e.stepId})}))))))));var Ei=n(15073),Si=n(33053),_i=n(90845),Ii=n(9223),Ai=n(24435),Bi=n(33498),Oi=n(45174),Ri=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Ti="data-card",Ni=e=>{var{children:t,style:n}=e,i=Ri(e,["children","style"]);const r=he.useContext(Oi.N);return he.createElement(ve.F.article,Object.assign({[Ti]:!0,className:G.aj([r,(0,Bi.D)(n)]).pipe(C.U((([{flatUI:e},t])=>_e.ux.style(e?{display:"flex",flexDirection:"column",color:be.Il.Text.Base.Default,padding:_e.ux.rem(Ee.mh)}:{display:"flex",flexDirection:"column",padding:_e.ux.rem(Ee.qp),gap:_e.ux.rem(Ee.x),background:"transparent",border:`0.5px solid ${Se.BlueGray10}`,borderRadius:_e.ux.rem(li.xB+li.fe),backgroundColor:be.Il.Background.Base.Default,color:be.Il.Text.Base.Default},t))))},i),t)};var Mi=n(71249),Ui=n(55935),Fi=n(85089),zi=n(80334);function ji(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}var Pi=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Gi=he.createContext({scrollableContainer:f.h.create(i.none),registerIntersectionObserver:()=>({dispose:s.Q1}),scrolling:f.h.create(!1)}),Li=he.forwardRef((function(e,t){var{children:n,className:r,onScroll:o,style:s}=e,a=Pi(e,["children","className","onScroll","style"]);const l=he.useMemo((()=>f.h.create(i.none)),[]),c=he.useMemo((()=>new Map),[]),u=he.useCallback((e=>{const t=Array.from(c.entries());for(const[n,{observers:i}]of t)c.set(n,{intersectionObserver:Zi(e,n,i),observers:i})}),[c]),d=he.useCallback(((e,t,n)=>{var r,o;const s=c.get(e),a=null!==(r=null==s?void 0:s.observers)&&void 0!==r?r:new Map;a.set(t,n);const u=null!==(o=null==s?void 0:s.intersectionObserver)&&void 0!==o?o:Zi(i.toNullable(l.get()),e,a);return c.set(e,{intersectionObserver:u,observers:a}),u.observe(t),{dispose:()=>{const n=c.get(e);n&&(n.intersectionObserver.unobserve(t),n.observers.delete(t),0===n.observers.size&&(n.intersectionObserver.disconnect(),c.delete(e)))}}}),[c]);he.useEffect((()=>()=>{c.forEach((e=>{Array.from(e.observers.keys()).forEach((t=>{e.intersectionObserver.unobserve(t)})),e.observers.clear(),e.intersectionObserver.disconnect()})),c.clear()}),[]);const m=he.useMemo((()=>f.h.create(0)),[]),p=he.useMemo((()=>f.h.create(!1)),[]),h=he.useMemo((()=>L.Hl(m.pipe(Ui.T(1)),100,!0).pipe(k.O(!1),F.b(L.wW(p)))),[m,p]);_i.P.useSubscriptionTo(h);const g=he.useMemo((()=>({scrollableContainer:l,registerIntersectionObserver:d,scrolling:p})),[l,d,p]),v=he.useMemo((()=>f.h.create(i.none)),[]),x=he.useMemo((()=>f.h.create(i.none)),[]),b=he.useMemo((()=>G.aj([Hi(l,v),Hi(l,x)]).pipe(C.U((([e,t])=>({topOverflow:e,bottomOverflow:t}))),k.O({topOverflow:!1,bottomOverflow:!1}),_.skipBy(Y.MW({topOverflow:Y.vD,bottomOverflow:Y.vD})))),[v,x,l]);return he.createElement(ve.F.div,Object.assign({},a,{className:_e.ux.joinClasses([Di,r]),"data-role":"scroll",mount:ji([t,e=>{u(e),l.set(i.fromNullable(e))}]),onScroll:e=>{var t,n;null==o||o(e),m.set(null!==(n=null===(t=i.toNullable(l.get()))||void 0===t?void 0:t.scrollTop)&&void 0!==n?n:0)},style:p.view((e=>Object.assign({},s))),"data-overflow-top":b.pipe(C.U((e=>e.topOverflow))),"data-overflow-bottom":b.pipe(C.U((e=>e.bottomOverflow)))}),he.createElement(Gi.Provider,{value:g},he.createElement("div",{style:{margin:0},ref:e=>v.set(i.fromNullable(e)),"aria-hidden":!0}),n,he.createElement("div",{style:{margin:0},ref:e=>x.set(i.fromNullable(e)),"aria-hidden":!0})))})),Di=_e.ux.style({position:"relative",overflowY:"auto"});function Zi(e,t,n){return new IntersectionObserver((e=>e.forEach((e=>{var t;return null===(t=n.get(e.target))||void 0===t?void 0:t(e)}))),{root:e,rootMargin:t})}function Hi(e,t){return f.h.combine(e,t,((e,t)=>(0,s.zG)($.g(i.option)(e,t),i.map((([e,t])=>function(e,t){const n={root:e,rootMargin:"0px",threshold:[0,1]};return Fi.n(t,n).pipe(N.h(Mi.Od),C.U((e=>1!==e[0].intersectionRatio)),k.O(t.offsetHeight>e.offsetHeight))}(e,t)))))).pipe(E.oA,w.w(s.yR),zi.h(U.of(!0)))}var Vi=n(97329),$i=n(44586),Ki=n(19962);function Wi(e,t=!1){return he.useMemo((()=>e.pipe(w.w(i.fold((()=>U.of(i.none)),(e=>{return(t?(n=e,new $i.y((e=>{const t=new Vi.default((t=>{e.next(Ki.UL.fromRectLike(t[0].contentRect))}));return t.observe(n),()=>t.disconnect()}))):Fi.YC(e)).pipe(k.O(e),C.U((()=>i.some(e.getBoundingClientRect()))));var n}))))),[e])}var qi=n(12271);const Qi="primaryBtn",Yi="rephraseBtn",Xi="dismissBtn",Ji="reportBtn";var er=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const tr=e=>{var{isActive:t,children:n,onHovered:i,onFocused:r,onCopy:o,style:s}=e,a=er(e,["isActive","children","onHovered","onFocused","onCopy","style"]);const l=he.useRef(null),c=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,Object.assign({},a,{mount:l,style:c.view((e=>Object.assign(Object.assign({},ir(e)),s))),"data-active":t,onMouseEnter:()=>null==i?void 0:i(!0),onMouseLeave:()=>null==i?void 0:i(!1),onFocus:()=>{var e;return null==r?void 0:r((null===(e=l.current)||void 0===e?void 0:e.contains((0,de.vY)(document)))||!1)},onBlur:()=>{var e;return null==r?void 0:r((null===(e=l.current)||void 0===e?void 0:e.contains((0,de.vY)(document)))||!1)},onCopy:o}),n)},nr=e=>({backgroundColor:be.Il.Background.Base.Default,$nest:{[`& .${Xi}, & .${Ji}`]:e?{}:{opacity:1,pointerEvents:"auto"},[`& ${(0,Ie.s4)(Qi,Ie.Ki)}`]:e?{}:{color:be.Il.Background.Base.Default,backgroundColor:Ae.Z.BrandGreen60,border:"1px solid transparent"}}}),ir=e=>Object.assign(Object.assign({backgroundColor:"transparent"},e?{gap:_e.ux.rem(Ee.x),padding:_e.ux.rem(Ee.mh)}:{}),{$nest:{[`& ${(0,Ie.s4)(Qi,Ie.Ki)}`]:e?{fontSize:_e.ux.rem(.875)}:{lineHeight:_e.ux.rem(1.125),backgroundColor:be.Il.Background.Base.Default,color:be.Il.Text.Base.Subdued,border:`1px solid ${Se.BlueGray5}`,boxSizing:"border-box"},[`& ${(0,Ie.s4)(Yi,Ie.Ki)}`]:e?{fontSize:_e.ux.rem(.875)}:{lineHeight:_e.ux.rem(1.5)},[`& .${Xi}, & .${Ji}`]:e?{}:{opacity:0,pointerEvents:"none",justifyContent:"center"},"&:focus, &:hover":Object.assign({},nr(e)),"&[data-active='true']":Object.assign({},nr(e))}});var rr=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const or="prompt-result",sr="data-card-type",ar=e=>{var{header:t,footer:n,isActive:i,onHovered:r,onFocused:o,onCopy:s,body:a,style:l}=e,c=rr(e,["header","footer","isActive","onHovered","onFocused","onCopy","body","style"]);return he.createElement(tr,Object.assign({},c,{[sr]:or,isActive:i,onHovered:r,onFocused:o,style:l,onCopy:s}),t,a,n)};var lr=n(13713);const cr=(0,fe.xb)(Li),ur=e=>{var t;const n=he.useContext(Oi.N),r=he.useMemo((()=>{var t;return null!==(t=e.menuRef)&&void 0!==t?t:U.of(i.none)}),[e.menuRef]),o=he.useMemo((()=>{var t;return null!==(t=e.scrollContentToBottomToken)&&void 0!==t?t:U.of(i.none)}),[e.scrollContentToBottomToken]),{onMount:a,ref:l}=_i.P.useElWatcher(),{onMount:c,ref:u}=_i.P.useElWatcher();!function(e,t){const n=he.useMemo((()=>G.aj([t.pipe(E.oA,C.U((e=>i.fromNullable((0,de.$Q)(e,3)))),E.oA),e.pipe(_.skipBy(i.getEq(Y.w4)))]).pipe(y.e(0),C.U(qi.li),F.b((e=>{e.scrollTop=e.scrollHeight-e.clientHeight})))),[t]);_i.P.useSubscriptionTo(n)}(o,u);const d=Wi(l),m=Wi(r),p=he.useMemo((()=>f.h.create(!1)),[]),h=he.useMemo((()=>u.pipe(C.U(i.fold((()=>{p.set(!1)}),(e=>{p.set(e.scrollTop>0)}))))),[u]),g=he.useMemo((()=>{var t;return G.aj([m,d,e.heightBehavior,null!==(t=e.menuVerticalMargin)&&void 0!==t?t:U.of(void 0)]).pipe(C.U((([e,t,n,r])=>(0,s.zG)(e,i.fold((()=>({sentinelHeight:void 0,menuMaxHeight:void 0})),(e=>{if("fitContent"===n.kind){const t=e.height+(null!=r?r:0);return{sentinelHeight:Math.min(n.maxHeight,t),menuMaxHeight:n.maxHeight-(null!=r?r:0)}}return{sentinelHeight:void 0,menuMaxHeight:(0,s.zG)(t,i.fold(s.r5,(e=>Math.max(e.height-(null!=r?r:0),0))))}}))))),k.O({sentinelHeight:void 0,menuMaxHeight:void 0}))}),[m,d]),v=he.useMemo((()=>r.pipe(E.cp((e=>g.pipe(F.b((({menuMaxHeight:t})=>{e.style.setProperty("max-height",`${t}px`)}))))))),[g,r]);return _i.P.useSubscriptionTo(h),_i.P.useSubscriptionTo(g),_i.P.useSubscriptionTo(v),he.createElement(lr.l.Provider,{value:{portalContainer:l}},he.createElement(ve.F.div,{dir:"ltr","data-name":"assistant","data-dragging":e.dragBehavior.pipe(C.U((e=>"draggable"===e.kind&&e.isDragging))),tabIndex:0,onFocus:e.onFocus,onBlur:e.onBlur,className:n.view("flatUI").view((t=>_e.ux.joinClasses([hr(t),e.containerClassName]))),style:G.aj([e.heightBehavior,e.widthBehavior]).pipe(C.U((([e,t])=>Object.assign(Object.assign({},"fitContainer"===e.kind?{height:"100%"}:{maxHeight:e.maxHeight}),"fitContainer"===t.kind?{width:"100%"}:{minWidth:t.minWidth,maxWidth:t.maxWidth})))),mount:t=>{var n;a(t),null===(n=e.onMountContainer)||void 0===n||n.call(e,t)}},he.createElement(ve.F.header,{className:G.aj([p,e.dragBehavior,n.view("flatUI")]).pipe(C.U((([e,t,n])=>vr(n,e,"draggable"===t.kind)))),mount:e.onMountHeader},e.header),he.createElement("div",{className:br,"data-name":"notifications"},he.createElement(ve.F.div,{className:p.view((0,z.RN)(wr,kr))},e.notifications)),he.createElement(cr,{mount:c,className:n.view("flatUI").view((t=>_e.ux.joinClasses([xr(t),e.contentClassName]))),onScroll:e=>p.set(e.currentTarget.scrollTop>0),style:(null!==(t=e.canScrollContent)&&void 0!==t?t:U.of(!0)).pipe(C.U((0,z.RN)("auto","hidden")),C.U((e=>({overflowY:e})))),role:"main"},e.content),he.createElement(ve.F.footer,{className:n.view("flatUI").view((t=>_e.ux.joinClasses([Er(t),e.footerClassName])))},e.footer),he.createElement(ve.F.Fragment,null,g.pipe(C.U((({sentinelHeight:e})=>e?he.createElement("div",{key:"sentinel",className:Sr,role:"presentation",style:{height:e}}):null)))),e.onboarding))},dr="header",mr="content",pr="#FCFCFC",hr=e=>_e.ux.style({overflow:"hidden",fontFamily:"Inter, sans-serif",padding:0,margin:0,borderRadius:"inherit",display:"grid",gridTemplateColumns:"1fr 0",gridTemplateRows:"auto 0 1fr auto",gridTemplateAreas:'"header sentinel" "notifications sentinel" "content sentinel" "footer sentinel"',background:e?be.Il.Background.Base.Default:"linear-gradient(180deg, #FCFCFC 0%, #FCFCFC 100%)",$nest:{[`&:has(.${dr} [role=button][data-hovered=true])`]:e?{$nest:{[`.${dr}`]:{background:"inherit"}}}:void 0,"&[data-dragging='true']":{cursor:"grabbing",$nest:{[`.${mr}`]:{pointerEvents:"none"},[`.${dr}`]:{pointerEvents:"none",background:e?Ae.Z.ButtonBackgroundTertiaryActive:void 0}}}}}),gr={minWidth:0},fr=e=>e?3:2.5,vr=(e,t,n)=>_e.ux.joinClasses([dr,_e.ux.style(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},gr),{gridArea:"header",display:"flex",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",height:_e.ux.rem(fr(e)),gap:_e.ux.rem(Ee.x),padding:`0 ${_e.ux.rem(Ee.x)} 0 ${_e.ux.rem(e?Ee.mh:Ee.x)}`,boxSizing:"border-box"}),t&&!e?{borderBottom:`0.5px solid ${Se.BlueGray10}`}:{}),e?{clipPath:t?"inset(0 0 -5px 0)":void 0,boxShadow:t?Si.H8.boxShadow:void 0,borderBottom:t?Si.H8.border:`0.5px solid ${Ae.Z.BorderBaseSubduedColor}`,zIndex:t?1:void 0}:{}),{cursor:n?"grab":void 0,position:"relative","--grammarly-app-region":"drag",$nest:{button:{"--grammarly-app-region":"no-drag"},"&:hover":{background:e&&n?Ae.Z.ButtonBackgroundTertiaryHover:void 0}}}))]),xr=e=>_e.ux.joinClasses([mr,_e.ux.style(Object.assign(Object.assign(Object.assign({},gr),{gridArea:"content"}),e?{$nest:{"& [data-card] + [data-card]":{borderTop:`0.5px solid ${Ae.Z.BorderBaseSubduedColor}`},'& [data-card-type="prompt-result"] + [data-card-type="prompt-result"]':{borderTop:0,position:"relative",$nest:{"&::before":{content:"''",position:"absolute",top:0,left:_e.ux.rem(1),right:_e.ux.rem(1),borderTop:`0.5px solid ${Ae.Z.BorderBaseSubduedColor}`}}}}}:{display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.x),padding:`0 ${_e.ux.rem(Ee.x)}`}))]),br=_e.ux.style({position:"relative",gridArea:"notifications"}),yr={zIndex:1e3,position:"absolute",right:_e.ux.rem(Ee.x),marginLeft:_e.ux.rem(Ee.x)},kr=_e.ux.style(Object.assign(Object.assign({},yr),{top:0})),wr=_e.ux.style(Object.assign(Object.assign({},yr),{top:_e.ux.rem(Ee.F2)})),Cr=Ee.x,Er=e=>_e.ux.style(Object.assign(Object.assign(Object.assign({},gr),{gridArea:"footer",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"}),e?{}:{paddingBottom:_e.ux.rem(Cr)})),Sr=_e.ux.style({gridArea:"sentinel",visibility:"hidden"}),_r=he.createContext({notifyUnmount:s.Q1}),Ir=e=>he.createElement(ye.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:Ae.Z.BrandGreen60},e),he.createElement("path",{d:"M17.1056 9.44721L0.992696 17.5037C0.607324 17.6963 0.174955 17.3439 0.285972 16.9276L1.83393 11.1228C1.93505 10.7436 2.24864 10.4586 2.63576 10.394L9.52041 9.2466C9.79894 9.20018 9.79894 8.79982 9.52041 8.7534L2.63576 7.60596C2.24864 7.54144 1.93505 7.25644 1.83393 6.87723L0.285971 1.07239C0.174955 0.656082 0.607322 0.303661 0.992694 0.496347L17.1056 8.55279C17.4741 8.73705 17.4741 9.26295 17.1056 9.44721Z",stroke:"none"})),Ar=e=>he.createElement(ye.a1,Object.assign({width:"32",height:"32",fill:be.Il.Text.Base.Subdued,viewBox:"0 0 32 32"},e),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 16a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11-3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",stroke:"none"}));var Br=n(31542),Or=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Rr="#161719",Tr="#646B81",Nr=e=>{var{children:t,style:n,name:r}=e,o=Or(e,["children","style","name"]);const[s,a]=he.useState(null),l=he.useCallback((e=>{var t,n;let i=null;"contentDocument"in e.target&&(i=null!==(n=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==n?n:null),a(i),i&&(i.style.margin="0",i.style.height="100vh",i.style.overflowY="hidden")}),[]),c=he.useContext(Ei.u.Context);return he.useEffect((()=>{const e=c.subscribe((e=>{s&&Ei.u.setRootCssVar(s,i.some(e))}));return()=>e.unsubscribe()}),[s]),he.createElement(he.Fragment,null,he.createElement("iframe",Object.assign({},o,{style:Object.assign({},n),onLoad:l,srcDoc:"<html><body></body></html>","data-name":r})),s&&(0,Br.createPortal)(t,s))},Mr=1.375,Ur=({fitContentHeight:e,text:t,ariaLabel:n,onChange:i,placeholder:r,disabled:o,className:s,onFocus:a,onBlur:l,onKeyDownEnter:c,autofocus:u,onKeyDownArrowUp:d,onKeyDownArrowDown:m,onKeyDownShiftEnter:p,theme:h})=>{var g,f,v,x,b,y,k,w,C,E,S,_,I,A,B,O,R,T,N,M,U,F,z,j,P,G,L,D,Z,H,V;const $=Mr*(r?r.length:1)+(null!==(f=null===(g=null==h?void 0:h.paddingRems)||void 0===g?void 0:g.top)&&void 0!==f?f:0)+(null!==(x=null===(v=null==h?void 0:h.paddingRems)||void 0===v?void 0:v.bottom)&&void 0!==x?x:0),[K,W]=he.useState({kind:"rem",value:$}),[q,Q]=he.useState(null);return he.useEffect((()=>{q&&void 0!==u&&(q.focus(),q.selectionStart=t.length,q.selectionEnd=t.length)}),[u,q]),he.useLayoutEffect((()=>{if(""===t)W({kind:"rem",value:$});else{const e=null==q?void 0:q.scrollHeight;W(e?{kind:"px",value:e}:{kind:"rem",value:$})}}),[t,q,r]),he.createElement(Nr,{className:s,style:{height:e?"rem"===K.kind?_e.ux.rem(K.value):_e.ux.px(K.value):void 0,maxHeight:(null==h?void 0:h.maxHeightRems)?_e.ux.rem(h.maxHeightRems):"none",minHeight:(null==h?void 0:h.minHeightRems)?_e.ux.rem(h.minHeightRems):"none"},title:`${n} container`,name:"textarea-iframe"},he.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n      .textarea {\n        box-sizing: border-box;\n        border-radius: ${_e.ux.rem(li.xB)};\n        overflow-y: auto;\n        padding: ${_e.ux.rem(null!==(y=null===(b=null==h?void 0:h.paddingRems)||void 0===b?void 0:b.top)&&void 0!==y?y:0)} ${_e.ux.rem(null!==(w=null===(k=null==h?void 0:h.paddingRems)||void 0===k?void 0:k.right)&&void 0!==w?w:0)} ${_e.ux.rem(null!==(E=null===(C=null==h?void 0:h.paddingRems)||void 0===C?void 0:C.bottom)&&void 0!==E?E:0)} ${_e.ux.rem(null!==(_=null===(S=null==h?void 0:h.paddingRems)||void 0===S?void 0:S.left)&&void 0!==_?_:0)};\n        width: 100%;\n        height: 100%;\n        border: none;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${null!==(I=null==h?void 0:h.fontSize)&&void 0!==I?I:_e.ux.rem(.875)};\n        font-weight: 400;\n        color: ${null!==(A=null==h?void 0:h.color)&&void 0!==A?A:Rr};\n      }\n      .textarea::placeholder {\n        color: ${Tr};\n      }\n      .textarea:placeholder-shown {\n        padding: ${(null==h?void 0:h.placeholderPaddingRems)?`${_e.ux.rem(null!==(O=null===(B=h.placeholderPaddingRems)||void 0===B?void 0:B.top)&&void 0!==O?O:0)} ${_e.ux.rem(null!==(T=null===(R=h.placeholderPaddingRems)||void 0===R?void 0:R.right)&&void 0!==T?T:0)} ${_e.ux.rem(null!==(M=null===(N=h.placeholderPaddingRems)||void 0===N?void 0:N.bottom)&&void 0!==M?M:0)} ${_e.ux.rem(null!==(F=null===(U=h.placeholderPaddingRems)||void 0===U?void 0:U.left)&&void 0!==F?F:0)}`:`${_e.ux.rem(null!==(j=null===(z=null==h?void 0:h.paddingRems)||void 0===z?void 0:z.top)&&void 0!==j?j:0)} ${_e.ux.rem(null!==(G=null===(P=null==h?void 0:h.paddingRems)||void 0===P?void 0:P.right)&&void 0!==G?G:0)} ${_e.ux.rem(null!==(D=null===(L=null==h?void 0:h.paddingRems)||void 0===L?void 0:L.bottom)&&void 0!==D?D:0)} ${_e.ux.rem(null!==(H=null===(Z=null==h?void 0:h.paddingRems)||void 0===Z?void 0:Z.left)&&void 0!==H?H:0)}`};\n      }\n      .textarea:focus {\n        outline: none;\n      }\n      .placeholder {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        background: transparent;\n        font-family: Inter, sans-serif;\n        font-size: ${_e.ux.rem(.875)};\n        font-weight: 400;\n        z-index: -1;\n        color: ${Tr};\n      }\n      `.replace(/\s/g,"")}}),he.createElement("div",{className:"container"},he.createElement("textarea",{"aria-label":n,className:"textarea",style:{lineHeight:null!==(V=null==h?void 0:h.lineHeight)&&void 0!==V?V:_e.ux.rem(Mr)},value:t,ref:Q,onChange:e=>i(e.target.value),placeholder:1===(null==r?void 0:r.length)?r[0]:void 0,disabled:o,onFocus:()=>null==a?void 0:a(),onBlur:()=>null==l?void 0:l(),onKeyDown:e=>{var t;c&&"Enter"===e.key&&!e.shiftKey?(e.preventDefault(),e.stopPropagation(),c()):"ArrowUp"===e.key&&d&&(Fr(t=e.currentTarget)&&0===t.selectionStart)?(e.preventDefault(),e.stopPropagation(),d()):"ArrowDown"===e.key&&m&&function(e){return Fr(e)&&e.selectionStart===e.value.length}(e.currentTarget)?(e.preventDefault(),e.stopPropagation(),m()):"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),e.stopPropagation(),null==p||p())}}),((null==r?void 0:r.length)||0)>1&&""===t?he.createElement("div",{className:"placeholder",style:{lineHeight:_e.ux.rem(Mr)}},(r||[]).map(((e,t)=>he.createElement(he.Fragment,{key:t},e,he.createElement("br",null))))):null))};function Fr(e){return e.selectionStart===e.selectionEnd}const zr="goBtn",jr="stopBtn",Pr={top:Ee.x,right:3.5*Ee.qp,bottom:Ee.x,left:Ee.qp},Gr={top:Ee.x,right:Ee.qp,bottom:Ee.x,left:Ee.qp},Lr=_e.ux.style({display:"flex",position:"relative",alignItems:"flex-start",padding:0,gap:_e.ux.rem(Ee.F2),justifyContent:"space-between"}),Dr=_e.ux.style({flexGrow:1,paddingTop:_e.ux.rem(Ee.F2+Ee.W9)}),Zr=_e.ux.style({width:_e.ux.percent(100),border:"none"}),Hr={position:"absolute",bottom:_e.ux.rem(Ee.x),right:_e.ux.rem(Ee.qp)},Vr=(0,Ie.dD)(Hr,jr),$r=(0,Ie.dD)(Object.assign(Object.assign({},Hr),{$nest:{"&[data-disabled='true']":{opacity:1,$nest:{"& svg":{fill:Se.BlueGray30}}}}}),zr),Kr=_e.ux.joinClasses([zr,_e.ux.style($r)]),Wr=_e.ux.joinClasses([jr,_e.ux.style(Vr)]),qr=r.UI.Node.make((({state:e,notify:t})=>{const{notifyUnmount:n}=he.useContext(_r),{onMount:r}=(0,Ai.F)((0,s.ls)(F.b((e=>t({kind:A.i.Kind.mount,name:Z.e.promptInput,element:e})())),Ii.x((()=>n({kind:A.i.Kind.unmount,name:Z.e.promptInput}))))),o=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.div,{className:Lr,mount:r},he.createElement(ve.F.div,{className:Dr},e.pipe(C.U((({placeholder:e,kind:n,text:r,autofocusToken:a,genAIAvailability:l})=>he.createElement(Ur,{text:r,theme:{paddingRems:Pr,placeholderPaddingRems:Gr,maxHeightRems:20,minHeightRems:2},ariaLabel:"custom prompt",className:Zr,placeholder:"ready"===n?i.toUndefined(e):void 0,fitContentHeight:!0,autofocus:a,onChange:e=>t({kind:A.i.Kind.promptFieldTextChange,text:e})(),onKeyDownEnter:"ready"!==n||q._.isUnavailable(l)?s.Q1:t({kind:A.i.Kind.promptFieldKeyPressEnter,text:r}),onFocus:t({kind:A.i.Kind.promptFieldFocusChange,focused:!0}),onBlur:t({kind:A.i.Kind.promptFieldFocusChange,focused:!1}),onKeyDownArrowUp:t({kind:A.i.Kind.promptFieldKeyPressArrowUp}),onKeyDownArrowDown:t({kind:A.i.Kind.promptFieldKeyPressArrowDown}),disabled:!o&&q._.isUnavailable(l)}))))),G.aj([e,o]).pipe(C.U((([{kind:e,text:n,genAIAvailability:i},r])=>q._.isUnavailable(i)&&r?null:"waitingForResult"===e?he.createElement(xe.z,{variant:"tertiary",className:Wr,onClick:t({kind:A.i.Kind.generateStopButtonClick}),name:"generateStop",compact:!0,size:"large"},he.createElement(Ar,null)):"ready"===e&&(!r||r&&""!==n.trim())?he.createElement(xe.z,{variant:"tertiary",className:Kr,onClick:t({kind:A.i.Kind.promptSubmitButtonClick,text:n}),disabled:""===n.trim()||q._.isUnavailable(i),name:"promptSend",compact:!0,size:"large"},he.createElement(Ir,null)):null))))})),Qr=()=>he.createElement("div",{role:"separator",className:_e.ux.style({position:"relative",width:"100%"})},he.createElement("div",{className:_e.ux.style({position:"absolute",bottom:0,left:_e.ux.rem(rt),right:_e.ux.rem(ot),borderBottom:`0.5px solid ${Ae.Z.BorderBaseSubduedColor}`})})),Yr=r.UI.Node.make((({view:e,notify:t})=>he.createElement(ve.F.div,{className:Xr,"data-name":"action-store"},e("actionGroups").pipe(C.U((e=>e.map((({label:e,actions:n})=>he.createElement("section",{key:e,className:Jr},e.trim().length>0&&he.createElement("h1",{className:eo},e),n.map((({label:e,icon:n,action:i},r)=>he.createElement(he.Fragment,{key:e},0!==r&&he.createElement(Qr,null),he.createElement(Je,{key:e,label:e,icon:"regularAction"===i.kind?W.aU.extractActionIcon(i.action):ge.right(n),onClick:t({kind:A.i.Kind.actionBrickClick,action:i})}))))))))))))),Xr=_e.ux.style({padding:`${_e.ux.rem(2.25)} 0 ${_e.ux.rem(1)} 0`,display:"flex",flexDirection:"column"}),Jr=_e.ux.style({display:"flex",flexDirection:"column"}),eo=_e.ux.style({margin:0,fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),fontWeight:700,padding:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.mh)}`}),to=({children:e,style:t})=>{const n=he.useContext(Oi.N);return he.createElement(ve.F.h1,{className:G.aj([n,(0,Bi.D)(t)]).pipe(C.U((([{flatUI:e},t])=>_e.ux.style(e?{color:be.Il.Text.Base.Default,margin:0,padding:`0 0 ${_e.ux.rem(Ee.x)} 0`,fontWeight:700,fontSize:_e.ux.rem(1),lineHeight:_e.ux.rem(1.5),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}:{color:be.Il.Text.Base.Subdued,margin:0,fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},t))))},e)},no=e=>he.createElement(ye.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15"},e),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 0.5C3.67157 0.5 3 1.17157 3 2V3H0.5C0.223858 3 0 3.22386 0 3.5C0 3.77614 0.223858 4 0.5 4H1.04536L1.82983 12.237C1.95203 13.5201 3.02968 14.5 4.31857 14.5H7.68143C8.97032 14.5 10.048 13.5201 10.1702 12.237L10.9546 4H11.5C11.7761 4 12 3.77614 12 3.5C12 3.22386 11.7761 3 11.5 3H9V2C9 1.17157 8.32843 0.5 7.5 0.5H4.5ZM8 3V2C8 1.72386 7.77614 1.5 7.5 1.5H4.5C4.22386 1.5 4 1.72386 4 2V3H8ZM2.04988 4H9.95012L9.17467 12.1422C9.10135 12.9121 8.45476 13.5 7.68143 13.5H4.31857C3.54524 13.5 2.89865 12.9121 2.82533 12.1422L2.04988 4Z",stroke:"none"})),io=({style:e,contentStyle:t,children:n,header:i,onMount:r})=>{const o=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.section,{className:o.view((t=>_e.ux.style(ro(t),e))),"data-name":"action-category",mount:r},i,he.createElement("div",{className:_e.ux.style(oo,t)},n))},ro=e=>({background:"white",display:"flex",flexDirection:"column",gap:e?void 0:_e.ux.rem(Ee.x)}),oo={display:"flex",flexDirection:"row",flexWrap:"wrap",gap:_e.ux.rem(Ee.x)},so=r.UI.List.make(R.bw,Qe);var ao=n(55721);function lo(e,t=0){const n=function(e){return e.trim().replace(/\s+/g," ")}(e).split(" ").reduce(((e,n,i,r)=>Object.assign(Object.assign({},e),{head:i<r.length-t?e.head.concat(n):e.head,tail:i>=r.length-t?e.tail.concat(n):e.tail})),{head:[],tail:[]});return{head:n.head.join(" "),tail:n.tail.join(" ")}}const co=({children:e,maxTailWordsCount:t=0})=>{const n=lo(e,t);return he.createElement("div",{className:mo},he.createElement("span",{className:po},n.head,n.head.length&&n.tail.length?"":null),n.tail.length?n.tail:null)},uo=({children:e,maxTailWordsCount:t=0})=>{const[n,i]=he.useState(t),{onMount:r,rect:o}=_i.P.useRectWatcher(),s=he.useRef(null),a=he.useMemo((()=>lo(e,n)),[n,e]),l=he.useMemo((()=>new g.xQ),[]);_i.P.useSubscriptionTo(he.useMemo((()=>l.pipe(ao.p(100),S.x(),F.b((e=>{i(e)})))),[]));const c=he.useMemo((()=>{return e=s.current,parseInt((null===(i=null===(n=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView)||void 0===n?void 0:n.getComputedStyle(e))||void 0===i?void 0:i.fontSize)||(null===(o=null===(r=null==e?void 0:e.ownerDocument)||void 0===r?void 0:r.defaultView)||void 0===o?void 0:o.getComputedStyle(e.ownerDocument.body).fontSize)||ho,10);var e,t,n,i,r,o}),[s.current]);return _i.P.useSubscriptionTo(he.useMemo((()=>o.pipe(E.oA,S.x(),N.h((e=>Boolean(e.width&&e.height))),F.b((e=>{if(e.width<9*c)l.next(0);else if(s.current&&s.current.clientWidth<s.current.scrollWidth){const i=s.current.clientWidth/(e.width||1/0);n&&i<.4?l.next(n-1):i>.6&&n<t&&l.next(n+1)}})))),[o])),he.createElement("div",{className:mo,ref:r},he.createElement("span",{className:po,ref:s},a.head,a.head.length&&a.tail.length?"":null),a.tail.length?a.tail:null)},mo=_e.ux.style({display:"flex",flexDirection:"row",whiteSpace:"nowrap",maxWidth:"100%",minWidth:0}),po=_e.ux.style({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",flexShrink:10}),ho="16px";const go=(0,fe.xb)((({dynamic:e=!1,maxTailWordsCount:t=0,children:n})=>e?he.createElement(uo,{maxTailWordsCount:t},n):he.createElement(co,{maxTailWordsCount:t},n))),fo=({active:e,className:t,prefix:n,style:i,children:r})=>he.createElement("h1",{className:_e.ux.joinClasses([bo(void 0!==n,i),t])},e?he.createElement("svg",{viewBox:"0 0 16 16",fill:"none",className:xo,"aria-hidden":"true"},he.createElement("rect",{width:"16",height:"16",rx:"5",fill:"#018374"}),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 13.5C9.5 13.7761 9.72386 14 10 14H11C12.6569 14 14 12.6569 14 11V10C14 9.72386 13.7761 9.5 13.5 9.5C13.2239 9.5 13 9.72386 13 10V11C13 12.1046 12.1046 13 11 13H10C9.72386 13 9.5 13.2239 9.5 13.5ZM9.5 2.5C9.5 2.77614 9.72386 3 10 3H11C12.1046 3 13 3.89543 13 5V6C13 6.27614 13.2239 6.5 13.5 6.5C13.7761 6.5 14 6.27614 14 6V5C14 3.34315 12.6569 2 11 2H10C9.72386 2 9.5 2.22386 9.5 2.5ZM6 2C6.27614 2 6.5 2.22386 6.5 2.5C6.5 2.77614 6.27614 3 6 3H5C3.89543 3 3 3.89543 3 5V6C3 6.27614 2.77614 6.5 2.5 6.5C2.22386 6.5 2 6.27614 2 6V5C2 3.34315 3.34315 2 5 2H6ZM6 13C6.27614 13 6.5 13.2239 6.5 13.5C6.5 13.7761 6.27614 14 6 14H5C3.34315 14 2 12.6569 2 11V10C2 9.72386 2.22386 9.5 2.5 9.5C2.77614 9.5 3 9.72386 3 10V11C3 12.1046 3.89543 13 5 13H6ZM5.5 6.5C5.5 6.22386 5.72386 6 6 6H10C10.2761 6 10.5 6.22386 10.5 6.5C10.5 6.77614 10.2761 7 10 7H6C5.72386 7 5.5 6.77614 5.5 6.5ZM6 9C5.72386 9 5.5 9.22386 5.5 9.5C5.5 9.77614 5.72386 10 6 10H8.5C8.77614 10 9 9.77614 9 9.5C9 9.22386 8.77614 9 8.5 9H6Z",fill:"white"})):he.createElement("svg",{viewBox:"0 0 16 16",fill:"none",className:xo,"aria-hidden":"true"},he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 13.5C9.5 13.7761 9.72386 14 10 14H11C12.6569 14 14 12.6569 14 11V10C14 9.72386 13.7761 9.5 13.5 9.5C13.2239 9.5 13 9.72386 13 10V11C13 12.1046 12.1046 13 11 13H10C9.72386 13 9.5 13.2239 9.5 13.5ZM9.5 2.5C9.5 2.77614 9.72386 3 10 3H11C12.1046 3 13 3.89543 13 5V6C13 6.27614 13.2239 6.5 13.5 6.5C13.7761 6.5 14 6.27614 14 6V5C14 3.34315 12.6569 2 11 2H10C9.72386 2 9.5 2.22386 9.5 2.5ZM6 2C6.27614 2 6.5 2.22386 6.5 2.5C6.5 2.77614 6.27614 3 6 3H5C3.89543 3 3 3.89543 3 5V6C3 6.27614 2.77614 6.5 2.5 6.5C2.22386 6.5 2 6.27614 2 6V5C2 3.34315 3.34315 2 5 2H6ZM6 13C6.27614 13 6.5 13.2239 6.5 13.5C6.5 13.7761 6.27614 14 6 14H5C3.34315 14 2 12.6569 2 11V10C2 9.72386 2.22386 9.5 2.5 9.5C2.77614 9.5 3 9.72386 3 10V11C3 12.1046 3.89543 13 5 13H6ZM5.5 6.5C5.5 6.22386 5.72386 6 6 6H10C10.2761 6 10.5 6.22386 10.5 6.5C10.5 6.77614 10.2761 7 10 7H6C5.72386 7 5.5 6.77614 5.5 6.5ZM6 9C5.72386 9 5.5 9.22386 5.5 9.5C5.5 9.77614 5.72386 10 6 10H8.5C8.77614 10 9 9.77614 9 9.5C9 9.22386 8.77614 9 8.5 9H6Z",fill:"#646B81"})),n&&he.createElement("span",{className:vo},n),he.createElement(go,{dynamic:!0,maxTailWordsCount:3},r)),vo=_e.ux.style({fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),color:Ae.Z.BrandGreen60}),xo=_e.ux.style({width:_e.ux.rem(1),height:_e.ux.rem(1)}),bo=(e,t)=>_e.ux.style(Object.assign({display:"grid",gridTemplateColumns:`${_e.ux.rem(1)} ${e?"min-content ":""}auto`,justifyItems:"start",alignItems:"center",gap:_e.ux.rem(Ee.x),color:be.Il.Text.Base.Subdued,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontWeight:"normal",margin:0,height:_e.ux.rem(1.5)},t)),yo=r.UI.Grid.make((({slots:e,state:t,view:n,notify:i})=>{const r=he.useContext(Oi.N).view("flatUI"),{notifyUnmount:o}=he.useContext(_r),a=he.useRef(null),{onMount:l}=(0,Ai.F)((0,s.ls)(ie.M(n("groupId")),F.b((([e,t])=>{t===W.aU.knownGroup.tools&&(a.current=t,i({kind:A.i.Kind.mount,name:Z.e.appActionsList,element:e})())})),Ii.x((()=>{a.current===W.aU.knownGroup.tools&&o({kind:A.i.Kind.unmount,name:Z.e.appActionsList})}))));return he.createElement(ve.F.Fragment,null,G.aj([t,r]).pipe(C.U((([{label:t,view:n},i])=>n===W.aU.Store.View.normal?he.createElement(io,{header:e.header,style:i?void 0:_o,key:t,onMount:l},e.actions):n===W.aU.Store.View.pinned?he.createElement(io,{style:i?Ro:Oo,key:t,onMount:l},e.actions):(0,D.L0)(n)))))})),ko=r.UI.Node.make((({view:e})=>he.createElement(to,null,e("label")))),wo=r.UI.Node.make((({view:e,notify:t})=>{const n=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.div,{className:n.view(Io)},he.createElement(fo,{active:!0},e("label")),he.createElement(xe.z,{variant:"tertiary",onClick:t({kind:A.i.Kind.removeSelectionContextClick}),compact:!0,size:"small",name:"removeContext",title:"Delete"},he.createElement(no,{className:Bo})))})),Co=r.UI.Union.make("kind",{default:ko,withSelectionContext:wo}),Eo=r.UI.Knot.make(yo,{actions:so,header:Co}),So=r.UI.List.make(R.bw,Eo),_o={background:"transparent",padding:`${_e.ux.rem(Ee.x)} 0`},Io=e=>_e.ux.style({display:"flex",alignItems:"center",alignContent:"center",justifyContent:"space-between",gap:_e.ux.rem(Ee.x),marginBottom:e?_e.ux.rem(Ee.x):void 0}),Ao="ignoreIcon",Bo=_e.ux.joinClasses([Ao,_e.ux.style((0,Ie.dD)((0,Ie.fx)(1.5),Ao))]),Oo=Object.assign(Object.assign({},_o),{padding:`${_e.ux.rem(Ee.x)} 0`,marginTop:_e.ux.rem(-Ee.x),borderTop:`1px solid ${Se.NeutralGray0}`}),Ro={paddingTop:_e.ux.rem(Ee.x),borderTop:`1px solid ${Se.NeutralGray0}`},To=r.UI.Grid.make((({slots:e})=>he.createElement(ve.F.div,{className:Mo,"data-name":"action-store"},e.content))),No=r.UI.Union.asOption(r.UI.Composite.make(To,(0,s.zG)(So,r.UI.patch("header")((()=>ko))))),Mo=_e.ux.style({padding:`${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.qp)}`,display:"flex",flexDirection:"column"}),Uo=r.UI.List.make(R.bw,Qe),Fo=r.UI.Grid.make((({slots:e})=>he.createElement("div",{className:jo},e.customPromptGo,he.createElement("div",{className:Po},e.searchResults)))),zo=r.UI.Knot.make(Fo,{searchResults:Uo,customPromptGo:Qe}),jo=_e.ux.style({background:"transparent",padding:_e.ux.rem(Ee.qp),display:"flex",flexDirection:"column",alignItems:"flex-start",gap:_e.ux.rem(Ee.x)}),Po=_e.ux.style({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:_e.ux.rem(Ee.x)}),Go=r.UI.Grid.make((({slots:e,view:t,notify:n})=>he.createElement(ve.F.div,{className:Zo,"data-name":"search-results"},e.goAction,he.createElement(ve.F.div,{className:Vo},t("actions").pipe(C.U((e=>e.map((({label:e,icon:t,action:i},r)=>he.createElement(he.Fragment,{key:e},0!==r&&he.createElement(Qr,null),he.createElement(Je,{key:e,label:e,icon:"regularAction"===i.kind?W.aU.extractActionIcon(i.action):ge.right(t),onClick:n({kind:A.i.Kind.actionBrickClick,action:i})}))))))))))),Lo=r.UI.Union.asOption(r.UI.Composite.make(r.UI.Grid.make((({slots:e})=>he.createElement("div",{className:Ho},e.action))),Qe)),Do=r.UI.Knot.make(Go,{goAction:Lo}),Zo=_e.ux.style({background:"transparent",display:"flex",flexDirection:"column",alignItems:"flex-start"}),Ho=_e.ux.style({padding:`${_e.ux.rem(9*Ee.W9)} ${_e.ux.rem(Ee.qp)} 0 ${_e.ux.rem(Ee.qp)}`}),Vo=_e.ux.style({display:"flex",flexDirection:"column",width:"100%",marginTop:_e.ux.rem(7*Ee.W9)}),$o=r.UI.Union.make("kind",{none:r.UI.Node.empty,searchResults:Do,actionStore:Yr,legacySearchResults:zo,legacyActionStore:No}),Ko=r.UI.Knot.make(r.UI.Grid.make((({slots:e,notify:t})=>he.createElement(ve.F.div,{className:qo},he.createElement(xe.z,{variant:"tertiary",compact:!0,style:Qo,onClick:t({kind:A.i.Kind.collapsePromptMenuButtonClick}),name:"collapsePromptMenu",size:"small"},he.createElement(ye.JO.Arrow,{direction:ye.n4.down})),he.createElement("div",{ref:e=>e&&t({kind:A.i.Kind.mount,name:Z.e.promptMenuContent,element:e})(),onKeyDown:e=>{"ArrowDown"===e.key?t({kind:A.i.Kind.promptMenuKeyPressArrowDown})():"ArrowUp"===e.key&&t({kind:A.i.Kind.promptMenuKeyPressArrowUp})()}},e.content)))),{content:$o}),Wo=r.UI.Union.asOption(Ko),qo=_e.ux.style({overflowY:"scroll",borderBottom:`0.5px solid ${be.Il.Border.Base.Subdued}`}),Qo={default:{position:"absolute",top:_e.ux.rem(Ee.x),right:_e.ux.rem(Ee.x),zIndex:1}},Yo=r.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{onMount:r,rect:o}=_i.P.useRectWatcher(),{notifyUnmount:a}=he.useContext(_r),{ref:l,onMount:c}=(0,Ai.F)((0,s.ls)(F.b((e=>n({kind:A.i.Kind.mount,name:Z.e.promptInputAndMenuContainer,element:e})())),Ii.x((()=>a({kind:A.i.Kind.unmount,name:Z.e.promptInputAndMenuContainer}))))),u=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.div,{className:u.view(ts),"data-name":"prompt-container"},he.createElement(ve.F.div,{mount:c,className:ns,"data-expanded":t("menuExpanded"),onKeyUp:t("menuExpanded").pipe(C.U((e=>t=>{"Escape"===t.key&&n({kind:A.i.Kind.promptFieldKeyPressEscape,menuOpened:e})()}))),onFocus:()=>{var e;return n({kind:A.i.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=i.toNullable(l.get()))||void 0===e?void 0:e.contains((0,de.vY)(document)))||!1})()},onBlur:()=>{var e;return n({kind:A.i.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=i.toNullable(l.get()))||void 0===e?void 0:e.contains((0,de.vY)(document)))||!1})()}},e.promptStudioMenu,he.createElement("div",{ref:r},e.promptField)),G.aj([o,t("menuExpanded")]).pipe(C.U((([e,t])=>(0,s.zG)(e,i.filter((()=>t)),i.fold(s.gn,(({height:e})=>he.createElement("div",{className:is,style:{height:e},role:"presentation"}))))))))})),Xo=r.UI.Knot.make(Yo,{promptField:qr,promptStudioMenu:Wo}),Jo=r.UI.Union.asOption(Xo),es=Ee.mh,ts=e=>_e.ux.style(Object.assign({position:"relative"},e?{margin:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.mh)} ${_e.ux.rem(es)} ${_e.ux.rem(Ee.mh)}`}:{margin:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.x)} 0 ${_e.ux.rem(Ee.x)}`})),ns=_e.ux.style({background:be.Il.Background.Base.Default,boxShadow:Si.H8.boxShadow,border:Si.H8.border,borderRadius:_e.ux.rem(li.xB+li.fe),$nest:{"&[data-expanded='true']":{boxShadow:Si.q_.boxShadow,border:Si.q_.border,position:"absolute",bottom:0,width:"100%",display:"grid",gridTemplateRows:"1fr auto",zIndex:10}}}),is=_e.ux.style({opacity:0,pointerEvents:"none",visibility:"hidden"});function rs(e){return"focus"===e.kind}function os(e){return"mount"===e.kind}function ss(e){return"headerMount"===e.kind}const as=r.UI.Grid.make((({slots:e,notify:t,view:n})=>{const i=he.useContext(Ei.u.Context),r=he.useContext(Oi.N);return he.createElement(ur,{key:"assistant-container",onFocus:t({kind:"focus",focused:!0}),onBlur:t({kind:"focus",focused:!1}),heightBehavior:n("heightBehavior"),widthBehavior:n("widthBehavior"),dragBehavior:n("dragBehavior"),menuRef:n("menuRef"),menuVerticalMargin:G.aj([i,r]).pipe(C.U((([e,t])=>((t.flatUI?0:fr(t.flatUI))+(t.flatUI?1:0)+(e=>e?es:Cr)(t.flatUI))*e))),scrollContentToBottomToken:n("scrollContentToBottomToken"),canScrollContent:n("canScrollContent"),onMountContainer:e=>{e&&t({kind:"mount",element:e})()},onMountHeader:e=>{e&&t({kind:"headerMount",element:e})()},header:e.header,content:e.content,footer:e.footer,notifications:e.notifications,onboarding:e.onboarding})}));var ls=n(18208),cs=n(72004);const us=e=>he.createElement(ye.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),he.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11023_disheartening_emoji)",stroke:"none"}),he.createElement("path",{d:"M8.97126 19.5491C10.9569 18.1193 14.0431 18.1193 16.0295 19.5491C16.3344 19.7674 16.5155 19.5315 16.4184 19.3455C14.4879 15.6555 10.5121 15.6555 8.58164 19.3455C8.48451 19.5315 8.66564 19.7674 8.97126 19.5491Z",fill:"#302C3B",stroke:"none"}),he.createElement("path",{d:"M19.895 12.8239C17.9806 13.5491 15.4865 12.8809 14.1909 11.2954C13.9925 11.0531 13.7945 11.2046 13.8328 11.376C14.5936 14.775 17.807 15.6364 20.1654 13.0721C20.2839 12.9435 20.1886 12.7133 19.895 12.8239Z",fill:"#302C3B",stroke:"none"}),he.createElement("path",{d:"M10.8091 11.2954C9.51351 12.8813 7.01976 13.5491 5.10501 12.8239C4.81176 12.7133 4.71614 12.9431 4.83464 13.0721C7.19301 15.6364 10.4064 14.775 11.1673 11.376C11.2059 11.2046 11.0079 11.0531 10.8091 11.2954Z",fill:"#302C3B",stroke:"none"}),he.createElement("defs",null,he.createElement("linearGradient",{id:"paint0_linear_4506_11023_disheartening_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},he.createElement("stop",{stopColor:"#FFA027"}),he.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),he.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),he.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),ds=e=>he.createElement(ye.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),he.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11027_neutral_emoji)",stroke:"none"}),he.createElement("path",{d:"M17.3266 17.25H7.6726C6.7336 17.25 6.7336 15.75 7.6726 15.75H17.3266C18.2656 15.75 18.2656 17.25 17.3266 17.25Z",fill:"#302C3B",stroke:"none"}),he.createElement("path",{d:"M8.7496 12.1875C9.68158 12.1875 10.4371 11.1801 10.4371 9.9375C10.4371 8.69486 9.68158 7.6875 8.7496 7.6875C7.81762 7.6875 7.0621 8.69486 7.0621 9.9375C7.0621 11.1801 7.81762 12.1875 8.7496 12.1875Z",fill:"#302C3B",stroke:"none"}),he.createElement("path",{d:"M16.2496 12.1875C17.1816 12.1875 17.9371 11.1801 17.9371 9.9375C17.9371 8.69486 17.1816 7.6875 16.2496 7.6875C15.3176 7.6875 14.5621 8.69486 14.5621 9.9375C14.5621 11.1801 15.3176 12.1875 16.2496 12.1875Z",fill:"#302C3B",stroke:"none"}),he.createElement("defs",null,he.createElement("linearGradient",{id:"paint0_linear_4506_11027_neutral_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},he.createElement("stop",{stopColor:"#FFA027"}),he.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),he.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),he.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),ms=e=>he.createElement(ye.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),he.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_11994_841_smiling_emoji)",stroke:"none"}),he.createElement("path",{d:"M5.82085 15.8453C7.89191 15.8453 9.57085 14.1663 9.57085 12.0953C9.57085 10.0242 7.89191 8.34528 5.82085 8.34528C3.74978 8.34528 2.07085 10.0242 2.07085 12.0953C2.07085 14.1663 3.74978 15.8453 5.82085 15.8453Z",fill:"url(#paint1_radial_11994_841_smiling_emoji)",stroke:"none"}),he.createElement("path",{d:"M19.1792 15.75C21.2502 15.75 22.9292 14.0711 22.9292 12C22.9292 9.92893 21.2502 8.25 19.1792 8.25C17.1081 8.25 15.4292 9.92893 15.4292 12C15.4292 14.0711 17.1081 15.75 19.1792 15.75Z",fill:"url(#paint2_radial_11994_841_smiling_emoji)",stroke:"none"}),he.createElement("path",{d:"M14.0844 9.3015C15.5 7.72425 17.7012 7.7235 19.1176 9.3015C19.3344 9.543 19.4634 9.282 19.3944 9.07725C18.0181 5.0055 15.1831 5.0055 13.8069 9.07725C13.7379 9.282 13.8669 9.54262 14.0844 9.3015Z",fill:"#302C3B",stroke:"none"}),he.createElement("path",{d:"M5.88312 9.3015C7.29949 7.72425 9.49999 7.7235 10.9164 9.3015C11.1331 9.543 11.2629 9.282 11.1931 9.07725C9.81687 5.0055 6.98187 5.0055 5.60562 9.07725C5.53699 9.282 5.66562 9.54262 5.88312 9.3015Z",fill:"#302C3B",stroke:"none"}),he.createElement("path",{d:"M17.1961 13.647C14.3352 15.7061 10.6614 15.705 7.802 13.647C7.397 13.356 7.15512 13.6706 7.28487 13.9178C9.4805 18.1151 15.5187 18.1144 17.7147 13.9178C17.8437 13.6703 17.6026 13.3556 17.1961 13.647Z",fill:"#302C3B",stroke:"none"}),he.createElement("defs",null,he.createElement("linearGradient",{id:"paint0_linear_11994_841_smiling_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},he.createElement("stop",{stopColor:"#FFA027"}),he.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),he.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),he.createElement("stop",{offset:"1",stopColor:"#FFE261"})),he.createElement("radialGradient",{id:"paint1_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.82103 12.0952) scale(3.75 3.75)"},he.createElement("stop",{stopColor:"#F18D84"}),he.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),he.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),he.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),he.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})),he.createElement("radialGradient",{id:"paint2_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.179 12) scale(3.75)"},he.createElement("stop",{stopColor:"#F18D84"}),he.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),he.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),he.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),he.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})))),ps=(e,t)=>(0,fe.Sh)(gs,e===t&&fs),hs=_e.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:_e.ux.rem(Ee.mh),paddingRight:_e.ux.rem(Ee.mh)}),gs=_e.ux.style({width:_e.ux.rem(5),height:_e.ux.rem(5),cursor:"pointer",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:_e.ux.rem(Ee.x),borderRadius:_e.ux.rem(li.HP),fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),$nest:{"&:hover":{backgroundColor:be.Il.Background.Base.Subdued}}}),fs=_e.ux.style({backgroundColor:Se.Blue10,$nest:{"&:hover":{backgroundColor:Se.Blue10}}}),vs=_e.ux.style(Object.assign({},(0,Ie.fx)(1.5))),xs="submitBtn",bs={padding:_e.ux.rem(Ee.mh),gap:_e.ux.rem(Ee.mh)},ys={color:be.Il.Text.Base.Default,fontWeight:700,fontSize:_e.ux.rem(1.25),lineHeight:_e.ux.rem(1.5),margin:0},ks={border:`${_e.ux.px(1)} solid ${Se.NeutralGray20}`,borderRadius:_e.ux.rem(li.xB),padding:`${_e.ux.rem(Ee.x+Ee.yC)} ${_e.ux.rem(Ee.x)}`,height:_e.ux.rem(8)},ws={display:"flex",alignItems:"flex-start",$nest:{"& input[type='checkbox']":{margin:`${_e.ux.rem(Ee.W9)} ${_e.ux.rem(Ee.x)} 0 0`,minWidth:_e.ux.rem(1),minHeight:_e.ux.rem(1)},"& label":{color:be.Il.Text.Base.Default,fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125)}}},Cs=Object.assign({width:_e.ux.percent(100)},(0,Ie.dD)({fontSize:_e.ux.rem(.875)},xs)),Es={display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.x)},Ss=bs,_s=_e.ux.style(ys),Is=_e.ux.style(ks),As=_e.ux.style(ws),Bs=(_e.ux.style({fontWeight:700}),_e.ux.joinClasses([xs,_e.ux.style(Cs)])),Os=_e.ux.style(Es),Rs=(0,fe.xb)((({selectedScore:e,onSelectScore:t})=>he.createElement("div",{className:hs},he.createElement("div",Object.assign({},ps(cs.x.Mood.dissatisfied,e),{onClick:()=>t(cs.x.Mood.dissatisfied)}),he.createElement(us,{className:vs}),"I dislike it"),he.createElement("div",Object.assign({},ps(cs.x.Mood.ok,e),{onClick:()=>t(cs.x.Mood.ok)}),he.createElement(ds,{className:vs}),"Its OK"),he.createElement("div",Object.assign({},ps(cs.x.Mood.satisfied,e),{onClick:()=>t(cs.x.Mood.satisfied)}),he.createElement(ms,{className:vs}),"I like it!")))),Ts=(0,fe.xb)(Ur),Ns=r.UI.Node.make((({state:e,view:t,notify:n})=>{const r="domainCheckbox"+ls.fg(5);return he.createElement(Ni,{style:Ss},he.createElement("h1",{className:_s},"How do you like Grammarly?"),he.createElement(Rs,{selectedScore:t("formData").pipe(C.U((e=>e.mood))),onSelectScore:e=>n({kind:A.i.Kind.feedbackFormChange,feedbackData:{mood:e}})()}),he.createElement(Ts,{ariaLabel:"tell us why",className:Is,placeholder:["How can we improve?"],fitContentHeight:!1,text:t("formData").pipe(C.U((({message:e})=>null!=e?e:""))),onChange:e=>n({kind:A.i.Kind.feedbackFormChange,feedbackData:{message:e}})()}),e.pipe(C.U((({formData:e,domain:t,source:o})=>he.createElement("div",{className:Os},(0,s.zG)(t,i.fold(s.gn,(t=>he.createElement("div",{className:As},he.createElement("input",{type:"checkbox",id:r,checked:void 0!==e.domain,onChange:n({kind:A.i.Kind.feedbackFormChange,feedbackData:{domain:void 0!==e.domain?void 0:t}})}),he.createElement("label",{htmlFor:r},"Include the domain ",he.createElement("b",null,t)," with my feedback to help improve Grammarly."))))),(0,s.zG)(i.fromNullable(void 0!==e.mood?Object.assign(Object.assign({},e),{mood:e.mood,source:o}):null),i.fold((()=>he.createElement(xe.z,{disabled:!0,className:Bs,onClick:s.Q1},"Submit")),(e=>he.createElement(xe.z,{disabled:!1,className:Bs,onClick:n({kind:A.i.Kind.feedbackFormSubmitButtonClick,feedbackData:e})},"Submit")))))))))})),Ms=e=>he.createElement(ye.a1,{className:e.className,viewBox:"0 0 20 20",width:20,height:20},he.createElement("path",{d:"M8.58541 3.37143C9.36646 2.59038 10.6328 2.59038 11.4138 3.37143L16.6283 8.5859C17.4094 9.36695 17.4094 10.6333 16.6283 11.4143L11.4138 16.6288C10.6328 17.4098 9.36646 17.4098 8.58541 16.6288L3.37094 11.4143C2.58989 10.6333 2.58989 9.36695 3.37094 8.5859L8.58541 3.37143ZM11.4371 6.25011C11.4371 5.4562 10.7935 4.81261 9.99962 4.81261C9.20571 4.81261 8.56212 5.4562 8.56212 6.25011V10.6251C8.56212 11.3163 9.04996 11.8936 9.70011 12.0314C9.04996 12.1692 8.56212 12.7464 8.56212 13.4376C8.56212 14.2315 9.20571 14.8751 9.99962 14.8751C10.7935 14.8751 11.4371 14.2315 11.4371 13.4376C11.4371 12.7464 10.9493 12.1692 10.2991 12.0314C10.9493 11.8936 11.4371 11.3163 11.4371 10.6251V6.25011Z",fill:"#D31332",stroke:"#D31332"})),Us=({options:e,onSubmit:t,onCancel:n})=>{const[r,o]=he.useState(i.none),[a,l]=he.useState(!1);return he.createElement(ve.F.form,{id:"radioOptionsForm",onSubmit:e=>{(0,s.zG)(r,i.fold((()=>l(!0)),t)),e.preventDefault()},className:_e.ux.style(Fs)},he.createElement("fieldset",{className:Ls,style:{borderColor:a?Se.Red60:"transparent"}},(0,s.zG)(e,R.UI((e=>he.createElement("span",{key:e,className:zs},he.createElement("input",{type:"radio",id:e,value:e,name:e,checked:(0,s.zG)(r,i.filter((t=>t===e)),i.isSome),onChange:()=>{l(!1),o(i.some(e))},style:{margin:`0 ${_e.ux.rem(.5)} 0 0`}}),he.createElement("label",{htmlFor:e},e)))))),a&&he.createElement("div",{className:Gs},he.createElement(Ms,{className:Ps})," Make a selection"),he.createElement("div",{className:js},he.createElement(xe.z,{type:"submit",form:"radioOptionsForm",name:"submitSelectedRadioOption",style:{default:Fs}},"Submit"),"",he.createElement(xe.z,{variant:"tertiary",onClick:n,name:"cancelRadioOptionSelection",style:{default:Fs}},"Cancel")))},Fs={fontSize:_e.ux.rem(.875)},zs=_e.ux.style({display:"inline-flex",alignItems:"center"}),js=_e.ux.style({paddingTop:_e.ux.rem(.5)}),Ps=_e.ux.style({minWidth:"unset",minHeight:"unset"}),Gs=_e.ux.style({color:Se.Red60,lineHeight:_e.ux.rem(1.5)}),Ls=_e.ux.style({marginLeft:`calc(-1 * ${_e.ux.rem(.25)})`,padding:_e.ux.rem(.25),display:"flex",flexDirection:"column",gap:_e.ux.rem(.5),width:"fit-content",border:"1px solid transparent",borderRadius:_e.ux.rem(.25),margin:0}),Ds=r.UI.Node.make((({view:e,notify:t})=>{const n=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:n.view(Hs),"data-name":"follow-up-prompt"},he.createElement(ve.F.div,{className:n.view(Vs)},he.createElement(ve.F.img,{src:e("iconUrl"),style:{width:16,height:16}}),he.createElement(ve.F.span,Object.assign({},(0,de.E)(e("header"))))),he.createElement(ve.F.div,null,e("hintsHeader")),e("hintsItems").pipe(C.U((0,s.ls)(R.UI((e=>he.createElement("li",{key:e},e))),K.c2,i.fold(s.gn,(e=>he.createElement("ul",{key:"action-followup-radio-list",className:$s},e)))))),e("radioOptions").pipe(C.U(i.fold(s.gn,(e=>he.createElement(Us,{key:"radioOptions",options:e,onSubmit:e=>t({kind:A.i.Kind.radioOptionsSubmitButtonClick,selectedOption:e})(),onCancel:t({kind:A.i.Kind.radioOptionsCancelButtonClick})}))))))})),Zs=r.UI.Union.asOption(Ds),Hs=e=>Object.assign({fontWeight:400,fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125)},e?{padding:`${_e.ux.rem(Ee.qp)} ${_e.ux.rem(Ee.mh)} ${_e.ux.rem(1.5)} ${_e.ux.rem(Ee.mh)}`,borderBottom:`0.5px solid ${Ae.Z.BorderBaseSubduedColor}`}:{}),Vs=e=>_e.ux.style(Object.assign({display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x),color:be.Il.Text.Base.Subdued},e?{fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),padding:`${_e.ux.rem(Ee.x)} 0`}:{fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125)})),$s=_e.ux.style({padding:`0 0 0 ${_e.ux.rem(Ee.sD+Ee.yC)}`,margin:0});var Ks=n(37869);const Ws=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"m7 7 1 1.333L9 7H7Z",fill:"#646B81",stroke:"#646B81",strokeWidth:2}));Ws.__brand="color";var qs=n(82900),Qs=n(74923),Ys=n(18775),Xs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,qs._)(this,e),(0,Ys._)(this,"_capacity",void 0),(0,Ys._)(this,"_start",void 0),(0,Ys._)(this,"_allowOverflow",void 0),(0,Ys._)(this,"_nextId",void 0),this._capacity=t,this._start=n,this._allowOverflow=i,this._nextId=n}return(0,Qs._)(e,[{key:"id",get:function(){return this._nextId}},{key:"newId",value:function(){var e=this._nextId;if(e>this._capacity){if(!this._allowOverflow)throw new D.ej("ids limit reached: "+this._capacity);this._nextId=e=0}return this._nextId++,e}},{key:"reset",value:function(){this._nextId=this._start}}]),e}(),Js=n(44361);const ea={border:`1px solid ${be.Il.Background.Neutral.Default}`,borderRadius:_e.ux.rem(li.xB),width:_e.ux.rem(15),height:_e.ux.rem(2),boxSizing:"border-box",position:"relative"},ta={padding:`${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.qp)}`,width:"100%",height:"100%",border:"none",background:"transparent",position:"relative",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:_e.ux.rem(Ee.F2)},na={fontWeight:400,fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.375),color:be.Il.Text.Base.Default},ia={padding:_e.ux.rem(Ee.F2),background:"white",boxShadow:Si.H8.boxShadow,border:Si.H8.border,borderRadius:_e.ux.rem(li.xB),width:_e.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:_e.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},ra={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.375),color:be.Il.Text.Base.Default,padding:`${_e.ux.rem(.1875)} ${_e.ux.rem(Ee.qp)}`,borderRadius:_e.ux.rem(li.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:Se.Blue0}}},oa=_e.ux.style(ea),sa=_e.ux.style(ta),aa=_e.ux.style(na),la=_e.ux.style(ia),ca=_e.ux.style(ra),ua=new Xs(999999);function da({label:e,selection:t,className:n,menuClassName:i,placeholder:r,options:o,optionsGroupLabel:s,onSelectionChange:a,renderOption:l}){const[c,u]=he.useState(!1),d=he.useRef(ua.newId().toString()),m=he.useRef(ua.newId().toString()),p=he.useRef(null),[h,f]=he.useState(null),[v,x]=he.useState(null),{styles:b,attributes:y}=(0,Ks.D)(h,v,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),k=he.useMemo((()=>new g.xQ),[]),w=he.useMemo((()=>k.pipe(ce.b(100),N.h((e=>!e)),F.b((()=>{u(!1)})))),[k,u]);return _i.P.useSubscriptionTo(w),he.createElement("div",Object.assign({},(0,fe.Sh)(oa,n),{ref:f}),he.createElement("button",{ref:p,className:sa,onClick:()=>{var e;u(!0),k.next(!0),null===(e=p.current)||void 0===e||e.focus()},onFocus:()=>{u(!0),k.next(!0)},onBlur:()=>k.next(!1),type:"button","aria-haspopup":"listbox","aria-owns":d.current,"aria-expanded":c,"aria-labelledby":m.current},he.createElement("div",{id:m.current,className:aa},t?l?l(t):e(t):r),he.createElement(Ws,null)),c&&he.createElement("div",Object.assign({ref:x,style:b.popper},y.popper,{className:_e.ux.joinClasses([la,i]),onFocus:()=>k.next(!0),onBlur:()=>k.next(!1)}),he.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:d.current},s?he.createElement("header",{className:ma,role:"presentation"},s):null,o.map(((t,n)=>{const i=e(t);return he.createElement("li",{key:n,"aria-label":i,role:"option"},he.createElement("button",{className:ca,onClick:(0,Js.m)((()=>{a(t),u(!1)}))},l?l(t):e(t)))})))))}const ma=_e.ux.style({padding:_e.ux.rem(Ee.x),paddingRight:_e.ux.rem(Ee.mh),fontSize:_e.ux.rem(.75),lineHeight:"1.5em",color:be.Il.Text.Base.Subdued});var pa=n(12444),ha=n(17343),ga=n(13444),fa=n(18702),va=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const xa=he.forwardRef((function(e,t){var{defaultHeight:n,initialVisible:i=!1,resetHeightToDefault:r=Pt.E,visibleOffset:o=500,children:s}=e,a=va(e,["defaultHeight","initialVisible","resetHeightToDefault","visibleOffset","children"]);const[l,c]=he.useState(i),[u,d]=he.useState(n),m=he.useRef(null),{registerIntersectionObserver:p}=he.useContext(Gi);return he.useEffect((()=>{const e=r.subscribe((()=>d(n)));return()=>e.unsubscribe()}),[n]),he.useEffect((()=>{const e=m.current;if(e){const t=p(`${o}px 0px ${o}px 0px`,e,(t=>{t.isIntersecting||d(e.offsetHeight),c(t.isIntersecting)}));return()=>t.dispose()}return()=>{}}),[m]),he.createElement("div",Object.assign({},a,{ref:ji([m,t])}),l?s:he.createElement("div",{style:{height:u}}))}));var ba=n(89572);const ya=e=>{const t=he.useRef(null),n=function(e,t){switch(e){case"behavior:animation:fadeIn":return{className:_e.ux.style(wa(Ca,Sa(t))),direction:"in"};case"behavior:animation:fadeOut":return{className:_e.ux.style(wa(Ea,Sa(t))),direction:"out"};default:(0,D.vE)(e)}}(e.type,e.timeCurve),[r,o]=he.useState("in"===n.direction?n.className:void 0);return he.useEffect((()=>()=>{var e,r,o;t.current&&(e=t.current,!(null!==(o=null===(r=e.shadowRoot)||void 0===r?void 0:r.ownerDocument.defaultView)&&void 0!==o?o:self).matchMedia("(prefers-reduced-motion: reduce)").matches)&&function(e,t){(0,s.zG)((0,s.bc)((0,s.zG)(t,i.fromPredicate((e=>"out"===e.direction))),ka(e)),(0,s.og)($.g(i.option)),ue.bw((([t,n])=>{var r,o;const a=null!==(o=null===(r=e.shadowRoot)||void 0===r?void 0:r.ownerDocument)&&void 0!==o?o:document,l=e.getBoundingClientRect(),c=e.cloneNode(!0);c.classList.add(t.className),c.style.position="absolute",c.style.top=`${l.top}px`,c.style.left=`${l.left}px`,c.style.width=`${l.width}px`,c.style.height=`${l.height}px`,requestAnimationFrame((()=>{(0,s.zG)(n.find((e=>a.contains(e))),i.fromNullable,ue.bw((e=>{c.addEventListener("animationend",(()=>{a.contains(c)&&c.remove()})),e.appendChild(c)})))}))})))}(t.current,n)}),[n]),he.createElement("div",{"data-name":"behavior-animation-wrapper","data-animation":e.type,ref:t,className:r,onAnimationEnd:()=>o(void 0)},e.children)};function ka(e,t=[]){return(0,s.zG)(e.parentElement,i.fromNullable,i.chain((e=>ka(e,[...t,e]))),i.alt((()=>K.nI(t))))}const wa=(e,t)=>({$nest:{"@media (prefers-reduced-motion: no-preference)":{animation:`${e} ${_e.ux.seconds(.3)} ${t}`}}}),Ca=_e.ux.keyframes({from:{opacity:0,visibility:"hidden"},to:{opacity:1,visibility:"visible"}}),Ea=_e.ux.keyframes({from:{opacity:1,visibility:"visible"},to:{opacity:0,visibility:"hidden"}});function Sa(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}var _a=n(46324);const Ia={default:{$nest:{"& span":{verticalAlign:"initial"}}}},Aa={[Jt.Kq.Left]:{default:{textAlign:"left"}},[Jt.Kq.Center]:{default:{textAlign:"center"}},[Jt.Kq.Right]:{default:{textAlign:"end"}}};function Ba(e){return void 0!==e?Aa[e]:Aa[Jt.Kq.Left]}function Oa(e){return Object.assign({name:e.name,onClick:e.onClick,"aria-label":e.meta.label,"aria-describedby":e["aria-describedby"],title:void 0!==e.tooltip&&e.state!==Jt.BN.Disabled?(0,_a.a3)(e.tooltip):void 0},function(e){switch(e){case Jt.BN.Enabled:return{disabled:!1};case Jt.BN.Disabled:return{disabled:!0};case Jt.BN.Selected:return{disabled:!1,active:!0};case Jt.BN.Deselected:return{disabled:!1,active:!1};case Jt.BN.Hidden:return{hidden:!0};default:return(0,D.L0)(e)}}(e.state))}var Ra=n(28511),Ta=n(58675),Na=n(99517),Ma=n(75923),Ua=n(57427);function Fa({item:e,state:t,className:n,name:i}){const r=he.useMemo((()=>i?`${i}-item`:"menu-item"),[i]),o=he.useRef(null),{menuItemProps:s,isDisabled:a,isSelected:l}=(0,Ra.iX)({key:e.key},t,o);return _i.P.useEffectOnDidMount((()=>{if(null!=o.current)try{const e=o.current.focus.bind(o.current);o.current.focus=t=>{var n;(null===(n=o.current)||void 0===n?void 0:n.matches(":hover"))||e(t)}}catch(e){}})),he.createElement("li",Object.assign({"data-name":r},s,{ref:o,className:_e.ux.joinClasses([ja(a,l),n])}),he.createElement("span",{className:za},e.rendered))}const za=_e.ux.style({display:"flex",alignItems:"center",fontFamily:"Inter",fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),fontWeight:400,color:Ae.Z.TextBaseDefault}),ja=(e,t)=>_e.ux.style(Object.assign(Object.assign({display:"flex",alignItems:"center",minHeight:_e.ux.rem(2),padding:`${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.sD)} ${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.qp)}`,borderRadius:_e.ux.rem(li.xB),opacity:e?.4:void 0,cursor:"pointer"},t&&!e?{background:Ae.Z.MenuBackgroundSelected,boxShadow:`inset  0 0 0 1px ${Ae.Z.MenuBorderDefault}`}:{}),{$nest:{"&:hover":e?{}:{background:Ae.Z.MenuBackgroundHover,boxShadow:`inset  0 0 0 1px ${Ae.Z.MenuBorderDefault}`,$nest:{"& i":{stroke:Ae.Z.MenuIconHover,fill:Ae.Z.MenuIconHover}}},"&:focus, &:focus-visible":e?{}:{boxShadow:`0 0 0 1px ${be.Il.Background.Base.Default}, 0 0 0 3px ${Ae.Z.BorderBrandDefault}`,outline:"none",background:Ae.Z.MenuBackgroundSelected,$nest:{"& i":{stroke:Ae.Z.MenuIconSelected,fill:Ae.Z.MenuIconSelected}}},"& i":{marginLeft:_e.ux.rem(-Ee.F2),marginRight:_e.ux.rem(Ee.x),minWidth:_e.ux.rem(1.5),minHeight:_e.ux.rem(1.5)},"& span":{fontWeight:t?700:void 0}}}));var Pa=n(1532);function Ga({name:e,section:t,state:n,onAction:i,theme:r={}}){const o=he.useMemo((()=>e?`${e}-section`:"dropdown-menu-section"),[e]),{itemProps:s,headingProps:a,groupProps:l}=(0,Ra.x7)({heading:t.rendered,"aria-label":t["aria-label"]}),{separatorProps:c}=(0,Pa.z)({elementType:"li"});return he.createElement(he.Fragment,null,t.key!==n.collection.getFirstKey()&&he.createElement("li",Object.assign({},c,{className:Za})),he.createElement("li",Object.assign({"data-name":o},s,{className:_e.ux.joinClasses([La,r.section])}),Boolean(t.rendered)&&he.createElement("h5",Object.assign({},a,{className:Da}),t.rendered),he.createElement("ul",Object.assign({},l,{className:Ha}),Array.from(t.childNodes).map((t=>he.createElement(Fa,{key:t.key,item:t,state:n,onAction:i,className:r.item,name:e}))))))}const La=_e.ux.style({padding:0}),Da=_e.ux.style({margin:0,fontSize:_e.ux.rem(.75),fontWeight:400,lineHeight:_e.ux.rem(1.125),color:be.Il.Text.Base.Subdued,padding:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.sD)} ${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.qp)}`}),Za=_e.ux.style({borderTop:`1px solid ${be.Il.Border.Base.Subdued}`,margin:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(-Ee.mh)}`}),Ha=_e.ux.style({listStyle:"none",margin:0,padding:0,outline:_e.ux.important("none")});var Va=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function $a(e){var{name:t,className:n,theme:i={},onMouseOver:r,onMouseLeave:o}=e,s=Va(e,["name","className","theme","onMouseOver","onMouseLeave"]);const a=he.useMemo((()=>t?`${t}-list`:"menu-list"),[t]),l=(0,Ua.D)(s),c=he.useRef(null),{menuProps:u}=(0,Ra.H9)(s,l,c),d=(0,Ma.dG)(u,{onMouseOver:r,onMouseLeave:o});return he.createElement("ul",Object.assign({"data-name":a},d,{ref:c,className:_e.ux.joinClasses([Ka,i.list,n])}),Array.from(l.collection).map((e=>"section"===e.type?he.createElement(Ga,{key:e.key,section:e,state:l,theme:i}):he.createElement(Fa,{key:e.key,name:t,item:e,state:l,className:i.item}))))}const Ka=_e.ux.style({listStyle:"none",margin:0,outline:_e.ux.important("none"),padding:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.mh)}`});var Wa=n(30116),qa=n(33829),Qa=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};var Ya=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Xa=e=>{var t,{children:n,className:i,state:r,offset:o=4,onTransitionEnd:s,portalContainer:a}=e,l=Ya(e,["children","className","state","offset","onTransitionEnd","portalContainer"]);const c=he.useRef(null),{popoverProps:u}=function(e,t){const{triggerRef:n,popoverRef:i,isNonModal:r,isKeyboardDismissDisabled:o}=e,s=Qa(e,["triggerRef","popoverRef","isNonModal","isKeyboardDismissDisabled"]),{overlayProps:a,underlayProps:l}=(0,qa.I)({isOpen:t.isOpen,onClose:t.close,shouldCloseOnBlur:!0,isDismissable:!1!==r,isKeyboardDismissDisabled:o,shouldCloseOnInteractOutside:(e,t)=>{const n=null==t?void 0:t.composedPath();return!n||!n.some((e=>{var t;return e instanceof Node&&(null===(t=i.current)||void 0===t?void 0:t.contains(e))}))}},i),{overlayProps:c,arrowProps:u,placement:d}=(0,Wa.tN)(Object.assign(Object.assign({},s),{targetRef:n,overlayRef:i,isOpen:t.isOpen,onClose:void 0}));return(0,Wa.tk)({isDisabled:r}),(0,Ma.bt)((()=>t.isOpen&&!r&&i.current?(0,Wa.RP)([i.current]):()=>{}),[r,t.isOpen,i]),{popoverProps:(0,Ma.dG)(a,c),arrowProps:u,underlayProps:l,placement:d}}(Object.assign(Object.assign({},l),{isNonModal:!0,offset:o,popoverRef:c}),r);return he.createElement(Wa.aV,{portalContainer:a},he.createElement("div",Object.assign({},u,{style:Object.assign(Object.assign({},u.style),{minWidth:null===(t=l.triggerRef.current)||void 0===t?void 0:t.clientWidth}),ref:c,className:_e.ux.joinClasses([el,i]),onTransitionEnd:e=>{if(e.target===c.current)return null==s?void 0:s()}}),he.createElement(Wa.U4,{onDismiss:r.close}),he.createElement("div",{className:Ja},n),he.createElement(Wa.U4,{onDismiss:r.close})))},Ja=_e.ux.style({width:_e.ux.percent(100)}),el=_e.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start",background:be.Il.Background.Base.Default,boxShadow:Si.H8.boxShadow,border:Si.H8.border,borderRadius:_e.ux.rem(li.xB)});var tl=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function nl(e){var{placement:t="bottom start",theme:n={},name:i,portalContainer:r,title:o}=e,s=tl(e,["placement","theme","name","portalContainer","title"]);const a=he.useMemo((()=>i?`${i}-trigger`:"menu-trigger"),[i]),l=he.useRef(null),c=(0,Ta.W)(s),u=(0,Ra.u4)(Object.assign(Object.assign({},s),{type:"menu"}),c,l),d=u.menuTriggerProps,{onPress:m,onPressStart:p}=d,h=tl(d,["onPress","onPressStart"]),{menuProps:g}=u;return he.createElement(he.Fragment,null,he.createElement(xe.z,Object.assign({},h,{variant:"tertiary",name:a,onClick:()=>c.open(),mount:e=>l.current=e,active:c.isOpen,"aria-label":s["aria-label"],title:null!=o?o:s["aria-label"],className:n.button,style:n.buttonStyle}),s.label),he.createElement(Na.n,{in:c.isOpen},((e,o)=>he.createElement(Xa,{state:c,triggerRef:l,placement:t,portalContainer:r,className:e,onTransitionEnd:o},he.createElement($a,Object.assign({},s,g,{name:i,theme:n,onAction:e=>{var t;return null===(t=s.onAction)||void 0===t?void 0:t.call(s,e)}}))))))}var il=n(36278);const rl=e=>{const t=t=>"known"===t.source.kind?he.createElement(e.designSystem.icon[t.source.name],{key:t.source.name,backgroundColor:t.backgroundColor}):he.createElement(e.designSystem.image,Object.assign({key:t.source.name,backgroundColor:t.backgroundColor},t.source));return he.createElement(lr.l.Consumer,null,(({portalContainer:n})=>he.createElement(ve.F.Fragment,null,n.view(i.fold(s.gn,(n=>he.createElement(nl,{label:t(e.icon),portalContainer:n,placement:"bottom right",theme:{button:ol,item:sl},"aria-label":e.menu.meta.label,onAction:t=>(0,s.zG)(e.menu.sections,R.tS((e=>e.items)),R.Ew((e=>e.id===String(t))),ue.bw((t=>e.onClick(t.onClickActions,t.id)()))),title:e.menu.meta.label},e.menu.sections.map(((e,n)=>he.createElement(il.$0,{key:n,title:e.title},e.items.map((e=>he.createElement(il.ck,{key:e.id,textValue:e.id},e.icon&&t(e.icon),e.text)))))))))))))},ol=_e.ux.style({flexShrink:0,alignItems:"center",justifyContent:"center",height:_e.ux.rem(2),width:_e.ux.rem(2)}),sl=_e.ux.style({$nest:{"& i":{height:_e.ux.rem(2),width:_e.ux.rem(2)}}});var al=n(83926);const ll={width:_e.ux.rem(1.5),height:_e.ux.rem(1.5),minWidth:_e.ux.rem(1.5),minHeight:_e.ux.rem(1.5)},cl=_e.ux.style(ll);function ul(){return Object.assign(Object.assign({},ba.k),{animation:ya,button:Object.assign(Object.assign({},(0,_a.ND)()),{primary:e=>he.createElement(xe.z,Object.assign({},Oa(e),{variant:"primary",style:[e.verticalAlign===Jt.g$.Middle?Ia:void 0,Ba(e.horizontalAlign)]}),e.text),secondary:e=>he.createElement(xe.z,Object.assign({},Oa(e),{variant:"tertiary",style:[e.verticalAlign===Jt.g$.Middle?Ia:void 0,Ba(e.horizontalAlign)]}),e.text),toggle:e=>{const t=(e,t=1)=>`inset 0 0 0 ${t}px ${e}`,n=(e,n=1)=>`${t(e,n)}, 0 0 0 2px ${be.Il.Text.Base.Inverse}, 0 0 0 4px ${Ae.Z.BorderBrandDefault}`;return he.createElement(xe.z,Object.assign({},Oa(e),{variant:"secondary",size:"small",style:[e.verticalAlign===Jt.g$.Middle?Ia:void 0,Ba(e.horizontalAlign),{default:{boxShadow:t(be.Il.Border.Base.Subdued),$nest:Object.assign(Object.assign({},(0,Ye.Rv)(n(be.Il.Border.Base.Subdued))),{"& > div > span, & > div, & > *":{color:_e.ux.important(be.Il.Text.Base.Default)}})},hovered:{backgroundColor:Ae.Z.ButtonBackgroundSecondaryHover,boxShadow:t(Ae.Z.BorderBrandDefault),$nest:Object.assign(Object.assign({},(0,Ye.Rv)(n(Ae.Z.BorderBrandDefault))),{"& > div > span, & > div, & > *":{color:_e.ux.important(Ae.Z.ButtonTextSecondaryHover)}})},active:{backgroundColor:Ae.Z.ButtonBackgroundSecondaryActive,boxShadow:t(Ae.Z.BorderBrandDefault),$nest:Object.assign(Object.assign({},(0,Ye.Rv)(n(Ae.Z.BorderBrandDefault))),{"& > div > span, & > div, & > *":{color:_e.ux.important(Ae.Z.ButtonTextSecondaryActive)}})},selected:{backgroundColor:"transparent",boxShadow:t(Ae.Z.BorderBrandDefault,1.5),$nest:Object.assign(Object.assign({},(0,Ye.Rv)(n(Ae.Z.BorderBrandDefault,1.5))),{"& > div > span, & > div, & > *":{color:_e.ux.important(Ae.Z.ColorBrandDefault),fontWeight:_e.ux.important("bold")}})}}]}),e.text)}}),icon:Object.assign(Object.assign({},al.y),{[Jt.Tb.More]:e=>he.createElement(ye.JO.EllipsisSmall,{className:cl})}),text:e=>ba.k.text(function(e){var t,n;if(e.format.includes(Jt.SQ.Bold)&&(null===(t=e.meta.label)||void 0===t?void 0:t.startsWith("insert"))&&e.textColor.startsWith("CoreBlue"))return Object.assign(Object.assign({},e),{textColor:Jt.Il.CoreNeutral90,outlineColor:e.format.includes(Jt.SQ.Outline)?Jt.Il.CoreNeutral90:e.outlineColor});if(e.format.includes(Jt.SQ.Bold)&&(null===(n=e.meta.label)||void 0===n?void 0:n.startsWith("delete")))return Object.assign(Object.assign({},e),{textColor:Jt.Il.CoreNeutral50,outlineColor:e.format.includes(Jt.SQ.Outline)?Jt.Il.CoreNeutral50:e.outlineColor});return e}(e)),dropDownMenuButton:rl,nativeExperimentalGBConsistencyUpsellFooter:ba.k.nativeExperimentalGBConsistencyUpsellFooter})}const dl=Y.MW({item:Lt.j.Item.eq,isFocused:Y.vD,isFirst:Y.vD,prevFocusedItemPosition:i.getEq(pa.GK)}),ml=r.UI.Node.make((({state:e,notify:t})=>he.createElement(ve.F.Fragment,null,e.pipe(C.U((({item:e,isFocused:n,isFirst:r})=>he.createElement(he.Fragment,null,r?null:he.createElement(Il,null),he.createElement("div",{className:(0,z.RN)(gl,hl)(n)},he.createElement(fa.P,{key:`${e.id}-${n?"expanded":"collapsed"}`,sduiRootId:e.id,content:e.content,designSystem:ul(),notify:(n,i,r)=>t({kind:"sduiNotify",sourceId:n,actions:i,scope:r,item:e})(),transitions:[],prevContent:i.none,onAnimationEnd:s.Q1,onMount:()=>{n&&t({kind:"focusedItemMount",item:e})()},longFormCardState:{viewKind:n?"focused":"collapsed"}}))))))))),pl=e=>({padding:`${_e.ux.rem(Ee.F2)} 0`,borderRadius:"inherit",$nest:{"&:hover":{backgroundColor:e?void 0:be.Il.Background.Base.Subdued}}}),hl=_e.ux.style(pl(!1)),gl=_e.ux.style(pl(!0)),fl=_e.ux.keyframes({from:{transform:"scaleY(1)",opacity:1},to:{transform:"scaleY(0.75)",opacity:0}}),vl={animation:`${_e.ux.keyframes({from:{transform:"scaleY(0.75)",opacity:0},to:{transform:"scaleY(1)",opacity:1}})} 200ms ease-in-out`},xl={animation:`${fl} 200ms ease-in-out`,position:"absolute",width:"100%"},bl=_e.ux.style(Object.assign(Object.assign({},vl),{transformOrigin:"bottom"})),yl=_e.ux.style(Object.assign(Object.assign({},vl),{transformOrigin:"top"})),kl=_e.ux.style(Object.assign(Object.assign({},xl),{transformOrigin:"bottom"})),wl=_e.ux.style(Object.assign(Object.assign({},xl),{transformOrigin:"top"})),Cl=r.UI.Transition.make({collapseForward:kl,collapseBackward:wl},{expandForward:bl,expandBackward:yl}),El=_e.ux.style({position:"relative"}),Sl=Y.MW({isFocused:Y.vD,itemId:Y.yv}),_l=r.UI.Knot.make(r.UI.Grid.make((({slots:e,view:t})=>{const n=he.useContext(Ei.u.Context),{ref:i,onMount:r}=_i.P.useElWatcher(),o=he.useMemo((()=>t("isFocused").pipe(re.G(),N.h((([e,t])=>e&&!t)),ha.h(null))),[]),{scrollableContainer:s}=he.useContext(Gi),a=he.useMemo((()=>t("isFocused").pipe(k.O(!1),re.G(),N.h((([e,t])=>!e&&t)),w.w((()=>i.pipe(E.oA,M.q(1)))),ie.M(s.pipe(E.oA)),ga.g(200),F.b((([e,t])=>{e.offsetTop<t.scrollTop?t.scroll({top:e.offsetTop,left:0,behavior:"smooth"}):e.offsetTop+e.offsetHeight>t.scrollTop+t.offsetHeight?t.scroll({top:e.offsetTop-t.offsetHeight/2,left:0,behavior:"smooth"}):e.scrollIntoView({behavior:"smooth",block:"nearest"})})))),[i]);return _i.P.useSubscriptionTo(a),he.createElement(ve.F.Fragment,null,G.aj([n,t("itemId")]).pipe(C.U((([t,n])=>he.createElement(xa,{visibleOffset:500,defaultHeight:4*t,resetHeightToDefault:o,"data-name":n,className:El,ref:r},e.content)))))})),{content:r.UI.Animated.make(Cl,ml)}),Il=()=>he.createElement("div",{role:"separator",className:Al}),Al=_e.ux.style({margin:`0 ${_e.ux.rem(Ee.mh)}`,borderBottom:`1px solid ${be.Il.Border.Base.Subdued}`}),Bl=r.UI.List.make(R.bw,_l),Ol=()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",clipPath:"url(#EmptyH_a)"},he.createElement("path",{fill:"#FCE5E5",strokeMiterlimit:"10",d:"M62.4 11.2H23.24C22.16 28.28 3.64 40.4 7.8 62.4h39.16C43.6 35.2 61.32 28.28 62.4 11.2Z"}),he.createElement("path",{fill:"#FCE5E5",strokeMiterlimit:"10",d:"M59.2 8H20.04C18.96 25.08.44 37.2 4.6 59.2h39.16C40.8 32.8 58.13 25.08 59.2 8Z"}),he.createElement("path",{fill:"#FEFAE9",strokeMiterlimit:"10",d:"M56 4.8H17.4C16.35 21.88-1.91 34 2.2 56H40C36.67 34 54.93 21.88 56 4.8Z"}),he.createElement("path",{d:"M24 13.6h20M20 22.4h20M14.4 32h20M9.6 42.8H24"}),he.createElement("path",{fill:"#F8E485",strokeMiterlimit:"10",d:"M.55 10.12a4.29 4.29 0 1 1 7.43-4.3l16.3 28.24-7.43 4.3L.55 10.11Z"}),he.createElement("path",{fill:"#79A8F2",strokeMiterlimit:"10",d:"M.55 10.12a4.29 4.29 0 1 1 7.43-4.3l3.21 5.58-7.43 4.29-3.21-5.57Z"}),he.createElement("path",{fill:"#F8C6DA",strokeMiterlimit:"10",d:"M.55 10.12a4.29 4.29 0 1 1 7.43-4.3l.64 1.12-7.43 4.29-.64-1.11Z"}),he.createElement("path",{fill:"#FEFAE9",strokeMiterlimit:"10",d:"m16.85 38.35 7.43-4.29-.07 8.47-7.36-4.18Z"}),he.createElement("path",{fill:"#0E101A",strokeMiterlimit:"10",d:"m20.2 39.88 3.72-2.14.3 4.79-4.01-2.65Z"})),he.createElement("defs",null,he.createElement("clipPath",{id:"EmptyH_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))),Rl=r.UI.Node.make((({view:e,notify:t})=>he.createElement(Ni,{"aria-busy":"true","aria-live":"polite","data-name":"plagiarism-empty",style:e("fitContainer").pipe(C.U((e=>e?Ml:Nl)))},he.createElement(ve.F.div,{className:e("fitContainer").pipe(C.U((0,z.RN)(Fl,Ul)))},he.createElement(to,{style:Tl},"No plariarism detected"),he.createElement("p",{className:zl},"We compared your document to billions of web pages and academic papers and found no duplicate text."),he.createElement(xe.z,{variant:"secondary",style:Gl,onClick:t({kind:"seeAllSuggestions"})},"See all suggestions")),he.createElement(ve.F.div,{className:e("fitContainer").pipe(C.U((0,z.RN)(Pl,jl)))},he.createElement(Ol,null))))),Tl={whiteSpace:"normal"},Nl={padding:`${_e.ux.rem(Ee.mh)}`,display:"flex",flexDirection:"row",justifyContent:"space-between"},Ml={padding:`${_e.ux.rem(Ee.mh)}`,display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",gap:`${_e.ux.rem(Ee.mh)}`,height:"100%",boxSizing:"border-box"},Ul=_e.ux.style({display:"flex",flexDirection:"column",marginRight:_e.ux.rem(2),justifyContent:"center"}),Fl=_e.ux.style({textAlign:"center",padding:`${_e.ux.rem(Ee.mh)} ${_e.ux.rem(Ee.mh)} 0 ${_e.ux.rem(Ee.mh)}`}),zl=_e.ux.style({margin:0,color:Ae.Z.TextBaseSubduedColor,fontSize:_e.ux.rem(.875),lineHeight:"1.5em",fontWeight:400}),jl=_e.ux.style({width:_e.ux.rem(4),height:_e.ux.rem(4),minWidth:_e.ux.rem(4),minHeight:_e.ux.rem(4)}),Pl=_e.ux.style({width:_e.ux.rem(6),height:_e.ux.rem(6),minWidth:_e.ux.rem(6),minHeight:_e.ux.rem(6)}),Gl={default:{marginTop:_e.ux.rem(Ee.x),alignSelf:"flex-start"}},Ll=_e.ux.keyframes({"0%":{transform:"translateX(-300px)"},"85%, 100%":{transform:"translateX(calc(100%))"}}),Dl=_e.ux.style({overflow:"hidden",position:"absolute",top:0,right:0,bottom:0,left:0}),Zl=e=>{var t,n,i;const r=_e.ux.color(null!==(t=e.overlayGradientCenterColor)&&void 0!==t?t:"rgba(0, 0, 0, 1)"),o=_e.ux.color(null!==(n=e.overlayGradientEndColor)&&void 0!==n?n:"rgba(255, 255, 255, 0)"),s=`rgba(${r.red()}, ${r.green()}, ${r.blue()}, ${r.alpha()})`,a=`rgba(${o.red()}, ${o.green()}, ${o.blue()}, ${o.alpha()})`;return _e.ux.style({width:"100%",height:"100%",pointerEvents:"none",mixBlendMode:null!==(i=e.overlayBlendMode)&&void 0!==i?i:"overlay",background:`linear-gradient(90deg,${a} 0px,${s} 120px,${s} 180px,${a} 300px)`,backgroundRepeat:"no-repeat",animationDelay:"300ms",animationDuration:"1.5s",animationName:Ll,animationTimingFunction:"linear",animationIterationCount:"infinite"})},Hl=e=>he.createElement("div",{className:Dl},he.createElement("div",{className:Zl(e)})),Vl=()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#EmptyC_a)"},he.createElement("path",{fill:"#F9C7C7",stroke:"#0E101A",strokeMiterlimit:"10",d:"m29.48 18.98-3.27 21.53-22.38-9.64L18.9 14.03a6.1 6.1 0 0 1 10.58 4.95Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeMiterlimit:"10",d:"M13.54 51.78c7.04 0 12.75-5.68 12.75-12.69 0-7-5.7-12.69-12.75-12.69A12.72 12.72 0 0 0 .8 39.09c0 7 5.7 12.7 12.74 12.7Z"}),he.createElement("path",{fill:"#8ECBDE",stroke:"#0E101A",d:"M13.54 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.27-9.5-9.54-9.5A9.52 9.52 0 0 0 4 39.09c0 5.25 4.28 9.5 9.54 9.5Z"}),he.createElement("path",{stroke:"#0E101A",d:"M13.54 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.27-9.5-9.54-9.5A9.52 9.52 0 0 0 4 39.09c0 5.25 4.28 9.5 9.54 9.5Z"}),he.createElement("path",{fill:"#DDEFF5",d:"M20.7 45.37a9.51 9.51 0 0 1-5.1 3l-9.88-14.7a9.57 9.57 0 0 1 4.72-3.56L20.7 45.37Z"}),he.createElement("path",{stroke:"#0E101A",strokeMiterlimit:"10",d:"M13.54 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.27-9.5-9.54-9.5A9.52 9.52 0 0 0 4 39.09c0 5.25 4.28 9.5 9.54 9.5Z"}),he.createElement("path",{fill:"#F9C7C7",stroke:"#0E101A",strokeMiterlimit:"10",d:"m34.52 18.98 3.27 21.53 22.38-9.64L45.1 14.03a6.1 6.1 0 0 0-10.58 4.95Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeMiterlimit:"10",d:"M50.46 51.78c7.03 0 12.74-5.68 12.74-12.69 0-7-5.7-12.69-12.74-12.69A12.72 12.72 0 0 0 37.7 39.09c0 7 5.7 12.7 12.75 12.7Z"}),he.createElement("path",{fill:"#8ECBDE",stroke:"#0E101A",d:"M50.46 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.28-9.5-9.54-9.5a9.52 9.52 0 0 0-9.54 9.5c0 5.25 4.27 9.5 9.54 9.5Z"}),he.createElement("path",{stroke:"#0E101A",d:"M50.46 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.28-9.5-9.54-9.5a9.52 9.52 0 0 0-9.54 9.5c0 5.25 4.27 9.5 9.54 9.5Z"}),he.createElement("path",{fill:"#DDEFF5",d:"M57.61 45.37a9.51 9.51 0 0 1-5.1 3l-9.88-14.7a9.57 9.57 0 0 1 4.72-3.56l10.26 15.26Z"}),he.createElement("path",{stroke:"#0E101A",strokeMiterlimit:"10",d:"M50.46 48.59a9.52 9.52 0 0 0 9.54-9.5c0-5.25-4.28-9.5-9.54-9.5a9.52 9.52 0 0 0-9.54 9.5c0 5.25 4.27 9.5 9.54 9.5Z"}),he.createElement("path",{fill:"#F9C7C7",stroke:"#0E101A",strokeMiterlimit:"10",d:"M36.4 31.35h-8.8l1.25-8.24a3.17 3.17 0 0 1 3.15-2.7 3.2 3.2 0 0 1 3.15 2.7l1.25 8.24Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeMiterlimit:"10",d:"M32 36.18a4.57 4.57 0 1 0 .02-9.13 4.57 4.57 0 0 0-.02 9.13Z"}),he.createElement("path",{fill:"#0E101A",stroke:"#0E101A",strokeMiterlimit:"10",d:"M32 33.22a1.6 1.6 0 1 0 0-3.2 1.6 1.6 0 0 0 0 3.2Z"}),he.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"M61.64 2.7c-2.8.62-9.61 2.33-7.74 11.68 2.8.3 11.21-2.34 7.74-11.69Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M56.7 10.64 63.2.4"}),he.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"M6.44 10.94c-1.9 5.36-.2 10.75 12.3 9.39 0-2.26-3.44-10.28-12.3-9.39Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M15.3 17.14 2.9 8.72"}),he.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"M36.58 61.7c-.65-4.37-3.42-8.63-12.94-9.48.38 4.98 2.53 12.23 12.94 9.48Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"m27.5 55.34 12.16 8.22"})),he.createElement("defs",null,he.createElement("clipPath",{id:"EmptyC_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))),$l=r.UI.Node.make((()=>he.createElement(Ni,{"aria-busy":"true","aria-live":"polite",style:Kl,"data-name":"plagiarism-loading"},he.createElement("div",{className:tc},he.createElement("div",{className:nc},he.createElement(to,{style:Wl},"Checking for plagiarism..."),he.createElement("p",{className:ic},"Were comparing your document to billions of web pages and academic papers.")),he.createElement("div",{className:rc},he.createElement(Vl,null))),he.createElement("div",{className:ql},he.createElement("div",{className:Ql},he.createElement(Hl,null),he.createElement("div",{className:Yl}),he.createElement("div",{className:Xl}),he.createElement("div",{className:Jl})),he.createElement("div",{className:ec}),he.createElement("div",{className:Ql},he.createElement(Hl,null),he.createElement("div",{className:Yl}),he.createElement("div",{className:Xl}),he.createElement("div",{className:Jl})),he.createElement("div",{className:ec}),he.createElement("div",{className:Ql},he.createElement(Hl,null),he.createElement("div",{className:Yl}),he.createElement("div",{className:Xl}),he.createElement("div",{className:Jl})),he.createElement("div",{className:ec}),he.createElement("div",{className:Ql},he.createElement(Hl,null),he.createElement("div",{className:Yl}),he.createElement("div",{className:Xl}),he.createElement("div",{className:Jl})))))),Kl={padding:0},Wl={whiteSpace:"normal"},ql=_e.ux.style({display:"flex",flexDirection:"column",margin:_e.ux.rem(1)}),Ql=_e.ux.style({display:"flex",alignItems:"center",position:"relative",height:_e.ux.rem(2.25)}),Yl=_e.ux.style({height:_e.ux.rem(.5),width:_e.ux.rem(.5),borderRadius:"50%",background:Se.BlueGray5,marginRight:_e.ux.rem(1.25)}),Xl=_e.ux.style({height:_e.ux.rem(.5),width:_e.ux.rem(3.875),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5,marginRight:_e.ux.rem(Ee.mh)}),Jl=_e.ux.style({height:_e.ux.rem(.5),width:_e.ux.rem(7.875),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),ec=_e.ux.style({margin:`${_e.ux.rem(.5)} ${_e.ux.rem(1)}`,borderBottom:`1px solid ${be.Il.Border.Base.Subdued}`}),tc=_e.ux.style({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:_e.ux.rem(Ee.mh)}),nc=_e.ux.style({display:"flex",flexDirection:"column",marginRight:_e.ux.rem(2),justifyContent:"center"}),ic=_e.ux.style({margin:0,color:Ae.Z.TextBaseSubduedColor,fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),fontWeight:400}),rc=_e.ux.style({width:_e.ux.rem(4),height:_e.ux.rem(4),minWidth:_e.ux.rem(4),minHeight:_e.ux.rem(4)}),oc=e=>he.createElement(ye.a1,Object.assign({width:"36",height:"36",viewBox:"0 0 36 36"},e),he.createElement("rect",{width:"36",height:"36",rx:"18",fill:"#09646C",stroke:"none"}),he.createElement("path",{d:"M19.4062 21.6132C21.1214 21.2406 22.0558 20.2882 22.5 18.8303C20.636 18.8303 19.125 17.3433 19.125 15.5089C19.125 13.6745 20.636 12.1875 22.5 12.1875C24.364 12.1875 25.875 13.5803 25.875 15.5089C25.875 17.4375 25.5 22.3125 19.4062 23.8125V21.6132Z",fill:"white",stroke:"none"}),he.createElement("path",{d:"M10.4062 21.6132C12.1214 21.2406 13.0558 20.2882 13.5 18.8303C11.636 18.8303 10.125 17.3433 10.125 15.5089C10.125 13.6745 11.636 12.1875 13.5 12.1875C15.364 12.1875 16.875 13.5803 16.875 15.5089C16.875 17.4375 16.5 22.3125 10.4062 23.8125V21.6132Z",fill:"white",stroke:"none"})),sc=r.UI.Node.make((({view:e})=>he.createElement("footer",{className:ac},he.createElement(oc,null),he.createElement(ve.F.span,{className:lc},he.createElement(ve.F.b,null,e("originality").pipe(C.U((e=>Math.round(100*e)))),"% of your document")," ","matches text",e("sourceCount").pipe(C.U(i.fold((()=>" "),(e=>` in ${e} sources `)))),"on the web or in academic databases.")))),ac=_e.ux.style({padding:`${_e.ux.rem(1.0625)} ${_e.ux.rem(1.1875)}`,backgroundColor:Ae.Z.BackgroundBaseSubdued,borderTop:`0.5px solid ${Ae.Z.BorderBaseSubduedColor}`,boxSizing:"border-box",display:"flex",alignItems:"center",flexDirection:"row",gap:_e.ux.rem(Ee.mh)}),lc=_e.ux.style({fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),color:be.Il.Text.Base.Subdued}),cc=r.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{onMount:r}=(0,Ai.F)((0,s.ls)(F.b(n({kind:"plagiarismFeedMount"})),Ii.x(mn.notifyFeedUnmount)));return he.createElement(Ni,{"data-name":"plagiarism-non-empty",style:pc,mount:r,"aria-live":"polite"},he.createElement(ve.F.div,{className:gc},he.createElement(to,{style:hc},"Plagiarism detected"),t("citationDropdown").pipe(C.U(i.fold(s.gn,(e=>he.createElement(da,{className:fc,menuClassName:vc,placeholder:e.placeholder,options:e.select.items,optionsGroupLabel:"Citation style",selection:e.select.items.find((t=>t.id===e.selectedItem)),onSelectionChange:e=>n({kind:"sduiCitationDropdownSelect",actions:e.onClickActions})(),label:e=>e.label,renderOption:e=>e.label})))))),he.createElement(Li,{className:mc},e.cardList),e.footer)})),uc=r.UI.Knot.make(cc,{cardList:Bl,footer:r.UI.Union.asOption(sc)}),dc=r.UI.Union.make("kind",{loadingState:$l,emptyState:Rl,nonEmptyState:uc}),mc=_e.ux.style({$nest:{'&[data-overflow-top="true"]':{borderTop:`0.5px solid ${Ae.Z.BorderBaseSubduedColor}`}}}),pc={padding:0,display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%"},hc={whiteSpace:"normal",padding:0},gc=_e.ux.style({display:"flex",alignItems:"flex-start",justifyContent:"space-between",padding:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.mh)}`,paddingTop:_e.ux.rem(Ee.mh)}),fc=_e.ux.style({width:"min-content",height:_e.ux.rem(1.5),$nest:{"& > button":{padding:`${_e.ux.rem(3*Ee.W9)} ${_e.ux.rem(Ee.F2)} ${_e.ux.rem(3*Ee.W9)} ${_e.ux.rem(Ee.x)}`}}}),vc=_e.ux.style({width:_e.ux.rem(9.75)}),xc=r.UI.Node.make((({view:e})=>he.createElement(Ni,{"data-name":"settings"},e("content"))));var bc=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const yc=_e.ux.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),kc=_e.ux.style({animation:`${yc} 1s linear infinite`,width:_e.ux.rem(1),height:_e.ux.rem(1),minWidth:_e.ux.rem(1),minHeight:_e.ux.rem(1)}),wc=e=>{const{className:t}=e,n=bc(e,["className"]);return he.createElement(ye.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},(0,fe.Sh)(kc,t),n),he.createElement("circle",{cx:"8",cy:"8",r:"5",stroke:"#C2C6D4",strokeWidth:"2"}),he.createElement("path",{d:"M13 8C13 8.76694 12.8236 9.5236 12.4844 10.2114C12.1452 10.8993 11.6523 11.4999 11.0438 11.9668C10.4354 12.4336 9.72765 12.7543 8.97545 12.9039C8.22325 13.0535 7.44671 13.0281 6.7059 12.8296",stroke:"#05735A",strokeWidth:"2",strokeLinecap:"round"}))},Cc=e=>he.createElement(ye.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18"},e),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0607 3.64286C9.5893 2.78571 8.4107 2.78571 7.93926 3.64286L3.16592 12.3214C2.69448 13.1786 3.28378 14.25 4.22667 14.25H13.7733C14.7162 14.25 15.3055 13.1786 14.8341 12.3214L10.0607 3.64286ZM8.25 6C8.25 5.58579 8.58579 5.25 9 5.25C9.41421 5.25 9.75 5.58579 9.75 6V9.75C9.75 10.1642 9.41421 10.5 9 10.5C8.58579 10.5 8.25 10.1642 8.25 9.75V6ZM9.75 12C9.75 12.4142 9.41421 12.75 9 12.75C8.58579 12.75 8.25 12.4142 8.25 12C8.25 11.5858 8.58579 11.25 9 11.25C9.41421 11.25 9.75 11.5858 9.75 12Z",stroke:"none"})),Ec=e=>Object.assign({height:"100%"},e?{borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"}:{borderRadius:_e.ux.rem(li.xB+li.fe)}),Sc=e=>_e.ux.style(Object.assign(Object.assign({},Ec(e)),{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"})),_c=e=>_e.ux.style(Object.assign(Object.assign({},Ec(e)),{border:"none",margin:"0",width:"100%"})),Ic=_e.ux.style({color:be.Il.Text.Base.Subdued,fontSize:_e.ux.rem(.75),fontFamily:"Inter",fontWeight:700,lineHeight:_e.ux.rem(1.125)}),Ac=_e.ux.style({color:be.Il.Text.Base.Subdued,fontSize:_e.ux.rem(.75),fontFamily:"Inter",lineHeight:_e.ux.rem(1.125)}),Bc=_e.ux.style({visibility:"hidden",position:"absolute"}),Oc=r.UI.Node.make((({state:e,view:t,notify:n})=>{const{notifyUnmount:i}=he.useContext(_r),{ref:r,onMount:o}=(0,Ai.F)((0,s.ls)(F.b((e=>n({kind:A.i.Kind.mount,name:Z.e.skill,element:e})())),Ii.x((()=>i({kind:A.i.Kind.unmount,name:Z.e.skill}))))),a=he.useMemo((()=>t("status").pipe(re.G(),N.h((([e,t])=>"loading"===e&&"ready"===t)),w.w((()=>r.pipe(E.oA,F.b((e=>e.focus()))))))),[r]);_i.P.useSubscriptionTo(a);const l=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{"data-name":"skill",style:G.aj([t("size"),l]).pipe(C.U((([e,t])=>Object.assign(Object.assign({},(e=>Object.assign({padding:0,height:_e.ux.rem(14.625),overflow:"hidden",boxSizing:"border-box",maxHeight:"inherit"},e?{display:"flex",justifyContent:"center",alignItems:"center",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit"}:{}))(t)),{height:e.height}))))},G.aj([e,l]).pipe(C.U((([{status:e,srcUrl:t},n])=>"loading"===e||"ready"===e?he.createElement(he.Fragment,null,"loading"===e&&he.createElement("div",{className:Sc(n)},he.createElement(wc,null),he.createElement("span",{className:Ac},"Loading...")),he.createElement("iframe",{"aria-busy":"loading"===e,key:t,src:t,ref:o,allow:`clipboard-write ${t}`,className:_e.ux.joinClasses([_c(n),"loading"===e?Bc:void 0])})):"error"===e?he.createElement("div",{className:Sc(n)},he.createElement(Cc,null),he.createElement("span",{className:Ic},"Something went wrong"),he.createElement("span",{className:Ac},"Please try again.")):(0,D.L0)(e)))))})),Rc=r.UI.Union.asOption(Oc),Tc=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"M9.2 8a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0Zm0 4.8a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0Zm0-9.6a1.2 1.2 0 1 1-2.4 0 1.2 1.2 0 0 1 2.4 0Z",fill:"#646B81"}));Tc.__brand="color";const Nc=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"M13.5 8.635c0 .09-.017.181-.047.265l-1.797 3.607-.008.016-.007.017c-.116.284-.371.46-.641.46H6.4c-.362 0-.7-.316-.7-.77V7.578a.81.81 0 0 1 .215-.553l3.589-3.796.264.279c.08.09.128.202.132.321l-.012.143-.523 2.663-.117.597H13.2c.138 0 .3.13.3.346v1.058ZM3.6 7.23c.14 0 .3.128.3.346v5.077c0 .218-.16.346-.3.346h-.8c-.14 0-.3-.128-.3-.346V7.577c0-.218.16-.346.3-.346h.8Z",stroke:"#646B81"}));Nc.__brand="color";const Mc=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"M2.5 7.865c0-.09.017-.181.047-.265l1.797-3.607.008-.016.007-.017c.116-.283.371-.46.641-.46h4.6c.362 0 .7.316.7.77v4.653a.812.812 0 0 1-.215.553l-3.589 3.796-.264-.279a.513.513 0 0 1-.132-.322l.012-.142.523-2.663.117-.597H2.8c-.138 0-.3-.13-.3-.346V7.865Zm9.9 1.404c-.14 0-.3-.128-.3-.346V3.846c0-.218.16-.346.3-.346h.8c.14 0 .3.128.3.346v5.077c0 .218-.16.346-.3.346h-.8Z",stroke:"#646B81"}));Mc.__brand="color";var Uc=n(65223),Fc=n(48911),zc=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function jc(e){var{children:t,onOpenChange:n,title:r,placement:o="bottom end"}=e,a=zc(e,["children","onOpenChange","title","placement"]);return he.createElement(lr.l.Consumer,null,(({portalContainer:e})=>he.createElement(ve.F.Fragment,null,e.view(i.fold(s.gn,(e=>he.createElement(nl,Object.assign({},a,{portalContainer:e,placement:o,title:r,onOpenChange:e=>null==n?void 0:n(e)}),t)))))))}const Pc=({status:e,description:t})=>{const[n,r]=e===oe.Bs.On?[Lc,Hc]:e===oe.Bs.Off?[Dc,Vc]:(0,D.L0)(e),o=(0,s.zG)(t,i.fold((()=>he.createElement(ye.JO.Info,{className:r})),(e=>he.createElement(Uc.u,{title:he.createElement("div",{className:Kc},e)},he.createElement(ye.JO.Info,{className:r})))));return he.createElement("div",{className:n},he.createElement("div",{className:$c},e,"-BRAND ",o))},Gc={display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:_e.ux.rem(Ee.F2),paddingRight:_e.ux.rem(Ee.F2),paddingLeft:_e.ux.rem(Ee.F2),textTransform:"uppercase",letterSpacing:"0.04em",fontSize:_e.ux.rem(Ee.x+Ee.yC),lineHeight:_e.ux.rem(Ee.mh)},Lc=_e.ux.style(Gc,{background:Ae.Z.OnBrandBadge,color:Ae.Z.OnBrandBadgeLabel}),Dc=_e.ux.style(Gc,{background:Ae.Z.OffBrandBadge,color:Ae.Z.OffBrandBadgeLabel}),Zc={width:_e.ux.rem(Ee.x+Ee.yC),minWidth:"unset",minHeight:"unset",paddingLeft:_e.ux.rem(Ee.x)},Hc=_e.ux.style(Zc,{stroke:Ae.Z.OnBrandBadgeIcon,fill:Ae.Z.OnBrandBadgeIcon}),Vc=_e.ux.style(Zc,{stroke:Ae.Z.OffBrandBadgeIcon,fill:Ae.Z.OffBrandBadgeIcon}),$c=_e.ux.style({display:"flex",justifyContent:"center",whiteSpace:"nowrap"}),Kc=_e.ux.style({maxWidth:_e.ux.rem(80*Ee.F2),textAlign:"left",whiteSpace:"normal",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"}),Wc=({tone:e,index:t,onReportPositiveFeedback:n,onReportNegativeFeedback:r})=>{const o=(0,s.zG)(e.brandToneInfo,i.fold((()=>he.createElement(Uc.u,{title:`${e.prevalence} intensity`},he.createElement("div",{className:tu},[0,1,2,3,4].map((t=>{const n=t/5<=e.confidence;return he.createElement("div",{key:`${e.name}-intensity-${t}`,className:n?iu:nu})}))))),(({status:e,description:t})=>he.createElement(Pc,{status:e,description:t}))));return he.createElement("div",{"data-name":"tone-report-tone","data-tone-report-tone-name":e.name,role:`tone-${t}-${e.name}`,className:Qc},he.createElement("div",{className:Yc},he.createElement(Fc.In,{id:e.emojiId,className:Xc}),he.createElement("span",{className:Jc},e.name)),he.createElement("div",{className:eu},o),he.createElement(jc,{"aria-label":`${e.name} Tone Actions Menu`,placement:"left",label:he.createElement(Tc,{className:ru}),onAction:e=>{switch(e){case"likeTone":return n();case"dislikeTone":return r();default:return}}},he.createElement(il.$0,{title:"Help us improve"},he.createElement(il.ck,{key:"likeTone",textValue:"likeTone"},he.createElement(Nc,{className:ou}),"Tone seems correct"),he.createElement(il.ck,{key:"dislikeTone",textValue:"dislikeTone"},he.createElement(Mc,{className:ou}),"Tone seems incorrect"))))},qc={height:_e.ux.rem(5*Ee.W9),width:_e.ux.rem(5*Ee.W9),borderRadius:_e.ux.percent(50),marginRight:_e.ux.rem(3*Ee.W9)},Qc=_e.ux.style({display:"grid",alignItems:"center",gridTemplateColumns:"0.6fr 0.5fr auto",height:_e.ux.rem(2.5)}),Yc=_e.ux.style({display:"flex",alignItems:"center",flexBasis:_e.ux.percent(45)}),Xc=_e.ux.style({padding:_e.ux.rem(Ee.yC),marginRight:_e.ux.rem(Ee.qp),width:_e.ux.rem(Ee.w9),height:_e.ux.rem(Ee.w9)}),Jc=_e.ux.style({textTransform:"capitalize",fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125)}),eu=_e.ux.style({display:"inline-flex"}),tu=_e.ux.style({display:"flex"}),nu=_e.ux.style(qc,{backgroundColor:Ae.Z.IndicatorDotDefault}),iu=_e.ux.style(qc,{backgroundColor:Ae.Z.IndicatorDotActive}),ru=_e.ux.style({padding:_e.ux.rem(Ee.F2)}),ou=_e.ux.style({marginRight:_e.ux.rem(Ee.x)}),su=r.UI.Node.make((({state:e,notify:t})=>{const{onMount:n}=(0,Ai.F)(F.b((e=>t({kind:A.i.Kind.mount,name:Z.e.toneReport,element:e})())));return he.createElement(Ni,{mount:n,key:"tone-report","data-name":"tone-report"},he.createElement("div",{className:du},he.createElement(ve.F.div,{className:mu},e.pipe(C.U((e=>function({tones:e,onBrandTitleEnabled:t}){const n=(0,s.zG)(e,K.hX((e=>i.isSome(e.brandToneInfo)&&e.brandToneInfo.value.status===oe.Bs.Off)),i.map(K.UI((e=>e.confidence))),i.map(K.u4(0,me.max(me.ordNumber)))),r=e.filter((e=>i.isSome(e.brandToneInfo)&&e.brandToneInfo.value.status===oe.Bs.On)).length;return i.isSome(n)&&n.value>.75?"Your tone may sound off to readers":i.isSome(n)?"Something sounds slightly off...":r>0&&t?"You're on-brand! Great job!":r>0?"Your writing sounds clear and aligned. Great job!":"How this may sound to readers:"}(e)))))),he.createElement(ve.F.div,{className:pu,"data-name":"tone-report-items"},e.pipe(C.U((({tones:e})=>e.map(((e,n)=>he.createElement(Wc,{key:e.name,index:n,tone:e,onReportPositiveFeedback:t({kind:A.i.Kind.toneReportToneLikeButtonClick,toneName:e.name}),onReportNegativeFeedback:t({kind:A.i.Kind.toneReportToneDislikeButtonClick,toneName:e.name})}))))))))}));const au=r.UI.Node.make((()=>he.createElement(Ni,{style:cu},he.createElement(wc,null),he.createElement("span",{className:uu},"Loading...")))),lu=r.UI.Union.make("kind",{loading:au,loadedEmpty:au,loadedNonEmpty:su}),cu={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:_e.ux.rem(9.5)},uu=_e.ux.style({color:be.Il.Text.Base.Subdued,fontSize:_e.ux.rem(.75),fontFamily:"Inter",lineHeight:_e.ux.rem(1.125)}),du=_e.ux.style({display:"flex",alignItems:"flex-start"}),mu=_e.ux.style({flexGrow:1,fontStyle:"normal",fontWeight:"bold",fontSize:_e.ux.rem(1),lineHeight:_e.ux.rem(1.5)}),pu=_e.ux.style({marginTop:_e.ux.rem(.5)});var hu=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const gu=e=>{var{text:t,onChange:n,placeholder:i,disabled:r,className:o,onFocus:s,onBlur:a,onKeyPressEnter:l,autofocus:c,onKeyUpEscape:u}=e,d=hu(e,["text","onChange","placeholder","disabled","className","onFocus","onBlur","onKeyPressEnter","autofocus","onKeyUpEscape"]);const[m,p]=he.useState(null);return he.useEffect((()=>{m&&void 0!==c&&m.focus()}),[c,m]),he.createElement(Nr,{className:o,style:{height:_e.ux.rem(1.375)},name:"text-input-iframe"},he.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .textBox {\n        box-sizing: border-box;\n        border-radius: ${_e.ux.rem(li.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${_e.ux.rem(.875)};\n        font-weight: 400;\n        color: ${Rr};\n      }\n      .textBox::placeholder {\n        color: ${Tr};\n      }\n      .textBox:focus {\n        outline: none;\n      }\n      `.replace(/\s/g,"")}}),he.createElement("input",Object.assign({},d,{className:"textBox",style:{lineHeight:_e.ux.rem(1.375)},value:t,ref:p,onChange:e=>n(e.target.value),placeholder:i,disabled:r,onFocus:()=>null==s?void 0:s(),onBlur:()=>null==a?void 0:a(),onKeyPress:e=>{l&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation(),l())},onKeyDown:e=>{u&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),u())}})))},fu={padding:`${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.F2+Ee.Ze)} ${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.qp)}`,border:`1px solid ${be.Il.Background.Neutral.Default}`,borderRadius:_e.ux.rem(li.xB),width:_e.ux.rem(15),height:_e.ux.rem(2),boxSizing:"border-box",position:"relative"},vu={position:"absolute",right:_e.ux.rem(Ee.x),top:_e.ux.rem(.1875),border:"none",background:"transparent",display:"flex",alignItems:"center",cursor:"pointer",width:_e.ux.rem(1.5),height:_e.ux.rem(1.5),padding:0},xu=Object.assign(Object.assign({},(0,Ie.fx)(1.5)),{$nest:{"& svg":{stroke:be.Il.Text.Base.Subdued}}}),bu={padding:_e.ux.rem(Ee.F2),background:"white",boxShadow:Si.H8.boxShadow,border:Si.H8.border,borderRadius:_e.ux.rem(li.xB),width:_e.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:_e.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},yu={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.375),color:be.Il.Text.Base.Default,padding:`${_e.ux.rem(.1875)} ${_e.ux.rem(Ee.qp)}`,borderRadius:_e.ux.rem(li.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:Se.Blue0},"& mark":{backgroundColor:"unset",fontWeight:"bold"}}},ku={width:_e.ux.percent(100),border:"none"},wu=_e.ux.style(fu),Cu=_e.ux.style(vu),Eu=_e.ux.style(xu),Su=_e.ux.style(bu),_u=_e.ux.style(yu),Iu=_e.ux.style({whiteSpace:"pre"}),Au=_e.ux.style(ku),Bu=new Xs(999999);function Ou({text:e,placeholder:t,clearButton:n,selectOnBlur:i,label:r,options:o,className:s,filterBy:a=((e,t)=>r(e).toLowerCase().includes(t.toLowerCase())),onInputChange:l,onSelectionChange:c}){const[u,d]=he.useState(!1),m=he.useRef(Bu.newId().toString()),[p,h]=he.useState(null),[f,v]=he.useState(null),{styles:x,attributes:b}=(0,Ks.D)(p,f,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),y=o.filter((t=>a(t,e.trim()))),k=u&&y.length>0,w=he.useMemo((()=>new g.xQ),[]);return _i.P.useSubscriptionTo(w.pipe(ce.b(50),N.h((e=>!e)),F.b((()=>{d(!1),i&&""!==e.trim()&&c(y.length>0?y[0]:null)})))),he.createElement("div",Object.assign({},(0,fe.Sh)(wu,s),{ref:h}),he.createElement(gu,{className:Au,placeholder:t,onChange:l,text:e,onFocus:()=>{d(!0),w.next(!0)},onBlur:()=>w.next(!1),role:"combobox","aria-haspopup":"listbox","aria-owns":m.current,"aria-expanded":k}),""!==e.trim()&&!!n&&he.createElement("button",{onClick:(0,Js.m)((()=>c(null))),className:Cu,"aria-label":"Clear",type:"button"},he.createElement(ye.JO.Close,{className:Eu})),k&&he.createElement("div",Object.assign({ref:v,style:x.popper},b.popper,{className:Su,onFocus:()=>w.next(!0),onBlur:()=>w.next(!1)}),he.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:m.current},y.map((t=>{const n=r(t);return he.createElement("li",{key:n,"aria-label":n,role:"option"},he.createElement("button",{className:_u,onClick:(0,Js.m)((()=>{c(t),d(!1)}))},he.createElement(Ru,{label:n,pattern:e})))})))))}const Ru=({label:e,pattern:t})=>{if(""===t.trim())return he.createElement(he.Fragment,null,e);const n=t.trim(),i=e.split(new RegExp(n,"i")),r=(0,s.zG)(i.map(((e,t)=>({token:e,mark:!1,end:t*n.length+i.slice(0,t).join("").length+e.length}))),R.iD({token:"",mark:!0,end:0})).map(((t,i,r)=>t.mark&&i>0?{token:e.slice(r[i-1].end,r[i-1].end+n.length),mark:!0}:{token:t.token,mark:!1})).filter((e=>e.token.length>0));return he.createElement(he.Fragment,null,r.map(((e,t)=>e.mark?he.createElement("mark",{key:t,className:Iu},e.token):he.createElement("span",{key:t,className:Iu},e.token))))};const Tu=e=>he.createElement(ye.a1,Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},e),he.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeWidth:".857",d:"m4 4 2 2m2 2L6 6m0 0 2-2M6 6 4 8"})),Nu=({kind:e,label:t,description:n,iconUrl:i,isUnselectable:r,onToggle:o})=>he.createElement(Uc.u,{title:n},he.createElement("button",{disabled:"disabled"===e,className:Mu,"data-kind":e,"data-unselectable":r,onClick:(0,Js.m)((()=>{"disabled"!==e&&o("selected"!==e&&("unselected"===e||(0,D.L0)(e)))}))},i?he.createElement("img",{src:i,style:{width:20,height:20}}):null,he.createElement("span",null,t),r&&"selected"===e?he.createElement(Tu,{className:Uu}):null)),Mu=_e.ux.style({display:"flex",alignItems:"center",justifyContent:"center",gap:_e.ux.rem(Ee.x),padding:`${_e.ux.rem(Ee.F2)} ${_e.ux.rem(.625)} ${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.x)}`,background:be.Il.Background.Base.Default,border:`${_e.ux.px(1)} solid transparent`,borderRadius:_e.ux.rem(1.875),fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.375),boxSizing:"border-box",$nest:{"&[data-kind='unselected']":{border:`${_e.ux.px(1)} solid ${Se.BlueGray5}`,color:be.Il.Text.Base.Default,cursor:"pointer"},"&[data-kind='disabled']":{border:`${_e.ux.px(1)} solid ${Se.BlueGray5}`,color:Se.BlueGray40,cursor:"default"},"&[data-kind='selected']":{border:`${_e.ux.px(2)} solid ${Ae.Z.BrandGreen60}`,padding:`${_e.ux.rem(.1875)} ${_e.ux.rem(.5625)} ${_e.ux.rem(.1875)} ${_e.ux.rem(.4375)}`,position:"relative",$nest:{"&[data-unselectable='true']":{cursor:"pointer"}}}}}),Uu=_e.ux.style(Object.assign(Object.assign({position:"absolute",top:_e.ux.rem(-(Ee.F2+Ee.W9)),right:_e.ux.rem(-(Ee.F2+Ee.W9)),boxSizing:"content-box"},(0,Ie.fx)(.75)),{border:`${_e.ux.rem(.125)} solid white`,borderRadius:"50%",background:Ae.Z.BrandGreen60,display:"flex",alignItems:"center",justifyContent:"center"})),Fu=({chips:e,className:t,onToggle:n})=>he.createElement(ve.F.div,Object.assign({},(0,fe.Sh)(zu,t)),e.pipe(C.U(R.UI((e=>he.createElement(Nu,Object.assign({},e,{onToggle:t=>n(e,t),key:e.label}))))))),zu=_e.ux.style({display:"flex",flexWrap:"wrap",gap:_e.ux.rem(Ee.F2),$nest:{div:{marginTop:_e.ux.rem(Ee.F2)}}}),ju={margin:0,padding:_e.ux.rem(Ee.mh),gap:_e.ux.rem(Ee.mh)},Pu={color:be.Il.Text.Base.Default,fontWeight:700,fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.375),margin:0},Gu={color:be.Il.Text.Base.Subdued,fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125)},Lu={marginTop:_e.ux.rem(Ee.x)},Du={color:Se.BlueGray60,fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125)},Zu={display:"flex",justifyContent:"flex-end",gap:_e.ux.rem(Ee.x)},Hu={fontSize:_e.ux.important(_e.ux.rem(.875))},Vu={marginTop:_e.ux.rem(Ee.x)},$u={marginTop:_e.ux.rem(Ee.x)},Ku={display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x)},Wu={width:_e.ux.rem(1.5),height:_e.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center"},qu=ju,Qu=_e.ux.style(Pu),Yu=_e.ux.style(Lu),Xu=_e.ux.style(Gu),Ju=_e.ux.style(Du),ed=_e.ux.style(Zu),td=_e.ux.style(Hu),nd=_e.ux.style(Hu),id=_e.ux.style(Vu),rd=_e.ux.style($u),od=_e.ux.style(Ku),sd=_e.ux.style(Wu),ad=r.UI.Node.make((({view:e,state:t,notify:n})=>he.createElement(Ni,{style:qu,"data-name":"voice-profile"},he.createElement("section",null,he.createElement("h2",{className:Qu},"Formality"),he.createElement(Fu,{className:Yu,chips:e("styles").pipe(C.U(R.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!1}))))),onToggle:e=>n({kind:A.i.Kind.styleToggleClick,id:e.id})()})),he.createElement("section",null,he.createElement("h2",{className:Qu},"Tone"),he.createElement(ve.F.div,{className:Xu},"Select up to"," ",e("maxSelectableTones").pipe(C.U((e=>{return t=e,Number.isInteger(t)&&t>=0&&t<10?function(e){return["zero","one","two","three","four","five","six","seven","eight","nine"][e]}(e):`${e}`;var t})))),he.createElement(Fu,{className:Yu,chips:e("tones").pipe(C.U(R.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!0}))))),onToggle:(e,t)=>n({kind:A.i.Kind.toneToggleClick,selected:t,id:e.id})()})),t.pipe(C.U((e=>(0,s.zG)(e.roles,K.c2,i.fold(s.gn,(t=>he.createElement("section",null,he.createElement("h2",{className:Qu},"Your profession"),he.createElement(Ou,{className:id,placeholder:"Product designer",text:e.roleTypeaheadText,onInputChange:e=>n({kind:"updateRoleTypeaheadText",text:e})(),onSelectionChange:e=>n({kind:A.i.Kind.roleTypeaheadSelectionChange,role:i.fromNullable(e)})(),options:t,label:e=>e.label,clearButton:!0,selectOnBlur:!0})))))))),he.createElement("section",null,he.createElement("h2",{className:Qu},"I write in"),he.createElement(ve.F.Fragment,null,t.pipe(C.U((({dialects:e,selectedDialect:t})=>he.createElement(da,{className:rd,options:e.filter((e=>!Gn.L.Dialect.Id.eq.equals(e.id,t.id))),selection:t,onSelectionChange:e=>n({kind:A.i.Kind.dialectDropdownSelectionChange,dialect:e})(),label:e=>e.label,renderOption:e=>he.createElement("div",{className:od},he.createElement("div",{className:sd},he.createElement("img",{src:e.iconUrl,style:{width:_e.ux.rem(1),height:_e.ux.rem(1)}})),e.label)})))))),e("description").pipe(C.U((e=>""!==e.trim()?he.createElement("div",{className:Ju},e):null))),he.createElement(ve.F.div,{className:ed},he.createElement(xe.z,{variant:"tertiary",className:nd,onClick:n({kind:A.i.Kind.voiceProfileCloseButtonClick}),name:"closeVoiceProfile"},"Close"),e("applyButtonEnabled").pipe(C.U((e=>he.createElement(xe.z,{className:td,onClick:n({kind:A.i.Kind.voiceProfileUseVoiceButtonClick}),disabled:!e,name:"applyVoiceProfile"},"Use this voice")))))))),ld=({className:e})=>he.createElement("div",Object.assign({role:"separator"},(0,fe.Sh)(cd,e))),cd=_e.ux.style({position:"relative",width:"100%",borderBottom:`0.5px solid ${Se.BlueGray10}`});var ud,dd=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={}))}(ud||(ud={}));const md=({tabs:e,activeTabId:t,onActiveTabChange:n,children:i})=>he.createElement(he.Fragment,null,he.createElement("div",{className:hd,role:"tablist"},e.map((e=>he.createElement("button",{key:e.id,onClick:()=>n(e.id),tabIndex:0,className:gd,id:`tab-${e.id}`,"aria-label":`${e.label} ${e.id===t?"Selected.":""}`,"aria-controls":`tabpanel-${e.id}`,"aria-selected":t===e.id,role:"tab",type:"button"},e.label)))),i),pd=e=>{var{id:t,isActive:n,children:i,className:r,style:o}=e,s=dd(e,["id","isActive","children","className","style"]);return he.createElement("div",Object.assign({role:"tabpanel",id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,hidden:!n,style:n?o:void 0,className:n?r:void 0},s),i)},hd=_e.ux.style({display:"flex",alignContent:"flex-start",gap:_e.ux.rem(Ee.x)}),gd=_e.ux.style({cursor:"pointer",border:"none",display:"flex",alignItems:"center",background:"transparent",borderBottom:`${_e.ux.rem(Ee.yC)} solid transparent`,fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),height:_e.ux.rem(1.5),color:Ae.Z.TextBaseSubduedColor,$nest:{'&[aria-selected="true"]':{borderBottomColor:Ae.Z.TextBaseSubduedColor,fontWeight:700},'&[aria-selected="false"]:hover':{borderBottomColor:Se.BlueGray10}}});var fd=n(93947),vd=n(17579);const xd={editBtn:"editBtn",cancelBtn:"cancelBtn",saveBtn:"saveBtn"},bd={default:{backgroundColor:Ae.Z.BlueGray0}},yd=e=>Object.assign(Object.assign({gap:0,backgroundImage:"url(https://assets.grammarly.com/cheetah/v1/voice-profile/cheetah-my-voice-bg.svg)",backgroundPosition:"right",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%"},e?{padding:`${_e.ux.rem(Ee.qp)} ${_e.ux.rem(Ee.mh)}`}:{}),{$nest:{[`.${xd.editBtn}`]:{opacity:0,pointerEvents:"none",$nest:{"&:focus":{opacity:1,pointerEvents:"auto"}}},[`&:hover .${xd.editBtn}, &:focus .${xd.editBtn}`]:{opacity:1,pointerEvents:"auto"}}}),kd=e=>_e.ux.style({display:"flex",justifyContent:"space-between",marginBottom:e?_e.ux.rem(Ee.x):_e.ux.rem(Ee.yC+Ee.F2)}),wd=_e.ux.style({margin:0,fontSize:_e.ux.rem(1.25),lineHeight:_e.ux.rem(1.5),fontWeight:700}),Cd=_e.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"}),Ed=_e.ux.style({display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.x)}),Sd=_e.ux.style({display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.F2)}),_d=_e.ux.style({color:Ae.Z.TextBaseSubduedColor,fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),margin:0}),Id=_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x)}),Ad=_e.ux.style({width:_e.ux.rem(1.5),height:_e.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center",$nest:{"& img":{width:_e.ux.rem(1),height:_e.ux.rem(1)}}}),Bd=_e.ux.style({display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.F2)}),Od=_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.F2),height:_e.ux.rem(1.5),color:Ae.Z.TextBaseSubduedColor,fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),fontWeight:500}),Rd=_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x)});var Td=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Nd=e=>{var{children:t,active:n}=e,i=Td(e,["children","active"]);const r=he.useRef(null);return he.createElement(he.Fragment,null,r.current&&n?he.createElement(wi.J2,Object.assign({},i,{reference:r.current})):null,he.cloneElement(t,{ref:r}))},Md=he.forwardRef((function({name:e,active:t,onClick:n},i){return he.createElement("button",{role:"button",tabIndex:0,"aria-label":e,"aria-pressed":t,"data-active":t,onClick:n,ref:i,className:Ud},e)})),Ud=_e.ux.style({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",height:_e.ux.rem(2),borderRadius:_e.ux.rem(li.xB),border:`${_e.ux.rem(Ee.yC)} solid transparent`,padding:`${_e.ux.rem(Ee.yC+Ee.F2)} ${_e.ux.rem(Ee.x)}`,backgroundColor:Ae.Z.Green0,color:Ae.Z.Green90,lineHeight:_e.ux.rem(1.3125),fontSize:_e.ux.rem(.875),$nest:{"&:hover":{backgroundColor:_e.ux.color(Ae.Z.Green10).mix(_e.ux.color(Ae.Z.BlueGray5)).toRGBA().toString(),color:Ae.Z.Green80},'&[data-active="true"]':{outline:`${_e.ux.rem(Ee.yC)} solid ${Ae.Z.Green80}`}}}),Fd=({profileName:e,sectionName:t,tagName:n,activeTagId:r,onVoiceTagPopoverClose:o,onKeepClick:a,onRemoveClick:l,onVoiceTagClick:c})=>he.createElement(Nd,{active:(0,s.zG)(r,i.exists((i=>i===Gn.b.createId({tagName:n,sectionName:t,profileName:e})))),onClose:i=>{"keep"===i?a():"remove"===i?l(n,e,t):o()},title:he.createElement("h1",{className:zd},"Does this sound like you?"),footer:he.createElement(wi.yS.Consumer,null,(({closePopover:e})=>he.createElement(he.Fragment,null,he.createElement(xe.z,{onClick:()=>e("keep"),style:jd,textPosition:"everywhere"},he.createElement(Nc,null),"Yes, keep it"),he.createElement(xe.z,{onClick:()=>e("remove"),style:jd,textPosition:"everywhere"},he.createElement(Mc,null),"No, remove it"))))},he.createElement(Md,{name:n,active:(0,s.zG)(r,i.exists((i=>i===Gn.b.createId({tagName:n,sectionName:t,profileName:e})))),onClick:()=>c(n,e,t)})),zd=_e.ux.style({fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.375),fontWeight:700,margin:0}),jd={default:{gap:_e.ux.rem(Ee.F2),padding:`0 ${_e.ux.rem(Ee.x)} 0 ${_e.ux.rem(Ee.F2)}`,color:Ae.Z.TextBaseDefault,backgroundColor:be.Il.Background.Base.Default},hovered:{color:Ae.Z.TextBaseDefault,backgroundColor:Ae.Z.BlueGray5},active:{color:Ae.Z.TextBaseDefault,backgroundColor:Ae.Z.BlueGray5}},Pd=({profile:e,activeProfileName:t,activeTagId:n,onVoiceTagPopoverClose:r,onKeepClick:o,onRemoveClick:s,onVoiceTagClick:a})=>he.createElement(pd,{id:ud.Id.create(e.name),isActive:e.name===i.toNullable(t),className:Gd},e.summary,he.createElement("div",{className:Dd},e.sections.map((t=>he.createElement("div",{key:t.name},t.name,he.createElement("div",{className:Zd},0===t.tags.length?he.createElement("div",{className:Ld},"Detected qualities will appear here"):t.tags.map((i=>he.createElement(Fd,{key:i.name,tagName:i.name,sectionName:t.name,profileName:e.name,activeTagId:n,onVoiceTagPopoverClose:r,onKeepClick:o,onRemoveClick:s,onVoiceTagClick:a}))))))))),Gd=_e.ux.style({fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.qp),paddingTop:_e.ux.rem(Ee.x)}),Ld=_e.ux.style({padding:`0 ${_e.ux.rem(Ee.x)}`,background:Ae.Z.BlueGray0,color:Ae.Z.TextBaseSubduedColor,borderRadius:_e.ux.rem(li.xB),height:_e.ux.rem(2),fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),display:"flex",justifyContent:"center",alignItems:"center"}),Dd=_e.ux.style({display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.qp)}),Zd=_e.ux.style({marginTop:_e.ux.rem(Ee.x),display:"flex",flexWrap:"wrap",gap:_e.ux.rem(Ee.F2)}),Hd=(0,fe.xb)((({onEditButtonClick:e,onSaveButtonClick:t,onCancelButtonClick:n,onDialectDropdownChange:r,onRoleDropdownChange:o,userName:a,isEditing:l,selectedRole:c,roles:u,dialects:d,selectedDialect:m})=>{const p=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:p.view(yd)},he.createElement("div",{className:kd(l)},he.createElement("h1",{className:wd},a),l?null:he.createElement(xe.z,{variant:"secondary",onClick:e,className:xd.editBtn,style:bd,size:"small"},"Edit")),l?he.createElement("div",{className:Cd},he.createElement("div",{className:Ed},0!==u.length&&he.createElement("div",{className:Sd},he.createElement("h2",{className:_d},"My role"),he.createElement(da,{placeholder:"Select a role...",options:u,selection:i.toUndefined(c),onSelectionChange:o,label:e=>e.id,renderOption:e=>e.id})),he.createElement("div",{className:Sd},he.createElement("h2",{className:_d},"I write in"),he.createElement(da,{options:d,selection:m,onSelectionChange:r,label:e=>e.label,renderOption:e=>he.createElement("div",{className:Id},he.createElement("div",{className:Ad},he.createElement("img",{src:e.iconUrl,alt:""})),e.label)}))),he.createElement("div",{className:Rd},he.createElement(xe.z,{variant:"tertiary",onClick:n},"Cancel"),he.createElement(xe.z,{onClick:t},"Save"))):he.createElement("div",{className:Bd},(0,s.zG)(c,i.fold(s.gn,(e=>he.createElement("div",{className:Od},he.createElement("div",{className:Ad},he.createElement(fd.J,{icon:vd.N,accessibilityLabel:"Role"})),he.createElement("span",null,e.label))))),he.createElement("div",{className:Od},he.createElement("div",{className:Ad},he.createElement("img",{src:m.iconUrl,alt:""})),he.createElement("span",null,m.label))))})),Vd=r.UI.Node.make((({view:e,state:t,notify:n})=>{const r=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.div,{className:r.view($d)},he.createElement(Hd,{onEditButtonClick:n({kind:A.i.Kind.voiceSelectionsEditButtonClick}),onDialectDropdownChange:e=>n({kind:A.i.Kind.voiceDialectDropdownSelectionChange,dialect:e})(),onRoleDropdownChange:e=>n({kind:A.i.Kind.voiceRoleDropdownSelectionChange,role:e})(),onSaveButtonClick:n({kind:A.i.Kind.voiceSelectionsSaveButtonClick}),onCancelButtonClick:n({kind:A.i.Kind.voiceSelectionsCancelButtonClick}),userName:e("userName"),isEditing:e("isEditing"),selectedRole:e("selectedRole"),selectedDialect:e("selectedDialect"),roles:e("roles"),dialects:e("dialects")}),he.createElement(Ni,{style:r.view(Kd)},he.createElement(ve.F.div,null,t.pipe(C.U((e=>he.createElement(he.Fragment,null,he.createElement("div",{className:Wd},he.createElement("div",null,he.createElement("h1",{className:qd},e.title),he.createElement("h2",{className:Qd},e.subTitle)),he.createElement(md,{key:"Tabs",tabs:e.profiles.map((e=>({id:ud.Id.create(e.name),label:e.name}))),activeTabId:ud.Id.create(i.toNullable(e.activeProfileName)||""),onActiveTabChange:e=>n({kind:A.i.Kind.voiceProfileTabChange,profileName:e})()})),e.profiles.map((t=>he.createElement(Pd,{key:t.name,profile:t,activeProfileName:e.activeProfileName,activeTagId:e.activeTagId,onVoiceTagPopoverClose:n({kind:A.i.Kind.voiceTagPopoverClose}),onKeepClick:n({kind:A.i.Kind.voiceTagPopoverKeepButtonClick}),onRemoveClick:(e,t,i)=>n({kind:A.i.Kind.voiceTagPopoverRemoveButtonClick,tagName:e,profileName:t,sectionName:i})(),onVoiceTagClick:(e,t,i)=>n({kind:A.i.Kind.voiceTagClick,tagName:e,profileName:t,sectionName:i})()})))))))),he.createElement(ld,null),he.createElement("p",{className:Yd},"You can prompt Grammarly to rewrite text in your voice.")))})),$d=e=>_e.ux.style({display:"flex",flexDirection:"column",gap:e?void 0:_e.ux.rem(Ee.x)}),Kd=e=>e?{gap:_e.ux.rem(Ee.mh),padding:`${_e.ux.rem(Ee.qp)} ${_e.ux.rem(Ee.mh)} ${_e.ux.rem(Ee.mh)} ${_e.ux.rem(Ee.mh)}`}:{gap:_e.ux.rem(Ee.mh)},Wd=_e.ux.style({display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),qd=_e.ux.style({fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),fontWeight:700,margin:0}),Qd=_e.ux.style({color:Ae.Z.TextBaseSubduedColor,fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),margin:0}),Yd=_e.ux.style({margin:0,padding:0,fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.25),fontStyle:"italic",color:be.Il.Text.Base.Subdued}),Xd=r.UI.Node.make((({view:e,notify:t})=>{const n=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:n.view(Jd),"data-name":e("error").pipe(C.U((e=>`error-${e.reason}`)))},he.createElement(ve.F.div,{className:n.view(tm)},G.aj([e("error"),n]).pipe(C.U((([e,t])=>he.createElement(he.Fragment,null,he.createElement(Cc,{className:rm(t),width:t?24:18,height:t?24:18}),he.createElement("span",{className:nm},e.header)))))),he.createElement(ve.F.div,{className:im},e("error").pipe(C.U((e=>e.text)))),he.createElement(ve.F.Fragment,null,e("showGotItButton").pipe(C.U((e=>e?he.createElement(xe.z,{className:om,name:"gotItButton",onClick:t({kind:A.i.Kind.errorCardOkButtonClick}),size:"small"},"OK"):null)))))})),Jd=e=>e?{gap:_e.ux.rem(Ee.x),padding:`${_e.ux.rem(Ee.qp)} ${_e.ux.rem(Ee.mh)}`}:{},em=r.UI.Union.asOption(Xd),tm=e=>_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(e?Ee.x:Ee.F2)}),nm=_e.ux.style({fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.375),fontWeight:700,color:be.Il.Text.Base.Default}),im=_e.ux.style({fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),color:be.Il.Text.Base.Subdued,whiteSpace:"break-spaces",overflowWrap:"anywhere"}),rm=e=>_e.ux.style(Object.assign({padding:e?void 0:_e.ux.rem(Ee.yC)},(0,Ie.fx)(e?1.5:1.125))),om=_e.ux.style({alignSelf:"flex-start"}),sm=r.UI.Node.make((({view:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:t.view(cm),"data-name":"document-overview"},t.view((0,z.RN)(he.createElement(to,{style:lm},"This document"),he.createElement("div",{className:um},"This document"))),he.createElement(ve.F.div,{className:dm},e("title")),he.createElement(ve.F.div,{className:mm},e("summary")))})),am=r.UI.Union.asOption(sm),lm={userSelect:"none",padding:0},cm=e=>({position:"relative",padding:e?`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.mh)}`:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.qp)}`,gap:_e.ux.rem(Ee.x),fontSize:_e.ux.rem(Ee.qp),lineHeight:_e.ux.rem(Ee.mh+Ee.yC)}),um=_e.ux.style({borderBottom:`${_e.ux.rem(Ee.W9)} solid ${be.Il.Border.Base.Subdued}`,paddingBottom:_e.ux.rem(Ee.F2),marginBottom:_e.ux.rem(Ee.F2),color:be.Il.Text.Base.Subdued,userSelect:"none"}),dm=_e.ux.style({fontSize:_e.ux.rem(Ee.qp+Ee.yC),color:be.Il.Text.Base.Subdued,fontWeight:600}),mm=_e.ux.style({color:be.Il.Text.Base.Default}),pm=e=>he.createElement(ye.a1,Object.assign({width:"20",height:"20",viewBox:"0 0 20 20"},e),he.createElement("path",{d:"M5.31255 7.11538H14.6876M5.31255 10H14.6876M5.00006 13.6951V16.25L8.33339 13.6951C10.5282 13.6951 14.2996 13.6951 16.2502 13.6951C16.9406 13.6951 17.5001 13.1354 17.5001 12.4451V5C17.5001 4.30964 16.9404 3.75 16.2501 3.75H3.75001C3.05965 3.75 2.5 4.30965 2.50001 5.00001L2.50005 12.4451C2.50005 13.1354 3.05969 13.6951 3.75005 13.6951H5.00006Z",fill:"none"})),hm=e=>he.createElement(ye.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15"},e),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.5C0.776142 0.5 1 0.723858 1 1V2H11.5C11.7022 2 11.8845 2.12182 11.9619 2.30866C12.0393 2.4955 11.9966 2.71055 11.8536 2.85355L8.70711 6L11.8536 9.14645C11.9966 9.28945 12.0393 9.5045 11.9619 9.69134C11.8845 9.87818 11.7022 10 11.5 10H1V14.5C1 14.7761 0.776142 15 0.5 15C0.223858 15 0 14.7761 0 14.5V1C0 0.723858 0.223858 0.5 0.5 0.5ZM1 9H10.2929L7.64645 6.35355C7.45118 6.15829 7.45118 5.84171 7.64645 5.64645L10.2929 3H1V9Z",stroke:"none"})),gm=(0,fe.xb)(jc),fm="reportMenuBtnIcon",vm=(0,Ie.dD)((0,Ie.fx)(1.5),fm),xm=({title:e,name:t,label:n,buttonClass:i,onAction:r,onOpenChange:o,children:s})=>{const a=he.useContext(Oi.N).view("flatUI"),l=e=>({minWidth:_e.ux.rem(e?2:1.5),minHeight:_e.ux.rem(e?2:1.5),lineHeight:_e.ux.rem(e?2:1.5)});return he.createElement(gm,{"aria-label":e,title:e,name:t,label:n,theme:a.view((e=>({button:i,buttonStyle:{default:Object.assign({padding:0},l(e)),icon:l(e)}}))),onAction:r,onOpenChange:o},s)},bm=({reportMenuButtonClassName:e,onClickReportOffensive:t,onClickProvideFeedback:n,onOpenChange:i})=>he.createElement(xm,{title:"Provide feedback",name:"reportMenu",label:he.createElement(hm,{className:_e.ux.joinClasses([fm,_e.ux.style(vm)])}),buttonClass:e,onAction:e=>{switch(e){case"provideFeedback":return n();case"reportOffensive":return t()}},onOpenChange:i},he.createElement(il.ck,{key:"provideFeedback",textValue:"provideFeedback"},he.createElement(pm,null),"Share your thoughts"),he.createElement(il.ck,{key:"reportOffensive",textValue:"reportOffensive"},he.createElement(ye.JO.Report,null),"Report as offensive")),ym=({reportMenuButtonClassName:e,onClickReportOffensive:t,onClickProvideFeedback:n,onOpenChange:i,onDismiss:r})=>he.createElement(xm,{title:"More",name:"dismissReportMenu",label:he.createElement(ye.JO.EllipsisSmall,null),buttonClass:e,onAction:e=>{switch(e){case"provideFeedback":return n();case"reportOffensive":return t();case"dismissResult":return r()}},onOpenChange:i},he.createElement(il.ck,{key:"dismissResult",textValue:"dismissResult"},he.createElement(ye.JO.Ignore,null),"Delete"),he.createElement(il.ck,{key:"provideFeedback",textValue:"provideFeedback"},he.createElement(pm,null),"Give feedback"),he.createElement(il.ck,{key:"reportOffensive",textValue:"reportOffensive"},he.createElement(ye.JO.Report,null),"Report offensive content")),km=r.UI.Node.make((({view:e})=>he.createElement(Ni,{"aria-busy":"true","data-name":"intent-loading"},he.createElement(to,null,e("header")),he.createElement("div",{className:wm},he.createElement(Hl,null))))),wm=_e.ux.style({height:_e.ux.rem(.5),borderRadius:_e.ux.rem(Ee.W9),background:Se.BlueGray5,flexGrow:1,maxWidth:_e.ux.rem(22.5),position:"relative",marginBottom:_e.ux.rem(Ee.F2)}),Cm=r.UI.Node.make((({view:e,notify:t})=>{const n=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:_m,"data-name":"intent"},he.createElement(to,null,e("header")),e("showReportMenu").pipe(C.U((0,z.RN)(he.createElement(bm,{reportMenuButtonClassName:Am,onClickProvideFeedback:t({kind:A.i.Kind.openFeedbackFormButtonClick,source:cs.x.Source.intentCard}),onClickReportOffensive:t({kind:A.i.Kind.reportOffensiveActionsButtonClick}),onOpenChange:e=>t({kind:A.i.Kind.reportMenuVisibilityChange,trigger:Dn.uiItem(Z.e.intentCard),visible:e})()}),null))),he.createElement(ve.F.div,Object.assign({className:n.view(Im)},(0,de.E)(e("text"),[...de.ap,"person"]))))})),Em=r.UI.Union.make("kind",{loading:km,loaded:Cm}),Sm=r.UI.Union.asOption(Em),_m={position:"relative",gap:_e.ux.rem(Ee.yC)},Im=e=>_e.ux.style({color:be.Il.Text.Base.Default,fontStyle:"normal",fontWeight:400,fontSize:_e.ux.rem(e?.875:.75),lineHeight:_e.ux.rem(e?1.3125:1.125),fontFeatureSettings:"'ss01' on",$nest:{"& person":{fontWeight:700,color:e?void 0:Se.Blue60,$nest:{"&::before":{content:"''",display:"inline-block",width:_e.ux.rem(e?1.25:1),height:_e.ux.rem(e?1.25:1),marginRight:e?_e.ux.rem(Ee.yC):void 0,backgroundSize:"cover",verticalAlign:"text-bottom",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,${encodeURIComponent(`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.95768 3.00512C8.95983 3.00512 9.7855 3.83575 9.7855 4.8769V6.01259C9.7855 7.05374 8.95983 7.88437 7.95768 7.88437C6.95553 7.88437 6.12986 7.05374 6.12986 6.01259V4.8769C6.12986 3.83575 6.95553 3.00512 7.95768 3.00512ZM10.5847 4.8769C10.5847 3.40916 9.41586 2.20593 7.95768 2.20593C6.4995 2.20593 5.33067 3.40916 5.33067 4.8769V6.01259C5.33067 7.48032 6.4995 8.68355 7.95768 8.68355C8.20909 8.68355 8.45189 8.64779 8.68159 8.58107C8.68635 8.65317 8.69342 8.72016 8.70392 8.78578C8.81061 9.45248 9.17662 10.0499 9.72211 10.4478C9.88673 10.5679 10.0776 10.6652 10.3757 10.8171L11.2702 11.2732C11.6108 11.4469 11.7408 11.5145 11.8477 11.5924C12.2227 11.866 12.4743 12.2767 12.5477 12.7351C12.5589 12.8055 12.5645 12.8807 12.5672 12.995H9.90666C9.68597 12.995 9.50707 13.1739 9.50707 13.3946C9.50707 13.6152 9.68597 13.7941 9.90666 13.7941H12.9694C13.19 13.7941 13.3689 13.6152 13.3689 13.3946L13.369 13.3588C13.369 13.0242 13.369 12.81 13.3368 12.6088C13.2301 11.9421 12.8641 11.3446 12.3186 10.9468C12.154 10.8267 11.9632 10.7294 11.665 10.5775C11.6546 10.5721 11.644 10.5667 11.6332 10.5612L10.7705 10.1214C10.43 9.94773 10.2999 9.88006 10.1931 9.80215C9.81805 9.52861 9.56642 9.11785 9.49307 8.65949C9.4762 8.55408 9.47217 8.43819 9.47124 8.19619C10.1462 7.71137 10.5847 6.9116 10.5847 6.01259V4.8769Z" fill="${e?Se.BlueGray60:Se.Blue60}"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7.91127 3.00512C6.90913 3.00512 6.08346 3.83575 6.08346 4.8769V6.01259C6.08346 7.05374 6.90913 7.88437 7.91127 7.88437C8.91342 7.88437 9.73909 7.05374 9.73909 6.01259V4.8769C9.73909 3.83575 8.91342 3.00512 7.91127 3.00512ZM5.28427 4.8769C5.28427 3.40916 6.45309 2.20593 7.91127 2.20593C9.36946 2.20593 10.5383 3.40916 10.5383 4.8769V6.01259C10.5383 7.48032 9.36946 8.68355 7.91127 8.68355C7.65987 8.68355 7.41706 8.64779 7.18737 8.58107C7.1826 8.65317 7.17553 8.72016 7.16503 8.78578C7.05834 9.45248 6.69233 10.0499 6.14684 10.4478C5.98222 10.5679 5.7914 10.6652 5.49326 10.8171L4.59875 11.2732C4.25818 11.4469 4.12811 11.5145 4.02129 11.5924C3.64626 11.866 3.39463 12.2767 3.32128 12.7351C3.31001 12.8055 3.30447 12.8807 3.30176 12.995H10.2779C10.4986 12.995 10.6775 13.1739 10.6775 13.3946C10.6775 13.6152 10.4986 13.7941 10.2779 13.7941H2.8996C2.67891 13.7941 2.50001 13.6152 2.50001 13.3946L2.5 13.3588C2.49996 13.0242 2.49994 12.81 2.53214 12.6088C2.63883 11.9421 3.00484 11.3446 3.55033 10.9468C3.71494 10.8267 3.90577 10.7294 4.2039 10.5775C4.21438 10.5721 4.22499 10.5667 4.23574 10.5612L5.09841 10.1214C5.43899 9.94773 5.56906 9.88006 5.67588 9.80215C6.0509 9.52861 6.30254 9.11785 6.37589 8.65949C6.39276 8.55408 6.39678 8.43819 6.39771 8.19619C5.72278 7.71137 5.28427 6.9116 5.28427 6.01259V4.8769Z" fill="${e?Se.BlueGray60:Se.Blue60}"/></svg>`)}')`}}}}}),Am=_e.ux.style({position:"absolute",top:_e.ux.rem(Ee.qp),right:_e.ux.rem(Ee.qp)});var Bm=n(31956);function Om(e,t){var n,i;const[r,o]=(0,he.useState)(void 0);return(0,he.useEffect)((()=>{e.current&&e.current.scrollWidth>e.current.clientWidth&&o(t)}),[null===(n=e.current)||void 0===n?void 0:n.scrollWidth,null===(i=e.current)||void 0===i?void 0:i.clientWidth,t]),r}const Rm=({title:e,url:t})=>{const n=he.useRef(null),r=Om(n,e);return(0,s.zG)(t,i.fold((()=>he.createElement("span",{className:Tm,title:r,ref:n},e)),(t=>he.createElement(Bm.d,{className:Tm,title:r,ref:n,href:t},e))))},Tm=_e.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",$nest:{"&:visited":{color:"inherit"}}}),Nm=r.UI.Node.make((({view:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:t.view(Um),"data-name":"detected-references"},he.createElement("span",{className:Fm},"Detected references"),he.createElement(ve.F.ul,{className:zm},e("detectedReferences").pipe(C.U((e=>e.map((({title:e,iconUrl:t,url:n},i)=>he.createElement("li",{key:i,className:jm},he.createElement("img",{src:t,className:Pm,alt:""}),he.createElement(Rm,{title:e,url:n})))))))))})),Mm=r.UI.Union.asOption(Nm),Um=e=>({position:"relative",padding:e?`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.mh)}`:`${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.qp)}`,gap:0}),Fm=_e.ux.style({fontSize:_e.ux.rem(Ee.qp),lineHeight:_e.ux.rem(Ee.mh+Ee.yC),color:be.Il.Text.Base.Subdued,userSelect:"none"}),zm=_e.ux.style({fontSize:_e.ux.rem(Ee.qp),lineHeight:_e.ux.rem(Ee.mh+Ee.yC),color:be.Il.Text.Base.Default,margin:0,padding:0}),jm=_e.ux.style({height:_e.ux.rem(Ee.sD),display:"flex",alignItems:"center",borderRadius:_e.ux.rem(li.xB)}),Pm=_e.ux.style({minWidth:_e.ux.rem(Ee.mh),height:_e.ux.rem(Ee.mh),marginRight:_e.ux.rem(Ee.x)}),Gm=({count:e})=>he.createElement("div",{className:Lm},e),Lm=_e.ux.style({display:"flex",alignItems:"center",justifyContent:"center",fontSize:_e.ux.rem(.75),fontStyle:"normal",fontWeight:700,lineHeight:_e.ux.rem(1.125),color:be.XY.Content.OnPrimary.Default,padding:`0 ${_e.ux.rem(Ee.F2)}`,background:Ae.Z.BackgroundNeutralDefault,borderRadius:_e.ux.rem(li.HP),border:`1px solid ${be.XY.Content.OnPrimary.Default}`}),Dm=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"M4 5.375 8 2l4 3.375m-8 5.25L8 14l4-3.375",stroke:"#646B81",strokeLinecap:"round"}));Dm.__brand="color";const Zm=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"m5 2 3 3.176L11 2M5 14l3-3.177L11 14",stroke:"#646B81",strokeLinecap:"round"}));Zm.__brand="color";const Hm=({children:e,style:t})=>he.createElement("i",{className:_e.ux.style(Vm,t),"aria-hidden":"true"},e),Vm={display:"inline-flex",alignItems:"center",justifyContent:"center",width:_e.ux.rem(1),height:_e.ux.rem(1),$nest:{"& > svg":{transform:"scale(calc(var(--rem)/16))"}}},$m=({feedForm:e,onClick:t})=>he.createElement(xe.z,{variant:"tertiary",size:"small",style:Km,onClick:t},"shortForm"===e?he.createElement(he.Fragment,null,he.createElement("span",{className:Wm},"Show more"),he.createElement(Hm,null,he.createElement(Dm,null))):"longForm"===e?he.createElement(he.Fragment,null,he.createElement("span",{className:Wm},"Show less"),he.createElement(Hm,null,he.createElement(Zm,null))):(0,D.L0)(e)),Km={default:{gap:_e.ux.rem(Ee.F2),padding:_e.ux.rem(Ee.F2),paddingLeft:_e.ux.rem(Ee.x)},icon:{minHeight:_e.ux.rem(1),minWidth:_e.ux.rem(1)}},Wm=_e.ux.style({fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125)}),qm=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"M11 2 5 8l6 6",stroke:"#646B81",strokeLinecap:"round"}));qm.__brand="color";const Qm=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"m5 2 6 6-6 6",stroke:"#646B81",strokeLinecap:"round"}));Qm.__brand="color";const Ym=_e.ux.style({position:"relative"}),Xm=_e.ux.style({overscrollBehavior:"contain",overflowX:"auto",scrollSnapType:"x mandatory",position:"relative",width:0,minWidth:"100%"}),Jm=(_e.ux.style({scrollSnapAlign:"start"}),_e.ux.style({display:"flex",flexDirection:"row",flexWrap:"nowrap"}),{position:"absolute",top:"50%",$nest:{"&.override":{transform:"translate(0,-50%)"}}}),ep=_e.ux.style({left:_e.ux.rem(Ee.x)}),tp=_e.ux.style({right:_e.ux.rem(Ee.x)}),np=({count:e=1,children:t})=>{const{onMount:n,rect:r}=_i.P.useRectWatcher(),{ref:o,onMount:a}=_i.P.useElWatcher(),l=he.useMemo((()=>f.h.create({scroll:0,width:0,scrollWidth:0,itemAverageWidth:0})),[]);_i.P.useSubscriptionTo(he.useMemo((()=>G.aj([o.pipe(E.oA,S.x()),r.pipe(E.oA,S.x())]).pipe(y.e(100),F.b((([t])=>{const n=t.clientWidth,i=t.scrollWidth;l.set({scroll:t.scrollLeft,width:n,scrollWidth:i,itemAverageWidth:Math.min(n,i/e)})})))),[e,o,r]));const c=he.useCallback(((e=!1)=>{(0,s.zG)(o.get(),i.map((t=>{const{scroll:n,itemAverageWidth:i}=l.get();t.scroll({top:0,left:n+(e?1:-1)*i,behavior:"smooth"})})))}),[o]);return he.createElement("div",{className:Ym,ref:n},he.createElement("div",{ref:a,className:Xm,onScroll:e=>{e.target instanceof HTMLDivElement&&l.lens("scroll").set(e.target.scrollLeft)},"data-role":"scroll"},t),he.createElement(ve.F.Fragment,null,l.pipe(C.U((({scroll:e,width:t,scrollWidth:n})=>he.createElement(he.Fragment,null,e>0?he.createElement(xe.z,{name:"scroll_left",title:"Scroll left","aria-label":"Scroll left",variant:"round",className:_e.ux.joinClasses([_e.ux.style(Jm),ep,"override"]),onClick:()=>c()},he.createElement(qm,null)):null,n-t-e>0?he.createElement(xe.z,{name:"scroll_right",title:"Scroll right","aria-label":"Scroll right",variant:"round",className:_e.ux.joinClasses([_e.ux.style(Jm),tp,"override"]),onClick:()=>c(!0)},he.createElement(Qm,null)):null))))))},ip=({percent:e,lensId:t})=>he.createElement("div",{className:rp(t)},he.createElement("div",{className:op(t),style:{transform:`scaleX(${e})`}})),rp=e=>_e.ux.style({border:`1px solid ${sp[e]}`,width:_e.ux.rem(2.5),height:_e.ux.rem(.25),boxSizing:"border-box",borderRadius:_e.ux.rem(Ee.yC)}),op=e=>_e.ux.style({backgroundColor:sp[e],border:0,width:"100%",height:"100%",transformOrigin:"left",transition:"transform 0.2s linear"}),sp={[zt.lensAllSuggestionFeedShortForm]:be.Il.Background.Neutral.Default,[zt.lensAllSuggestionFeed]:be.Il.Background.Neutral.Default,[zt.lensCorrectnessFeed]:be.Il.Background.Correctness.Default,[zt.lensClarityFeed]:be.Il.Background.Clarity.Default,[zt.lensDeliveryFeed]:be.Il.Background.Delivery.Default,[zt.lensEngagementFeed]:be.Il.Background.Engagement.Default,[zt.lensStyleGuideFeed]:be.Il.Background.Neutral.Default,[zt.plagiarismFeed]:be.Il.Background.Plagiarism.Default},ap=e=>_e.ux.style({display:"grid",gridTemplateColumns:Array.from({length:e}).map(((e,t)=>t>0?"1px minmax(min-content, 1fr)":"minmax(min-content, 1fr)")).join(" "),alignItems:"center"}),lp=_e.ux.style({borderTop:`1px solid ${be.Il.Border.Base.Subdued}`,borderBottom:`1px solid ${be.Il.Border.Base.Subdued}`}),cp=_e.ux.style({height:"100%",borderLeft:`1px solid ${be.Il.Border.Base.Subdued}`}),up=`0 0 0 2px ${be.Il.Text.Base.Inverse}, 0 0 0 4px ${Ae.Z.BorderBrandDefault}`,dp={default:{display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.F2),padding:`${_e.ux.rem(.75)} ${_e.ux.rem(Ee.x)} ${_e.ux.rem(.5)} ${_e.ux.rem(Ee.x)}`,borderRadius:0,color:be.Il.Text.Base.Subdued,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),scrollSnapAlign:"start"},hovered:{boxShadow:"none",$nest:(0,Ye.Rv)(up)},active:{boxShadow:"none",$nest:(0,Ye.Rv)(up)},selected:{boxShadow:"none",fontWeight:"bold",backgroundColor:be.Il.Background.Base.Subdued,$nest:(0,Ye.Rv)(up)}},mp=(0,fe.xb)(Ni),pp=r.UI.Node.make((({view:e,state:t})=>he.createElement(mp,{style:e("fitContainer").pipe(C.U((e=>e?vp:fp))),"data-name":"long-form-feed-empty","aria-live":"polite"},t.pipe(C.U((({content:e,fitContainer:t=!1})=>he.createElement(he.Fragment,null,he.createElement("div",{className:t?bp:xp},he.createElement("p",{className:yp},e.title),he.createElement("p",{className:kp},e.description)),he.createElement("div",{className:t?Cp:wp},e.illustration)))))))),hp=r.UI.Node.make((({view:e,state:t,notify:n})=>he.createElement(mp,{style:e("fitContainer").pipe(C.U((e=>e?vp:fp))),"data-name":"long-form-feed-success","aria-live":"polite"},t.pipe(C.U((({content:e,goBackFrom:t,fitContainer:r=!1})=>he.createElement(he.Fragment,null,he.createElement("div",{className:r?bp:xp},he.createElement("p",{className:yp},e.title),he.createElement("p",{className:kp},e.description),(0,s.zG)(t,i.fold(s.gn,(e=>he.createElement(xe.z,{variant:"secondary",style:gp,onClick:n({kind:"goBack",goBackFrom:e})},"See all suggestions"))))),he.createElement("div",{className:r?Cp:wp},e.illustration)))))))),gp={default:{marginTop:_e.ux.rem(Ee.x),alignSelf:"flex-start"}},fp={padding:`${_e.ux.rem(Ee.mh)}`,display:"flex",flexDirection:"row",justifyContent:"space-between"},vp={padding:`${_e.ux.rem(Ee.mh)}`,display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",gap:`${_e.ux.rem(Ee.mh)}`,height:"100%",boxSizing:"border-box"},xp=_e.ux.style({display:"flex",flexDirection:"column",marginRight:_e.ux.rem(2),justifyContent:"center"}),bp=_e.ux.style({textAlign:"center",padding:`${_e.ux.rem(Ee.mh)} ${_e.ux.rem(Ee.mh)} 0 ${_e.ux.rem(Ee.mh)}`}),yp=_e.ux.style({margin:0,color:Ae.Z.TextBaseDefault,fontSize:_e.ux.rem(1),lineHeight:"1.5em",fontWeight:700}),kp=_e.ux.style({margin:0,color:Ae.Z.TextBaseSubduedColor,fontSize:_e.ux.rem(.875),lineHeight:"1.5em",fontWeight:400}),wp=_e.ux.style({width:_e.ux.rem(4),height:_e.ux.rem(4),minWidth:_e.ux.rem(4),minHeight:_e.ux.rem(4)}),Cp=_e.ux.style({width:_e.ux.rem(6),height:_e.ux.rem(6),minWidth:_e.ux.rem(6),minHeight:_e.ux.rem(6)}),Ep=r.UI.Node.make((({view:e})=>he.createElement(Ni,{"aria-busy":"true",style:Sp,"data-name":"long-form-feed-loading"},he.createElement("div",{className:_p},he.createElement(Hl,null),he.createElement(ve.F.div,{className:Np},he.createElement("div",{className:Mp}),e("supportsShortForm").pipe(C.U((0,z.RN)(he.createElement("div",{className:Up}),null)))),he.createElement("div",{className:Fp},he.createElement("div",{className:zp}),he.createElement("div",{className:zp}),he.createElement("div",{className:zp}),he.createElement("div",{className:zp})),he.createElement("div",{className:jp},he.createElement("div",{className:Pp}),he.createElement("div",{className:Gp})),he.createElement("div",{className:Lp(!0)}),he.createElement("div",{className:Lp(!1)}),he.createElement("div",{className:Dp},he.createElement("div",{className:Zp}),he.createElement("div",{className:Hp}))),he.createElement("div",{className:Ip},he.createElement("div",{className:Ap},he.createElement(Hl,null),he.createElement("div",{className:Bp}),he.createElement("div",{className:Op}),he.createElement("div",{className:Rp})),he.createElement("div",{className:Tp}),he.createElement("div",{className:Ap},he.createElement(Hl,null),he.createElement("div",{className:Bp}),he.createElement("div",{className:Op}),he.createElement("div",{className:Rp})),he.createElement("div",{className:Tp}),he.createElement("div",{className:Ap},he.createElement(Hl,null),he.createElement("div",{className:Bp}),he.createElement("div",{className:Op}),he.createElement("div",{className:Rp})),he.createElement("div",{className:Tp}),he.createElement("div",{className:Ap},he.createElement(Hl,null),he.createElement("div",{className:Bp}),he.createElement("div",{className:Op}),he.createElement("div",{className:Rp})))))),Sp={padding:0},_p=_e.ux.style({display:"flex",flexDirection:"column",position:"relative",padding:`${_e.ux.rem(Ee.mh)}`,borderBottom:`1px solid ${be.Il.Border.Base.Subdued}`}),Ip=_e.ux.style({display:"flex",flexDirection:"column",margin:_e.ux.rem(1)}),Ap=_e.ux.style({display:"flex",alignItems:"center",position:"relative",height:_e.ux.rem(2.25)}),Bp=_e.ux.style({height:_e.ux.rem(.5),width:_e.ux.rem(.5),borderRadius:"50%",background:Se.BlueGray5,marginRight:_e.ux.rem(1.25)}),Op=_e.ux.style({height:_e.ux.rem(.5),width:_e.ux.rem(3.875),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5,marginRight:_e.ux.rem(Ee.mh)}),Rp=_e.ux.style({height:_e.ux.rem(.5),width:_e.ux.rem(7.875),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),Tp=_e.ux.style({margin:`${_e.ux.rem(.5)} ${_e.ux.rem(1)}`,borderBottom:`1px solid ${be.Il.Border.Base.Subdued}`}),Np=_e.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:_e.ux.rem(Ee.x),alignItems:"center"}),Mp=_e.ux.style({width:_e.ux.rem(11.875),height:_e.ux.rem(1),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),Up=_e.ux.style({flex:1,maxWidth:_e.ux.rem(3.5),height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),Fp=_e.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:_e.ux.rem(11.5*Ee.F2)}),zp=_e.ux.style({width:_e.ux.rem(3.5625),height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5,margin:`0 ${_e.ux.rem(9.5*Ee.W9)}`}),jp=_e.ux.style({display:"flex",flexDirection:"row",gap:_e.ux.rem(Ee.F2),alignItems:"center",marginTop:_e.ux.rem(8.5*Ee.F2)}),Pp=_e.ux.style({width:_e.ux.rem(1.25),height:_e.ux.rem(1.25),borderRadius:"50%",background:Se.BlueGray5}),Gp=_e.ux.style({flex:1,height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),Lp=e=>_e.ux.style({height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5,marginTop:_e.ux.rem(e?2.5*Ee.F2:Ee.mh)}),Dp=_e.ux.style({display:"flex",flexDirection:"row",gap:_e.ux.rem(Ee.mh),alignItems:"center",marginTop:_e.ux.rem(Ee.mh+Ee.yC)}),Zp=_e.ux.style({width:_e.ux.rem(4.125),height:_e.ux.rem(2),borderRadius:_e.ux.rem(li.xB),background:Se.BlueGray5}),Hp=_e.ux.style({width:_e.ux.rem(3.125),height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),Vp=(0,fe.xb)(Gm),$p=(0,fe.xb)((({activeLensId:e,lenses:t,className:n,onToggleLens:i})=>t.length>0?he.createElement("section",{className:_e.ux.joinClasses([lp,n])},he.createElement(np,{count:t.length},he.createElement("div",{className:ap(t.length)},t.map(((t,n)=>he.createElement(he.Fragment,{key:t.lensId},n>0?he.createElement("div",{className:cp,role:"separator"}):null,he.createElement(xe.z,{variant:"tertiary",size:"small",name:`${t.label}-button`,style:dp,active:t.lensId===e,onClick:()=>i(t.lensId)},he.createElement(ip,{percent:t.percent,lensId:t.lensId}),he.createElement("span",null,t.label)))))))):null)),Kp=r.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{onMount:i}=(0,Ai.F)((0,s.ls)(F.b(n({kind:"longFormFeedMount"})),Ii.x(mn.notifyFeedUnmount))),r=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{"data-name":"long-form-feed",style:r.view((0,z.RN)({padding:0,display:"grid",gridTemplateRows:"auto auto 1fr",height:"100%"},{padding:`${_e.ux.rem(Ee.qp)} 0 0 0`})),mount:i,"aria-live":"polite"},he.createElement(to,{style:r.view((0,z.RN)(Object.assign(Object.assign({},qp),{padding:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.mh)}`,paddingTop:_e.ux.rem(Ee.mh)}),Object.assign(Object.assign({},qp),{padding:`0 ${_e.ux.rem(Ee.qp)}`})))},he.createElement("div",{className:Qp},"Review suggestions",he.createElement(Vp,{count:t("suggestionCount")})),t("canCollapseToShortForm").pipe(C.U((0,z.RN)(he.createElement($m,{feedForm:"longForm",onClick:n({kind:"toggleShortFormFeed"})}),null)))),he.createElement($p,{lenses:t("lenses"),activeLensId:t("feedId"),onToggleLens:e=>n({kind:"toggleLens",lensId:e})(),className:Wp}),he.createElement(Li,null,e.lensView))})),Wp=_e.ux.style({margin:`${_e.ux.rem(Ee.x)} 0`}),qp={display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x),justifyContent:"space-between"},Qp=_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x)}),Yp=r.UI.Group.make({cardList:Bl}),Xp=r.UI.Union.make("kind",{successState:hp,cardList:Yp}),Jp=r.UI.Knot.make(Kp,{lensView:Xp}),eh=r.UI.Union.make("kind",{loadingState:Ep,emptyState:pp,successState:hp,nonEmptyState:Jp});const th=[{emptyState:{title:"Rooting for you.",description:"Suggestions will appear here.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 66 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("path",{fill:"#C6CBDE",d:"M33.4 64c9.4 0 17.02-1.45 17.02-3.24 0-1.79-7.62-3.24-17.01-3.24-9.4 0-17.02 1.45-17.02 3.24 0 1.79 7.62 3.24 17.02 3.24Z"}),he.createElement("path",{fill:"#F6DF6C",stroke:"#27282E",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M36.65 61.36H28.8c-6.03 0-10.92-4.43-10.92-9.89V40.5c0-.4 30.22-.4 30.22 0v10.5c0 5.72-5.13 10.37-11.46 10.37Z"}),he.createElement("path",{fill:"#C7EEFB",stroke:"#27282E",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M33 44.13c8.35 0 15.11-1.56 15.11-3.47 0-1.92-6.76-3.48-15.1-3.48-8.36 0-15.12 1.56-15.12 3.48 0 1.91 6.76 3.47 15.11 3.47Z"}),he.createElement("path",{fill:"#27282E",d:"M45.56 42.15c-2.5.96-7.19 1.6-12.56 1.6s-10.06-.64-12.56-1.6c.7-1.38 6.05-2.45 12.56-2.45 6.5 0 11.87 1.07 12.56 2.45Z"}),he.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"m22.87 33.14 2.26-.62-1.98-1.25M25.35 27.2l2.18.85-.83-2.18M22.93 37.44l2.33.2-1.71 1.59M43.7 33.14l-2.26-.62 1.98-1.25M41.22 27.2l-2.17.85.82-2.18M43.64 37.44l-2.33.2 1.71 1.59"}),he.createElement("path",{fill:"#16AC9A",stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"M41.34 31.15c-.97-3.31-4.13-5.63-8.06-5.63v0h0v0c-3.93 0-7.09 2.32-8.06 5.63-1.39 4.76.83 9.86 1.86 10.8 1.76.38 3.05.69 6.2.69 3.13 0 4.98-.4 6.2-.7 1.04-.93 3.25-6.03 1.86-10.8h0Z"}),he.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"M34.7 42.44c.7-1.36 2.15-4.86 2.19-8.36.03-3.36-1.46-6.84-3.38-8.46M39.03 35.02l-2.14-.94 2.14-.95"}),he.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"m38.56 30.08-2.33-.14 1.68-1.63M38.56 38.46l-2.33.2 1.71 1.58M31.87 42.44a20.66 20.66 0 0 1-2.2-8.36c-.03-3.4 1.5-6.91 3.45-8.52"}),he.createElement("path",{stroke:"#27282E",strokeLinecap:"round",strokeLinejoin:"round",d:"m27.54 35.02 2.14-.94-2.14-.95M28 30.08l2.33-.14-1.67-1.63M28 38.46l2.33.2-1.71 1.58"}),he.createElement("path",{fill:"#fff",stroke:"#27282E",strokeMiterlimit:"10",d:"M6.9 54.28c-.07 0-.12-.06-.12-.14.11-4.3-1.36-5.85-5.66-5.97-.07 0-.12-.07-.12-.14s.06-.12.13-.12c4.3.11 5.86-1.36 5.98-5.66 0-.07.06-.12.14-.12.07 0 .12.06.12.13-.11 4.3 1.36 5.86 5.66 5.97.07 0 .12.06.12.13s-.06.12-.13.12c-4.3-.1-5.86 1.37-5.98 5.66-.01.09-.06.14-.13.14ZM59.17 37.27c-.07 0-.11-.06-.11-.13.1-4.01-1.28-5.47-5.29-5.58-.07 0-.11-.06-.11-.12 0-.07.06-.12.12-.12 4.01.1 5.47-1.27 5.58-5.28 0-.07.06-.12.13-.12s.11.06.11.13c-.1 4.01 1.27 5.47 5.29 5.57.06 0 .11.05.11.12 0 .07-.06.12-.13.12-4-.1-5.46 1.27-5.58 5.28 0 .08-.05.13-.12.13ZM46.14 22.68c-.1 0-.16-.08-.16-.18.14-5.73-1.82-7.8-7.55-7.97-.1 0-.16-.08-.16-.18 0-.1.08-.16.17-.16 5.74.15 7.81-1.82 7.98-7.55 0-.1.08-.16.17-.16.1 0 .17.08.17.18-.15 5.73 1.82 7.8 7.55 7.95.1 0 .16.09.16.18 0 .1-.08.17-.18.17-5.73-.15-7.8 1.81-7.97 7.54-.02.12-.08.18-.18.18Z"}))),null)},successState:{title:"You're on point!",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#SuccessA_a)"},he.createElement("path",{fill:"#C6CBDE",d:"M32 64c9.28 0 16.8-1.43 16.8-3.2 0-1.77-7.52-3.2-16.8-3.2-9.28 0-16.8 1.43-16.8 3.2 0 1.77 7.52 3.2 16.8 3.2Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M44.08 7.6h-3.24L43 5.2M42.93 36.13l-2.59-1.95 3.2-.6M46.3 17.13l-3.13-.84 2.73-1.75M45.14 26.65l-2.73-1.74 3.13-.85M19.12 7.6h3.24L20.2 5.2M20.27 36.13l2.59-1.95-3.19-.6M16.9 17.13l3.13-.84-2.73-1.75M18.06 26.65l2.73-1.74-3.13-.85"}),he.createElement("path",{fill:"#F6DF6C",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 61.4h-7.73c-5.96 0-10.8-4.38-10.8-9.77V40.78c0-.4 29.86-.4 29.86 0v10.36c0 5.66-5.07 10.25-11.33 10.25Z"}),he.createElement("path",{fill:"#C7EEFB",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M31.6 44.38c8.24 0 14.93-1.54 14.93-3.43 0-1.9-6.69-3.43-14.93-3.43-8.24 0-14.92 1.53-14.92 3.43 0 1.9 6.68 3.43 14.92 3.43Z"}),he.createElement("path",{fill:"#0E101A",d:"M44 42.43c-2.47.94-7.1 1.57-12.4 1.57-5.3 0-9.93-.63-12.4-1.57.68-1.37 5.98-2.43 12.4-2.43s11.72 1.06 12.4 2.43Z"}),he.createElement("path",{fill:"#15C39A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M31.6 2.41v.01h0c-22.5 0-6.52 39.78-6.52 39.78s2.2.86 6.52.86c4.32 0 6.52-.86 6.52-.86S54.1 2.41 31.6 2.41h0Z"}),he.createElement("path",{fill:"#F18AB2",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M12 7.25s2.8-1.38 5.22-.87c-1.36-2.06-1.11-5.1-1.11-5.1 5.32 2.17 4.15 7.14 4.15 7.14s-5.76 2.26-3.56.81A6.82 6.82 0 0 1 12 7.25Z"}),he.createElement("path",{fill:"#F18AB2",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M13.79 4.5s2.6-.32 4.67 1.02A7.77 7.77 0 0 1 19.17.8c4.17 3.95 1.56 7.99 1.56 7.99s-2.34 4.21-7.8 2.4c0 0 1.6-2.38 4.18-2.93A6.92 6.92 0 0 1 13.8 4.5Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M33.26 42.98s8.41-38.16-1.68-40.57"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m39.15 28.43-2.81-1.6 3.08-1M37.54 37.9l-2.56-2 3.2-.54M39.48 9.37l-3.2-.56 2.57-1.98M40.03 18.9l-3.11-.91 2.77-1.7M29.94 42.98S21.53 4.82 31.63 2.41"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m24.05 28.43 2.82-1.6-3.09-1M25.66 37.9l2.56-2-3.2-.54M23.72 9.37l3.2-.56-2.57-1.98M23.17 18.9l3.11-.91-2.77-1.7"}),he.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeMiterlimit:"10",d:"M56.62 39.2c-.08 0-.13-.06-.13-.14.12-4.53-1.43-6.17-5.96-6.3-.08 0-.13-.06-.13-.14 0-.08.06-.13.14-.13 4.53.12 6.17-1.43 6.3-5.96 0-.08.06-.13.14-.13.08 0 .13.06.13.14-.12 4.53 1.43 6.17 5.96 6.29.08 0 .13.06.13.14 0 .07-.06.12-.14.12-4.53-.11-6.17 1.44-6.3 5.97-.01.09-.06.14-.14.14ZM6.24 24c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.97.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.97 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12Z"})),he.createElement("defs",null,he.createElement("clipPath",{id:"SuccessA_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"You got this.",description:"Suggestions will appear here.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("path",{fill:"#AAF2E1",stroke:"#0E101A",strokeLinejoin:"round",d:"M12.8 46.4 32.8.8l20 45.6V62h-40V46.4Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"m12.8 46.4 20-13.2 20 13.2"}),he.createElement("path",{fill:"#0E101A",fillRule:"evenodd",d:"M32.4 4.76V1.6h.8v3.16h-.8Zm0 6.31V7.92h.8v3.15h-.8Zm0 6.32v-3.16h.8v3.16h-.8Zm0 6.32v-3.16h.8v3.16h-.8Zm0 6.31v-3.16h.8v3.16h-.8Zm0 6.32v-3.16h.8v3.16h-.8Zm0 6.31V39.5h.8v3.16h-.8Zm0 6.32V45.8h.8v3.16h-.8Zm0 6.31v-3.15h.8v3.15h-.8Zm0 6.32v-3.16h.8v3.16h-.8Z",clipRule:"evenodd"}),he.createElement("path",{stroke:"#000",strokeLinecap:"round",d:"M10 33.6C5.2 34.8-2.4 42 2.8 48.8c5.2 6.8 16.8 4.5 21.2.89"}),he.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M10.4 33.05c.21.08.31.3.23.51l-1.3 3.36a.4.4 0 0 1-.75-.3l1.16-2.97-2.98-1.17a.4.4 0 0 1 .29-.74l3.35 1.3Z",clipRule:"evenodd"}))),null)},successState:{title:"Well, this is shaping up!",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#SuccessB_a)"},he.createElement("path",{fill:"#87E8D1",stroke:"#0E101A",strokeLinejoin:"round",d:"m18 34-3.4-10.67L59.41 1.49 18 34Z"}),he.createElement("path",{fill:"#D7F7F0",stroke:"#0E101A",strokeLinejoin:"round",d:"M24.25 24.7 60.8.8l-20.23 40-16.32-16.1ZM2.4 19.42 60.8.8 14.6 23.33l-12.2-3.9Z"}),he.createElement("path",{fill:"#15C39A",stroke:"#0E101A",strokeLinejoin:"round",d:"m28.62 29.08-4.37-4.37L18 34l10.62-4.92Z"}),he.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeMiterlimit:"10",d:"M25.4 52c-.09 0-.15-.07-.15-.16.13-5.1-1.61-6.94-6.7-7.08-.1 0-.15-.08-.15-.16 0-.09.07-.15.16-.15 5.1.13 6.94-1.61 7.08-6.7 0-.1.08-.15.16-.15.09 0 .15.07.15.16-.13 5.1 1.61 6.94 6.7 7.07.1 0 .15.07.15.16 0 .08-.07.14-.16.14-5.1-.13-6.94 1.62-7.08 6.71-.02.1-.08.16-.16.16ZM57.44 39.2c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.97.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.96 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12ZM11.45 11.2c-.06 0-.1-.05-.1-.11.1-3.68-1.17-5.02-4.85-5.12-.06 0-.1-.05-.1-.12 0-.06.05-.1.11-.1 3.68.1 5.02-1.17 5.12-4.85 0-.06.05-.1.12-.1.06 0 .1.05.1.11-.1 3.68 1.17 5.02 4.85 5.11.06 0 .1.05.1.12 0 .06-.05.1-.11.1-3.68-.1-5.02 1.17-5.12 4.85-.01.07-.05.11-.12.11Z"}),he.createElement("path",{stroke:"#000",strokeDasharray:"4 5",strokeLinecap:"square",d:"M10.4 31.2c-4.8 2-14.64 14.4-6 23.2 8.64 8.8 44.8-2 58 8.8"})),he.createElement("defs",null,he.createElement("clipPath",{id:"SuccessB_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"Nothing to see yet.",description:"Suggestions will appear here.",illustration:he.createElement(Vl,null)},successState:{title:"Look at that!",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"M1.78 43.26a1.94 1.94 0 0 0 1.5 2.9l35.87 3.6-15.29 7.45a1.43 1.43 0 0 0 1 2.65l30.56-8.46 7.78.79V41.83l-59.74.45c-.7 0-1.33.38-1.68.98Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"m3.28 46.15.05-.5-.05.5Zm-1.5-2.89-.43-.24.43.24Zm37.37 6.5.22.45 1.59-.77-1.76-.17-.05.5Zm-15.29 7.45.22.45-.22-.45Zm1 2.65-.13-.48.14.48Zm30.56-8.46.05-.5h-.09l-.1.02.14.48Zm7.78.79-.05.5.55.05v-.55h-.5Zm0-10.36h.5v-.5h-.5v.5Zm-59.74.45v-.5.5Zm-.13 3.37a1.44 1.44 0 0 1-1.11-2.14l-.87-.5a2.44 2.44 0 0 0 1.88 3.64l.1-1Zm35.87 3.62L3.33 45.65l-.1 1 35.87 3.61.1-1Zm-15.12 8.39 15.3-7.45-.45-.9-15.29 7.45.44.9Zm-.52.83c0-.36.2-.68.52-.83l-.44-.9c-.66.32-1.08 1-1.08 1.73h1Zm1.17.9a.93.93 0 0 1-1.17-.9h-1c0 1.27 1.21 2.2 2.44 1.85l-.27-.96Zm30.56-8.47-30.56 8.46.27.96 30.56-8.46-.27-.96Zm7.96.77-7.78-.78-.1.99 7.78.78.1-1Zm-.55-9.86v10.36h1V41.83h-1Zm-59.24.95 59.74-.45v-1l-59.74.45v1Zm-1.24.73c.25-.45.73-.73 1.24-.73v-1c-.88 0-1.68.48-2.11 1.24l.87.49Z"}),he.createElement("path",{fill:"#87E8D1",fillRule:"evenodd",d:"M19.9 46.88a3.14 3.14 0 1 1 .97 5.86 3.67 3.67 0 0 1-7.05-.92 3.3 3.3 0 0 1-4.75-2.94 3.3 3.3 0 0 1 5.2-2.75 2.93 2.93 0 0 1 5.63.75Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"m19.9 46.88-.5.06a.5.5 0 0 0 .74.38l-.24-.44Zm1.44-.36v-.5.5Zm3.17 3.1.5-.01h-.5Zm-3.1 3.17.01.5v-.5Zm-.54-.04.08-.5a.5.5 0 0 0-.54.3l.46.2Zm-3.36 2.28v.5-.5Zm-3.69-3.21.5-.06a.5.5 0 0 0-.72-.4l.22.46Zm-1.4.33-.01-.5v.5Zm-3.35-3.27h.5-.5Zm3.26-3.35v-.5.5Zm1.94.6-.28.41a.5.5 0 0 0 .75-.22l-.47-.19Zm2.69-1.85v.5-.5Zm3.18 3.04c.36-.19.77-.3 1.2-.3v-1c-.6 0-1.18.16-1.67.42l.47.88Zm1.2-.3a2.64 2.64 0 0 1 2.67 2.6l1-.01a3.64 3.64 0 0 0-3.68-3.6l.01 1Zm2.67 2.6a2.64 2.64 0 0 1-2.6 2.67l.01 1c2.01-.03 3.62-1.68 3.6-3.68h-1Zm-2.6 2.67c-.16 0-.31-.01-.46-.04l-.16.99c.2.03.42.05.63.05l-.01-1Zm-1 .27a3.17 3.17 0 0 1-2.9 1.97v1a4.17 4.17 0 0 0 3.82-2.6l-.92-.37Zm-2.9 1.97c-1.64.02-3-1.2-3.2-2.77l-.98.12a4.17 4.17 0 0 0 4.19 3.65l-.01-1Zm-3.9-3.16a2.8 2.8 0 0 1-1.2.28l.01 1a3.8 3.8 0 0 0 1.62-.38l-.44-.9Zm-1.2.28a2.8 2.8 0 0 1-2.84-2.77h-1a3.8 3.8 0 0 0 3.85 3.77l-.01-1Zm-2.84-2.77a2.8 2.8 0 0 1 2.77-2.85l-.01-1a3.8 3.8 0 0 0-3.76 3.86l1-.01Zm2.77-2.85c.61 0 1.18.18 1.65.51l.57-.82a3.8 3.8 0 0 0-2.23-.69l.01 1Zm2.4.29a2.43 2.43 0 0 1 2.23-1.54l-.02-1a3.43 3.43 0 0 0-3.14 2.17l.93.37Zm2.23-1.54c1.25-.02 2.3.93 2.44 2.16l.99-.11a3.42 3.42 0 0 0-3.45-3.05l.02 1Z"}),he.createElement("path",{fill:"#87E8D1",fillRule:"evenodd",d:"M56 53.2a3.6 3.6 0 0 1-2.36 3.38 3.6 3.6 0 1 1-5.84 4.2 3.6 3.6 0 0 1-6.96-.62 3.6 3.6 0 1 1 .05-5.9 4.8 4.8 0 0 1 8.16-2.4A3.6 3.6 0 0 1 56 53.2Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"m53.64 56.58-.18-.47a.5.5 0 0 0-.22.78l.4-.3Zm-5.84 4.2.42-.27a.5.5 0 0 0-.9.11l.48.17Zm-6.96-.62.5-.07a.5.5 0 0 0-.78-.34l.28.41Zm.05-5.9-.29.42a.5.5 0 0 0 .78-.31l-.49-.1Zm8.16-2.4-.36.35a.5.5 0 0 0 .83-.16l-.47-.18Zm4.76 5.2a4.1 4.1 0 0 0 2.69-3.86h-1a3.1 3.1 0 0 1-2.04 2.91l.35.94Zm1.09 1.74c0-.95-.33-1.83-.87-2.53l-.79.62c.41.53.66 1.19.66 1.91h1Zm-4.1 4.1a4.1 4.1 0 0 0 4.1-4.1h-1a3.1 3.1 0 0 1-3.1 3.1v1Zm-3.42-1.83a4.1 4.1 0 0 0 3.42 1.83v-1a3.1 3.1 0 0 1-2.58-1.39l-.84.56Zm-.05-.45a3.1 3.1 0 0 1-2.93 2.08v1a4.1 4.1 0 0 0 3.87-2.75l-.94-.33ZM44.4 62.7a3.1 3.1 0 0 1-3.06-2.61l-.99.15a4.1 4.1 0 0 0 4.05 3.46v-1Zm-5.6-1.4c.86 0 1.67-.27 2.33-.72l-.57-.83c-.5.35-1.1.55-1.76.55v1Zm-4.1-4.1a4.1 4.1 0 0 0 4.1 4.1v-1a3.1 3.1 0 0 1-3.1-3.1h-1Zm4.1-4.1a4.1 4.1 0 0 0-4.1 4.1h1a3.1 3.1 0 0 1 3.1-3.1v-1Zm2.38.76a4.08 4.08 0 0 0-2.38-.76v1c.67 0 1.3.21 1.8.58l.58-.82Zm4.42-3.96a5.3 5.3 0 0 0-5.2 4.27l.98.2a4.3 4.3 0 0 1 4.22-3.47v-1Zm3.81 1.62a5.29 5.29 0 0 0-3.81-1.62v1c1.22 0 2.31.5 3.1 1.31l.71-.69Zm2.99-2.42a4.1 4.1 0 0 0-3.81 2.58l.93.37a3.1 3.1 0 0 1 2.88-1.95v-1Zm4.1 4.1a4.1 4.1 0 0 0-4.1-4.1v1a3.1 3.1 0 0 1 3.1 3.1h1Z"}),he.createElement("path",{fill:"url(#SuccessC_a)",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M25.88 3.04a7.45 7.45 0 0 0-12.77 5.2v13.8c0 7.54 6.84 13.23 14.25 11.86l15.29-2.83 4.37 4.37H57.6L25.88 3.04Z"}),he.createElement("path",{fill:"url(#SuccessC_b)",fillRule:"evenodd",d:"M13.1 16.86v5.16c0 7.54 6.87 13.23 14.28 11.83l.45-.08c.44-.73.68-1.6.66-2.64a9.05 9.05 0 0 0-2.66-6.23l-5.92-5.92a7.65 7.65 0 0 0-6.8-2.12Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"M13.1 16.86h-.5c0-.2.13-.37.3-.45l.2.45Zm14.28 17 .1.48-.1-.49Zm.45-.1.43.27a.5.5 0 0 1-.34.23l-.1-.5Zm.66-2.63h.5-.5Zm-2.66-6.23-.36.35.36-.35Zm-5.92-5.92.36-.35-.36.35Zm-6.8-2.12-.2-.45a.5.5 0 0 1 .11-.04l.09.5Zm.5 0v5.16h-1v-5.16h1Zm0 5.16c0 7.23 6.57 12.68 13.68 11.34l.18.98a12.54 12.54 0 0 1-14.86-12.32h1Zm13.68 11.34.45-.08.18.98-.45.08-.18-.98Zm.11.15c.39-.64.6-1.42.59-2.37l1-.02a5.3 5.3 0 0 1-.73 2.9l-.86-.51Zm.59-2.37a8.55 8.55 0 0 0-2.52-5.89l.71-.7a9.55 9.55 0 0 1 2.8 6.57l-1 .02Zm-2.52-5.89-5.91-5.92.7-.7 5.92 5.91-.7.71Zm-5.91-5.92a7.15 7.15 0 0 0-6.36-1.98l-.18-.98a8.15 8.15 0 0 1 7.25 2.26l-.71.7Zm-6.25-2.01-.4-.91.4.91Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M23.86 41.85 28 33.62M29.96 41.85l4.88-9.35M24.41 13.1c0 7.65 7.19 13.26 14.6 11.4l5.83-1.82"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m13.11 6.93-5.84 3.72 5.84 3.71V6.93Z"}),he.createElement("circle",{cx:"1.09",cy:"1.09",r:"1.09",fill:"#0E101A",transform:"matrix(-1 0 0 1 19.67 6.27)"}),he.createElement("defs",null,he.createElement("radialGradient",{id:"SuccessC_b",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(8 -9 8 7 13.6 32.4)",gradientUnits:"userSpaceOnUse"},he.createElement("stop",{stopColor:"#F3F8E5"}),he.createElement("stop",{offset:"1",stopColor:"#D7E8A9"})),he.createElement("linearGradient",{id:"SuccessC_a",x1:"16.14",x2:"55.97",y1:".8",y2:"36.57",gradientUnits:"userSpaceOnUse"},he.createElement("stop",{stopColor:"#D7E8A9"}),he.createElement("stop",{offset:".38",stopColor:"#87E8D1"}),he.createElement("stop",{offset:".89",stopColor:"#79A8F2"}))))),null)}},{emptyState:{title:"The first word is the hardest.",description:"Suggestions will appear here.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 79 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("path",{fill:"#C6CBDE",d:"M28.4 63.2c8.62 0 15.6-1.8 15.6-4s-6.98-4-15.6-4-15.6 1.8-15.6 4 6.98 4 15.6 4Z"}),he.createElement("path",{fill:"#638EEB",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M41.19 56.6a.58.58 0 0 0 0-.25v-3.53h-2.67c-2.3-.84-5.78 0-9.72 0-3.94 0-7.45-.86-9.72 0H16.4v4.7c.43 1.9 5.83 3.4 12.4 3.4s11.95-1.5 12.39-3.4v-.93Z"}),he.createElement("path",{fill:"#8ECBDE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M28.8 56.25c6.85 0 12.4-1.63 12.4-3.64 0-2-5.55-3.64-12.4-3.64-6.85 0-12.4 1.63-12.4 3.64 0 2.01 5.55 3.64 12.4 3.64Z"}),he.createElement("path",{fill:"#8ECBDE",d:"M41.17 52.74v-1.5a2.25 2.25 0 0 0-2.23-2.3h-.09a.98.98 0 0 1-.95-.98v-.35H19.7v.35a.98.98 0 0 1-.96.98h-.07a2.25 2.25 0 0 0-2.24 2.3v1.5"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M41.17 52.74v-1.5a2.25 2.25 0 0 0-2.23-2.3h-.09a.98.98 0 0 1-.95-.98v-.35H19.7v.35a.98.98 0 0 1-.96.98h-.07a2.25 2.25 0 0 0-2.24 2.3v1.5"}),he.createElement("path",{fill:"#99C2FF",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M38.1 47.22V44.4h-2.01c-1.7-.63-4.34 0-7.29 0s-5.59-.65-7.3 0H19.5v2.94h.02c.32 1.43 4.35 2.55 9.28 2.55 4.92 0 8.95-1.12 9.27-2.55l.03-.1Z"}),he.createElement("path",{fill:"#DBEBFF",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M28.8 46.97c5.14 0 9.3-1.22 9.3-2.73s-4.16-2.74-9.3-2.74c-5.14 0-9.3 1.23-9.3 2.74 0 1.5 4.16 2.73 9.3 2.73Z"}),he.createElement("path",{fill:"#0E101A",d:"M28.8 45.64c3.85 0 6.97-.66 6.97-1.48s-3.12-1.48-6.97-1.48c-3.85 0-6.97.66-6.97 1.48s3.12 1.48 6.97 1.48Z"}),he.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M65.02 4.06c-1.83.69-3.5 1.34-5.03 2l-3.54 5.07.7-3.8c-7.41 3.5-11.69 7.17-17.58 13.7-5.5 6.11-6.19 14.68-6.19 14.68l10.55-2.27-2.86-1.36 4.46.1a159.72 159.72 0 0 1 17.7-13.15l-4.18-1.93 7.18.04 4.55-2.75L77.83 5l-12.81-.94Z"}),he.createElement("path",{fill:"#41D9B5",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M67.85 8.92s-29.05 9.2-40.25 36h2c3.52-7.49 12.8-24.4 38.25-36Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m46.5 14.03-.83 4.67M59.58 21.57l-5.11-1.43M50.56 28.2l-5.11-1.45M39.6 20.91l-.71 4.2"}))),null)},successState:{title:"You did it!",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("path",{fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M24.56 10.36h34.93L43.53 46.6H8.59l15.97-36.24Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",d:"M19.37 34.76c1.06-.2 2.53-.27 3.52-.82.64-.36.79.58 1.16.82 1.14.77 2.28-.09 3.26-.74.95-.63 1.14-.56 1.8.26.89 1.09 2.87.23 3.97-.03.38-.1.8-.17 1.13.06.68.49 1.48.63 2.28.75 1.15.19 2.26.29 3.42.3.67.01.83.26 1.35.52 1.09.54 2.8-.15 3.9-.37M22.4 27.57c1.54-.08 3.24.04 4.58-.82.2-.13.46-.25.69-.35.12-.05.6.92.83 1.02.57.26 1.27.19 1.88.04.57-.15 1.36-.78 1.89-.33.6.52.71.78 1.57.6.85-.2 1.31-.3 2.07-.04a6.3 6.3 0 0 0 3.73.26c.41-.09 4.57-.66 4.77-.26M24.01 20.46c1.95-.4 3.92-.75 5.81-1.4.24-.09.45-.14.7-.14.29 0 .34.29.48.52.57.95 1.56.59 2.45.56.85-.03 1.6.16 2.47.05.4-.05 1.44-.49 1.82-.31.22.1.3.4.52.53.64.38.91.44 1.65.2.58-.2 1.11.07 1.71-.3.14-.1.64-.61.7-.27.08.43.14.75.56.88 1.43.46 2.92-.5 4.33-.54"}),he.createElement("path",{fill:"#F9C7C7",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M14.77 9.5c0 1.19.96 2.14 2.14 2.14h5.14V7.37H16.9c-1.18 0-2.14.95-2.14 2.14Z"}),he.createElement("path",{fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M19.74 9.5c0-2.6 2.1-4.7 4.7-4.7h31.28v9.41H24.45a4.7 4.7 0 0 1-4.7-4.7Z"}),he.createElement("circle",{cx:"56.15",cy:"9.51",r:"4.71",fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"}),he.createElement("path",{fill:"#F9C7C7",fillRule:"evenodd",d:"M56.54 7.37a2.14 2.14 0 1 0 0 4.27h4.52a2.14 2.14 0 0 0 0-4.27h-4.52Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#1F243C",d:"M54.9 9.5c0-.9.73-1.63 1.64-1.63v-1A2.64 2.64 0 0 0 53.9 9.5h1Zm1.64 1.64c-.9 0-1.64-.73-1.64-1.63h-1a2.64 2.64 0 0 0 2.64 2.63v-1Zm4.52 0h-4.52v1h4.52v-1Zm0 0v1-1Zm1.64-1.63c0 .9-.73 1.63-1.64 1.63v1a2.64 2.64 0 0 0 2.64-2.63h-1Zm-1.64-1.64c.9 0 1.64.73 1.64 1.64h1a2.64 2.64 0 0 0-2.64-2.64v1Zm0 0v-1 1Zm-4.52 0h4.52v-1h-4.52v1Z"}),he.createElement("path",{fill:"#F9C7C7",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M.8 45.5c0 1.19.96 2.14 2.14 2.14h5.13v-4.27H2.94c-1.18 0-2.14.95-2.14 2.14Z"}),he.createElement("path",{fill:"#FEFAE9",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M5.77 45.5c0-2.6 2.1-4.7 4.7-4.7h30.47v9.41H10.47a4.7 4.7 0 0 1-4.7-4.7Z"}),he.createElement("path",{fill:"#79A8F2",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M41.27 48.55h8.66v14.37l-4.35-1.7-4.31 1.7V48.55Z"}),he.createElement("path",{fill:"#F8E485",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 44c0-1.11.8-2.1 1.1-3.13.33-1.05.27-2.32.87-3.21.62-.9 1.81-1.21 2.68-1.86.83-.65 1.49-1.73 2.53-2.08.99-.34 2.12.13 3.22.13 1.07 0 2.23-.47 3.22-.13 1.01.35 1.67 1.43 2.53 2.08.87.65 2.06.96 2.68 1.86.63.86.54 2.16.87 3.21C55.23 41.9 56 42.9 56 44c0 1.11-.8 2.1-1.1 3.13-.33 1.05-.27 2.32-.87 3.21-.62.9-1.81 1.21-2.68 1.86-.83.65-1.49 1.73-2.53 2.08-.98.34-2.12-.13-3.22-.13-1.07 0-2.23.47-3.22.13-1.01-.35-1.67-1.43-2.53-2.08-.87-.65-2.06-.96-2.68-1.86-.63-.86-.54-2.16-.87-3.21-.33-1.03-1.1-2.02-1.1-3.13Z"}),he.createElement("mask",{id:"SuccessD_a",width:"23",height:"24",x:"34",y:"32",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},he.createElement("path",{fill:"#F8E485",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M54.6 49.2c-.55.96-1.74 1.42-2.51 2.16-.81.74-1.4 1.87-2.36 2.35-.99.47-2.18.14-3.25.27-1.05.14-2.16.75-3.23.53-1.02-.2-1.77-1.17-2.73-1.72-.92-.53-2.16-.71-2.84-1.5-.71-.8-.74-2.07-1.16-3.06-.42-1-1.3-1.86-1.4-2.95-.1-1.07.62-2.15.87-3.22.22-1.05.05-2.3.6-3.26.56-.96 1.75-1.42 2.52-2.16.81-.74 1.4-1.87 2.36-2.35.99-.47 2.18-.14 3.25-.27 1.05-.14 2.16-.75 3.23-.53 1.02.2 1.77 1.17 2.73 1.72.92.54 2.16.71 2.84 1.5.71.8.74 2.07 1.16 3.06.43 1 1.3 1.86 1.4 2.95.1 1.07-.62 2.15-.87 3.22-.22 1.05-.05 2.3-.6 3.26Z"})),he.createElement("g",{mask:"url(#SuccessD_a)"},he.createElement("path",{fill:"#FEFAE9",d:"m52.26 29.95 2.49 2.5-19.9 19.9-2.5-2.5zM60.33 37.48l-4.35-4.34-19.9 19.9 4.35 4.35z"}),he.createElement("path",{stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 44c0-1.11.8-2.1 1.1-3.13.33-1.05.27-2.32.87-3.21.62-.9 1.81-1.21 2.68-1.86.83-.65 1.49-1.73 2.53-2.08.99-.34 2.12.13 3.22.13 1.07 0 2.23-.47 3.22-.13 1.01.35 1.67 1.43 2.53 2.08.87.65 2.06.96 2.68 1.86.63.86.54 2.16.87 3.21C55.23 41.9 56 42.9 56 44c0 1.11-.8 2.1-1.1 3.13-.33 1.05-.27 2.32-.87 3.21-.62.9-1.81 1.21-2.68 1.86-.83.65-1.49 1.73-2.53 2.08-.98.34-2.12-.13-3.22-.13-1.07 0-2.23.47-3.22.13-1.01-.35-1.67-1.43-2.53-2.08-.87-.65-2.06-.96-2.68-1.86-.63-.86-.54-2.16-.87-3.21-.33-1.03-1.1-2.02-1.1-3.13Z"})))),null)}},{emptyState:{title:"Start writing to make the magic happen.",description:"Suggestions will appear here.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 65",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#EmptyE_a)"},he.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M47.87 26.1c-.06 0-.1-.05-.1-.1.09-3.4-1.08-4.63-4.47-4.73-.06 0-.1-.05-.1-.1 0-.06.05-.1.1-.1 3.4.09 4.63-1.08 4.73-4.47 0-.06.05-.1.1-.1.06 0 .1.05.1.1-.09 3.4 1.08 4.63 4.47 4.72.06 0 .1.05.1.1 0 .06-.05.1-.1.1-3.4-.09-4.63 1.08-4.73 4.47 0 .07-.05.11-.1.11ZM10.68 28.5c-.06 0-.1-.04-.1-.1.09-3.11-.98-4.24-4.1-4.33-.04 0-.08-.04-.08-.1 0-.05.04-.08.1-.08 3.11.08 4.24-.99 4.33-4.1 0-.05.04-.09.1-.09.05 0 .08.04.08.1-.08 3.11.99 4.24 4.1 4.32.05 0 .09.04.09.1 0 .05-.04.08-.1.08-3.11-.08-4.24.99-4.33 4.1 0 .06-.04.1-.1.1ZM35.84 12.5c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.96.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.97 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12Z"}),he.createElement("path",{fill:"#0E101A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M2.19 6.8a2.53 2.53 0 1 1 2.74-4.24l30.2 19.54-2.74 4.24L2.19 6.81Z"}),he.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M24.3 21.1a2.52 2.52 0 1 1 2.74-4.23l8.75 5.65-2.74 4.24-8.75-5.66Z"}),he.createElement("circle",{cx:"34.41",cy:"24.67",r:"2.55",fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",transform:"rotate(-57 34.4 24.67)"}),he.createElement("path",{fill:"#C6CBDE",d:"M32 64.5c10.6 0 19.2-1.61 19.2-3.6s-8.6-3.6-19.2-3.6-19.2 1.61-19.2 3.6 8.6 3.6 19.2 3.6Z"}),he.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M42.84 34.42H21.16l-3.23 23.34c-.2 1.49.5 2.9 1.94 3.3 2.13.6 6 1.27 12.62 1.27 6.77 0 10.35-.7 12.17-1.3 1.17-.4 1.64-1.56 1.47-2.78l-3.29-23.83Z"}),he.createElement("path",{fill:"#F8C6DA",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m43.74 41.35-.9-6.93H21.16l-.9 6.93h23.48Z"}),he.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M50.08 33.3H13.92a1.12 1.12 0 0 0 0 2.24h36.16a1.12 1.12 0 1 0 0-2.24Z"})),he.createElement("defs",null,he.createElement("clipPath",{id:"EmptyE_a"},he.createElement("path",{fill:"#fff",d:"M0 .5h64v64H0z"}))))),null)},successState:{title:"Poof!",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#SuccessE_a)"},he.createElement("path",{fill:"#C6CBDE",d:"M32 64c11.49 0 20.8-1.8 20.8-4s-9.31-4-20.8-4-20.8 1.8-20.8 4 9.31 4 20.8 4Z"}),he.createElement("path",{fill:"#F28C8C",d:"M38.73 32.98s9.04-12.87 11.57-18.56c3.5-7.97 1.49-11.86-.22-12.62-1.7-.76-5.96.4-9.46 8.36-2.59 5.85-6.54 21.03-6.54 21.03"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M38.73 32.98s9.04-12.87 11.57-18.56c3.5-7.97 1.49-11.86-.22-12.62-1.7-.76-5.96.4-9.46 8.36-2.59 5.85-6.54 21.03-6.54 21.03"}),he.createElement("path",{fill:"#F8C6DA",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M37.12 30.94a.95.95 0 0 1-.6-1.21c1.12-3.6 5.26-16.7 6.53-19.63 2.04-4.62 4.69-5.75 5.7-5.32 1 .46 1.97 3.16-.07 7.79-1.28 2.89-8.55 14.94-10.37 17.95-.25.4-.73.58-1.19.42Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m32.68 31.55-4.56 2.04s-.58-.97-1.46-2.55a348.24 348.24 0 0 1-5.63-10.29 1.31 1.31 0 0 1 .33-1.61 6.2 6.2 0 0 1 9.13 1.25 285.72 285.72 0 0 1 2.19 11.16Z"}),he.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M44.05 31.22H19.95l-3.6 25.59c-.22 1.5.49 2.93 1.95 3.35 2.31.66 6.65 1.44 14.25 1.44 7.73 0 11.71-.8 13.68-1.48 1.18-.4 1.67-1.58 1.5-2.82l-3.68-26.08Z"}),he.createElement("path",{fill:"#F8C6DA",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"m45.04 38.76-1-7.54H19.96l-1 7.54h26.1Z"}),he.createElement("path",{fill:"#6E66DE",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M51.58 30H12.42a1.22 1.22 0 0 0 0 2.44h39.16a1.22 1.22 0 0 0 0-2.44Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M30.49 20.42c-1 3.4-2.07 6.72-2.98 8.82-.28.64-.55 1.25-.85 1.8-3.26 6.38-6.94 7.33-8.55 6.63-1.74-.73-3.78-4.63-.34-12.63.52-1.18 1.31-2.68 2.22-4.32a6.2 6.2 0 0 1 10.5-.3Z"}),he.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M6.63 21.6c-.07 0-.12-.06-.12-.13.11-4.25-1.35-5.79-5.59-5.9-.07 0-.12-.07-.12-.14s.06-.12.13-.12c4.25.11 5.79-1.35 5.9-5.59 0-.07.07-.12.14-.12s.12.06.12.13c-.11 4.25 1.35 5.79 5.59 5.9.07 0 .12.05.12.13 0 .07-.06.12-.13.12-4.25-.11-5.79 1.34-5.9 5.59-.02.08-.07.13-.14.13ZM19.87 10.4c-.06 0-.1-.05-.1-.1.09-3.4-1.08-4.63-4.47-4.73-.06 0-.1-.05-.1-.1 0-.06.05-.1.1-.1 3.4.09 4.63-1.08 4.73-4.47 0-.06.05-.1.1-.1.06 0 .1.05.1.1-.09 3.4 1.08 4.63 4.47 4.72.06 0 .1.05.1.1 0 .06-.05.1-.1.1-3.4-.09-4.63 1.08-4.73 4.47 0 .07-.05.11-.1.11ZM57.03 52c-.07 0-.12-.06-.12-.13.11-4.25-1.35-5.79-5.59-5.9-.07 0-.12-.07-.12-.14s.06-.12.13-.12c4.25.11 5.79-1.35 5.9-5.59 0-.07.07-.12.14-.12s.12.06.12.13c-.11 4.25 1.35 5.79 5.59 5.9.07 0 .12.05.12.13 0 .07-.06.12-.13.12-4.25-.11-5.79 1.34-5.9 5.59-.02.08-.07.13-.14.13Z"})),he.createElement("defs",null,he.createElement("clipPath",{id:"SuccessE_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"No pressure.",description:"Suggestions will appear here.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#EmptyF_a)"},he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M28.8.8h6.4v72.8h-6.4zM4.8 71.09l5.54 3.2 12.8-22.18-5.54-3.2zM59.2 71.08l-5.54 3.2-12.8-22.17 5.54-3.2z"}),he.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M6.4 6.4h51.2v51.2H6.4V6.4Z"}),he.createElement("path",{fill:"#DBEBFF",fillRule:"evenodd",d:"M57.6 40.12V57.6H6.4V19.47a13.4 13.4 0 0 1 2.28-1.84 6.48 6.48 0 0 1 5.52-.75 6.37 6.37 0 0 1 3.83 3.57c.75 1.75.67 3.54.56 4.45-.26 2.04-.98 3.65-1.79 5.47l-.1.24.38-.3c-.04.03.99-.79 1.91-1.33.5-.3 1.32-.72 2.33-.98a6.66 6.66 0 0 1 4.86.56c3.66 2 4.18 5.65 4.03 7.75-.1 1.36-.46 2.6-.82 3.56.84-.82 1.72-1.62 2.65-2.39 1.07-.87 2.81-1.96 4.78-2.53 1.67-.48 6.19-1.2 8.97 2.87a7.8 7.8 0 0 1 1.4 4.16c.79-.57 1.64-1.1 2.58-1.55l.05-.03c.36-.17 1.66-.8 3.1-1.05a7.1 7.1 0 0 1 4.68.77Z",clipRule:"evenodd"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M6.4 6.4h51.2v51.2H6.4V6.4Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M3.2 51.2h57.6v6.4H3.2z"}),he.createElement("path",{fill:"#FEFAE9",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M27.97 32.23a5.23 5.23 0 0 1 7.71-2.94c2.9 1.72 3.77 5.06.55 8.71-3.22 3.65-9.8 3.1-11.7 2.32 2.37-3.14 2.3-4.74 3.44-8.1Z"}),he.createElement("path",{fill:"#638EEB",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M43.6 14.18a3.48 3.48 0 1 1 5.53 4.18L37.7 31.46l-3.58-2.7 9.48-14.58Z"}),he.createElement("path",{fill:"#15C39A",fillRule:"evenodd",d:"M36.94 37.12c-.21.3-.45.59-.7.88-3.23 3.65-9.8 3.1-11.7 2.32 1.75-2.32 2.17-3.8 2.72-5.77.1-.36.2-.73.33-1.13 1.3.08 2.16.22 3.76 2.6 1.34 1.98 3.54 1.66 5.59 1.1Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"m36.94 37.12.4.3a.5.5 0 0 0-.54-.78l.14.48Zm-.7.88.37.33-.38-.33Zm-11.7 2.32-.4-.3a.5.5 0 0 0 .2.76l.2-.46Zm2.72-5.77-.48-.14.48.14Zm.33-1.13.03-.5a.5.5 0 0 0-.51.36l.48.14Zm3.76 2.6.42-.29-.42.28Zm5.18.8c-.2.29-.42.57-.67.85l.75.66c.27-.3.51-.61.73-.92l-.81-.58Zm-.67.85c-1.5 1.69-3.8 2.43-6.02 2.65-2.23.21-4.26-.12-5.11-.47l-.38.93c1.04.43 3.25.76 5.58.53 2.35-.22 4.95-1.02 6.68-2.98l-.75-.66Zm-10.92 2.95a15.1 15.1 0 0 0 2.8-5.94l-.96-.27c-.55 1.95-.95 3.36-2.64 5.6l.8.6Zm2.8-5.94c.1-.35.2-.72.33-1.11l-.96-.3-.33 1.14.96.27Zm4.03 1.05a7.25 7.25 0 0 0-2.16-2.3 4.13 4.13 0 0 0-2-.5l-.05 1c.64.03 1.08.08 1.55.36.48.28 1.04.84 1.83 2l.83-.56Zm5.03.9c-1.01.28-2 .48-2.87.4a2.79 2.79 0 0 1-2.16-1.3l-.83.56a3.79 3.79 0 0 0 2.89 1.73 9.2 9.2 0 0 0 3.24-.42l-.27-.96Z"})),he.createElement("defs",null,he.createElement("clipPath",{id:"EmptyF_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Bravo!",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#SuccessF_a)"},he.createElement("path",{fill:"#41D9B5",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M.8 5.8a5 5 0 0 1 5-5h52.4a5 5 0 0 1 5 5v52.4a5 5 0 0 1-5 5H5.8a5 5 0 0 1-5-5V5.8Z"}),he.createElement("path",{fill:"#DBEBFF",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M4.8 6.8c0-1.1.9-2 2-2h50.4a2 2 0 0 1 2 2v50.4a2 2 0 0 1-2 2H6.8a2 2 0 0 1-2-2V6.8Z"}),he.createElement("g",{clipPath:"url(#SuccessF_b)"},he.createElement("path",{fill:"#99C2FF",d:"M55.66 73.05c-.76.9-1.51 1.8-1.66 2.02H-2.94c.61-2.7.03-5.61-2.37-7.42-2.44-1.83-4.9-3.64-7.27-5.56V37.05l.12.1c1.98 1.79 5.03-.78 7.15.9 11.3 17 27.6 18.48 41.09 9.82 3.86-2.48 6.83-14.07 4.07-18.06-2.48-3.58-8.15-5.66-12.29-3a58.1 58.1 0 0 1-7.42 4.1c-.27.13-.77.28-1.11.38l.92-.25c-.47.13-.94.35-1.4.51-1.22.41-2.47.76-3.73 1.02-.61.13-1.25.2-1.86.33l.89-.2a7.2 7.2 0 0 1-.8.1c-.63.03-1.25 0-1.87-.04h-.07c.44 0 .53-.03-.61-.05a19.27 19.27 0 0 1-2.23-.55h-.01c-.5-.27-1-.5-1.49-.77-.4-.23-.82-.61-1.25-.83l-.42-.34c-1.12-.97-2.1-2.05-3.09-3.13C.7 25.66-3.16 16.37-4.78 15.2 1.27 17.47 10.8 16.8 15.6 14c4.8-2.8 9.6-7.31 11.42-13.73 0 0 8.38.75 14.05 4.15 5.66 3.4 6.8 8.31 9.44 14.74 2.65 6.42 9.07 8.68 15.12 6.38l.37.05-1.13 16.61c-8.38-6-17 .89-19.27 6.04-2.22 5.05 11.37 22.27 10.06 24.81 1.5-1.77 3.06-3.53-.04.07a.52.52 0 0 1-.07.08l.07-.08a.58.58 0 0 0 .04-.07Z",opacity:".7"}),he.createElement("path",{fill:"#FCE5E5",d:"m30.37 12.1 1.17-2.18c.6-1.12 1.3-1.53 2.49-1.97a3.36 3.36 0 0 1 2.64.27c.81.42 1.47.27 2.06.97a15.46 15.46 0 0 1 2.87 13.86c-.11.4-.25.82-.22 1.25.02.34.14.66.19 1 .07.6-.1 1.19-.24 1.77-.56 2.19-.85 4.58.06 6.65.25.56.58 1.1.69 1.7.09.46.04.93 0 1.4-.26 3.04-.13 6.12.4 9.13-7.1.5-14.29-.28-21.12-2.27a1.27 1.27 0 0 1-.52-.24c-.26-.25-.27-.67-.19-1.02.21-.93.86-1.7 1.5-2.42 2.2-2.55 4.42-5.09 6.64-7.63"}),he.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"M24.77 36.29s-15.01-.79-6.79-7.93l-5.65-5.65S9.72 26.48 7.5 32.4c-1.04 2.75 1.39 5.17 4.43 8.21 3.5 3.5 7.82 7.81 8.64 14.39.14 1.11.3 1.87.45 2.33.17 1.1.34 2.26.5 3.5.43 3.31.49 14.3.49 14.3l34.4-.27.05-29.5c0-4.2-2.56-7.97-6.47-9.5l-9.8 7.7c-16.84 3.76-14.9-7.14-14.9-7.14s-.22.21-.57.59l.06-.72Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#FFC940",fillRule:"evenodd",d:"m22.98 37.83 1.2.1 1.2.11a2.27 2.27 0 0 0 0 .32 5.82 5.82 0 0 0 1.34 3.7c1.44 1.72 4.83 3.52 13.04 1.68l.53 2.36c-8.61 1.93-13.15.24-15.43-2.48a8.24 8.24 0 0 1-1.88-5.77v-.02Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"m17.98 28.36.33.38a.5.5 0 0 0 .02-.73l-.35.35Zm6.36 7.93.5.05a.5.5 0 0 0-.47-.55l-.03.5Zm-12-13.58.34-.35a.5.5 0 0 0-.75.05l.4.3Zm-4.92 9.45.47.17-.47-.17Zm4.78 8.56.36-.35-.36.35Zm8.48 13.62.5-.06-.5.06Zm.07.61.5-.04-.5.04Zm.06 1.26h.5-.5Zm.1 2.46.5.01a.5.5 0 0 0 0-.1l-.5.1Zm-.1 1.98.5.04-.5-.04ZM22 75.12l-.5.07a.5.5 0 0 0 .5.43v-.5Zm34.39-.26v.5a.5.5 0 0 0 .5-.5h-.5Zm.06-29.1h-.5.5Zm-6.9-9.9.18-.47a.5.5 0 0 0-.5.09l.32.38Zm-9.37 7.7.1.48a.5.5 0 0 0 .21-.1l-.31-.39Zm-14.9-7.14.49.1a.5.5 0 0 0-.84-.46l.35.36Zm-1.08 1.15-.5-.05a.5.5 0 0 0 .88.38l-.38-.33Zm-6.55-9.59c-2.07 1.8-2.9 3.36-2.63 4.73.26 1.35 1.54 2.2 2.87 2.75 1.36.57 2.98.9 4.23 1.09a28.35 28.35 0 0 0 2.15.24h.04l.03-.5.03-.5h-.04l-.11-.01a20.5 20.5 0 0 1-1.95-.22c-1.23-.18-2.75-.5-4-1.02-1.29-.54-2.11-1.22-2.27-2.02-.16-.8.27-2.01 2.3-3.78l-.65-.76Zm-5.67-4.92 5.65 5.65.7-.7-5.65-5.65-.7.7Zm-4.1 9.27a45.35 45.35 0 0 1 4.41-8.7 19.79 19.79 0 0 1 .44-.62l-.4-.3-.4-.3v.01a8.3 8.3 0 0 0-.47.65 46.35 46.35 0 0 0-4.51 8.9l.94.36Zm4.68 8.04a33.1 33.1 0 0 1-3.9-4.42c-.89-1.35-1.2-2.5-.77-3.62l-.94-.35c-.58 1.55-.09 3.06.88 4.52.95 1.45 2.44 2.96 4.02 4.57l.71-.7Zm8.62 13.9c-.8-5.95-5.13-10.35-8.62-13.9l-.71.7c3.53 3.6 7.6 7.77 8.34 13.34l.99-.14Zm.07.63-.07-.62-1 .12.07.6 1-.1Zm.06 1.3c0-.43-.02-.87-.06-1.29l-1 .09c.04.4.06.8.06 1.2h1Zm.1 2.39c-.06-.35-.1-1.1-.1-2.38h-1c0 1.27.03 2.1.11 2.55l.99-.17Zm-.1 2.1c.06-.71.09-1.38.1-2l-1-.03c0 .6-.04 1.25-.1 1.94l1 .09ZM22 75.12l.5-.07-.01-.03-.01-.09a178.11 178.11 0 0 1-.69-5.85c-.33-3.22-.62-6.79-.49-8.4l-1-.08c-.14 1.72.17 5.4.5 8.58a242.97 242.97 0 0 0 .69 5.88v.1l.01.02.5-.06Zm34.39-.76-34.4.26.01 1 34.4-.26-.01-1Zm-.44-28.6-.06 29.1h1l.06-29.1h-1Zm-6.57-9.43a10.02 10.02 0 0 1 6.57 9.43h1c0-4.63-2.88-8.77-7.22-10.37l-.35.94Zm-8.89 7.61 9.38-7.7-.63-.76-9.38 7.69.63.77Zm-15.21-7.52a28.07 28.07 0 0 0-.5-.08 1.23 1.23 0 0 0-.02.14l-.03.37A7.16 7.16 0 0 0 26 41.69c1.8 2.5 5.79 4.25 14.28 2.35l-.22-.97c-8.35 1.86-11.8.05-13.25-1.96a6.16 6.16 0 0 1-1.08-3.09 7.29 7.29 0 0 1 .03-1.51l-.5-.09Zm-.7 1.48a20.66 20.66 0 0 1 1.02-1.1l.02-.01-.34-.37-.35-.36-.02.02-.06.06a14.31 14.31 0 0 0-1.03 1.1l.76.66Zm-.24-1.61-.5-.06v.09l-.03.25-.1.95.99.1a525.27 525.27 0 0 0 .14-1.27l-.5-.06Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M48 55.39v11.85L35.83 74.8"}),he.createElement("path",{fill:"#0E101A",d:"m35.6 7.62-3.88 4.16s1.11 19.1-.24 23.23c-1.35 4.13-3.94 11.76-6.08 12.72-2.14.96-5.04.48-5.04-2.4 0-2.87 4.03-7.9 1.64-9.33.4 0 4.66-.98 3.63-6.47-1.03-5.48-2.85-13.96-.23-17.75 2.62-3.8 5.6-4.64 10.2-4.16Z"}),he.createElement("path",{fill:"#FCE5E5",d:"M32.7 11.5c-2.44-.09-6.13 1.14-6.3 3.94-.16 2.8.4 3.8.33 4.5-.08.7-1.21 3.58.24 5.9 1.45 2.34 3.78 3.89 4.59 4.12.8.24 4.51-1.16 6.6-3.18"}),he.createElement("path",{fill:"#0E101A",d:"M32.67 12a.5.5 0 0 0 .04-1l-.04 1Zm-6.27 3.44.5.03-.5-.03Zm5.16 14.52-.14.48.14-.48Zm1.15-18.95a8.94 8.94 0 0 0-4.24.93c-1.33.7-2.47 1.82-2.56 3.47l1 .06c.06-1.16.85-2.04 2.02-2.64 1.16-.6 2.6-.87 3.74-.82l.04-1Zm-6.8 4.4a14.04 14.04 0 0 0 .22 3.63l.06.38c.04.23.05.36.04.47l1 .11c.02-.25 0-.5-.05-.74l-.07-.4-.08-.46c-.1-.66-.2-1.58-.13-2.93l-1-.06Zm.32 4.48-.06.3-.13.53c-.1.41-.2.93-.26 1.51a6.08 6.08 0 0 0 .76 3.88l.85-.53a5.09 5.09 0 0 1-.62-3.25c.05-.52.15-.99.24-1.38l.13-.53c.04-.15.07-.3.08-.42l-.99-.11Zm.31 6.22a12.39 12.39 0 0 0 2.65 2.97 7.58 7.58 0 0 0 2.23 1.36l.28-.96a6.82 6.82 0 0 1-1.88-1.18 11.4 11.4 0 0 1-2.43-2.72l-.85.53Zm4.88 4.33c.2.06.42.06.62.03.22-.02.46-.07.72-.14a14.15 14.15 0 0 0 5.75-3.2l-.7-.71a13.16 13.16 0 0 1-5.88 3.06h-.23l-.28.96Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M31.57 19.2s-.7 3.52-.48 3.95c.21.43 1.4.43 1.99.06"}),he.createElement("path",{fill:"#0E101A",d:"M28.8 20.11c.44 0 .8-.48.8-1.07 0-.6-.36-1.08-.8-1.08-.44 0-.8.48-.8 1.08 0 .59.36 1.07.8 1.07Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m36.34 19.7-2.51-.93 2.43-.88M30.25 26.1s3.6 1.1 4-.9"}),he.createElement("path",{fill:"#F9EA9E",stroke:"#0E101A",strokeLinejoin:"round",d:"M48.27 35s-4.7 12.38-13.47 17.8c-5.76 3.56-13.2 3.6-14 3.2-3 12.82 1.59 16.32 4.38 15.39 2.8-.93 9.17-3.93 15.4-11.59C46.8 52.15 50.97 39.12 54 39.2c-1.2-2.4-5.73-4.2-5.73-4.2Z"}),he.createElement("path",{fill:"#0E101A",d:"M31.23 12c1.46 0 4.71-.06 6.32 2.42 1.61 2.49 4.49 9.96 1.74 19.87-2.74 9.9-3.36 15.25 1.72 15.25 5.07 0 5.98-2.57 5.98-7.7 0-5.12 3.42-5.55 4.27-5.55-2.42-2.02-4.84-.86-5.6-12.98C44.88 11.2 39.38 7.62 35.6 7.62c-.26 0-5.83 4.37-4.38 4.37Z"}),he.createElement("path",{fill:"#FCE5E5",d:"M22.5 23.5c5.14-2.01 5.47-2.87 4.3-3.5-1.17-.63-3.7.79-3.7.79s.28-.46 2.43-1.75c2.14-1.3-.15-2.43-1.8-1.79-.8.31-2.17.88-1.94 1.73 0 0-2-2.98-5.13.25-1.83 1.88-1.74 3.36-1.4 4.22h-.17l-4.92 6.15 4.49 1 3.5-4.79c.99.76 4.99.52 4.32-1.62-.21-.66-.5-1.37-.84-2.01l.01-.02-.16-.26"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M15.74 24.2s-2.06-2 .9-5.05c3.12-3.22 5.3 0 5.3 0s.24 4.88-2.38 3.95c-1.25-.44.05-3.85.05-3.85"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M21.77 18.56s.71-.68 2.36-1.33c1.65-.64 3.05.69.9 1.98-2.14 1.3-1.96 1.5-1.96 1.5s3.17-1.56 4.02-.79c.84.77-.31 2.04-4.63 3.5M17.52 19.5s-1.34 2.18-.26 2.85c1.07.67 1.36-.65 1.36-.65"}),he.createElement("path",{fill:"#FCE5E5",d:"M21.98 22.99c-.14-.22-.63-1.35-.77-1.57a.51.51 0 0 0-.17-.2c-.09-.04-.67-1-.77-.98-.24.04-1.02-.23-1.18-.04-.65.77.03 2.18.05 2.52 0 .08.74 1.58.88 1.57.2 0 1.12-.26 1.2-.46"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M19.56 23.1s-1.48-2.16-.41-2.98c1.06-.82 2.63 1.84 3.3 4 .67 2.14-3.33 2.38-4.32 1.62l-3.87 4.88-2.96-2.69 3.8-5.02"}),he.createElement("path",{fill:"#F28C8C",d:"M12.73 23.92s.4 3.63 4.44 4.44c0 0-2.82 2.02-3.22 4.84-.4 2.83-5.65-.37-5.65-.37l1.61-4.87"}),he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M12.33 23.11s1.62 4.85 5.25 5.25"})),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M4.8 6.8c0-1.1.9-2 2-2h50.4a2 2 0 0 1 2 2v50.4a2 2 0 0 1-2 2H6.8a2 2 0 0 1-2-2V6.8Z"})),he.createElement("defs",null,he.createElement("clipPath",{id:"SuccessF_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})),he.createElement("clipPath",{id:"SuccessF_b"},he.createElement("path",{fill:"#fff",d:"M4.8 4.8h54.4v54.4H4.8z"}))))),null)}},{emptyState:{title:"Time to dig in.",description:"Suggestions will appear here.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#EmptyG_a)"},he.createElement("path",{fill:"#DBEBFF",stroke:"#0E101A",d:"m51.15 10.56-3.71-1.48-5.32 13.38 3.71 1.48z"}),he.createElement("path",{fill:"#4A6EE0",stroke:"#0E101A",d:"m49.29 31.5-14.87-5.9 1.48-3.75a6 6 0 0 1 7.8-3.36l3.71 1.48a6 6 0 0 1 3.36 7.8L49.3 31.5Z"}),he.createElement("path",{fill:"#4A6EE0",fillRule:"evenodd",stroke:"#0E101A",d:"M56.36 7.08a2.47 2.47 0 0 0-1.17-3.63l-5.8-2.31a2.47 2.47 0 0 0-3.35 1.83l-.94 4.95a2.47 2.47 0 0 0 1.51 2.77l4.04 1.6c1.1.44 2.36.03 3-.97l2.71-4.24Zm-2.8-1.16-2.1 3.57-3.52-1.4.93-4.03 4.69 1.86Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M2.96 54.7C-4.82 51.48 7.2 28.34 27.6 22 48 15.65 67.98 49.1 61.9 54c-6.09 4.92-20.72 5.5-32.72 5.1-12-.4-18.44-1.2-26.22-4.4Z"}),he.createElement("path",{fill:"#AAF2E1",stroke:"#0E101A",d:"m11.5 24.49 3.38-2.12 7.63 12.21-3.39 2.12z"}),he.createElement("path",{fill:"#15C39A",stroke:"#0E101A",d:"m17.08 44.75 13.57-8.48-2.13-3.4a6 6 0 0 0-8.27-1.91l-3.4 2.12a6 6 0 0 0-1.9 8.26l2.13 3.41Z"}),he.createElement("path",{fill:"#15C39A",fillRule:"evenodd",stroke:"#0E101A",d:"M5.74 22a2.47 2.47 0 0 1 .5-3.79l5.3-3.31a2.47 2.47 0 0 1 3.62 1.2l1.82 4.7c.43 1.12 0 2.37-1 3l-3.68 2.3c-1.01.63-2.32.46-3.13-.41l-3.43-3.7Zm2.55-1.65L11 23.5l3.22-2-1.64-3.81-4.28 2.67Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#FFF0D4",d:"M19.35 39.37a12.57 12.57 0 0 0-4.97 7.32l9.6 2 14.8-10-6.8-6.8c-4.26 5.53-8.47 4.55-12.63 7.48Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",d:"M14.8 44.4s.76-2.61 4.38-4.9c3.62-2.3 7.62-1.9 12.02-6.3"}),he.createElement("ellipse",{cx:"42.75",cy:"42.11",fill:"#EF6E6E",stroke:"#0E101A",strokeLinejoin:"round",rx:"10.49",ry:"3.82"}),he.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M38.63 40.85c-3.34.38-5.22 2.5-5.01 3.79.2 1.28 2.92 4.16 2.92 4.16h9.61S52 48.05 52 45.77c0-2.27-1.67-3.31-3.76-3.78-2.09-.48-4.24.41-4.24.41s-2.03-1.93-5.37-1.55Z"}),he.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"m32.3 42.45 2.18 18.16c0 1.37 3.7 2.48 8.27 2.48C47.3 63.1 51 62 51 60.61l2.19-18.16c-.47 1.95-4.97 3.47-10.45 3.47-5.48 0-9.98-1.52-10.45-3.47Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"m32.3 42.45.48-.12a.5.5 0 0 0-.98.18l.5-.06Zm2.18 18.16h.5a.5.5 0 0 0 0-.06l-.5.06Zm16.53 0-.5-.06a.5.5 0 0 0 0 .06h.5Zm2.19-18.16.5.06a.5.5 0 0 0-.99-.18l.49.12Zm-21.4.06 2.18 18.16 1-.12-2.19-18.16-.99.12Zm2.18 18.1c0 .59.4 1.04.86 1.38.48.34 1.14.62 1.92.86 1.55.46 3.67.74 5.99.74v-1c-2.25 0-4.27-.27-5.7-.7a5.76 5.76 0 0 1-1.63-.72c-.37-.26-.44-.46-.44-.56h-1Zm8.77 2.98c2.32 0 4.43-.28 5.99-.74a6.71 6.71 0 0 0 1.91-.86c.47-.34.86-.8.86-1.38h-1c0 .1-.07.3-.43.56-.36.25-.9.5-1.63.72-1.44.43-3.45.7-5.7.7v1Zm8.76-2.92 2.19-18.16-1-.12-2.18 18.16 1 .12Zm1.2-18.34c-.08.33-.34.7-.87 1.08-.51.38-1.24.73-2.15 1.03-1.8.6-4.24.98-6.94.98v1c2.78 0 5.33-.38 7.26-1.03.97-.32 1.8-.72 2.42-1.17.62-.46 1.1-1 1.26-1.66l-.98-.23Zm-9.96 3.1c-2.7 0-5.14-.38-6.95-.99-.9-.3-1.63-.65-2.15-1.03s-.79-.75-.87-1.08l-.97.23c.16.65.63 1.2 1.25 1.66.63.45 1.46.85 2.42 1.17 1.94.65 4.49 1.03 7.27 1.03v-1Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M41.81 47.08c.4.63.84 1.27 1.33 1.9 3.81 5 8.67 7.7 10.86 6.03 1.83-1.4 1.22-5.38-1.25-9.56"}),he.createElement("circle",{cx:"41.79",cy:"47.04",r:"1.91",fill:"#F9C7C7",stroke:"#0E101A",strokeLinejoin:"round"})),he.createElement("defs",null,he.createElement("clipPath",{id:"EmptyG_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Looking good!",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#SuccessG_a)"},he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",d:"M32 12V.8"}),he.createElement("path",{fill:"#41D9B5",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"m32 .8 10.4 2-10.4 2v-4Z"}),he.createElement("path",{fill:"#FFF0D4",fillRule:"evenodd",d:"M4.19 57.54c-11.68-1.65 9.45-9.48 23.8-11.66 14.34-2.19 41.86 7.56 33.74 11.33-1.66.77-14.7 2.23-24.14 2.87a6.31 6.31 0 0 0-2.96 1.21c-1.76 1.17-4.44 1.91-7.43 1.91-2.26 0-4.34-.42-5.98-1.13a7.64 7.64 0 0 0-4-.58c-.53.07-1.07.11-1.62.11-2.4 0-4.53-.7-5.93-1.8-1.06-.83-2.18-1.77-3.52-1.97l-.64-.1-1.32-.19Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"m27.98 45.88.08.5-.08-.5ZM4.2 57.54l-.07.5.07-.5Zm57.54-.33.21.45-.2-.45Zm-56.22.53.07-.5-.07.5Zm22.4-12.36C20.7 46.48 11.79 49 6.13 51.45a27.57 27.57 0 0 0-3.6 1.83 5.88 5.88 0 0 0-2 1.8 1.5 1.5 0 0 0-.2 1.07c.08.37.32.68.64.91.62.46 1.68.77 3.15.98l.14-1c-1.45-.2-2.29-.49-2.7-.78-.19-.14-.24-.26-.25-.32-.02-.07-.01-.18.09-.36.21-.39.76-.88 1.67-1.45.89-.56 2.06-1.16 3.45-1.76 5.58-2.42 14.4-4.91 21.54-6l-.15-.99Zm34.03 12.28c1.08-.5 1.77-1.2 1.76-2.11 0-.86-.63-1.67-1.48-2.4-1.73-1.46-4.94-3-8.78-4.31-7.69-2.65-18.25-4.57-25.53-3.46l.15 1c7.06-1.08 17.43.78 25.06 3.4 3.81 1.32 6.87 2.8 8.46 4.14.8.7 1.12 1.24 1.12 1.63 0 .33-.22.76-1.18 1.2l.42.91Zm-24.31 2.92c4.72-.32 10.35-.85 15-1.39 2.33-.27 4.42-.55 6.03-.8.8-.13 1.5-.26 2.05-.38a6.6 6.6 0 0 0 1.23-.35l-.42-.9a5.9 5.9 0 0 1-1.02.28c-.52.11-1.2.23-2 .36-1.59.25-3.66.53-5.98.8-4.64.54-10.25 1.07-14.96 1.39l.07 1ZM27.2 63.7c3.07 0 5.84-.76 7.7-1.99l-.55-.83c-1.66 1.1-4.23 1.82-7.15 1.82v1Zm-6.17-1.17c1.7.74 3.85 1.17 6.17 1.17v-1c-2.2 0-4.2-.41-5.78-1.09l-.4.92ZM17.14 61c-.5.06-1 .1-1.54.1v1c.58 0 1.14-.04 1.68-.11l-.14-1Zm-1.54.1c-2.3 0-4.33-.68-5.62-1.69l-.61.79c1.5 1.18 3.75 1.9 6.23 1.9v-1ZM5.44 58.23l.64.1.14-1-.64-.09-.14 1Zm-1.32-.2 1.32.2.14-.99-1.32-.2-.14 1Zm5.86 1.38c-1.02-.8-2.26-1.85-3.76-2.07l-.14.98c1.18.18 2.18 1.01 3.29 1.88l.61-.79Zm11.44 2.2a8.13 8.13 0 0 0-4.28-.61l.14.99a7.14 7.14 0 0 1 3.75.54l.4-.92Zm16.14-2.02c-1.22.08-2.3.68-3.2 1.29l.54.83a5.83 5.83 0 0 1 2.73-1.13l-.07-1Z"}),he.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M36.4 21.6h-8.8a2 2 0 0 1-2-2v-4.37a2 2 0 0 1 .59-1.42l4.4-4.4a2 2 0 0 1 2.82 0l4.4 4.4a2 2 0 0 1 .59 1.42v4.37a2 2 0 0 1-2 2Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M30.4 13.6a1.6 1.6 0 0 1 3.2 0v3.2h-3.2v-3.2Z"}),he.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M39.6 20H24.4a2 2 0 0 0-2 2v21.6c0 1.1.9 2 2 2h15.2a2 2 0 0 0 2-2V22a2 2 0 0 0-2-2Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M30.4 24.8a1.6 1.6 0 0 1 3.2 0V28h-3.2v-3.2Z"}),he.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M26 28h-7.2a2 2 0 0 0-2 2v17.6c0 1.1.9 2 2 2H26a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M20.8 32.8a1.6 1.6 0 0 1 3.2 0V36h-3.2v-3.2Z"}),he.createElement("path",{fill:"#FFF0D4",stroke:"#0E101A",strokeLinecap:"round",d:"M45.2 28H38a2 2 0 0 0-2 2v17.6c0 1.1.9 2 2 2h7.2a2 2 0 0 0 2-2V30a2 2 0 0 0-2-2Z"}),he.createElement("path",{fill:"#F28C8C",stroke:"#0E101A",d:"M40 32.8a1.6 1.6 0 1 1 3.2 0V36H40v-3.2Z"}),he.createElement("path",{fill:"#FFF0D4",fillRule:"evenodd",d:"M12.8 41.2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v2h4.08v-2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v2h4.08v-2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v2h4.08v-2c0-1.1.9-2 2-2h2.54a2 2 0 0 1 2 2v4a2 2 0 0 1-.05.45c.03.18.05.36.05.55v7.4H12.8v-7.4c0-.19.02-.37.05-.55a2 2 0 0 1-.05-.45v-4Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"M19.34 43.2h-.5v.5h.5v-.5Zm4.08 0v.5h.5v-.5h-.5Zm6.54 0h-.5v.5h.5v-.5Zm4.08 0v.5h.5v-.5h-.5Zm6.54 0h-.5v.5h.5v-.5Zm4.08 0v.5h.5v-.5h-.5Zm6.49 2.45-.49-.11-.02.1.02.1.49-.1Zm.05 7.95v.5h.5v-.5h-.5Zm-38.4 0h-.5v.5h.5v-.5Zm.05-7.95.5.09.01-.1-.02-.1-.49.1Zm1.95-6.95a2.5 2.5 0 0 0-2.5 2.5h1c0-.83.67-1.5 1.5-1.5v-1Zm2.54 0H14.8v1h2.54v-1Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v1c.82 0 1.5.67 1.5 1.5h1Zm0 2v-2h-1v2h1Zm3.58-.5h-4.08v1h4.08v-1Zm-.5-1.5v2h1v-2h-1Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h1c0-.83.67-1.5 1.5-1.5v-1Zm2.54 0h-2.54v1h2.54v-1Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v1c.83 0 1.5.67 1.5 1.5h1Zm0 2v-2h-1v2h1Zm3.58-.5h-4.08v1h4.08v-1Zm-.5-1.5v2h1v-2h-1Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h1c0-.83.67-1.5 1.5-1.5v-1Zm2.54 0h-2.54v1h2.54v-1Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v1c.83 0 1.5.67 1.5 1.5h1Zm0 2v-2h-1v2h1Zm3.58-.5h-4.08v1h4.08v-1Zm.5.5v-2h-1v2h1Zm0-2c0-.83.68-1.5 1.5-1.5v-1a2.5 2.5 0 0 0-2.5 2.5h1Zm1.5-1.5h2.54v-1h-2.54v1Zm2.54 0c.83 0 1.5.67 1.5 1.5h1a2.5 2.5 0 0 0-2.5-2.5v1Zm1.5 1.5v4h1v-4h-1Zm0 4c0 .12-.01.23-.04.34l.98.22c.04-.18.06-.37.06-.56h-1Zm1 1c0-.22-.02-.43-.06-.64l-.98.18c.03.15.04.3.04.46h1Zm0 7.4v-7.4h-1v7.4h1Zm-19.7.5h19.2v-1H32v1Zm-19.2 0H32v-1H12.8v1Zm-.5-7.9v7.4h1v-7.4h-1Zm.06-.64c-.04.2-.06.42-.06.64h1c0-.16.01-.31.04-.46l-.98-.18Zm-.06-.36c0 .2.02.38.06.56l.98-.22a1.5 1.5 0 0 1-.04-.34h-1Zm0-4v4h1v-4h-1Z"}),he.createElement("path",{fill:"#FFF0D4",d:"M13.2 50.4h37.6v6.4H13.2v-6.4Z"}),he.createElement("circle",{cx:"7.2",cy:"7.2",r:"6.4",fill:"#F8E485",stroke:"#0E101A"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M3.2 21.6c2.18 0 4 4 4 4s1.82-4 4-4M12.8 16c1.75 0 3.2 3.2 3.2 3.2s1.45-3.2 3.2-3.2"})),he.createElement("defs",null,he.createElement("clipPath",{id:"SuccessG_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"All the world's a page.",description:"Suggestions will appear here.",illustration:he.createElement(Ol,null)},successState:{title:"You deserve a break.",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M28.64 24s2.56-1.62 2.56-4.86c0-4.92-6.4-5.8-6.4-10.67 0-3.36 3.84-6.07 3.84-6.07M36.64 21.6s2.56-1.56 2.56-4.68c0-4.8-6.4-5.52-6.4-10.28C32.8 3.41 36.64.8 36.64.8"}),he.createElement("path",{fill:"#C6CBDE",d:"M32.8 64c11.05 0 20-1.43 20-3.2 0-1.77-8.95-3.2-20-3.2s-20 1.43-20 3.2c0 1.77 8.95 3.2 20 3.2Z"}),he.createElement("path",{fill:"#1995BB",fillRule:"evenodd",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M49.6 35.2h5.39c2.82 0 5.01 2.47 5.01 5.36v6.08c0 2.89-2.2 5.36-5.01 5.36H49.6v-3.5h5.39c.85 0 1.66-.78 1.66-1.86v-6.08c0-1.08-.81-1.86-1.66-1.86H49.6v-3.5Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#15C39A",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M31 60.8a19 19 0 0 1-19-19V31.2h40v10.6a19 19 0 0 1-19 19h-2Z"}),he.createElement("path",{fill:"#F7E68B",d:"M49.66 32.63c1.5-.44 2.34-.94 2.34-1.48C52 29.41 43.04 28 32 28s-20 1.4-20 3.15c0 .6 1.08 1.17 2.95 1.65 3.37-1 10-1.67 17.65-1.67 7.22 0 13.54.6 17.06 1.5Z"}),he.createElement("path",{fill:"#1F243C",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M49.6 32.71c-3.49-.9-9.75-1.51-16.9-1.51-7.58 0-14.16.68-17.5 1.69 3.49.9 9.75 1.51 16.9 1.51 7.58 0 14.16-.68 17.5-1.69Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M32 34.4c11.05 0 20-1.43 20-3.2 0-1.77-8.95-3.2-20-3.2s-20 1.43-20 3.2c0 1.77 8.95 3.2 20 3.2ZM23.2 34v7.6"}),he.createElement("path",{fill:"#FAC0D6",stroke:"#0E101A",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M25.98 48.64H20.6a.77.77 0 0 1-.77-.76V42.5c0-.42.35-.77.77-.77h5.37c.42 0 .77.35.77.77v5.37c0 .42-.35.76-.77.76Z"}))),null)}},{emptyState:{title:"So far, so good.",description:"Suggestions will appear here.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#EmptyI_a)"},he.createElement("path",{fill:"#C6CBDE",d:"M35.6 64c14.8 0 18.8-3.04 18.8-6.8s-4-6.8-18.8-6.8-26.8 3.04-26.8 6.8 12 6.8 26.8 6.8Z"}),he.createElement("ellipse",{cx:"32",cy:"26.8",fill:"#15C39A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",rx:"31.2",ry:"6"}),he.createElement("mask",{id:"EmptyI_b",width:"64",height:"14",x:"0",y:"20",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},he.createElement("ellipse",{cx:"32",cy:"26.8",fill:"#15C39A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",rx:"31.2",ry:"6"})),he.createElement("g",{mask:"url(#EmptyI_b)"},he.createElement("path",{fill:"#FFF0D4",fillRule:"evenodd",d:"M20.9 25.03a15.38 15.38 0 0 1 6.83-2.51 14.38 14.38 0 0 1 11.68 3.73s4.67-2.14 9.22-1c4.54 1.13 8.17 3.63 8.17 9.08S44.08 41.6 44.08 41.6H24.71a12.9 12.9 0 0 1-6.31 1.6c-6.19 0-11.2-4.12-11.2-9.2 0-5.08 5.01-9.2 11.2-9.2.86 0 1.7.08 2.5.23Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"m27.73 22.52.07.5-.07-.5Zm-6.83 2.51-.09.5a.5.5 0 0 0 .38-.09l-.29-.41Zm18.5 1.22-.35.34c.14.16.37.2.57.11l-.21-.45Zm9.23-1-.13.48.13-.49ZM44.08 41.6v.5a.5.5 0 0 0 .07 0l-.07-.5Zm-19.37 0v-.5a.5.5 0 0 0-.24.06l.24.44Zm2.96-19.58a15.88 15.88 0 0 0-7.05 2.6l.56.82c1.7-1.17 3.93-2.09 6.62-2.43l-.13-.99Zm11.74 4.23.36-.35-.02-.02a4.06 4.06 0 0 0-.2-.2l-.63-.53a14.96 14.96 0 0 0-11.25-3.12l.13.98a13.96 13.96 0 0 1 11.25 3.58l.36-.34Zm9.34-1.5c-2.38-.59-4.77-.32-6.55.08a18.63 18.63 0 0 0-2.98.96h-.01l.2.46.2.45h.02l.03-.02a8.13 8.13 0 0 1 .72-.28c.5-.18 1.2-.4 2.04-.6 1.7-.38 3.92-.61 6.08-.07l.25-.97Zm8.55 9.58c0-2.85-.96-4.97-2.53-6.52-1.57-1.53-3.7-2.47-6.02-3.05l-.25.97c2.23.56 4.18 1.43 5.57 2.8 1.37 1.34 2.23 3.2 2.23 5.8h1ZM44.08 41.6l.07.5h.02l.02-.01a9.58 9.58 0 0 0 .53-.09 38.05 38.05 0 0 0 5.89-1.52 16.35 16.35 0 0 0 4.51-2.32c1.25-.98 2.18-2.25 2.18-3.83h-1c0 1.15-.66 2.15-1.8 3.04-1.13.9-2.66 1.6-4.23 2.17a34.72 34.72 0 0 1-6.22 1.56h-.03l.06.5Zm-19.37.5h19.37v-1H24.71v1Zm-.24-.94a12.4 12.4 0 0 1-6.07 1.54v1c2.43 0 4.68-.61 6.56-1.66l-.5-.88ZM18.4 42.7c-6 0-10.7-3.98-10.7-8.7h-1c0 5.44 5.33 9.7 11.7 9.7v-1ZM7.7 34c0-4.72 4.7-8.7 10.7-8.7v-1c-6.37 0-11.7 4.26-11.7 9.7h1Zm10.7-8.7c.83 0 1.64.08 2.41.22l.18-.98c-.83-.16-1.7-.24-2.59-.24v1Z"}),he.createElement("ellipse",{cx:"32",cy:"26.8",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",rx:"31.2",ry:"6"})),he.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",d:"M55 1a2.4 2.4 0 0 0-3.29.88l-7.45 12.9c-1.96 3.41-6.37 4.73-9.6 6.97a7.97 7.97 0 0 0-2.37 2.57l-2 3.46a8 8 0 0 0 13.86 8l2-3.46c.61-1.06.95-2.2 1.05-3.34.32-3.91-.75-8.39 1.22-11.8l7.45-12.9A2.4 2.4 0 0 0 55 1Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"m32.3 24.32-.44-.25.43.25Zm-2 3.46.43.25-.44-.25Zm13.85 8-.43-.25.43.25Zm2-3.46.43.25-.43-.25Zm6-30.19a1.9 1.9 0 0 1 2.6-.7l.5-.86a2.9 2.9 0 0 0-3.97 1.06l.87.5Zm-7.45 12.9 7.45-12.9-.87-.5-7.45 12.9.87.5Zm-11.97 9.54c.57-1 1.33-1.8 2.21-2.41l-.57-.82c-1 .69-1.86 1.6-2.51 2.73l.87.5Zm-2 3.46 2-3.46-.87-.5-2 3.46.87.5Zm2.74 10.25a7.5 7.5 0 0 1-2.74-10.25l-.87-.5a8.5 8.5 0 0 0 3.11 11.61l.5-.86Zm10.25-2.75a7.5 7.5 0 0 1-10.25 2.75l-.5.86a8.5 8.5 0 0 0 11.61-3.1l-.86-.5Zm2-3.46-2 3.46.86.5 2-3.46-.86-.5Zm.98-3.13a7.47 7.47 0 0 1-.98 3.13l.86.5a8.47 8.47 0 0 0 1.11-3.54l-1-.09Zm8.74-24.9-7.45 12.9.86.5 7.45-12.9-.86-.5Zm-.7-2.6a1.9 1.9 0 0 1 .7 2.6l.86.5A2.9 2.9 0 0 0 55.24.56l-.5.87ZM47.7 29.03c.09-1.01.08-2.05.06-3.07-.03-1.04-.07-2.06-.06-3.06.02-2.01.25-3.88 1.16-5.46l-.86-.5c-1.05 1.81-1.28 3.9-1.3 5.95 0 1.03.03 2.08.06 3.09.02 1.02.03 2.01-.05 2.96l1 .09Zm-3.86-14.5c-.92 1.6-2.42 2.72-4.15 3.74-.87.51-1.77.99-2.67 1.48-.9.5-1.8 1-2.64 1.59l.57.82c.79-.55 1.65-1.04 2.55-1.53.88-.48 1.81-.97 2.7-1.5 1.77-1.04 3.46-2.28 4.5-4.1l-.86-.5Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",d:"m32.89 31.17 1.96-3.84a8.6 8.6 0 0 1 5.93-4.51"}),he.createElement("path",{fill:"#FFF0D4",d:"M49.6 28.8H27.2v10h22.4v-10Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M27.2 28.8h22.4"}),he.createElement("path",{fill:"#87E8D1",fillRule:"evenodd",d:"M.83 27.07H.8V28a31.2 31.2 0 0 0 62.4 0v-.93h-.03c-.73 3.19-14.4 5.73-31.17 5.73-16.76 0-30.44-2.54-31.17-5.73Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"M.8 27.07v-.5a.5.5 0 0 0-.5.5h.5Zm.03 0 .49-.11a.5.5 0 0 0-.49-.4v.5Zm62.37 0h.5a.5.5 0 0 0-.5-.5v.5Zm-.03 0v-.5a.5.5 0 0 0-.49.39l.49.1Zm-62.37.5h.03v-1H.8v1Zm.5.43v-.93h-1V28h1ZM32 58.7A30.7 30.7 0 0 1 1.3 28h-1A31.7 31.7 0 0 0 32 59.7v-1ZM62.7 28A30.7 30.7 0 0 1 32 58.7v1A31.7 31.7 0 0 0 63.7 28h-1Zm0-.93V28h1v-.93h-1Zm.47.5h.03v-1h-.03v1Zm-.49-.61c-.05.24-.25.54-.68.88-.43.33-1.04.67-1.85 1-1.6.68-3.86 1.28-6.65 1.8-5.56 1.03-13.14 1.66-21.5 1.66v1c8.4 0 16.04-.64 21.69-1.68a35.17 35.17 0 0 0 6.85-1.85 9.01 9.01 0 0 0 2.08-1.15c.52-.4.9-.88 1.04-1.44l-.98-.22ZM32 32.3c-8.36 0-15.94-.63-21.5-1.66a34.23 34.23 0 0 1-6.65-1.8 8.05 8.05 0 0 1-1.85-1c-.43-.34-.63-.64-.68-.88l-.98.22c.13.56.52 1.04 1.04 1.44.53.42 1.23.8 2.08 1.15 1.7.7 4.04 1.33 6.85 1.85C15.96 32.66 23.6 33.3 32 33.3v-1Z"}),he.createElement("g",{opacity:".15",style:{mixBlendMode:"multiply"}},he.createElement("path",{fill:"#0E101A",d:"M32 43.6h17.93c.52 8.29 4.76 12.75 10.47 19.2H43.2C36.34 59.6 32 53.6 32 43.6Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M32 43.6h17.93c.52 8.29 4.76 12.75 10.47 19.2H43.2C36.34 59.6 32 53.6 32 43.6Z"})),he.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M35.2 41.6h18.73a34.2 34.2 0 0 0 8.98 21.6H44.56c-5.36-3.65-8.84-13.31-9.36-21.6Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",d:"M50.5 47.2h-9.7M52.1 52h-9.7M54.5 56.8h-9.7"})),he.createElement("defs",null,he.createElement("clipPath",{id:"EmptyI_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Nice work! Have a cookie.",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#SuccessI_a)"},he.createElement("path",{fill:"#C6CBDE",d:"M22.4 60c8.84 0 16-2.69 16-6s-7.16-6-16-6-16 2.69-16 6 7.16 6 16 6Z"}),he.createElement("path",{fill:"#C6CBDE",d:"M41.6 64c11.05 0 20-2.5 20-5.6 0-3.1-8.95-5.6-20-5.6s-20 2.5-20 5.6c0 3.1 8.95 5.6 20 5.6Z"}),he.createElement("path",{fill:"#DDEFF5",fillRule:"evenodd",d:"M36.8 6.75H.8l5.27 46.61c0 1.46 5.7 2.64 12.73 2.64s12.73-1.18 12.73-2.63L36.8 6.75Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#000",d:"M.8 6.75v-.5a.5.5 0 0 0-.5.56l.5-.06Zm36 0 .5.06a.5.5 0 0 0-.5-.56v.5ZM6.07 53.36h.5a.5.5 0 0 0 0-.05l-.5.05Zm25.46 0-.01-.5a.5.5 0 0 0-.49.5h.5Zm0 0 .02.5a.5.5 0 0 0 .48-.44l-.5-.05ZM.8 7.27h36v-1H.8v1ZM6.57 53.3 1.3 6.7l-1 .1 5.27 46.62 1-.11Zm0 .06h-1 1ZM18.8 55.5c-3.5 0-6.64-.3-8.9-.76a11.6 11.6 0 0 1-2.61-.8c-.3-.14-.5-.28-.6-.4-.12-.1-.12-.17-.12-.17h-1c0 .35.18.65.4.88.23.23.53.42.88.59.7.34 1.68.64 2.85.88 2.34.48 5.56.78 9.1.78v-1Zm12.23-2.13s0 .06-.11.18c-.12.11-.31.25-.6.4-.6.28-1.48.55-2.62.79-2.26.47-5.4.76-8.9.76v1c3.54 0 6.76-.3 9.1-.78 1.17-.24 2.15-.54 2.85-.88.35-.17.65-.36.88-.6.22-.22.4-.52.4-.87h-1Zm.49-.5.03 1-.03-1ZM36.3 6.7 31.03 53.3l1 .11L37.3 6.81l-1-.11Z"}),he.createElement("ellipse",{cx:"18.8",cy:"6.39",fill:"#DDEFF5",stroke:"#000",strokeLinejoin:"round",rx:"18",ry:"3.95"}),he.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M35.2 20.83H2.4l3.67 32.53c0 1.46 5.7 2.64 12.73 2.64s12.73-1.18 12.73-2.63l3.67-32.54Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#000",d:"M2.4 20.83v-.5a.5.5 0 0 0-.5.56l.5-.06Zm32.8 0 .5.06a.5.5 0 0 0-.5-.56v.5ZM6.07 53.36h.5a.5.5 0 0 0 0-.05l-.5.05Zm25.46 0-.03-.5a.5.5 0 0 0-.47.5h.5Zm0 0 .04.5a.5.5 0 0 0 .46-.44l-.5-.05ZM2.4 21.34h32.8v-1H2.4v1ZM6.56 53.3 2.9 20.77l-1 .12 3.67 32.53 1-.11Zm0 .06-1-.01h1ZM18.8 55.5c-3.5 0-6.64-.3-8.9-.76a11.6 11.6 0 0 1-2.61-.8c-.3-.14-.5-.28-.6-.4-.12-.11-.12-.17-.12-.17h-1c0 .35.18.65.4.88.23.23.53.42.88.59.7.34 1.68.64 2.85.88 2.34.48 5.56.78 9.1.78v-1Zm12.23-2.13s0 .06-.11.18c-.12.11-.31.25-.6.4-.6.28-1.48.55-2.62.79-2.26.47-5.4.76-8.9.76v1c3.54 0 6.76-.3 9.1-.78 1.17-.24 2.15-.54 2.85-.88.35-.17.65-.37.88-.6.22-.22.4-.52.4-.87h-1Zm.47-.5.07 1-.07-1Zm3.2-32.1-3.67 32.54 1 .11L35.7 20.9l-1-.12Z"}),he.createElement("ellipse",{cx:"18.8",cy:"20.8",fill:"#fff",stroke:"#000",strokeLinejoin:"round",rx:"16.4",ry:"3.2"}),he.createElement("path",{fill:"#FFF0D4",stroke:"#000",d:"M59.66 53.9c-.15 4.95-9.28 6.9-20.4 6.56-11.1-.33-20-2.8-19.85-7.75.15-4.94 9.28-8.67 20.39-8.34 11.11.33 20 4.6 19.86 9.54Z"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"22.77",y:"51.3",fill:"#4A6EE0",rx:"1.23",transform:"rotate(-4 22.77 51.3)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"32.42",y:"51.83",fill:"#F18AB2",rx:"1.23",transform:"rotate(41 32.42 51.83)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"43.02",y:"50.37",fill:"#8780E4",rx:"1.23",transform:"rotate(120 43.02 50.37)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"30.1",y:"47.89",fill:"#15C39A",rx:"1.23",transform:"rotate(4 30.1 47.89)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"49.73",y:"51.29",fill:"#F18AB2",rx:"1.23",transform:"rotate(29 49.73 51.3)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"42.44",y:"56.4",fill:"#15C39A",rx:"1.23",transform:"rotate(-19 42.44 56.4)"}),he.createElement("path",{fill:"#7D6455",fillRule:"evenodd",d:"M21.92 48.56c3.48-2.71 10.2-4.42 17.88-4.2 10 .3 18.2 3.8 19.64 8.1-8.37 4.82-33.76 2.81-37.52-3.9Z",clipRule:"evenodd",opacity:".3",style:{mixBlendMode:"multiply"}}),he.createElement("path",{fill:"#FFF0D4",stroke:"#000",d:"M62.13 49.5c-1.4 4.73-10.77 5.36-21.43 2.2-10.66-3.17-18.57-8.93-17.16-13.67 1.4-4.74 11.46-6.87 22.12-3.7S63.54 44.76 62.13 49.5Z"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"27.2",y:"36.55",fill:"#15C39A",rx:"1.23",transform:"rotate(-13 27.2 36.55)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"33.87",y:"39.22",fill:"#EE6C9F",rx:"1.23",transform:"rotate(62 33.87 39.22)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"38.18",y:"34.85",fill:"#4A6EE0",rx:"1.23",transform:"rotate(5 38.18 34.85)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"41.76",y:"45.57",fill:"#4A6EE0",rx:"1.23",transform:"rotate(5 41.76 45.57)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"39.05",y:"39.32",fill:"#8780E4",rx:"1.23",transform:"rotate(26 39.05 39.32)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"49.66",y:"43.71",fill:"#EE6C9F",rx:"1.23",transform:"rotate(-10 49.66 43.71)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"47.8",y:"36.64",fill:"#15C39A",rx:"1.23",transform:"rotate(47 47.8 36.64)"}),he.createElement("rect",{width:"5.86",height:"2.45",x:"53.16",y:"48.35",fill:"#4A6EE0",rx:"1.23",transform:"rotate(-28 53.16 48.35)"})),he.createElement("defs",null,he.createElement("clipPath",{id:"SuccessI_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)}},{emptyState:{title:"Let's get to work.",description:"Suggestions will appear here.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("g",{clipPath:"url(#EmptyJ_a)"},he.createElement("ellipse",{cx:"32",cy:"57.6",fill:"#C6CBDE",rx:"32",ry:"5.6"}),he.createElement("path",{fill:"#F28C8C",fillRule:"evenodd",stroke:"#0E101A",strokeLinejoin:"round",d:"M26.4 5.6A2.4 2.4 0 0 0 24 8v8.8a2.4 2.4 0 0 0 2.4 2.4h12.8a2.4 2.4 0 0 0 2.4-2.4V8a2.4 2.4 0 0 0-2.4-2.4H26.4ZM19.2 8A7.2 7.2 0 0 1 26.4.8h12.8A7.2 7.2 0 0 1 46.4 8v8.8a7.2 7.2 0 0 1-7.2 7.2H26.4a7.2 7.2 0 0 1-7.2-7.2V8Z",clipRule:"evenodd"}),he.createElement("rect",{width:"62.4",height:"46.4",x:".8",y:"11.2",fill:"#41D9B5",stroke:"#000",strokeLinejoin:"round",rx:"10"}),he.createElement("path",{stroke:"#000",strokeLinejoin:"round",d:"M15.2 21.2v7.2a10 10 0 0 0 10 10h28a10 10 0 0 0 10-10v-7.2"}),he.createElement("rect",{width:"14.4",height:"46.4",x:".8",y:"11.2",fill:"#11A683",stroke:"#000",strokeLinejoin:"round",rx:"7.2"}),he.createElement("path",{fill:"#F9EA9E",stroke:"#0E101A",d:"M23.2 32.4c0-1.1.9-2 2-2h5.6a2 2 0 0 1 2 2v10a4.8 4.8 0 0 1-9.6 0v-10Z"}),he.createElement("circle",{cx:"28",cy:"42.4",r:"2.4",fill:"#4D536E",stroke:"#0E101A"}),he.createElement("path",{fill:"#F9EA9E",stroke:"#0E101A",d:"M46.4 32.4c0-1.1.9-2 2-2H54a2 2 0 0 1 2 2v10a4.8 4.8 0 1 1-9.6 0v-10Z"}),he.createElement("circle",{cx:"51.2",cy:"42.4",r:"2.4",fill:"#4D536E",stroke:"#0E101A"})),he.createElement("defs",null,he.createElement("clipPath",{id:"EmptyJ_a"},he.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))),null)},successState:{title:"Great job!",description:"There are no more suggestions.",illustration:he.createElement((()=>he.createElement("svg",{fill:"none",viewBox:"0 0 64 64",role:"img","aria-hidden":!0,focusable:!1},he.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M15.32 25.44c-1.2-2.02-3.23-.8-2.74.98-1.07-1.63-.47-2.98-1.04-4.04-.66-1.26-2.4-.82-2.33.65-.47-1.33.12-2.9-.09-3.74-.33-1.45-2.05-1.14-1.93.21a14.38 14.38 0 0 1-2.07-7.45c0-3.7 1.62-6.76 3.88-6.76 1.86 0 2.82 1.82 2.18 3.39-.3-.83-.83-1.27-1.69-1.27-1 0-1.63.98-1.63 2.2 0 1.75 1.45 2.75 3.23 2.77 2.05 0 3.4-2 3.4-4.32 0-3.09-2.28-6.14-5.91-5.65 1-.8-.16-2.26-1.39-1.28C4.26 3.43 2.4 7.36 2.4 11.82c0 11.26 10.86 23.53 21.75 20.76l-1.87-3.25c-3.15 0-5.33-1.14-6.96-3.9ZM56.94 1.13c-1.23-.98-2.39.47-1.39 1.28-3.63-.5-5.91 2.54-5.91 5.63 0 2.32 1.33 4.32 3.4 4.32 1.76 0 3.23-1 3.23-2.75 0-1.22-.63-2.2-1.63-2.2-.86 0-1.39.44-1.69 1.27-.65-1.57.32-3.37 2.18-3.37 2.26 0 3.88 3.05 3.88 6.75 0 2.65-.74 5.23-2.06 7.48.1-1.35-1.6-1.67-1.93-.21-.19.84.39 2.4-.08 3.74.07-1.48-1.69-1.92-2.34-.65-.56 1.05.02 2.4-1.03 4.03.49-1.75-1.53-2.98-2.74-.98-1.65 2.74-3.81 3.9-6.97 3.88L40 32.6c10.88 2.77 21.76-9.48 21.76-20.75-.05-4.46-1.9-8.39-4.82-10.72Z"}),he.createElement("path",{fill:"#C6CBDE",d:"M32 63.2c12.81 0 23.2-1.61 23.2-3.6S44.81 56 32 56c-12.81 0-23.2 1.61-23.2 3.6s10.39 3.6 23.2 3.6Z"}),he.createElement("path",{fill:"#F6DF6C",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M47.2 55.2H16.8a2.4 2.4 0 1 0 0 4.8h30.4a2.4 2.4 0 0 0 0-4.8Z"}),he.createElement("path",{fill:"#F6DF6C",fillRule:"evenodd",d:"M32 4.64H14.77c-1.64 14.28 2.98 25.28 9.5 30.84.37.33.77.64 1.16.96 1.9 1.5 3.8 3.03 3.77 5.4-.05 3.19-.51 4.8-.51 4.8-.82 3.1-3.62 4.07-6.1 4.93-2.28.78-4.3 1.48-4.3 3.63H45.7c0-2.15-2.01-2.85-4.28-3.63-2.5-.86-5.3-1.83-6.1-4.93 0 0-.47-1.61-.52-4.8-.04-2.37 1.87-3.9 3.77-5.4.4-.32.8-.63 1.17-.96 6.51-5.56 11.13-16.56 9.49-30.84H32Z",clipRule:"evenodd"}),he.createElement("path",{fill:"#0E101A",d:"M14.77 4.64v-.5a.5.5 0 0 0-.5.44l.5.06Zm9.5 30.84.32-.38-.33.38Zm1.16.96.32-.4-.32.4Zm3.77 5.4h.5-.5Zm-.51 4.8-.48-.13.48.13Zm-6.1 4.93-.17-.48.16.48Zm-4.3 3.63h-.5c0 .28.23.5.5.5v-.5Zm27.41 0v.5a.5.5 0 0 0 .5-.5h-.5Zm-4.28-3.63.16-.48-.16.48Zm-6.1-4.93.48-.12v-.01l-.49.13Zm-.52-4.8h-.5.5Zm3.77-5.4.3.4-.3-.4Zm1.17-.96.32.38-.32-.38Zm9.49-30.84.5-.06a.5.5 0 0 0-.5-.44v.5Zm-34.46.5H32v-1H14.77v1ZM24.6 35.1c-6.36-5.43-10.95-16.25-9.32-30.4l-1-.12c-1.65 14.41 3 25.59 9.67 31.28l.65-.76Zm1.16.95c-.4-.32-.8-.63-1.16-.95l-.65.76c.38.33.79.66 1.18.97l.63-.78Zm3.95 5.8a5.03 5.03 0 0 0-1.27-3.35c-.75-.91-1.75-1.7-2.68-2.45l-.63.78c.96.76 1.87 1.49 2.54 2.3.65.8 1.06 1.67 1.04 2.7l1 .01Zm-1.01 4.8.48.13v-.03a5.33 5.33 0 0 0 .08-.3l.17-.94c.12-.82.25-2.05.28-3.67l-1-.01a26.8 26.8 0 0 1-.43 4.4 7.18 7.18 0 0 1-.06.27l.48.14Zm-5.94 5.39c2.44-.84 5.53-1.87 6.42-5.27l-.97-.25c-.73 2.8-3.24 3.7-5.78 4.57l.33.95ZM18.8 55.2c0-.88.39-1.45 1.07-1.92.72-.5 1.72-.84 2.88-1.24l-.33-.95c-1.12.39-2.26.78-3.12 1.37-.89.61-1.5 1.46-1.5 2.74h1Zm13.2-.5H18.3v1H32v-1Zm0 1h13.7v-1H32v1Zm14.2-.5c0-1.28-.61-2.13-1.5-2.74-.86-.59-2-.98-3.12-1.37l-.33.95c1.16.4 2.16.75 2.88 1.24.68.47 1.07 1.04 1.07 1.92h1Zm-4.62-4.1c-2.54-.88-5.05-1.78-5.78-4.58l-.97.25c.9 3.4 3.98 4.43 6.42 5.27l.33-.95Zm-6.27-4.46.48-.13v-.01a5.92 5.92 0 0 1-.06-.26c-.04-.2-.1-.49-.16-.88a26.8 26.8 0 0 1-.27-3.53l-1 .01a27.78 27.78 0 0 0 .45 4.6 8.12 8.12 0 0 0 .07.31l.01.02v.01l.48-.14Zm-.01-4.81a4.04 4.04 0 0 1 1.04-2.7c.67-.81 1.58-1.54 2.54-2.3l-.63-.78c-.93.74-1.93 1.54-2.68 2.45-.76.92-1.3 2-1.27 3.34l1-.01Zm3.58-5c.4-.31.8-.64 1.18-.97l-.65-.76c-.37.32-.76.63-1.16.95l.63.78Zm1.18-.97c6.67-5.7 11.32-16.87 9.66-31.28l-.99.12c1.63 14.15-2.96 24.97-9.32 30.4l.65.76Zm9.17-31.72H32v1h17.23v-1Z"}),he.createElement("path",{stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M30.8 40h2.4"}),he.createElement("path",{fill:"#FBEFB7",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M49.18 4.8H14.8c-.2 1.52-.33 3.25-.39 4.62.63.45 1.46.79 2.43.94 1.71.27 3.36-.15 4.3-.99.49 1.06 1.72 1.86 3.25 1.96 1.42.08 2.7-.44 3.43-1.29.6 1.14 2.23 1.96 4.2 1.96 1.95 0 3.6-.82 4.2-1.96.74.85 2.01 1.4 3.43 1.29 1.53-.1 2.79-.9 3.25-1.96.94.84 2.57 1.26 4.28.99a5.78 5.78 0 0 0 2.43-.94 79.1 79.1 0 0 0-.42-4.62Z"}),he.createElement("path",{fill:"#0E101A",stroke:"#0E101A",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",d:"M32 4.8H15.2C18.85 6.74 25.01 8 32 8s13.15-1.26 16.8-3.2H32Z"}),he.createElement("path",{fill:"#fff",stroke:"#0E101A",strokeMiterlimit:"10",d:"M8.96 52c-.1 0-.16-.08-.16-.19.15-5.94-1.89-8.1-7.83-8.26-.1 0-.17-.08-.17-.19 0-.1.08-.16.19-.16 5.94.15 8.1-1.89 8.26-7.83 0-.1.08-.17.19-.17.1 0 .16.08.16.19-.15 5.94 1.89 8.1 7.83 8.24.1 0 .17.09.17.19s-.08.17-.19.17c-5.94-.15-8.1 1.88-8.26 7.82-.02.12-.08.19-.19.19ZM56.25 54.4c-.06 0-.1-.05-.1-.11.1-3.68-1.17-5.02-4.85-5.12-.06 0-.1-.05-.1-.12 0-.06.05-.1.11-.1 3.68.1 5.02-1.17 5.12-4.85 0-.06.05-.1.12-.1.06 0 .1.05.1.11-.1 3.68 1.17 5.02 4.85 5.11.06 0 .1.05.1.12 0 .06-.05.1-.11.1-3.68-.1-5.02 1.17-5.12 4.85-.01.07-.05.11-.12.11ZM39.84 26.4c-.06 0-.1-.06-.1-.12.1-3.96-1.27-5.4-5.23-5.51-.07 0-.11-.06-.11-.13 0-.06.06-.1.12-.1 3.96.1 5.4-1.27 5.51-5.23 0-.07.06-.11.13-.11.06 0 .1.06.1.12-.1 3.96 1.27 5.4 5.23 5.5.07 0 .11.06.11.13 0 .06-.06.1-.12.1-3.96-.1-5.4 1.27-5.51 5.23-.01.08-.06.12-.13.12Z"}))),null)}}];function nh(e=Math.random){return Math.floor(e()*th.length)}const ih=r.UI.Node.make((({view:e})=>he.createElement(Ni,{style:oh,"data-name":"short-form-feed-empty","aria-live":"polite"},e("emptyContentIndex").pipe(C.U((e=>{const t=th[e].emptyState;return he.createElement(he.Fragment,null,he.createElement("div",{className:sh},he.createElement("p",{className:ah},t.title),he.createElement("p",{className:lh},t.description)),he.createElement("div",{className:ch},t.illustration))})))))),rh=r.UI.Node.make((({view:e})=>he.createElement(Ni,{style:oh,"data-name":"short-form-feed-success","aria-live":"polite"},e("emptyContentIndex").pipe(C.U((e=>{const t=th[e].successState;return he.createElement(he.Fragment,null,he.createElement("div",{className:sh},he.createElement("p",{className:ah},t.title),he.createElement("p",{className:lh},t.description)),he.createElement("div",{className:ch},t.illustration))})))))),oh={padding:`${_e.ux.rem(Ee.mh)}`,display:"flex",flexDirection:"row",justifyContent:"space-between"},sh=_e.ux.style({display:"flex",flexDirection:"column",marginRight:_e.ux.rem(2),justifyContent:"center"}),ah=_e.ux.style({margin:0,color:Ae.Z.TextBaseDefault,fontSize:_e.ux.rem(1),lineHeight:_e.ux.rem(1.5),fontWeight:700}),lh=_e.ux.style({margin:0,color:Ae.Z.TextBaseSubduedColor,fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.3125),fontWeight:400}),ch=_e.ux.style({width:_e.ux.rem(4),height:_e.ux.rem(4),minWidth:_e.ux.rem(4),minHeight:_e.ux.rem(4)}),uh=r.UI.Node.make((()=>he.createElement(Ni,{"aria-busy":"true",style:dh,"data-name":"short-form-feed-loading"},he.createElement(Hl,null),he.createElement("div",{className:mh},he.createElement("div",{className:ph}),he.createElement("div",{className:hh})),he.createElement("div",{className:gh},he.createElement("div",{className:fh}),he.createElement("div",{className:vh})),he.createElement("div",{className:xh(!0)}),he.createElement("div",{className:xh(!1)}),he.createElement("div",{className:bh},he.createElement("div",{className:yh}),he.createElement("div",{className:kh}))))),dh={padding:`${_e.ux.rem(Ee.mh)}`,display:"flex",flexDirection:"column",position:"relative"},mh=_e.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:_e.ux.rem(Ee.x),alignItems:"center"}),ph=_e.ux.style({width:_e.ux.rem(11.875),height:_e.ux.rem(1),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),hh=_e.ux.style({flex:1,maxWidth:_e.ux.rem(3.5),height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),gh=_e.ux.style({display:"flex",flexDirection:"row",gap:_e.ux.rem(Ee.F2),alignItems:"center",marginTop:_e.ux.rem(6.5*Ee.F2)}),fh=_e.ux.style({width:_e.ux.rem(1.25),height:_e.ux.rem(1.25),borderRadius:"50%",background:Se.BlueGray5}),vh=_e.ux.style({flex:1,height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),xh=e=>_e.ux.style({height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5,marginTop:_e.ux.rem(e?2.5*Ee.F2:Ee.mh)}),bh=_e.ux.style({display:"flex",flexDirection:"row",gap:_e.ux.rem(Ee.mh),alignItems:"center",marginTop:_e.ux.rem(Ee.mh+Ee.yC)}),yh=_e.ux.style({width:_e.ux.rem(4.125),height:_e.ux.rem(2),borderRadius:_e.ux.rem(li.xB),background:Se.BlueGray5}),kh=_e.ux.style({width:_e.ux.rem(3.125),height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.fe),background:Se.BlueGray5}),wh=(0,fe.xb)(Gm),Ch=r.UI.Node.make((({state:e,view:t,notify:n})=>{const{onMount:r}=(0,Ai.F)((0,s.ls)(F.b(n({kind:"shortFormFeedMount"})),Ii.x(mn.notifyFeedUnmount))),{onMount:o}=function(e,t){const{onMount:n,ref:i}=_i.P.useElWatcher();return _i.P.useSubscriptionTo(G.aj([i,t]).pipe(C.U((([t,n])=>(0,s.zG)(t,ue.bw((t=>t.style.setProperty(e,n)))))))),{onMount:n}}("--cardWidth",U.of("400")),a=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{"data-name":"short-form-feed",style:a.view((0,z.RN)({padding:`${_e.ux.rem(Ee.x)} 0 0 0`},{padding:`${_e.ux.rem(Ee.qp)} 0 0 0`})),mount:e=>{r(e),o(e)},"aria-live":"polite"},he.createElement(to,{style:a.view((0,z.RN)(Object.assign(Object.assign({},Eh),{padding:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.mh)}`}),Object.assign(Object.assign({},Eh),{padding:`0 ${_e.ux.rem(Ee.qp)}`})))},he.createElement("div",{className:Sh},"Review suggestions",he.createElement(wh,{count:t("suggestionCount")})),t("canExpandToLongForm").pipe(C.U((0,z.RN)(he.createElement($m,{feedForm:"shortForm",onClick:n({kind:"toggleLongFormFeed"})}),null)))),e.pipe(C.U((({item:e,prevItem:t,transitions:r})=>he.createElement(fa.P,{key:e.id,sduiRootId:e.id,content:e.content,designSystem:ul(),notify:(t,i,r)=>n({kind:"sduiNotify",item:e,sourceId:t,actions:i,actionScope:r})(),transitions:Array.from(r),prevContent:(0,s.zG)(t,i.map((e=>e.content))),onAnimationEnd:n({kind:"shortFormFeedAnimationEnd"}),onMount:n({kind:"sduiFocusedItemMount",item:e}),longFormCardState:{viewKind:"focused"}})))))})),Eh={display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x),justifyContent:"space-between"},Sh=_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x)}),_h=r.UI.Union.make("kind",{loadingState:uh,emptyState:ih,successState:rh,nonEmptyState:Ch}),Ih=r.UI.Group.make({feed:_h}),Ah=r.UI.Group.make({feed:eh}),Bh=r.UI.Union.make("kind",{none:r.UI.Node.empty,shortFormFeed:Ih,longFormFeed:Ah}),Oh=e=>he.createElement(ye.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),he.createElement("path",{d:"M12 7L12 17",strokeLinecap:"round"}),he.createElement("path",{d:"M9 9L9 15",strokeLinecap:"round"}),he.createElement("path",{d:"M15 9L15 15",strokeLinecap:"round"}),he.createElement("path",{d:"M18 11L18 13",strokeLinecap:"round"}),he.createElement("path",{d:"M6 11L6 13",strokeLinecap:"round"})),Rh=r.UI.Node.make((({notify:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:Nh,"data-name":"voice-banner"},t.view((0,z.RN)(he.createElement(to,null,"Set your voice"),he.createElement("div",{className:Mh},"Set your voice"))),he.createElement("div",{className:Uh},"Choose how you want your generated text to sound."),he.createElement(xe.z,{style:zh,onClick:e({kind:A.i.Kind.setVoiceButtonClick}),name:"bannerVoiceProfile",size:"small"},he.createElement(Oh,{className:Fh}),"Set voice"))})),Th=r.UI.Union.asOption(Rh),Nh={gap:0,backgroundColor:"#D8F2EC",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"right",backgroundImage:"url('https://d201kpdrh73vuz.cloudfront.net/text-generation/voice-banner.png')"},Mh=_e.ux.style({fontWeight:700,fontSize:_e.ux.rem(.875),lineHeight:_e.ux.rem(1.375),color:be.Il.Text.Base.Default}),Uh=_e.ux.style({fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),color:be.Il.Text.Base.Subdued}),Fh=_e.ux.style({stroke:"white"}),zh={default:{alignSelf:"flex-start",marginTop:_e.ux.rem(Ee.x),padding:`0 ${_e.ux.rem(Ee.x)} 0 ${_e.ux.rem(Ee.F2)}`,lineHeight:_e.ux.rem(1.125),gap:_e.ux.rem(Ee.F2)},icon:Object.assign({marginLeft:0},(0,Ie.fx)(1.5))},jh=({style:e,iconStyle:t,mode:n="standard"})=>{const i="standard"==n?1:.875;return he.createElement("div",{className:_e.ux.style({height:_e.ux.rem(2*i),display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x),padding:`0 ${_e.ux.rem(Ee.x)} 0 ${_e.ux.rem(Ee.F2)}`,borderRadius:_e.ux.rem(Ee.F2),border:`1px solid ${Se.BlueGray5}`,boxSizing:"border-box"},e)},he.createElement("div",{className:_e.ux.style({width:_e.ux.rem(1.5*i),height:_e.ux.rem(1.5*i),borderRadius:"50%",background:Se.BlueGray5},t)}),he.createElement("div",{className:_e.ux.style({height:_e.ux.rem(.5*i),borderRadius:_e.ux.rem(Ee.W9),background:Se.BlueGray5,flexGrow:1})}))},Ph=r.UI.Node.make((({view:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{"aria-busy":"true",style:t.view(Gh),"data-name":"actions-loading"},G.aj([e("withContext"),t]).pipe(C.U((([t,n])=>t?he.createElement(fo,{className:Dh(n),active:!0},e("header")):he.createElement(to,null,e("header"))))),he.createElement(ve.F.div,{className:Lh},he.createElement(Hl,null),e("isQuickReply").pipe(C.U((0,z.RN)(he.createElement(he.Fragment,null,he.createElement(jh,{style:{width:_e.ux.rem(23)}}),he.createElement(jh,{style:{width:_e.ux.rem(21.5)}}),he.createElement(jh,{style:{width:_e.ux.rem(20.5)}})),he.createElement(he.Fragment,null,he.createElement(jh,{style:{width:_e.ux.rem(8.375)}}),he.createElement(jh,{style:{width:_e.ux.rem(9.3125)}}),he.createElement(jh,{style:{width:_e.ux.rem(10.5)}}),he.createElement(jh,{style:{width:_e.ux.rem(10.75)}}),he.createElement(jh,{style:{width:_e.ux.rem(4.9375)}})))))))})),Gh=e=>e?{padding:_e.ux.rem(Ee.mh)}:{},Lh=_e.ux.style({display:"flex",flexWrap:"wrap",gap:_e.ux.rem(Ee.x),position:"relative"}),Dh=e=>_e.ux.style({marginBottom:e?_e.ux.rem(Ee.x):void 0}),Zh=r.UI.Knot.make(r.UI.Grid.make((({slots:e,notify:t,view:n})=>{const{notifyUnmount:i}=he.useContext(_r),{onMount:r}=(0,Ai.F)((0,s.ls)(F.b((e=>t({kind:A.i.Kind.mount,name:Z.e.initialActionsList,element:e})())),Ii.x((()=>i({kind:A.i.Kind.unmount,name:Z.e.initialActionsList}))))),o=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:o.view(Vh),mount:r,"data-name":"initial-actions"},n("showReportMenu").pipe(C.U((0,z.RN)(he.createElement(bm,{reportMenuButtonClassName:$h,onClickProvideFeedback:t({kind:A.i.Kind.openFeedbackFormButtonClick,source:cs.x.Source.quickReplyInitialActions}),onClickReportOffensive:t({kind:A.i.Kind.reportOffensiveActionsButtonClick}),onOpenChange:e=>t({kind:A.i.Kind.reportMenuVisibilityChange,trigger:Dn.uiItem(Z.e.initialActionsList),visible:e})()}),null))),e.actions)})),{actions:So}),Hh=r.UI.Union.make("kind",{none:r.UI.Node.empty,loading:Ph,loaded:Zh}),Vh=e=>Object.assign({position:"relative"},e?{padding:_e.ux.rem(Ee.mh),gap:_e.ux.rem(Ee.mh)}:{padding:`${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.qp)}`}),$h=_e.ux.style({position:"absolute",top:_e.ux.rem(Ee.qp),right:_e.ux.rem(Ee.qp)}),Kh=r.UI.Grid.make((({slots:e})=>he.createElement(he.Fragment,null,e.suggestions,e.voiceBanner,e.documentOverview,e.intent,e.defaultActions,e.generationError,e.detectedReferences))),Wh=r.UI.Knot.make(Kh,{suggestions:Bh,voiceBanner:Th,documentOverview:am,intent:Sm,defaultActions:Hh,generationError:em,detectedReferences:Mm}),qh=r.UI.Node.make((({state:e,notify:t})=>{const n=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.Fragment,null,G.aj([e,n]).pipe(C.U((([{selectedRange:e,selectedText:n},i])=>e?he.createElement(xe.z,{variant:"tertiary",title:"Select any text to work with it in Grammarly.",style:Yh(i),onClick:t({kind:A.i.Kind.selectionContextInteraction,range:e,visibility:"attention"}),onMouseEnter:t({kind:A.i.Kind.selectionContextInteraction,range:e,visibility:"visible"}),onMouseLeave:t({kind:A.i.Kind.selectionContextInteraction,range:e,visibility:"hidden"}),name:"resultContextHeaderButton"},he.createElement(fo,null,n)):he.createElement("div",{className:Xh(i),"data-name":"result-context-header"},he.createElement(fo,null,n))))))})),Qh=r.UI.Union.asOption(qh),Yh=e=>e?{default:{justifyContent:"flex-start",padding:`0 ${_e.ux.rem(Ee.x)}`,margin:`0 ${_e.ux.rem(-Ee.x)}`,height:_e.ux.rem(2.5)}}:{default:{marginBottom:_e.ux.rem(-Ee.F2),justifyContent:"flex-start"}},Xh=e=>e?_e.ux.style({display:"flex",alignItems:"center",height:_e.ux.rem(2.5)}):_e.ux.style({paddingLeft:_e.ux.rem(Ee.x),paddingRight:_e.ux.rem(Ee.x),paddingTop:_e.ux.rem(Ee.F2),paddingBottom:_e.ux.rem(Ee.F2),marginBottom:_e.ux.rem(-Ee.F2)}),Jh=e=>he.createElement(ye.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),he.createElement("rect",{width:"16",height:"16",rx:"2"}),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7072 5.41421L6.50008 12.6213L2.29297 8.41421L3.70718 7L6.50008 9.79289L12.293 4L13.7072 5.41421Z",fill:"white"})),eg=({isMyVoice:e,isAnimated:t=!1,isBadge:n=!1,label:i="Use my style",inactiveLabel:r=i,onClick:o})=>he.createElement(xe.z,{variant:"tertiary",name:"toggleVoice",onClick:o,size:"small",role:"checkbox","aria-checked":e,compact:!0,style:tg(e,t,n)},he.createElement(Jh,Object.assign({width:16,height:16},(0,fe.Sh)(ng,e?ig:rg))),e?i:r);function tg(e,t,n){return{default:{display:"flex",alignItems:"center",height:_e.ux.rem(1.25),lineHeight:_e.ux.rem(1.125),fontSize:_e.ux.rem(.75),color:e?Se.Green80:Se.BlueGray60,backgroundColor:e?Se.Green0:Se.BlueGray0,transition:t?_e.ux.seconds(.25):void 0,transitionProperty:t?"color, background-color":void 0},textPosRight:{padding:`0 ${_e.ux.rem(Ee.F2)}`},icon:{marginRight:_e.ux.rem(Ee.x),minWidth:_e.ux.rem(1),minHeight:_e.ux.rem(1)},hovered:{backgroundColor:e?_e.ux.color(Ae.Z.Green10).mix(_e.ux.color(Ae.Z.BlueGray5)).toRGBA().toString():Se.BlueGray10,color:e?Se.Green80:Se.BlueGray60},active:{backgroundColor:e?_e.ux.color(Ae.Z.Green10).mix(_e.ux.color(Ae.Z.BlueGray5)).toRGBA().toString():Se.BlueGray10,color:e?Se.Green80:Se.BlueGray60},disabled:n?{opacity:1,cursor:"default"}:void 0}}const ng=_e.ux.style({marginRight:_e.ux.rem(Ee.x),minWidth:_e.ux.rem(1),minHeight:_e.ux.rem(1),borderWidth:_e.ux.px(1),borderStyle:"solid",borderColor:be.Il.Text.Base.Subdued,borderRadius:_e.ux.rem(li.xB),overflow:"hidden",transitionProperty:"background border-color",transitionDuration:_e.ux.seconds(.25),$nest:{svg:{stroke:"none"}}}),ig=_e.ux.style({background:Se.Green60,borderColor:Se.Green60,$nest:{path:{fill:Se.White}}}),rg=_e.ux.style({background:Se.White,borderColor:be.Il.Text.Base.Subdued,$nest:{path:{fill:"transparent"}}}),og=_e.ux.style({whiteSpace:"break-spaces",overflowWrap:"anywhere",fontStyle:"normal",fontWeight:"normal",fontSize:_e.ux.rem(.875),fontFeatureSettings:"'ss03' on",lineHeight:_e.ux.rem(1.3125),color:be.Il.Text.Base.Default}),sg=({children:e})=>he.createElement("div",{className:og},e),ag=({text:e})=>""!==e.trim()?he.createElement(sg,null,e):null,lg=(0,fe.xb)(xe.z),cg=({header:e,onClick:t,disabled:n})=>{const i=he.useContext(Oi.N).view("flatUI");return he.createElement(lg,{variant:"tertiary",compact:!0,disabled:n,onClick:t,className:i.view(vg),name:"editResultPrompt",size:"small",style:i.view((e=>e?{hovered:{boxShadow:"none",backgroundColor:Ae.Z.ButtonBackgroundTertiaryHover},active:{boxShadow:"none",backgroundColor:Ae.Z.ButtonBackgroundTertiaryHover}}:void 0))},i.view((t=>t?he.createElement(Uc.u,{title:"Edit"},he.createElement("div",{className:xg},he.createElement("div",Object.assign({className:yg},(0,de.E)(e))))):he.createElement("div",{className:xg},he.createElement("div",Object.assign({className:yg},(0,de.E)(e))),he.createElement("div",{className:gg},"Edit")))))};var ug;!function(e){e.FadeIn="FadeIn",e.FadeOut="FadeOut"}(ug||(ug={}));const dg=({iconUrl:e,loading:t,header:n})=>{const[r,o]=he.useState({text:n,animationState:ug.FadeIn});he.useEffect((()=>{o((e=>Object.assign(Object.assign({},e),{animationState:e.text!==n?ug.FadeOut:e.animationState})));const e=setTimeout((()=>o({text:n,animationState:ug.FadeIn})),250);return()=>clearTimeout(e)}),[n]);const a=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.div,{className:a.view(fg)},t?he.createElement(wc,{className:bg}):(0,s.zG)(e,i.fold(s.gn,(e=>he.createElement(ve.F.img,{src:e,style:a.view((e=>({width:_e.ux.rem(e?1.3125:1.25),height:_e.ux.rem(e?1.3125:1.25)})))})))),he.createElement("span",Object.assign({"aria-live":"assertive",className:_e.ux.joinClasses([yg,r.animationState===ug.FadeIn&&kg,r.animationState===ug.FadeOut&&wg])},(0,de.E)(r.text))))},mg="editHeaderBtn",pg="headerBtn",hg=e=>(0,Ie.dD)({height:_e.ux.rem(1.5),lineHeight:_e.ux.rem(1.125),padding:`0 ${_e.ux.rem(Ee.F2)}`,margin:`0 ${_e.ux.rem(-Ee.F2)}`,overflow:"hidden",$nest:e?void 0:{[`& .${mg}`]:{opacity:0,pointerEvents:"none"},"&:focus, &:hover":{background:Se.BlueGray0,[`& .${mg}`]:{opacity:1,pointerEvents:"auto",color:be.Il.Text.Base.Default}}}},pg),gg=mg,fg=e=>_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x+Ee.yC),height:_e.ux.rem(1.5),fontWeight:400,fontSize:_e.ux.rem(e?.875:.75),lineHeight:_e.ux.rem(e?1.3125:1.125),color:Se.BlueGray60,overflow:"hidden"}),vg=e=>_e.ux.joinClasses([pg,_e.ux.style(hg(e))]),xg=_e.ux.style({display:"flex",justifyContent:"space-between",width:"100%",gap:_e.ux.rem(Ee.F2)}),bg=_e.ux.style({marginBottom:`-${_e.ux.rem(Ee.yC)}`,display:"inline-flex",alignItems:"center",justifyContent:"center"}),yg=_e.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",transitionProperty:"opacity",transitionDuration:_e.ux.seconds(.25)}),kg=_e.ux.style({opacity:1}),wg=_e.ux.style({opacity:0}),Cg=r.UI.Grid.make((({slots:e,state:t})=>he.createElement(ve.F.Fragment,null,t.pipe(C.U((({resultText:t,statusText:n,isMyVoiceStatus:r,sourceLabel:o,sourceIconUrl:s})=>he.createElement(ar,{"data-name":"my-voice-in-progress-result",header:he.createElement(he.Fragment,null,e.header,he.createElement(Eg,null,he.createElement(dg,{header:t.length>0?o:n,iconUrl:t.length>0?s:i.none,loading:0===t.length}),he.createElement(eg,{isBadge:!0,isAnimated:!0,isMyVoice:r,label:"Use my style"}))),body:t.length>0?he.createElement(he.Fragment,null,he.createElement(ag,{text:t}),he.createElement(_g,null)):null,isActive:!0}))))))),Eg=({children:e})=>he.createElement("div",{className:Sg},e),Sg=_e.ux.style({display:"grid",gridTemplateColumns:"1fr auto"}),_g=()=>he.createElement("div",{className:_e.ux.style({position:"relative",overflow:"hidden",height:_e.ux.rem(.5),borderRadius:_e.ux.rem(li.xB),background:Se.BlueGray5,flexGrow:1})},he.createElement(Hl,null)),Ig=(0,fe.xb)(ag),Ag=r.UI.Grid.make((({slots:e,view:t})=>he.createElement(ar,{"aria-busy":"true","data-name":"in-progress-result",body:he.createElement(Ig,{text:t("text")}),header:he.createElement(he.Fragment,null,e.header,he.createElement(dg,{header:"Working on it...",iconUrl:i.none,loading:!0})),isActive:!0}))),Bg=(r.UI.Knot.make(Cg,{header:Qh}),r.UI.Knot.make(Ag,{header:Qh})),Og=r.UI.Knot.make(r.UI.Grid.make((({slots:e})=>he.createElement(he.Fragment,null,e.header,e.content))),{content:Bg,header:Qh}),Rg=r.UI.Union.asOption(Og),Tg=({placeholder:e,error:t,openAnswer:n,onOpenAnswerChange:r,onSubmitButtonClick:o,onCancelButtonClick:a,onKeypressShiftEnter:l})=>he.createElement("form",{className:Mg,onSubmit:e=>e.preventDefault()},he.createElement(Ur,{className:zg,placeholder:[null!=e?e:""],text:n,onChange:r,ariaLabel:"Open ended answer",fitContentHeight:!0,theme:{fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125)},onKeyDownShiftEnter:l}),(0,s.zG)(t,i.fold((()=>null),(e=>he.createElement("div",{className:jg},e)))),he.createElement("div",{className:Ng},he.createElement("input",{type:"submit",value:"Submit",hidden:!0}),he.createElement(xe.z,{variant:"secondary",style:Ug,onClick:o,flatUI:!0},"Submit"),he.createElement(xe.z,{variant:"tertiary",style:Fg,onClick:a,flatUI:!0},"Dismiss"))),Ng=_e.ux.style({display:"flex",justifyContent:"flex-start",alignItems:"center"}),Mg=_e.ux.style({width:_e.ux.percent(100),display:"flex",flexDirection:"column",gap:_e.ux.rem(Ee.x)}),Ug={default:{fontSize:_e.ux.rem(.75),fontWeight:"bold",marginRight:_e.ux.rem(Ee.x),minHeight:_e.ux.rem(Ee.sD),lineHeight:_e.ux.rem(Ee.sD)}},Fg={default:{fontSize:_e.ux.rem(.75),minHeight:_e.ux.rem(Ee.sD),lineHeight:_e.ux.rem(Ee.sD)}},zg=_e.ux.style({border:`1px solid ${Se.BlueGray10}`,minHeight:_e.ux.rem(7.5*Ee.F2),backgroundColor:Se.White,borderRadius:_e.ux.rem(Ee.x),width:_e.ux.percent(100),padding:`${_e.ux.rem(1.25*Ee.F2)} ${_e.ux.rem(Ee.x)}`,boxSizing:"border-box"}),jg=_e.ux.style({color:be.Il.Background.Critical.Default,fontSize:_e.ux.rem(.75),marginBottom:_e.ux.rem(Ee.F2)});var Pg=n(77678),Gg=n(56377);const Lg=e=>he.createElement(ye.a1,Object.assign({width:"18",height:"17",viewBox:"0 0 18 17",fill:"none"},e),he.createElement("path",{d:"M9 1L11.069 6.15226L16.6085 6.52786L12.3477 10.0877L13.7023 15.4721L9 12.52L4.29772 15.4721L5.65228 10.0877L1.39155 6.52786L6.931 6.15226L9 1Z",fill:"transparent",stroke:Se.NeutralGray50,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),Dg=({rating:e,ratingLabels:t,maxScore:n})=>(0,s.zG)(e,i.fold((()=>t.length>=n&&n>1?he.createElement("div",{className:Vg},he.createElement("span",{className:Hg},t[0]),he.createElement("span",{className:Hg},t[n-1])):null),(e=>e-1>=0&&t.length>=e?he.createElement("div",{className:Zg},he.createElement("span",null,t[e-1])):null))),Zg=_e.ux.style({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",fontWeight:"bold",fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(.875)}),Hg=_e.ux.style({color:Se.NeutralGray50}),Vg=_e.ux.style({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(.875)});var $g=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Kg=({disabled:e,rating:t,ratingLabels:n,maxScore:r,onSelectionChange:o})=>{const[a,l]=he.useState(i.none),c=he.useMemo((()=>[]),[]),u=t=>{e||o(t+1)},d=t=>{e||l(i.some(t+1))},m=()=>{e||l(i.none)};return he.createElement(he.Fragment,null,he.createElement("div",{className:Wg,role:"slider","aria-valuemin":0,"aria-valuenow":(0,s.zG)(t,i.getOrElse((()=>0))),"aria-valuemax":5,"aria-valuetext":(0,s.zG)(t,i.fold((()=>"Not yet rated"),(e=>n[e-1])))},Array.from({length:r}).map(((o,l)=>he.createElement(qg,{key:l,onClick:()=>u(l),style:{maxWidth:_e.ux.percent(r>0?100/r:0)},isFilled:(0,s.zG)(t,i.fold((()=>!1),(e=>l<e)))||(0,s.zG)(a,i.fold((()=>!1),(e=>l<e))),onMouseEnter:()=>d(l),onMouseLeave:m,onFocus:()=>d(l),onBlur:m,isSelected:(0,s.zG)(t,i.fold((()=>!1),(e=>l+1===e))),isFocusable:(0,s.zG)(t,i.fold((()=>0===l),(e=>l+1===e))),ariaLabel:`Rate this generated output as ${n[l]}`,ref:e=>c.push(e),onKeyDown:t=>((t,n)=>{var o,l,d,m;e||("ArrowRight"!==t.key&&"ArrowUp"!==t.key||((0,s.zG)(a,i.fold((()=>!1),(e=>e<r)))?null===(o=c[n+1])||void 0===o||o.focus():null===(l=c[0])||void 0===l||l.focus()),"ArrowLeft"!==t.key&&"ArrowDown"!==t.key||((0,s.zG)(a,i.fold((()=>!1),(e=>e>1)))?null===(d=c[n-1])||void 0===d||d.focus():null===(m=c[4])||void 0===m||m.focus()),"Enter"!==t.key&&" "!==t.key||u(n))})(t,l),disabled:e})))),he.createElement(Dg,{rating:(0,s.zG)(t,i.fold((0,s.a9)(a),(0,s.a9)(t))),ratingLabels:n,maxScore:r}),he.createElement(Gg.L,{small:!0}))},Wg=_e.ux.style({display:"flex",width:_e.ux.percent(100),justifyContent:"center"}),qg=he.forwardRef(((e,t)=>{var{isFilled:n,ariaLabel:i,disabled:r,isSelected:o,isFocusable:s}=e,a=$g(e,["isFilled","ariaLabel","disabled","isSelected","isFocusable"]);return he.createElement("button",Object.assign({className:Qg,role:"radio","aria-label":i,disabled:r,"aria-checked":o,tabIndex:s?0:-1,ref:t},a),he.createElement(Lg,{className:n?Yg:""}))}));qg.displayName="StarButton";const Qg=_e.ux.style({border:"none",background:"none",cursor:"pointer",padding:0,borderRadius:_e.ux.rem(Ee.F2),width:_e.ux.rem(Ee.Lw),$nest:{"&:focus-visible":{outlineStyle:"none",boxShadow:`0 0 0 2px ${be.Il.Text.Base.Subdued}`}}}),Yg=_e.ux.style({$nest:{"& path":{fill:Pg.CoreYellow50,stroke:Pg.CoreYellow50}}});var Xg=n(59769),Jg=n(46560);const ef=({stage:e,rating:t,initialTitle:n,acknowledgment:i,acknowledgmentTitle:r,onCloseButtonClick:o,className:s})=>he.createElement("div",{className:_e.ux.joinClasses([tf,s])},he.createElement(Xg._,{className:rf,fill:"#000"}),he.createElement(of,{stage:e,rating:t,initialTitle:n,acknowledgment:i,acknowledgmentTitle:r}),he.createElement(xe.z,{variant:"tertiary","aria-label":"Close survey",style:{default:{marginLeft:"auto",padding:0,minWidth:_e.ux.rem(Ee.sD),minHeight:_e.ux.rem(Ee.sD)},hovered:{backgroundColor:Se.BlueGray10},active:{backgroundColor:Se.BlueGray10}},onClick:o},he.createElement(Jg.B,null))),tf=_e.ux.style({display:"flex",alignItems:"center"}),nf=_e.ux.style({fontSize:_e.ux.rem(.75)}),rf=_e.ux.style({marginRight:_e.ux.rem(Ee.qp),$nest:{"& path:first-of-type":{fill:Se.NeutralGray70}}}),of=({stage:e,rating:t,initialTitle:n,acknowledgmentTitle:r,acknowledgment:o})=>{switch(e){case Fn.x.Stage.Type.Rating:return he.createElement("span",{className:nf},n);case Fn.x.Stage.Type.Feedback:return he.createElement("span",{className:nf},"Your rating:"," ",Array.from({length:t}).map((()=>"")).join(" "));case Fn.x.Stage.Type.Completed:return he.createElement("span",{className:nf},(0,s.zG)(r,i.fold((()=>he.createElement("b",null,"Thank you!")),(e=>he.createElement("b",null,e))))," ",(0,s.zG)(o,i.fold((()=>"Your feedback helps us improve."),(e=>e))));case Fn.x.Stage.Type.Closed:return null;default:return(0,D.L0)(e)}},sf=r.UI.Union.asOption(r.UI.Node.make((({notify:e,state:t})=>he.createElement(ve.F.Fragment,null,t.pipe(C.U((t=>he.createElement(af,Object.assign({},t,{onRatingSelectionChange:t=>{e({kind:A.i.Kind.surveyRatingSelectionChange,rating:t})()},onOpenAnswerChange:t=>e({kind:A.i.Kind.surveyOpenAnswerChange,openAnswer:t})(),onSubmitButtonClick:e({kind:A.i.Kind.surveySubmitButtonClick}),onKeypressShiftEnter:e({kind:A.i.Kind.surveyKeyPressShiftEnter}),onCancelButtonClick:e({kind:A.i.Kind.surveyCancelButtonClick}),onCloseButtonClick:e({kind:A.i.Kind.surveyCloseButtonClick})}))))))))),af=({survey:e,stage:t,transitionStage:n,rating:r,errors:o,openAnswer:a,onOpenAnswerChange:l,onRatingSelectionChange:c,onCloseButtonClick:u,onCancelButtonClick:d,onSubmitButtonClick:m,onKeypressShiftEnter:p})=>{const h=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:h.view(lf),"data-name":`survey-${e.resultId}`},he.createElement(ef,{className:_e.ux.joinClasses([n===Fn.x.Stage.Type.Feedback?df:void 0,t===Fn.x.Stage.Type.Feedback?mf:void 0]),stage:t,rating:(0,s.zG)(r,i.getOrElse((0,s.a9)(1))),initialTitle:e.title,acknowledgment:e.acknowledgment,acknowledgmentTitle:e.acknowledgmentTitle,onCloseButtonClick:u}),t!==Fn.x.Stage.Type.Completed&&he.createElement(he.Fragment,null,he.createElement("div",{className:_e.ux.joinClasses([pf,n===Fn.x.Stage.Type.Feedback?df:void 0,t===Fn.x.Stage.Type.Feedback?mf:void 0])},he.createElement("div",{className:gf,hidden:t!==Fn.x.Stage.Type.Rating},he.createElement(Kg,{onSelectionChange:c,rating:r,disabled:i.isSome(r),maxScore:e.maxScore,ratingLabels:e.ratingLabels})),(0,s.zG)(e.openAnswer,i.fold((0,s.a9)("(Optional) Please share your feedback to help us improve."),(e=>e.placeholder)),(e=>he.createElement("div",{className:hf,hidden:t!==Fn.x.Stage.Type.Feedback},he.createElement(Tg,{placeholder:e,onSubmitButtonClick:m,onKeypressShiftEnter:p,onCancelButtonClick:d,onOpenAnswerChange:l,openAnswer:a,error:(0,s.zG)(o,i.chain((e=>e.openAnswerError)))})))))))},lf=e=>Object.assign({backgroundColor:Se.BlueGray0,padding:`${_e.ux.rem(Ee.x)} ${_e.ux.rem(Ee.mh)}`},e?{}:{border:`1px solid ${Se.BlueGray10}`,borderRadius:_e.ux.rem(Ee.F2)}),cf=_e.ux.keyframes({from:{opacity:1},to:{opacity:.3}}),uf=_e.ux.keyframes({from:{opacity:.3},to:{opacity:1}}),df=_e.ux.style({animation:`${cf} 0.3s ease-in-out`}),mf=_e.ux.style({animation:`${uf} 0.3s ease-in-out`}),pf=_e.ux.style({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:_e.ux.rem(Ee.yC)}),hf=_e.ux.style({width:_e.ux.percent(100)}),gf=_e.ux.style({maxWidth:_e.ux.percent(100),width:"fit-content",paddingTop:_e.ux.rem(Ee.F2)}),ff=r.UI.Knot.make(r.UI.Grid.make((({slots:e,notify:t})=>{const{notifyUnmount:n}=he.useContext(_r),{onMount:i}=(0,Ai.F)((0,s.ls)(F.b((e=>t({kind:A.i.Kind.mount,name:Z.e.followUpActionsList,element:e})())),Ii.x((()=>n({kind:A.i.Kind.unmount,name:Z.e.followUpActionsList}))))),r=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.div,{className:r.view((e=>_e.ux.style(kf(e)))),mount:i,"data-name":"follow-up-actions"},e.actions)})),{actions:so}),vf=_e.ux.color(pr),xf=r.UI.Node.make((()=>{const e=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.div,{"aria-busy":!0,className:e.view((e=>_e.ux.style(kf(e),{position:"relative"})))},he.createElement(Hl,{overlayGradientEndColor:`rgba(${vf.red()}, ${vf.green()}, ${vf.blue()}, 0)`,overlayGradientCenterColor:`rgba(${vf.red()}, ${vf.green()}, ${vf.blue()}, 0.5)`,overlayBlendMode:"screen"}),he.createElement(jh,{style:{width:_e.ux.rem(8.5)},mode:"compact"}),he.createElement(jh,{style:{width:_e.ux.rem(9.25)},mode:"compact"}),he.createElement(jh,{style:{width:_e.ux.rem(8)},mode:"compact"}),he.createElement(jh,{style:{width:_e.ux.rem(4.5)},mode:"compact"}))})),bf=r.UI.Union.make("kind",{none:r.UI.Node.empty,loading:xf,actions:ff}),yf=r.UI.Knot.make(r.UI.Grid.make((({slots:e})=>he.createElement(he.Fragment,null,e.actions))),{actions:bf}),kf=e=>({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",flexDirection:"row",gap:_e.ux.rem(Ee.x),marginBottom:_e.ux.rem(Ee.x),marginTop:e?_e.ux.rem(Ee.x):0,padding:e?`0 ${_e.ux.rem(Ee.mh)}`:0}),wf=r.UI.Knot.make(r.UI.Grid.make((({slots:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(Ni,{style:t.view(_f),"data-name":"new-context-actions"},e.actions)})),{actions:So}),Cf=r.UI.Union.make("kind",{loading:Ph,loaded:wf}),Ef=r.UI.Knot.make(r.UI.Grid.make((({slots:e})=>he.createElement(he.Fragment,null,e.actions))),{actions:Cf}),Sf=r.UI.Union.asOption(Ef),_f=e=>({position:"relative",padding:e?_e.ux.rem(Ee.mh):`${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.qp)}`,gap:e?_e.ux.rem(Ee.mh):void 0}),If=r.UI.Union.make("kind",{followUp:yf,newContext:Sf}),Af=r.UI.Union.asOption(If);var Bf=n(23871);const Of=({onInsert:e,onRephrase:t,onDismiss:n,onCopy:r,onProvideFeedback:o,onReportOffensive:a,onReportMenuVisibilityChange:l,disabled:c,isActive:u})=>{const d=he.useContext(Oi.N).view("flatUI"),m=i.isSome(t)||i.isSome(e),p=he.createElement(ym,{reportMenuButtonClassName:zf,onClickProvideFeedback:o,onClickReportOffensive:a,onOpenChange:l,onDismiss:n});return he.createElement("div",{className:Tf},he.createElement("div",{className:Mf},(0,s.zG)(e,i.map((e=>he.createElement(ve.F.Fragment,null,d.view((t=>t?he.createElement(xe.z,{name:"insertResult",onClick:e,size:"large",key:"insert",variant:u?"primary":"secondary",textPosition:"everywhere"},he.createElement("div",{className:_e.ux.style({position:"relative"})},he.createElement("div",{className:_e.ux.style({fontWeight:"bold",visibility:"hidden"})},"Insert"),he.createElement("div",{className:_e.ux.style({position:"absolute",top:0,left:0,right:0})},"Insert"))):he.createElement(xe.z,{className:jf,name:"insertResult",onClick:e,size:"small",key:"insert"},"Insert")))))),i.toNullable),(0,s.zG)(t,i.map((e=>he.createElement(ve.F.Fragment,null,d.view((t=>he.createElement(xe.z,{variant:"tertiary",className:t?void 0:Pf,name:"rephraseResult",onClick:e,disabled:c,size:t?"large":"small",key:"rephrase"},t?"Retry":"Rephrase")))))),i.toNullable),he.createElement(ve.F.Fragment,null,d.view((e=>e&&m?p:null)))),he.createElement(ve.F.div,{className:Uf},d.view((e=>e&&!m?p:null)),d.view((e=>e?(0,s.zG)(r,i.map((e=>he.createElement(xe.z,{name:"copyResult",onClick:e,size:"small",variant:"tertiary",title:"Copy result"},he.createElement("div",{className:_e.ux.style({padding:_e.ux.rem(.5),height:_e.ux.rem(1),width:_e.ux.rem(1)})},he.createElement(Bf.c,{width:"1rem",height:"1rem"}))))),i.toNullable):null)),d.view((e=>e?null:he.createElement(he.Fragment,null,he.createElement(xe.z,{variant:"tertiary",onClick:n,className:Ff,compact:!0,size:d.view((0,z.RN)("large","small")),name:"dismissResult",title:"Delete"},he.createElement(no,{className:Gf})),he.createElement(bm,{reportMenuButtonClassName:zf,onClickProvideFeedback:o,onClickReportOffensive:a,onOpenChange:l}))))))},Rf="ignoreIcon",Tf=_e.ux.style({gap:_e.ux.rem(Ee.x),display:"flex",alignItems:"center",justifyContent:"space-between"}),Nf={display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x)},Mf=_e.ux.style(Nf),Uf=_e.ux.style(Nf),Ff=Xi,zf=Ji,jf=Qi,Pf=Yi,Gf=_e.ux.joinClasses([Rf,_e.ux.style((0,Ie.dD)((0,Ie.fx)(1.5),Rf))]),Lf=r.UI.Grid.make((({state:e,notify:t,slots:n})=>he.createElement(ve.F.Fragment,null,e.pipe(C.U((({disabled:e,result:r,originalAction:o})=>he.createElement(ar,{"data-name":`ai-notification-${r.id}`,body:he.createElement(he.Fragment,null,he.createElement("div",{className:_e.ux.style({borderBottom:`0.5px solid ${Se.BlueGray10}`})},he.createElement(ag,{text:r.text}),he.createElement("div",{className:_e.ux.style({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:_e.ux.rem(.5),marginTop:_e.ux.rem(.5),marginBottom:_e.ux.rem(.75)})},n.actions)),(0,s.zG)(o,i.map((n=>he.createElement("div",null,he.createElement(ag,{text:"Continue with your original prompt:"}),he.createElement("div",{className:_e.ux.style({paddingTop:_e.ux.rem(.125)})},he.createElement(Df,{disabled:e,action:n,onClick:t({kind:A.i.Kind.userPromptSubmit,prompt:n})}))))),i.toNullable)),header:he.createElement("h2",{className:_e.ux.style({fontSize:_e.ux.rem(1),marginBottom:_e.ux.rem(.2),marginTop:0,lineHeight:_e.ux.rem(1.5)})},"Review your AI use"),isActive:!0,footer:he.createElement(Of,{isActive:!1,onRephrase:i.none,onInsert:i.none,onCopy:i.none,onDismiss:t({kind:A.i.Kind.resultCardDismissButtonClick,result:r}),onProvideFeedback:t({kind:A.i.Kind.openFeedbackFormButtonClick,source:cs.x.Source.resultCard}),onReportOffensive:t({kind:A.i.Kind.reportOffensiveResultButtonClick,result:r}),onReportMenuVisibilityChange:e=>t({kind:A.i.Kind.reportMenuVisibilityChange,trigger:Dn.card(r.id),visible:e})(),disabled:e}),style:{borderColor:Se.Gold40,borderTopWidth:_e.ux.rem(.375)}}))))))),Df=({action:e,onClick:t,disabled:n})=>he.createElement("button",{onClick:t,disabled:n,className:_e.ux.style({textDecoration:"underline",color:Se.BlueGray60,background:_e.ux.important("none"),border:"none",cursor:"pointer",lineHeight:_e.ux.rem(1.375),fontSize:_e.ux.rem(.875),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",textAlign:"left"})},'"',e.arg.value,'"'),Zf=r.UI.Knot.make(Lf,{actions:so}),Hf=({title:e,url:t,contextText:n})=>{const r=he.useRef(null),o=Om(r,e),a=(0,s.zG)(n,i.getOrElse((()=>o)));return(0,s.zG)(t,i.fold((()=>he.createElement(Kf,{tooltip:a},he.createElement("span",{className:Vf,ref:r},e))),(t=>he.createElement(Kf,{tooltip:a},he.createElement("div",{className:$f},he.createElement(Bm.d,{href:t,className:Vf,ref:r},e))))))},Vf=_e.ux.style({display:"inline-block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",maxWidth:"100%",$nest:{"&:visited":{color:"inherit"}}}),$f=_e.ux.style({display:"flex",alignItems:"center",width:"100%",overflow:"hidden"}),Kf=({children:e,tooltip:t})=>t?he.createElement(Uc.u,{align:"topCenter",title:he.createElement("div",{className:Wf},t)},e):he.createElement(he.Fragment,null,e),Wf=_e.ux.style({maxWidth:_e.ux.rem(80*Ee.F2),textAlign:"left",whiteSpace:"normal",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"}),qf=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"M12 10.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm-10 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z",fill:"#646B81"}));qf.__brand="color";const Qf=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"M5.818 2.429A5.921 5.921 0 0 0 2 8a6.002 6.002 0 0 0 3.857 5.606m4.286-11.177C12.398 3.29 14 5.44 14 8a5.973 5.973 0 0 1-3.824 5.606M2.546 2h3.272v3.273M13.454 14h-3.272v-3.273",stroke:"#646B81"}));Qf.__brand="color";const Yf={minWidth:_e.ux.rem(1.5),minHeight:_e.ux.rem(1.5),lineHeight:_e.ux.rem(1.5)},Xf=({onRegenerateWithoutReference:e})=>he.createElement(jc,{name:"referenceMenu",title:"Reference menu","aria-label":"Reference menu",label:he.createElement(qf,null),theme:{buttonStyle:{default:Object.assign({padding:0},Yf),icon:Yf}},onAction:t=>{if("regenerateWithoutReference"===t)return e()}},he.createElement(il.ck,{key:"regenerateWithoutReference",textValue:"regenerateWithoutReference"},he.createElement(Qf,{className:Jf}),"Regenerate without this reference")),Jf=_e.ux.style({marginRight:_e.ux.rem(Ee.x)}),ev=({className:e,children:t})=>he.createElement("div",Object.assign({},(0,fe.Sh)(tv,e)),t),tv=_e.ux.style({color:Se.BlueGray60,fontWeight:400,fontSize:_e.ux.rem(.625),lineHeight:_e.ux.rem(1),background:Se.BlueGray0,borderRadius:_e.ux.rem(li.fe),padding:`0 ${_e.ux.rem(Ee.F2)}`,cursor:"default"}),nv=({privacyLevel:e})=>{switch(e.kind){case"public":return he.createElement(iv,null);case"restricted":return he.createElement(rv,null);default:return(0,s.Rz)(e)}},iv=()=>he.createElement(he.Fragment,null),rv=()=>he.createElement(Uc.u,{align:"topLeft",title:he.createElement("div",{className:ov},"This item has restricted access and is only visible to those added to the file")},he.createElement(ev,{className:sv},"Private")),ov=_e.ux.style({width:_e.ux.rem(9),overflowWrap:"normal",whiteSpace:"normal",textAlign:"left"}),sv=_e.ux.style({border:`1px solid ${Ae.Z.BorderBaseSubduedColor}`,borderRadius:_e.ux.rem(Ee.F2)}),av=(0,fe.xb)(xe.z),lv=({className:e,isOpen:t,references:n,onOpenChange:i,onRegenerateWithoutReference:r,onReferencesMount:o,onReferencesUnmount:a})=>{const{onMount:l}=(0,Ai.F)((0,s.ls)(F.b(o),Ii.x(a))),c=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.div,{className:e,mount:l},he.createElement(av,{variant:"tertiary",style:c.view(cv),onClick:()=>i(!t),name:"collapseReferencesList",size:"small"},he.createElement("span",{className:dv},n.length," ",ls._6(n.length,"reference","references")),c.view((0,z.RN)(he.createElement(Hm,null,t?he.createElement(Zm,null):he.createElement(Dm,null)),t?he.createElement(ye.JO.Arrow,{direction:ye.n4.up}):he.createElement(ye.JO.Arrow,{direction:ye.n4.down})))),he.createElement("ul",{className:mv,hidden:!t,"aria-hidden":!t},n.map((({id:e,privacyLevel:t,title:n,iconUrl:i,url:o,contextText:s},a)=>he.createElement("li",{key:a,className:pv},he.createElement("img",{src:i,className:hv,alt:""}),he.createElement(Hf,{title:n,url:o,contextText:s}),he.createElement("div",{className:gv},he.createElement(nv,{privacyLevel:t}),void 0!==r?he.createElement(Xf,{onRegenerateWithoutReference:()=>r(e)}):null))))))},cv=e=>({default:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:e?_e.ux.rem(Ee.x):_e.ux.rem(Ee.F2),paddingRight:e?_e.ux.rem(Ee.x):0}}),uv={fontSize:_e.ux.rem(Ee.qp),lineHeight:_e.ux.rem(Ee.mh+Ee.yC),color:be.Il.Text.Base.Subdued,userSelect:"none"},dv=_e.ux.style(uv),mv=_e.ux.style({fontSize:_e.ux.rem(Ee.qp),lineHeight:_e.ux.rem(Ee.mh+Ee.yC),color:be.Il.Text.Base.Default,margin:0,padding:0}),pv=_e.ux.style({height:_e.ux.rem(Ee.sD),display:"flex",alignItems:"center",borderRadius:_e.ux.rem(li.xB)}),hv=_e.ux.style({minWidth:_e.ux.rem(Ee.mh),height:_e.ux.rem(Ee.mh),marginRight:_e.ux.rem(Ee.x)}),gv=_e.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:"auto"});var fv,vv=n(36991);!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm",e.none="none"}(fv||(fv={}));const xv=({insertOp:e})=>{const t=bv(e.attributes),n=yv(e.attributes);switch(t){case fv.generatedText:return he.createElement(Sv,{style:n},e.insert);case fv.knowledgeHubTerm:return he.createElement(_v,{style:n},e.insert);case fv.none:return Ev(e.attributes)?he.createElement(Av,{style:n,href:e.attributes.link},e.insert):he.createElement(Iv,{style:n},e.insert);default:return(0,s.Rz)(t)}},bv=e=>{switch(!0){case null==e?void 0:e[Rv.knowledgeHubTerm]:return fv.knowledgeHubTerm;case null==e?void 0:e[Rv.generatedText]:return fv.generatedText;default:return fv.none}},yv=e=>{const t={};return kv(e)&&(t.fontWeight="bold"),wv(e)&&(t.fontStyle="italic"),Cv(e)&&(t.textDecoration="underline"),Ev(e)&&(t.color=Se.Blue60),t},kv=e=>!0===(null==e?void 0:e.bold),wv=e=>!0===(null==e?void 0:e.italic),Cv=e=>!0===(null==e?void 0:e.underline),Ev=e=>"string"==typeof(null==e?void 0:e.link),Sv=({children:e,style:t})=>he.createElement("span",{className:Bv,style:t},e),_v=({children:e,style:t})=>he.createElement(Uc.u,{title:"from Knowledge Share"},he.createElement("span",{className:Ov,style:t},e)),Iv=({children:e,style:t})=>he.createElement("span",{style:t},e),Av=({children:e,style:t,href:n})=>he.createElement("a",{style:t,href:n,target:"_blank",rel:"noreferrer"},e),Bv=_e.ux.style({backgroundColor:Se.Green0,borderRadius:_e.ux.rem(li.fe)}),Ov=_e.ux.style({backgroundColor:Se.Blue0,borderRadius:_e.ux.rem(li.fe)});var Rv;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm"}(Rv||(Rv={}));const Tv=({replacementDelta:e})=>he.createElement(sg,null,e.map(((e,t)=>vv.s.isInsert(e)?he.createElement(xv,{key:t,insertOp:e}):null))),Nv=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"M2 8.444 5.692 12 14 4",stroke:"#646B81",strokeLinecap:"round"}));Nv.__brand="color";const Mv=({className:e,title:t,description:n})=>he.createElement("div",{className:_e.ux.joinClasses([Uv,e])},he.createElement("div",{className:Fv},he.createElement("span",{className:Gv},t)),he.createElement("ul",{className:zv},n.map(((e,t)=>he.createElement("li",{className:jv,key:t},he.createElement(Nv,{className:Pv}),he.createElement("span",{className:Lv},e)))))),Uv=_e.ux.style({display:"flex",flexDirection:"column"}),Fv=_e.ux.style({display:"flex"}),zv=_e.ux.style({display:"flex",flexDirection:"column",listStyle:"none",margin:0,padding:0,$nest:{"& li":{marginTop:_e.ux.rem(Ee.F2)}}}),jv=_e.ux.style({display:"flex",alignItems:"center"}),Pv=_e.ux.style({marginRight:_e.ux.rem(Ee.x),width:_e.ux.rem(Ee.mh),maxHeight:_e.ux.rem(Ee.mh+Ee.yC),$nest:{"& path:first-of-type":{stroke:Se.Green60}}}),Gv=_e.ux.style({fontSize:_e.ux.rem(Ee.qp),lineHeight:_e.ux.rem(Ee.mh+Ee.yC),fontWeight:700,color:be.Il.Text.Base.Subdued}),Lv=_e.ux.style({fontSize:_e.ux.rem(Ee.qp),lineHeight:_e.ux.rem(Ee.mh+Ee.yC),color:be.Il.Text.Base.Subdued,flex:1});var Dv;!function(e){e.searchLabel="searchLabel",e.clickableSearchLabel="clickableSearchLabel",e.knowledgeHub="knowledgeHub"}(Dv||(Dv={}));r.UI.Union.asOption(r.UI.Node.make((({notify:e,state:t})=>he.createElement(ve.F.Fragment,null,t.pipe(C.U((t=>he.createElement(eg,{key:"voiceButton",isMyVoice:t.selectedVoice===Zn.x.GeneratedTextVoice.user,onClick:e({kind:A.i.Kind.resultCardToggleGenericVoiceButtonClick,resultId:t.resultId,voice:t.selectedVoice})}))))))));const Zv=r.UI.Node.make((({notify:e,state:t})=>he.createElement(ve.F.div,{className:Hv},t.pipe(C.U((t=>{switch(t.kind){case Dv.clickableSearchLabel:return he.createElement(cg,{header:t.label,disabled:t.disabled,onClick:e({kind:A.i.Kind.resultCardHeaderClick,prompt:t.copiablePrompt})});case Dv.searchLabel:return he.createElement(dg,{header:t.label,iconUrl:t.iconUrl,loading:!1});case Dv.knowledgeHub:return he.createElement(dg,{header:"Knowledge Share content was used.",iconUrl:i.none,loading:!1});default:return(0,D.L0)(t)}})))))),Hv=_e.ux.style({display:"grid",gridTemplateColumns:"1fr auto",gap:_e.ux.rem(Ee.x)}),Vv=r.UI.Grid.make((({slots:e,state:t,notify:n})=>{const r=he.useContext(Oi.N).view("flatUI"),{notifyUnmount:o}=he.useContext(_r);return he.createElement(ve.F.Fragment,null,r.view((0,z.RN)(null,e.contextHeader)),G.aj([t,r]).pipe(C.U((([{result:t,disabled:r,isActive:a,isReferencesOpen:l,isMyVoice:c},u])=>he.createElement(ar,{"data-name":`result-${t.id}`,body:he.createElement(Tv,{replacementDelta:(0,s.zG)(t.replacementDelta,ge.fold(s.yR,(e=>c?e.user:e.generic)))}),header:he.createElement(he.Fragment,null,u?e.contextHeader:null,e.header),footer:he.createElement(he.Fragment,null,(0,s.zG)(Zn.x.isComplete(t)?t.changesSummary:i.none,i.filter((()=>!u)),i.map((e=>he.createElement(he.Fragment,null,he.createElement(ld,{className:Kv}),he.createElement(Mv,{title:e.title,description:e.description,className:Wv})))),i.toNullable),he.createElement(Of,{isActive:a,onRephrase:(0,s.zG)(t,i.fromPredicate(Zn.x.isComplete),i.filter((e=>e.supportedActions.has(Zn.x.SupportedAction.rephrase))),i.map((e=>n({kind:A.i.Kind.resultCardRephraseButtonClick,result:e,selectedVoice:c?Zn.x.GeneratedTextVoice.user:Zn.x.GeneratedTextVoice.generic})))),onCopy:(0,s.zG)(i.some(n({kind:A.i.Kind.resultCardCopy,resultId:t.id,voice:c?Zn.x.GeneratedTextVoice.user:Zn.x.GeneratedTextVoice.generic})),i.filter((()=>t.supportedActions.has(Zn.x.SupportedAction.copy)))),onInsert:(0,s.zG)(i.some(n({kind:A.i.Kind.resultCardInsertButtonClick,result:t,selectedVoice:c?Zn.x.GeneratedTextVoice.user:Zn.x.GeneratedTextVoice.generic})),i.filter((()=>t.supportedActions.has(Zn.x.SupportedAction.insert)))),onDismiss:n({kind:A.i.Kind.resultCardDismissButtonClick,result:t}),onProvideFeedback:n({kind:A.i.Kind.openFeedbackFormButtonClick,source:cs.x.Source.resultCard}),onReportOffensive:n({kind:A.i.Kind.reportOffensiveResultButtonClick,result:t}),onReportMenuVisibilityChange:e=>n({kind:A.i.Kind.reportMenuVisibilityChange,trigger:Dn.card(t.id),visible:e})(),disabled:r}),(0,s.zG)(t.references,i.filter((e=>e.length>0)),i.map((e=>he.createElement(lv,{className:qv,isOpen:l,references:e,onOpenChange:e=>n({kind:A.i.Kind.referencesVisibilityChange,visible:e,resultId:t.id})(),onRegenerateWithoutReference:Zn.x.isComplete(t)?e=>n({kind:A.i.Kind.regenerateWithoutReferenceButtonClick,result:t,referenceId:e,selectedVoice:c?Zn.x.GeneratedTextVoice.user:Zn.x.GeneratedTextVoice.generic})():void 0,onReferencesMount:e=>n({kind:A.i.Kind.mount,name:Z.e.referencesList,element:e})(),onReferencesUnmount:()=>o({kind:A.i.Kind.unmount,name:Z.e.referencesList})}))),i.toNullable),(0,s.zG)(Zn.x.isComplete(t)?t.changesSummary:i.none,i.filter((()=>u)),i.map((e=>he.createElement(Mv,{title:e.title,description:e.description,className:Wv}))),i.toNullable)),isActive:a,onHovered:e=>n({kind:A.i.Kind.resultCardHoverChange,hovered:e,resultId:t.id})(),onFocused:e=>n({kind:A.i.Kind.resultCardFocusChange,focused:e,resultId:t.id})(),onCopy:n({kind:A.i.Kind.resultCardCopy,resultId:t.id,voice:c?Zn.x.GeneratedTextVoice.user:Zn.x.GeneratedTextVoice.generic})})))))})),$v=r.UI.Knot.make(Vv,{header:Zv,contextHeader:Qh}),Kv=_e.ux.style({margin:`${_e.ux.rem(Ee.F2)} 0`}),Wv=_e.ux.style({marginBottom:_e.ux.rem(Ee.F2)}),qv=_e.ux.style({marginTop:_e.ux.rem(Ee.x)}),Qv=r.UI.Union.make("kind",{promptResultComplete:$v,aiUsageNotification:Zf}),Yv=r.UI.List.make(R.bw,Qv),Xv=r.UI.Group.make({results:Yv}),Jv=r.UI.Union.make("kind",{none:r.UI.Node.empty,loading:r.UI.Knot.make(Ag,{header:r.UI.Node.empty}),loaded:Xv}),ex=r.UI.Grid.make((({slots:e})=>he.createElement(he.Fragment,null,e.documentOverview,e.intent,e.resultList,e.lastResultSurvey,e.lastResultActions,e.inProgressResult,e.generationError,e.detectedReferences))),tx=r.UI.Knot.make(ex,{documentOverview:am,intent:Sm,resultList:Jv,lastResultSurvey:sf,lastResultActions:Af,inProgressResult:Rg,generationError:em,detectedReferences:Mm}),nx=r.UI.Group.make({toneReport:lu}),ix=r.UI.Group.make({plagiarism:dc}),rx=r.UI.Union.make("kind",{home:Wh,thread:tx,error:em,followUpPrompt:Zs,legacyVoiceProfile:ad,voiceProfile:Vd,feedbackForm:Ns,skill:Rc,settings:xc,toneReport:nx,plagiarism:ix}),ox=e=>he.createElement(ye.a1,Object.assign({width:"17",height:"16",viewBox:"0 0 17 16"},e),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 8C2.5 4.41015 5.41015 1.5 9 1.5C12.5899 1.5 15.5 4.41015 15.5 8C15.5 11.5899 12.5899 14.5 9 14.5C7.85901 14.5 6.73812 14.1997 5.75 13.6292C5.51085 13.4911 5.42892 13.1853 5.56699 12.9462C5.70506 12.707 6.01085 12.6251 6.25 12.7631C7.08611 13.2459 8.03455 13.5 9 13.5C9.96545 13.5 10.9139 13.2459 11.75 12.7631C12.5861 12.2804 13.2804 11.5861 13.7631 10.75C14.2459 9.91389 14.5 8.96545 14.5 8C14.5 4.96243 12.0376 2.5 9 2.5C5.96243 2.5 3.5 4.96243 3.5 8V8.29289L4.64645 7.14645C4.84171 6.95118 5.15829 6.95118 5.35355 7.14645C5.54882 7.34171 5.54882 7.65829 5.35355 7.85355L3.35355 9.85355L3 10.2071L2.64645 9.85355L0.646447 7.85355C0.451184 7.65829 0.451184 7.34171 0.646447 7.14645C0.841709 6.95118 1.15829 6.95118 1.35355 7.14645L2.5 8.29289V8ZM9 4C9.27614 4 9.5 4.22386 9.5 4.5V7.5H11.5C11.7761 7.5 12 7.72386 12 8C12 8.27614 11.7761 8.5 11.5 8.5H9H8.5V8V4.5C8.5 4.22386 8.72386 4 9 4Z",stroke:"none"})),sx=r.UI.Node.make((({state:e,view:t,notify:n})=>{const{notifyUnmount:i}=he.useContext(_r),{onMount:r}=(0,Ai.F)((0,s.ls)(F.b((e=>n({kind:A.i.Kind.mount,name:Z.e.historyButton,element:e})())),w.w((e=>t("state").pipe(C.U((e=>"enabled"===e)),k.O(!1),S.x(),re.G(),F.b((([t,i])=>{!t&&i?n({kind:A.i.Kind.mount,name:Z.e.historyButtonActive,element:e})():t&&!i&&n({kind:A.i.Kind.unmount,name:Z.e.historyButtonActive})()}))))),Ii.x((()=>{i({kind:A.i.Kind.unmount,name:Z.e.historyButton}),i({kind:A.i.Kind.unmount,name:Z.e.historyButtonActive})}))));return he.createElement("div",{className:lx},he.createElement(xe.z,{variant:"tertiary",mount:r,onClick:n({kind:A.i.Kind.restoreHistoryButtonClick}),disabled:t("state").pipe(C.U((e=>"disabled"===e||"loading"===e))),compact:!0,style:t("flatUI").pipe(C.U((e=>e?{}:ux))),size:t("flatUI").pipe(C.U((e=>e?"small":"medium"))),name:"restoreHistory",title:e.pipe(C.U((({flatUI:e,state:t})=>"disabled"===t?"No prior prompt to go back to.":"enabled"===t?e?"Pick up with your last prompt.":"Pick up where you left off":void 0)))},he.createElement(ox,null)),he.createElement(ve.F.Fragment,null,e.pipe(C.U((({flatUI:e,state:t})=>e&&"disabled"!==t?he.createElement("div",{key:"badge",role:"presentation",className:cx}):null)))))})),ax=r.UI.Union.asOption(sx),lx=_e.ux.style({position:"relative"}),cx=_e.ux.style({width:_e.ux.rem(.375),height:_e.ux.rem(.375),borderRadius:_e.ux.rem(.375),background:Ae.Z.BrandGreen60,position:"absolute",top:_e.ux.rem(Ee.yC),right:_e.ux.rem(-Ee.yC)}),ux={default:{boxShadow:`0px 0px 1px ${_e.ux.color(Se.BlueGray40).toRGBA().fade(.5).toString()}, 0px 0.5px 8px -0.5px ${_e.ux.color(Se.BlueGray40).toRGBA().fade(.5).toString()}`}},dx=({icon:e,label:t,className:n,onClick:i})=>he.createElement(xe.z,{variant:"tertiary",onClick:i,name:"actionBrick",size:"small",style:px,className:n},(0,s.zG)(e,ge.fold((e=>"more"===e?he.createElement(we,null):"plagiarism"===e?he.createElement(Ce,null):(0,D.L0)(e)),(e=>he.createElement("img",{src:e,style:{width:_e.ux.rem(1),height:_e.ux.rem(1)}})))),he.createElement(ve.F.div,Object.assign({},(0,de.E)(t),{className:hx}))),mx={gapRems:Ee.F2,paddingLeftRems:Ee.F2,paddingRightRems:Ee.x,fontSizeRems:.75,fontFamily:"Inter",fontWeight:"normal",iconWidthRems:1},px={default:{fontSize:_e.ux.rem(mx.fontSizeRems),fontFamily:mx.fontFamily,fontWeight:mx.fontWeight,gap:_e.ux.rem(mx.gapRems),padding:`0 ${_e.ux.rem(mx.paddingRightRems)} 0 ${_e.ux.rem(mx.paddingLeftRems)}`},icon:(0,Ie.fx)(mx.iconWidthRems)},hx=_e.ux.style({whiteSpace:"initial",textAlign:"left",lineHeight:_e.ux.rem(1.125)});let gx=null;function fx(e,t){gx||(gx=document.createElement("canvas"));const n=gx.getContext("2d");if(n){n.font=t;return n.measureText(e).width}return null}const vx=({widthRems:e})=>he.createElement(jh,{style:{width:_e.ux.rem(e),height:_e.ux.rem(1.5),border:0},iconStyle:{width:_e.ux.rem(1),height:_e.ux.rem(1)}}),xx=Ee.mh,bx=()=>he.createElement("div",{role:"separator",className:_e.ux.style({width:_e.ux.rem(xx),height:_e.ux.rem(1.5),position:"relative"})},he.createElement("div",{className:_e.ux.style({position:"absolute",top:0,bottom:0,left:"50%",borderLeft:`0.5px solid ${Se.BlueGray20}`})})),yx=({loading:e,actions:t,className:n,onHasHiddenActionsChange:r,onActionClick:o})=>{const{onMount:a,ref:l}=_i.P.useElWatcher(),c=Wi(l,!0),u=he.useContext(Ei.u.Context),d=he.useMemo((()=>G.aj([c,u,t]).pipe(C.U((([e,t,n])=>({width:(0,s.zG)(e,i.map((e=>Math.round(e.width)))),remSize:t,actions:n}))),_.skipBy(Y.MW({width:i.getEq(Y.lr),remSize:Y.lr,actions:R.Eh(Y.f7(((e,t)=>e.action.label===t.action.label)))})),C.U((({width:e,remSize:t,actions:n})=>(0,s.zG)(e,i.map((e=>function(e,t,n,i,r){const o=[];let s=0;for(let a=0;a<e.length;++a){const l=fx(e[a].action.label,r),c=(null!=l?l:0)+n+(o.length>0?i:0);null!==l&&s+c<=t&&(s+=c,o.push(e[a]))}return o}(n,e,function(e){return(mx.paddingLeftRems+mx.iconWidthRems+mx.gapRems+mx.paddingRightRems)*e}(t),xx*t,function(e){return`${mx.fontWeight} ${mx.fontSizeRems*e}px ${mx.fontFamily}`}(t))))))),_.shareReplay({refCount:!0,bufferSize:1}))),[t,c,u]),m=he.useMemo((()=>G.aj([d,t,e]).pipe(N.h((([e,t,n])=>!1===n)),C.U((([e,t])=>(0,s.zG)(e,i.fold((()=>0),(e=>e.length)),(e=>e<t.length)))),S.x(),F.b((e=>r(e))))),[d,t]);return _i.P.useSubscriptionTo(m),he.createElement(ve.F.div,{className:_e.ux.joinClasses([kx,n]),mount:a},G.aj([d,e]).pipe(C.U((([e,t])=>(0,s.zG)(e,i.filter((()=>!t)),i.fold((()=>he.createElement(ve.F.Fragment,null,G.aj([c,u]).pipe(C.U((([e,t])=>(0,s.zG)(e,i.map((e=>({width:Math.floor(e.width),remSize:t})))))),_.skipBy(i.getEq(Y.MW({width:Y.lr,remSize:Y.lr}))),C.U(i.fold(s.gn,(({width:e,remSize:t})=>{const n=15+xx,i=9/n,r=6/n,o=e/t-xx,s=Math.min(i*o,9),a=Math.min(r*o,6);return he.createElement(he.Fragment,null,he.createElement(vx,{widthRems:s}),he.createElement(bx,null),he.createElement(vx,{widthRems:a}))})))))),(e=>he.createElement(he.Fragment,null,e.map(((e,t)=>he.createElement(he.Fragment,{key:e.action.id},t>0?he.createElement(bx,null):null,he.createElement(dx,{icon:W.aU.extractActionIcon(e.action),label:e.action.label,onClick:()=>o(e)}))))))))))))},kx=_e.ux.style({display:"flex",height:_e.ux.rem(1.5)});const wx=r.UI.Grid.make((({slots:e,view:t,notify:n})=>{const i=he.useMemo((()=>f.h.create(!1)),[]);return he.createElement("section",{className:Sx,"data-name":"actions-bar"},he.createElement("div",{className:Ex},e.header),he.createElement(yx,{className:_x,loading:t("loading"),actions:t("actions"),onActionClick:e=>n({kind:A.i.Kind.actionBrickClick,action:e})(),onHasHiddenActionsChange:L.wW(i)}),he.createElement(ve.F.div,{className:Cx},G.aj([t("hasMore"),i]).pipe(C.U((([e,i])=>e||i?he.createElement(he.Fragment,null,he.createElement(dx,{icon:ge.left("more"),label:"More",onClick:n({kind:A.i.Kind.actionBrickClick,action:{kind:"allResults",filterPredicate:s.W8}})}),he.createElement(ve.F.Fragment,null,t("hasHistoryButton").pipe(C.U((0,z.RN)(he.createElement(bx,null),null))))):null))),e.historyButton))})),Cx=_e.ux.style({gridArea:"controls",display:"flex",flexDirection:"row"}),Ex=_e.ux.style({gridArea:"header"}),Sx=_e.ux.style({display:"grid",gridTemplateColumns:"1fr auto",gridTemplateRows:"auto auto",gridTemplateAreas:'"header header" "actions controls"',gridColumnGap:_e.ux.rem(Ee.x),alignItems:"center",padding:`${_e.ux.rem(Ee.F2)} ${_e.ux.rem(Ee.mh)}`,margin:`${_e.ux.rem(Ee.x)} 0`}),_x=_e.ux.style({gridArea:"actions",display:"flex",height:_e.ux.rem(1.5)}),Ix=()=>he.createElement(jh,{style:{width:_e.ux.rem(7.75),height:_e.ux.rem(2.5),border:0,gap:_e.ux.rem(.875),marginLeft:_e.ux.rem(1)},iconStyle:{width:_e.ux.rem(1.25),height:_e.ux.rem(1.25)}}),Ax=r.UI.Grid.make((({slots:e,state:t,notify:n})=>he.createElement(ve.F.div,{className:Bx,"data-name":"actions-panel"},e.header,t.pipe(C.U((({loading:t,actions:i,hasMore:r,maxActionsCount:o})=>t?Array.from({length:o+1}).map(((e,t)=>he.createElement(he.Fragment,{key:t},0!==t?he.createElement(Qr,null):null,he.createElement(Ix,null)))):he.createElement(he.Fragment,null,i.map(((e,t)=>he.createElement(he.Fragment,{key:e.action.id},0!==t&&he.createElement(Qr,null),he.createElement(Je,{icon:W.aU.extractActionIcon(e.action),label:e.action.label,onClick:n({kind:A.i.Kind.actionBrickClick,action:e})})))),r?he.createElement(he.Fragment,null,he.createElement(Qr,null),he.createElement("div",{className:Ox},he.createElement(Je,{icon:ge.left("more"),label:"More",onClick:n({kind:A.i.Kind.actionBrickClick,action:{kind:"allResults",filterPredicate:s.W8}}),style:Rx}),he.createElement("div",{className:Tx},e.historyButton))):null))))))),Bx=_e.ux.style({display:"flex",flexDirection:"column",marginTop:_e.ux.rem(Ee.x)}),Ox=_e.ux.style({position:"relative"}),Rx={default:{width:"100%"}},Tx=_e.ux.style({position:"absolute",right:_e.ux.rem(Ee.mh),bottom:"50%",transform:"translateY(50%)"}),Nx=e=>he.createElement(ye.a1,Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},e),he.createElement("circle",{cx:"10",cy:"10",r:"6",stroke:"#646B81"}),he.createElement("path",{d:"M7.5 10H12.5",stroke:"#646B81",strokeLinecap:"round"})),Mx=r.UI.Node.make((({view:e,notify:t})=>he.createElement("div",{className:Fx},he.createElement(fo,{active:!0,style:zx,prefix:"Work with:"},e("selectedText")),he.createElement(xe.z,{variant:"tertiary",onClick:t({kind:A.i.Kind.removeSelectionContextClick}),compact:!0,size:"small",name:"removeContext",title:"Remove"},he.createElement(Nx,null))))),Ux=r.UI.Union.asOption(Mx),Fx=_e.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",gap:_e.ux.rem(Ee.x)}),zx={height:_e.ux.rem(2.5)},jx=r.UI.Node.make((({view:e})=>he.createElement(ve.F.h1,{className:Zx},e("title")))),Px=r.UI.Union.make("kind",{none:r.UI.Node.empty,title:jx,selectionContext:r.UI.Composite.make(r.UI.Grid.make((({slots:e})=>he.createElement("div",{className:Hx},e.header))),Mx)}),Gx=r.UI.Knot.make(wx,{header:Ux,historyButton:ax}),Lx=r.UI.Knot.make(Ax,{header:Px,historyButton:ax}),Dx=r.UI.Union.make("kind",{none:r.UI.Node.empty,actionBar:Gx,actionPanel:Lx}),Zx=_e.ux.style({padding:_e.ux.rem(Ee.x),paddingLeft:_e.ux.rem(Ee.mh),margin:0,fontWeight:700,fontSize:_e.ux.rem(1),lineHeight:_e.ux.rem(1.5)}),Hx=_e.ux.style({padding:`0 ${_e.ux.rem(Ee.qp)} 0 ${_e.ux.rem(Ee.mh)}`}),Vx=r.UI.Grid.make((({slots:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.section,{className:t.view(Kx)},e.header,e.fieldContainer)})),$x=r.UI.Knot.make(Vx,{header:Dx,fieldContainer:Jo}),Kx=e=>e?_e.ux.style({backgroundColor:Ae.Z.BackgroundBaseSubdued,borderTop:`0.5px solid ${Ae.Z.BorderBaseSubduedColor}`,height:"100%",borderBottomLeftRadius:"inherit",borderBottomRightRadius:"inherit",boxSizing:"border-box"}):void 0,Wx=r.UI.Union.make("kind",{none:r.UI.Node.empty,skill:Rc,promptStudio:$x}),qx=({count:e})=>{const t="counterGradientColors_"+ls.fg(6);return he.createElement("div",{className:Qx(e)},he.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",className:Yx},he.createElement("linearGradient",{id:t,x1:"0.5",y1:"0",x2:"0.5",y2:"1"},he.createElement("stop",{offset:"0%",stopColor:"#638EEB"}),he.createElement("stop",{offset:"100%",stopColor:"#EE445F"})),he.createElement("circle",{r:"11",cx:"12",cy:"12",strokeWidth:"2",fill:"none",stroke:`url(#${t})`})),e>999?"1K+":e)},Qx=e=>_e.ux.style({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",fontSize:e>99?_e.ux.rem(.625):_e.ux.rem(.75),fontWeight:700,width:_e.ux.rem(1.5),height:_e.ux.rem(1.5),color:be.Il.Text.Base.Default}),Yx=_e.ux.style({position:"absolute",top:0,left:0,right:0,bottom:0}),Xx=({collapseAfterMs:e,animationDurationMs:t=500,children:n})=>{const[r,o]=he.useState(!1),{onMount:a,ref:l}=_i.P.useElWatcher();return he.createElement(ve.F.div,{mount:a,className:l.pipe(C.U((n=>_e.ux.style({overflow:"hidden",animationDelay:`${e}ms, ${e}ms`,animationName:`${eb}, ${Jx}`,animationDuration:`${t}ms, ${t}ms`,animationTimingFunction:"ease-in-out, ease-in-out",maxWidth:(0,s.zG)(n,i.fold((()=>"auto"),(e=>`${e.scrollWidth+5}px`)))})))),onAnimationEnd:()=>o(!0)},r?null:n)},Jx=_e.ux.keyframes({"0%":{opacity:1},"50%":{opacity:1},"100%":{opacity:0}}),eb=_e.ux.keyframes({to:{maxWidth:0}}),tb=(0,Ye.Ih)(Ae.Z.BorderBrandDefault),nb={default:{height:_e.ux.rem(2),boxSizing:"border-box",borderRadius:_e.ux.rem(1),border:`1px solid ${Ae.Z.BorderBaseSubduedColor}`,display:"flex",alignItems:"center",width:"fit-content",padding:_e.ux.rem(3*Ee.W9),userSelect:"none"},hovered:{boxShadow:"none",border:`1px solid ${Ae.Z.ButtonBorderTertiaryHover}`,$nest:(0,Ye.Rv)(tb)},active:{boxShadow:"none",border:`1px solid ${Ae.Z.ButtonBorderTertiaryActive}`,$nest:(0,Ye.Rv)(tb)}},ib=_e.ux.style({padding:`0 ${_e.ux.rem(Ee.x)}`,color:Ae.Z.TextBaseSubduedColor,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),height:_e.ux.rem(1.125)}),rb=e=>he.createElement(ye.a1,{className:e.className,viewBox:"0 0 22 22",width:22,height:22},he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 11C22 17.0749 17.0753 22 11 22C4.92513 22 0 17.0749 0 11C0 4.92465 4.92513 0 11 0C17.0753 0 22 4.92465 22 11Z",fill:"#018374",stroke:"none"}),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4371 13.3755C12.5021 13.7356 12.8407 13.9824 13.2066 13.9824H14.3592L15.0274 13.8887C13.9584 15.4569 12.1023 16.1786 10.0731 15.8601C8.42114 15.6008 7.00214 14.4831 6.40336 12.9221C5.04414 9.37866 7.63201 5.99545 11.0042 5.99545C12.7618 5.99545 14.3037 7.05097 15.1876 8.29349C15.4224 8.63162 15.8868 8.72871 16.2254 8.49388C16.5468 8.27101 16.6405 7.84775 16.4473 7.51488C15.2249 5.60662 13.0282 4.38562 10.558 4.5511C7.34171 4.76679 4.73901 7.39866 4.55392 10.6169C4.33918 14.3617 7.30966 17.4192 11.0042 17.4192C12.945 17.4192 14.6825 16.5741 15.8662 15.2068L15.7261 15.9911V16.6999C15.7261 17.0653 15.9724 17.4044 16.3325 17.4694C16.8055 17.5545 17.2168 17.1934 17.2168 16.7362V12.4912H13.1698C12.7126 12.4912 12.3515 12.903 12.4371 13.3755Z",fill:"white",stroke:"none"})),ob=({className:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.Fragment,null,t.view((t=>he.createElement(rb,{className:_e.ux.joinClasses([sb(t),e])}))))},sb=e=>_e.ux.style(Object.assign({display:"flex",alignItems:"center",justifyContent:"center"},e?(0,Ie.fx)(1.375):{})),ab=(0,fe.xb)((({count:e,label:t,disabled:n,onClick:i,collapseLabelAfter:r})=>he.createElement(xe.z,{variant:"tertiary",name:"suggestions-counter-button",style:nb,disabled:n,onClick:i,title:t},he.createElement(qx,{count:e}),t&&he.createElement(Xx,{collapseAfterMs:null!=r?r:0},he.createElement("div",{className:ib},t))))),lb=r.UI.Node.make((({view:e,notify:t})=>he.createElement(ab,{count:e("count"),disabled:e("disabled"),label:"Review suggestions",collapseLabelAfter:2e3,onClick:t({kind:"suggestionCountButtonClick"})}))),cb=r.UI.Union.make("kind",{withoutSuggestions:r.UI.Node.make((()=>he.createElement(ob,{className:_e.ux.style({paddingLeft:_e.ux.rem(Ee.x)})}))),withSuggestions:lb}),ub=e=>he.createElement(ye.a1,Object.assign({width:"20",height:"20",viewBox:"0 0 20 20"},e),he.createElement("g",{id:"icon"},he.createElement("g",{id:"Vector"},he.createElement("path",{d:"M14.6429 3.92857L14.607 3.96447C13.3023 5.26917 11.0714 4.34512 11.0714 2.5H8.92857C8.92857 4.34512 6.69774 5.26917 5.39304 3.96447L5.35714 3.92857L3.92857 5.35714L3.96447 5.39304C5.26917 6.69774 4.34512 8.92857 2.5 8.92857V11.0714C4.34512 11.0714 5.26917 13.3023 3.96447 14.607L3.92857 14.6429L5.35714 16.0714L5.39304 16.0355C6.69774 14.7308 8.92857 15.6549 8.92857 17.5H11.0714C11.0714 15.6549 13.3023 14.7308 14.607 16.0355L14.6429 16.0714L16.0714 14.6429L16.0355 14.607C14.7308 13.3023 15.6549 11.0714 17.5 11.0714V8.92857C15.6549 8.92857 14.7308 6.69774 16.0355 5.39304L16.0714 5.35714L14.6429 3.92857Z",fill:"none",strokeLinejoin:"round"}),he.createElement("path",{d:"M12.5 10C12.5 11.3807 11.3807 12.5 10 12.5C8.61929 12.5 7.5 11.3807 7.5 10C7.5 8.61929 8.61929 7.5 10 7.5C11.3807 7.5 12.5 8.61929 12.5 10Z",fill:"none",strokeLinejoin:"round"})))),db=r.UI.Node.make((({view:e,notify:t})=>he.createElement(xe.z,{variant:"tertiary",onClick:e=>{e&&(0,de.Re)(e.currentTarget)&&t({kind:A.i.Kind.settingsButtonClick,buttonRect:e.currentTarget.getBoundingClientRect()})()},compact:!0,size:e("flatUI").pipe(C.U((e=>e?"small":"medium"))),name:"settings",title:"Settings"},he.createElement(ub,null)))),mb=r.UI.Union.asOption(db),pb=r.UI.Node.make((({view:e,notify:t})=>{const n=he.useContext(Oi.N).view("flatUI");return he.createElement(xe.z,{variant:"tertiary",style:n.pipe(C.U((e=>e?gb:fb))),onClick:t({kind:A.i.Kind.headerVoiceButtonClick}),name:"headerVoiceProfileButton",size:n.pipe(C.U((e=>e?"small":"medium"))),title:"My voice"},he.createElement(Oh,null),he.createElement(ve.F.Fragment,null,G.aj([n,e("styleLabel")]).pipe(C.U((([e,t])=>e?null:he.createElement("span",null,t))))))})),hb=r.UI.Union.asOption(pb),gb={default:{padding:0},icon:(0,Ie.fx)(1.5)},fb={default:{padding:0,paddingRight:_e.ux.rem(Ee.x),paddingLeft:_e.ux.rem(Ee.x),minHeight:_e.ux.rem(1.625),lineHeight:_e.ux.rem(1.625),border:_e.ux.px(1),borderStyle:"solid",borderColor:Se.BlueGray20,borderRadius:_e.ux.rem(.8125),gap:_e.ux.rem(Ee.F2),flexWrap:"nowrap"},icon:(0,Ie.fx)(1.5)},vb=({title:e,titleId:t,desc:n,descId:i,...r})=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?he.createElement("desc",{id:i},n):null,e?he.createElement("title",{id:t},e):null,he.createElement("path",{d:"M2 8h12m0 0L9.448 3M14 8l-4.552 5",stroke:"#646B81",strokeLinecap:"round"}));vb.__brand="color";const xb=(0,fe.xb)(xe.z),bb=r.UI.Node.make((({notify:e,view:t})=>{const n=he.useContext(Oi.N).view("flatUI");return he.createElement("div",{className:kb},he.createElement(xb,{variant:"tertiary",compact:!0,onClick:t("activeView").pipe(C.U((t=>e({kind:A.i.Kind.headerGoBackButtonClick,goBackFrom:t})))),size:n.view((0,z.RN)("small","large")),title:"Back",name:"goBack"},n.view((0,z.RN)(he.createElement(Hm,null,he.createElement(vb,{className:yb})),he.createElement(ye.JO.Arrow,{direction:ye.n4.left})))),he.createElement(ve.F.div,{className:wb},t("activeViewIconUrl").pipe(C.U(i.fold(s.gn,(e=>he.createElement("img",{src:e,style:{width:_e.ux.rem(1.25),height:_e.ux.rem(1.25)}}))))),t("activeViewLabel").pipe(C.U(i.fold(s.gn,(e=>he.createElement("span",null,e)))))))})),yb=_e.ux.style({$nest:{"& path":{transform:"rotate(180deg)",transformOrigin:"center"}}}),kb=_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x),color:Se.BlueGray60,fontWeight:400,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125)}),wb=_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(Ee.x)}),Cb=e=>he.createElement(ye.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),he.createElement("path",{d:"M4 4L8 8M12 12L8 8M8 8L12 4M8 8L4 12",stroke:"#646B81",strokeLinecap:"round"})),Eb=r.UI.Node.make((({notify:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(xe.z,{variant:"tertiary",onClick:e({kind:A.i.Kind.headerCloseButtonClick}),compact:!0,className:t.view((0,z.RN)(void 0,_e.ux.style({marginLeft:_e.ux.rem(-Ee.x)}))),size:t.view((0,z.RN)("small","large")),name:"headerClose","aria-label":"Close Assistant"},he.createElement(Cb,null))}));var Sb=n(49708),_b=n(598);const Ib=r.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:i}=_i.P.useElWatcher(),r=he.useMemo((()=>n.pipe(E.oA,w.w((e=>Sb.R(e,"mouseenter").pipe(_b.c(U.of(null).pipe(ga.g(500),Gt.R(Sb.R(e,"mouseleave"))))))),F.b(t({kind:A.i.Kind.creditsInfoHover})))),[n]);_i.P.useSubscriptionTo(r);const{onMount:o}=(0,Ai.F)(F.b((e=>t({kind:A.i.Kind.mount,name:Z.e.creditsInfoButton,element:e})()))),s=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.Fragment,null,e.pipe(C.U((({user:e,genAIAvailability:n})=>{const r=q._.isActive(n)?function(e){const t=`${Number(e.promptsRemaining).toLocaleString()}/${Number(e.promptsAllocated).toLocaleString()} prompts left. `,n=q._.Active.daysUntilRefillDate(e.refillDate),i=q._.Active.hoursUntilRefillDate(e.refillDate);return n>0?t+`Next refill in ${n} ${ls._6(n,"day","days")}.`:i>0?t+`Next refill in ${i} ${ls._6(i,"hour","hours")}.`:t+"Next refill in less than an hour."}(n):e.isPremium?"To get more prompts, contact support.":"To get more prompts, upgrade to Premium.",a=q._.isActive(n)?`${Number(n.promptsRemaining).toLocaleString()} ${ls._6(n.promptsRemaining,"prompt","prompts")}`:e.isPremium?"0 prompts":he.createElement(he.Fragment,null,"0 prompts.",he.createElement("span",{className:Ob},"Upgrade"));return e.isPremium&&q._.isActive(n)?he.createElement(he.Fragment,null,q._.isActiveUnlimited(n)?null:he.createElement(Uc.u,{title:r},he.createElement("div",{ref:i,className:Bb},a))):he.createElement(xe.z,{variant:"tertiary",onClick:t({kind:A.i.Kind.creditsInfoClick}),size:s.view((0,z.RN)("small","large")),title:r,name:"creditsInfo",mount:o,style:Rb,textPosition:"everywhere"},he.createElement("div",{ref:i},a))}))))})),Ab=r.UI.Union.asOption(Ib),Bb=_e.ux.style({padding:`${_e.ux.rem(Ee.x)}`,fontSize:_e.ux.rem(.75),lineHeight:_e.ux.rem(1.125),color:be.Il.Text.Base.Subdued,cursor:"default"}),Ob=_e.ux.style({color:Se.Blue60}),Rb={default:{fontSize:_e.ux.rem(.75)}},Tb=r.UI.Node.make((({view:e})=>he.createElement(ve.F.Fragment,null,e("version").pipe(C.U(i.fold((()=>he.createElement(ob,null)),(e=>he.createElement("div",{className:Nb},he.createElement(ob,null),he.createElement("small",null,`v${e}`))))))))),Nb=_e.ux.style({display:"flex",alignItems:"center",gap:_e.ux.rem(.5)}),Mb=r.UI.Node.make((({state:e})=>he.createElement(ve.F.h1,{className:Fb},e))),Ub=r.UI.Union.asOption(Mb),Fb=_e.ux.style({textAlign:"center",fontSize:_e.ux.rem(.75),fontWeight:700,lineHeight:_e.ux.rem(1.125)}),zb=r.UI.Grid.make((({slots:e})=>he.createElement("div",{className:qb},e.back,he.createElement("div",{className:Yb}),e.voice))),jb=r.UI.Knot.make(zb,{back:bb,voice:pb}),Pb=r.UI.Composite.make(r.UI.Grid.make((({slots:e})=>he.createElement("div",{className:Xb},he.createElement(ob,null),he.createElement("div",{className:Jb},e.content)))),pb),Gb=r.UI.Knot.make(r.UI.Grid.make((({slots:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.div,{className:t.view(ty)},e.button)})),{button:cb}),Lb=r.UI.Union.make("kind",{logoOnly:Tb,suggestionCount:Gb,logoAndVoiceButton:Pb,backButton:bb,backButtonAndVoiceButton:jb}),Db=r.UI.Grid.make((({slots:e})=>{const t=he.useContext(Oi.N).view("flatUI");return he.createElement(ve.F.Fragment,null,t.view((t=>he.createElement("div",{className:t?Wb:Kb},t?e.credits:null,e.voiceButton,e.historyButton,t?null:e.credits,e.settingsButton,e.closeButton))))})),Zb=r.UI.Knot.make(Db,{voiceButton:hb,historyButton:ax,credits:Ab,settingsButton:mb,closeButton:Eb}),Hb=r.UI.Grid.make((({slots:e})=>he.createElement(he.Fragment,null,e.left,he.createElement("div",{className:ey},e.pageTitle),e.right))),Vb=r.UI.Knot.make(Hb,{left:Lb,pageTitle:Ub,right:Zb}),$b={display:"flex",alignItems:"center"},Kb=_e.ux.style(Object.assign(Object.assign({},$b),{gap:_e.ux.rem(Ee.x)})),Wb=_e.ux.style(Object.assign(Object.assign({},$b),{gap:_e.ux.rem(Ee.F2)})),qb=_e.ux.style({display:"flex",flexDirection:"row",alignItems:"center",gap:_e.ux.rem(Ee.x)}),Qb={height:_e.ux.rem(1),borderLeft:`1px solid ${Se.BlueGray20}`},Yb=_e.ux.style(Qb),Xb=_e.ux.style({display:"flex",flexDirection:"row",alignItems:"center",gap:_e.ux.rem(Ee.F2)}),Jb=_e.ux.style({display:"flex",alignItems:"center"}),ey=_e.ux.style({flexGrow:1}),ty=e=>_e.ux.style({marginLeft:e?_e.ux.rem(-Ee.x):0}),ny=r.UI.Knot.make(as,{header:Vb,content:rx,footer:Wx,notifications:bi,onboarding:Ci});function iy(e){return r.Z.composeKnot({content:(t=e.notifications,r.Z.composeList(R.Ot,(()=>t.state.view(R.GY)),(e=>function(e,t){return r.Z.fromSideEffect((e=>{switch(e.kind){case"dismissNotification":return t.dismiss(e.id);case"mouseOver":return t.hover(!0);case"mouseOut":return t.hover(!1);default:(0,D.L0)(e)}}),e)}(e,t))))});var t}function ry(e){return(0,s.ls)(ft.B(),(t=>{return vt.T(t.pipe((n=e.logger,r=e.lifecycle,(0,s.ls)(N.h(os),F.b((e=>{r.onMount(e.element)})),C.U((e=>i.some(e.element))),_i.P.FocusTrap.dynamicFocusTrap(_i.P.FocusTrap.InitialFocus.none,oy,function(e){return(t,n)=>(t instanceof HTMLIFrameElement?t.contentDocument&&t.contentDocument.body?Sb.R(t.contentDocument.body,n):Pt.E:Sb.R(t,n)).pipe(gt.K((i=>(e.error("failed to attach event listener during focus trap",i,{el:t,eventName:n}),Pt.E))))}(n)),ht.l()))),t.pipe(function(e){return(0,s.ls)(N.h(ss),M.q(1),F.b((t=>{e.onHeaderMount(t.element)})),ht.l())}(e.lifecycle)),t.pipe(function(e){return(0,s.ls)(N.h(rs),F.b((t=>e.onFocus(t.focused))),ht.l())}(e.lifecycle)),f.h.combine(e.assistant.state.view("canScroll"),function(e){return f.h.combine(e.assistant.state.view("session"),e.assistant.state.view("contextualActions"),e.userSurvey.state,e.routing.activeView,((e,t,n,r)=>(0,s.zG)(Q.z.toStarted(e),i.filter((()=>"thread"===r.kind)),i.map((e=>{const r=(0,s.zG)(e.inProgressResult,i.fold((()=>""),(e=>e.text))),o=`${e.results.length}`,a=i.isSome(n.activeSurvey),l=(0,s.zG)(t,i.fold((()=>""),(0,s.ls)(R.ke(5),R.UI((e=>e.id)),(e=>e.join("-")))));return`${r}_${o}_${a}_${l}`})))))}(e),e.promptMenu.state,e.lifecycle.heightBehavior,e.lifecycle.widthBehavior,e.lifecycle.dragBehavior,((e,t,n,r,o,a)=>({canScrollContent:e,menuRef:(0,s.zG)(n,i.chain((e=>e.promptMenuContainer))),scrollContentToBottomToken:t,heightBehavior:r,widthBehavior:o,dragBehavior:a}))));var n,r}))}function oy(e){var t;if(e instanceof HTMLIFrameElement){const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document;if(n){const e=n.body.querySelector("textarea:not([disabled]), input:not([disabled])");e&&"focus"in e&&"function"==typeof e.focus&&e.focus()}}else e.focus()}function sy(e){return r.Z.fromSideEffect((t=>e.notify(t)),f.h.combine(e.feedbackForm.stagingFeedbackFormData,e.feedbackForm.domain,((e,t)=>{var n;return{formData:e,domain:t,source:null!==(n=null==e?void 0:e.source)&&void 0!==n?n:cs.x.Source.resultCard}})))}function ay(e){return r.Z.composeOption(function(e){return r.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view("selectedAction").view(i.chain((e=>(0,s.zG)(e.args[0].hints,i.map((t=>({header:e.label,iconUrl:e.iconUrl,hintsHeader:t.header,hintsItems:t.items,radioOptions:W.Xy.match({string:()=>i.none,radio:e=>i.some(e.radioOptions)})(e.args[0])}))))))).pipe(E.oA))}(e),(()=>e.assistant.state.view("selectedAction").view(i.chain((e=>e.args[0].hints)))))}function ly(e){return void 0!==e.find((e=>"applyAlerts"===e.type||"removeAlerts"===e.type))}function cy(e,t){return n=>(0,s.zG)(e||t?en.ab.map(n,(n=>"button"!==n.type?n:e&&n.name.value===String(Jt.MU.ButtonPrev)||t&&n.name.value===String(Jt.MU.ButtonNext)?Object.assign(Object.assign({},n),{state:Jt.BN.Disabled}):n)):i.some(n),i.getOrElse((()=>n)))}function uy(e,t,n,o){return r.Z.fromSideEffect((n=>{switch(n.kind){case"sduiNotify":return ly(n.actions)&&t.onSuggestionAddressed(),e.processActions(n.actions,n.item,n.scope,n.sourceId);case"focusedItemMount":return e.onFocusedItemMount(n.item);default:(0,D.L0)(n)}}),n.pipe(C.U(i.chain((e=>(0,s.zG)(i.fromNullable(e.items[o]),i.map((t=>({feedState:e,item:t}))))))),E.oA,C.U((({feedState:e,item:t})=>{const n=(0,s.zG)(e.focusedItemId,i.exists((e=>t.id===e)));return{item:n?Object.assign(Object.assign({},t),{content:cy(0===o,o===e.items.length-1)(t.content)}):t,prevFocusedItemPosition:(0,s.zG)(e.prevFocusedItemPosition,i.filter((()=>n))),isFirst:0===o,isFocused:n}})),_.skipBy(dl)))}function dy(e,t){const n=n=>o=>function(e,t,n,o){return r.Z.composeKnot({root:()=>n.pipe(C.U(i.chain((e=>(0,s.zG)(i.fromNullable(e.items[o]),i.map((t=>({itemId:t.id,isFocused:(0,s.zG)(e.focusedItemId,i.exists((e=>t.id===e)))}))))))),E.oA,_.skipBy(Sl)),content:r.Z.animatingFlow(uy(e,t,n,o),((e,t)=>(0,s.zG)(e,i.filter((e=>!e.isFocused&&t.isFocused)),i.chain((()=>(0,s.zG)(t.prevFocusedItemPosition,i.map((e=>e<0?Wt.Hk("collapseForward","expandForward"):Wt.Hk("collapseBackward","expandBackward")))))))))})}(e.feed,e.suggestionCount,t,o)(n.pipe(N.h((e=>e.key===o)),C.U((e=>e.action))));return e=>t.pipe(C.U(i.fold((()=>[]),(e=>e.items))),Xn.g("length"),w.w((t=>G.aj(t.map(((t,i)=>n(e)(i)))))))}function my(e){return e.pipe(Qt.R(((e,t)=>(0,s.zG)(t,i.map((t=>({items:Ct(t.collection),focusedItemId:(0,s.zG)(Et(t.collection),i.map((e=>e.id))),focusedItemIndex:St(t.collection),prevFocusedItemPosition:(0,s.zG)(e,i.chain((e=>(0,s.zG)($.Y(i.option)({prevIdx:e.focusedItemIndex,currIdx:St(t.collection)}),i.chain((e=>e.prevIdx===e.currIdx?i.none:e.prevIdx<e.currIdx?i.some(-1):i.some(1))),i.alt((()=>e.prevFocusedItemPosition))))))}))))),i.none))}function py(e){const t=my(e.feed.feed).pipe(_.shareReplay({bufferSize:1,refCount:!0}));return r.Z.composeUnion({loadingState:()=>U.of(null),emptyState:r.Z.fromSideEffect((t=>e.plagiarism.seeAllSuggestions()),e.lifecycle.heightBehavior.view((({kind:e})=>({fitContainer:"fitContainer"===e})))),nonEmptyState:r.Z.composeKnot({root:r.Z.fromSideEffect((t=>{switch(t.kind){case"plagiarismFeedMount":return e.feed.onFeedMount();case"sduiCitationDropdownSelect":return e.plagiarism.onCitationDropdownSelect(t.actions);default:(0,D.L0)(t)}}),e.plagiarism.state.view((e=>({citationDropdown:(0,s.zG)(e,i.chain((e=>e.citationDropdown)))})))),cardList:dy(e,t),footer:()=>e.plagiarism.state.view(i.map((e=>({originality:e.originality,sourceCount:e.sourceCount}))))})},(()=>f.h.combine(e.feed.feed,e.plagiarism.state,((e,t)=>(0,s.zG)($.g(i.option)(e,t),i.fold((()=>"loadingState"),(([e,{checking:t}])=>kt(e.collection)>0?"nonEmptyState":t?"loadingState":"emptyState")),(e=>({kind:e})))))))}function hy(e){return()=>U.of((0,s.zG)(e.settings,i.chain((e=>e.getView())),i.fold((()=>({content:null})),(e=>({content:e})))))}function gy(e,t){const n=f.h.combine(e.skill.state,e.theme.theme.view("flatUI"),((e,n)=>(0,s.zG)(e,i.filter((()=>!t&&!n||n&&t)),i.map((e=>({displayName:e.skill.displayName,status:e.status,srcUrl:e.skill.srcUrl,size:e.size}))))));return r.Z.composeOption(function(e,t){return r.Z.fromSideEffect((t=>e.notify(t)),t)}(e,n.pipe(E.oA)),(()=>n))}function fy(e){return r.Z.composeUnion({loading:()=>U.of(null),loadedEmpty:()=>U.of(null),loadedNonEmpty:r.Z.fromSideEffect((t=>e.notify(t)),(0,s.zG)(e.toneDetector,i.fold((()=>U.of(null)),(e=>e.state.pipe(N.h(ne.isLoadedNonEmpty),C.U((({tones:e,brandToneInfo:t})=>({tones:e,onBrandTitleEnabled:i.isSome(t)}))))))))},(()=>(0,s.zG)(e.toneDetector,i.fold((()=>U.of({kind:"loading"})),(e=>e.state.view((({kind:e})=>({kind:e}))))))))}function vy(e){const t=f.h.create("");return r.Z.fromSideEffect((n=>{"updateRoleTypeaheadText"===n.kind?(t.set(n.text),""===n.text&&e.notify({kind:A.i.Kind.roleTypeaheadSelectionChange,role:i.none})):(n.kind===A.i.Kind.roleTypeaheadSelectionChange&&t.set((0,s.zG)(n.role,i.fold((()=>""),(e=>e.label)))),e.notify(n))}),f.h.combine(e.assistant.state.view("session"),e.voiceProfile.state.view("stagingVoiceProfile"),t,((e,t,n)=>(0,s.zG)($.Y(i.Applicative)({voiceProfile:(0,s.zG)(Q.z.toStarted(e),i.map((e=>e.voiceProfile)),i.chain(Gn.L.toLegacyVoiceProfile)),stagingVoiceProfile:t}),i.fold((()=>({tones:[],styles:[],roles:[],maxSelectableTones:0,applyButtonEnabled:!1,description:"",roleTypeaheadText:"",dialects:Gn.L.Dialect.all(),selectedDialect:Gn.L.Dialect.american})),(({stagingVoiceProfile:e,voiceProfile:t})=>(0,s.zG)(t.styles,R.Ew((t=>t.id===e.selectedStyle)),(r=>({styles:(0,s.zG)(t.styles,R.UI((t=>Object.assign(Object.assign({},t),{kind:t.id===e.selectedStyle?"selected":"unselected"})))),tones:(0,s.zG)(r,i.fold((()=>[]),(t=>(0,s.zG)(t.tones,R.UI((n=>Object.assign(Object.assign({},n),{kind:(0,s.zG)(i.fromNullable(e.selectedTonesPerStyle.get(e.selectedStyle)),i.getOrElse((()=>new Set)),(e=>e.has(n.id)?"selected":e.size>=t.maxTones?"disabled":"unselected"))}))))))),roles:t.roles,maxSelectableTones:(0,s.zG)(r,i.fold((()=>3),(e=>e.maxTones))),applyButtonEnabled:!Gn.L.Selections.eq.equals(e,t),description:"These voice settings will apply to any text you generate.",roleTypeaheadText:(0,s.zG)(e.selectedRole,i.filter((()=>""===n)),i.chain((e=>i.fromNullable(t.roles.find((t=>t.id===e))))),i.fold((()=>n),(e=>e.label))),dialects:t.dialects,selectedDialect:t.dialects.find((t=>Gn.L.Dialect.Id.eq.equals(t.id,e.selectedDialect)))||Gn.L.Dialect.american})))))))))}function xy(e){return r.Z.fromSideEffect((t=>e.notify(t)),f.h.combine(e.assistant.state.view("session"),e.voiceProfile.state.view("stagingNewVoiceProfile"),((e,t)=>(0,s.zG)($.Y(i.Applicative)({sessionVoiceProfile:(0,s.zG)(Q.z.toStarted(e),i.map((e=>e.voiceProfile)),i.chain(Gn.L.toNewVoiceProfile)),stagingVoiceProfile:t}),i.fold((()=>({userName:"",title:"",subTitle:"",roles:[],dialects:Gn.L.Dialect.all(),selectedDialect:Gn.L.Dialect.american,isEnabledByDefault:!0,isEnabledByDefaultLabel:"",profiles:[],activeProfileName:i.none,activeTagId:i.none,isEditing:!1,selectedRole:i.none})),(({sessionVoiceProfile:e,stagingVoiceProfile:t})=>({userName:e.userName,title:e.title,subTitle:e.subTitle,isEnabledByDefault:t.isEnabledByDefault,isEnabledByDefaultLabel:e.isEnabledByDefaultLabel,profiles:t.profiles,roles:(0,s.zG)(by(t,e),i.fold((()=>e.roles),(t=>e.roles.filter((e=>e.id!==t.id))))),dialects:(0,s.zG)(yy(t,e),(t=>e.dialects.filter((e=>e.id!==t.id)))),selectedRole:by(t,e),selectedDialect:yy(t,e),activeProfileName:t.activeProfileName,activeTagId:t.activeTagId,isEditing:i.isSome(t.stagingSelections)})))))))}function by(e,t){return(0,s.zG)(e.stagingSelections,i.chain((e=>e.selectedRole)),i.alt((()=>e.selectedRole)),i.chain((e=>i.fromNullable(t.roles.find((t=>Gn.L.Role.Id.eq.equals(t.id,e)))))))}function yy(e,t){return(0,s.zG)(e.stagingSelections,i.fold((()=>e.selectedDialect),(e=>e.selectedDialect)),(e=>t.dialects.find((t=>Gn.L.Dialect.Id.eq.equals(t.id,e)))||Gn.L.Dialect.american))}function ky(e){const t=e.assistant.state.view("session").pipe(C.U((e=>e.error)));return r.Z.composeOption(function(e,t){const n=e.routing.activeView.view((e=>"error"!==e.kind));return r.Z.fromSideEffect((t=>e.notify(t)),t.pipe(ie.M(n),C.U((([e,t])=>({error:e,showGotItButton:t})))))}(e,t.pipe(E.oA)),(()=>t))}function wy(e){const t=e.assistant.state.view("session").view((0,s.ls)(Q.z.toStarted,i.chain((e=>e.activeContext.documentOverview))));return r.Z.composeOption((()=>(0,s.zG)(t,E.oA)),(()=>t))}var Cy=n(69693);function Ey(e){const t=f.h.combine(e.assistant.state.view("session"),e.theme.theme.view("flatUI"),((e,t)=>(0,s.zG)(e,i.fromPredicate((e=>Cy.w.isQuickReply(e.mode))),i.chain((e=>(0,s.zG)("started"===e.kind?(0,s.zG)(e.activeContext.intent,i.map((e=>({kind:"loaded",text:e})))):i.some({kind:"loading"}),i.map((e=>Object.assign(Object.assign({},e),{header:"Senders intent",showReportMenu:t})))))))));return r.Z.composeOption(r.Z.composeUnion({loading:()=>t.pipe(E.oA),loaded:r.Z.fromSideEffect((t=>e.notify(t)),t.pipe(C.U(i.chain((e=>"loaded"===e.kind?i.some({text:e.text,header:e.header,showReportMenu:e.showReportMenu}):i.none))),E.oA))},(()=>t.pipe(E.oA))),(()=>t))}function Sy(e){const t=e.assistant.state.view("detectedReferences");return r.Z.composeOption(function(e){return()=>e.assistant.state.view("detectedReferences").pipe(C.U(i.getOrElse((0,s.a9)([]))),C.U((e=>({detectedReferences:e}))))}(e),(()=>t))}function _y(e,t=Math.random){const n=nh(t),o=my(e.feed.feed).pipe(_.shareReplay({bufferSize:1,refCount:!0})),a=e.feed.feed.view(i.chain((e=>function(e){return Object.values(zt).includes(e)?i.some(e):i.none}(e.id))));return r.Z.composeUnion({loadingState:()=>e.feedForm.state.view("supportedForms").view((e=>e.has("shortForm"))).view((e=>({supportsShortForm:e}))),emptyState:()=>e.lifecycle.heightBehavior.pipe(C.U((e=>({content:th[n].emptyState,fitContainer:"fitContainer"===e.kind})))),successState:()=>e.lifecycle.heightBehavior.pipe(C.U((e=>({content:th[n].successState,goBackFrom:i.none,fitContainer:"fitContainer"===e.kind})))),nonEmptyState:r.Z.composeKnot({root:Iy(e,a),lensView:r.Z.composeUnion({successState:r.Z.fromSideEffect((t=>e.feedLens.onToggleLens(t.goBackFrom)),G.aj([a,e.lifecycle.heightBehavior,e.feedLens.lenses]).pipe(C.U((([e,t,r])=>({content:Object.assign(Object.assign({},th[n].successState),(0,s.zG)(e,i.fold(s.gn,(e=>({description:(0,s.zG)(i.fromNullable(r.get(e)),i.fold((()=>th[n].successState.description),(e=>`There are no more ${e.label.toLowerCase()} suggestions.`)))}))))),goBackFrom:e,fitContainer:"fitContainer"===t.kind}))))),cardList:r.Z.composeKnot({cardList:dy(e,o)})},(()=>o.pipe(C.U((e=>(0,s.zG)(e,i.exists((e=>e.items.length>0)))?"cardList":"successState")),S.x(),C.U((e=>({kind:e}))))))})},(()=>G.aj([o,e.checkingState.firstCheckingFinished,e.suggestionCount.allSuggestionsEmpty,e.suggestionCount.someSuggestionsAddressed]).pipe(C.U((([e,t,n,r])=>i.isNone(e)||0===e.value.items.length&&!t?"loadingState":n?r?"successState":"emptyState":"nonEmptyState")),S.x(),C.U((e=>({kind:e}))))))}function Iy(e,t){return r.Z.fromSideEffect((t=>{switch(t.kind){case"longFormFeedMount":return e.feed.onFeedMount();case"toggleShortFormFeed":return e.feedForm.onToggleFeedForm("shortForm");case"toggleLens":return e.feedLens.onToggleLens(t.lensId);default:(0,D.L0)(t)}}),f.h.combine(t,e.suggestionCount.activeFeedSuggestionCount,e.feedForm.state.view("supportedForms").view((e=>e.has("shortForm"))),e.feedLens.lenses,((e,t,n,r)=>(0,s.zG)(e,i.map((e=>({suggestionCount:t,canCollapseToShortForm:n,feedId:e,lenses:(0,s.zG)([zt.lensCorrectnessFeed,zt.lensClarityFeed,zt.lensEngagementFeed,zt.lensDeliveryFeed,zt.lensStyleGuideFeed],R.UI((e=>i.fromNullable(r.get(e)))),R.oA)})))))).pipe(E.oA))}var Ay=n(40330);function By(e,t=Math.random){const n=nh(t),o=f.h.create([]);return r.Z.fromSideEffect((t=>{const n=t.action;switch(n.kind){case"sduiNotify":return n.actions.find((e=>"prevCard"===e.type||"nextCard"===e.type))&&o.set(n.actions.filter(Ay.zx.Action.isTransitionAction)),ly(n.actions)&&e.suggestionCount.onSuggestionAddressed(),e.feed.processActions(n.actions,n.item,n.actionScope,n.sourceId);case"sduiFocusedItemMount":return e.feed.onFocusedItemMount(n.item);case"shortFormFeedAnimationEnd":return o.set([]);case"shortFormFeedMount":return o.set([]),e.feed.onFeedMount();case"toggleLongFormFeed":return e.feedForm.onToggleFeedForm("longForm");default:(0,D.L0)(n)}}),G.aj([(a=e.feed.feed,a.pipe(Qt.R(((e,t)=>(0,s.zG)(t,i.chain((e=>$.Y(i.option)({feedId:i.some(e.id),item:Et(e.collection),index:St(e.collection),size:i.some(kt(e.collection))}))),i.map((({feedId:t,item:n,index:r,size:o})=>({feedId:t,item:n,isFirst:0===r,isLast:r===o-1,prevItem:(0,s.zG)(e,i.chain((e=>e.item.id===n.id?e.prevItem:i.some(e.item))))}))))),i.none))),e.checkingState.firstCheckingFinished,e.suggestionCount.activeFeedSuggestionCount,e.feedForm.state.view("supportedForms").view((e=>e.has("longForm"))),e.suggestionCount.someSuggestionsAddressed,o]).pipe(C.U((([e,t,r,o,a,l])=>(0,s.zG)(e,i.fold((()=>t?{kind:a?"successState":"emptyState",emptyContentIndex:n}:{kind:"loadingState"}),(({item:e,prevItem:t,isFirst:n,isLast:i})=>({kind:"nonEmptyState",item:Object.assign(Object.assign({},e),{content:(0,s.zG)(e.content,cy(n,i))}),prevItem:t,transitions:l,suggestionCount:r,canExpandToLongForm:o}))))))));var a}const Oy=()=>U.of(null);function Ry(e){return r.Z.composeUnion({none:Oy,shortFormFeed:r.Z.composeKnot({feed:(0,s.zG)(e.revision,i.fold((()=>Oy),By))}),longFormFeed:r.Z.composeKnot({feed:(0,s.zG)(e.revision,i.fold((()=>Oy),(t=>_y(Object.assign(Object.assign({},t),{lifecycle:e.lifecycle})))))})},(()=>f.h.combine(e.routing.activeView,(0,s.zG)(e.revision,i.fold((()=>f.h.create(null)),(e=>e.feedForm.state.view("feedForm")))),((e,t)=>X(e)&&null!==t?{kind:"home"===e.kind?"shortForm"===t?"shortFormFeed":"longForm"===t?"longFormFeed":(0,D.L0)(t):"thread"===e.kind?"none":(0,D.L0)(e)}:{kind:"none"}))))}function Ty(e){const t=e.assistant.state.view("session").view((e=>(0,s.zG)(e,Q.z.toStarted,i.fold(s.jv,(e=>e.voiceProfile.needsSetup)))));return r.Z.composeOption(r.Z.fromSideEffect((t=>e.notify(t)),null),(()=>t.view((e=>e?i.some(null):i.none))))}function Ny(e,t,n,i){return r.Z.fromSideEffect((t=>e.notify(t)),G.aj([t,e.assistant.state.view("textBox")]).pipe(C.U((([e,t])=>({icon:"regularAction"===e.kind?W.aU.extractActionIcon(e.action):ge.left(e.kind),label:"regularAction"===e.kind?e.action.label:"allResults"===e.kind?"More":"go"===e.kind?`${t.trim()}`:(0,D.L0)(e),action:e,mode:n,customViewOpts:i})))))}function My(e,t,n,o){return r.Z.composeList(R.Ot,(()=>t.pipe(C.U(i.getOrElse((()=>[]))))),(t=>Ny(e,U.of(t),n,o)))}function Uy(e,t){return r.Z.composeList(R.Ot,(()=>t.pipe(C.U((e=>(0,s.zG)(e,R.Su(((e,t)=>({category:t,isFirst:0===e})))))))),(({category:t,isFirst:n})=>function(e,t,n){const o=e.assistant.state.view((({session:e,contextualActions:t})=>(0,s.zG)($.g(i.option)((0,s.zG)(e,Q.z.toStarted,i.chain((e=>e.activeBoundaryContext.selection))),t),i.isSome)));return r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),U.of({groupId:t.groupId,label:t.label,view:t.view})),actions:My(e,U.of(i.some(t.actions)),"standard",{isPinned:t.view===W.aU.Store.View.pinned}),header:r.Z.composeUnion({default:()=>U.of({label:t.label}),withSelectionContext:r.Z.fromSideEffect((t=>e.notify(t)),U.of({label:t.label}))},(()=>o.pipe(C.U((e=>({kind:e&&n?"withSelectionContext":"default"}))))))})}(e,t,n)))}function Fy(e,t=s.W8,n=i.some(3)){const r=(0,s.zG)(K.hX((e=>t(e.action)))(e),i.getOrElseW((()=>R.cS)));return(0,s.zG)(n,i.filter((e=>r.length>e)),i.map((e=>K.Ss(R.ke(e)(r),{kind:"allResults",filterPredicate:t}))),i.getOrElseW((()=>r)))}function zy(e){const t=e.assistant.state.view("session").view((e=>Cy.w.isQuickReply(e.mode))),n=e.assistant.state.view("session").view("selectedText"),o=e.assistant.state.view("contextualActions").view((e=>(0,s.zG)(e,i.map(K.UI(Kn.RegularAction.make)),i.map(K.IR(Kn.RegularAction.ordByActionStore)),i.map(K.UI((e=>({groupId:e[0].action.group.id,label:e[0].action.store.label,actions:Fy(e,(t=>W.aU.Store.Id.eq.equals(t.store.id,e[0].action.store.id)),e[0].action.store.maxCountBeforeClipping),view:e[0].action.store.view})))))));return r.Z.composeUnion({none:()=>U.of(null),loading:()=>f.h.combine(t,n,((e,t)=>({header:e?"Ways to reply":i.isSome(t)?`Work with: ${t.value}`:"Ideas for you",isQuickReply:e,withContext:i.isSome(t)}))),loaded:jy(e,o,t)},(()=>f.h.combine(o,e.assistant.state.view("session"),e.theme.theme.view("flatUI"),((e,t,n)=>n?{kind:"none"}:i.isSome(e)?"started"===t.kind&&"pending"===t.activeContext.kind?{kind:"loading"}:{kind:"loaded"}:"started"===t.kind?"pending"===t.activeContext.kind?{kind:"loading"}:{kind:"none"}:{kind:"loading"}))))}function jy(e,t,n){const i=e.theme.theme.view("flatUI");return r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),f.h.combine(n,i,((e,t)=>({showReportMenu:e&&!t})))),actions:Uy(e,t.pipe(E.oA))})}function Py(e){return r.Z.composeKnot({suggestions:Ry(e),voiceBanner:Ty(e),documentOverview:wy(e),intent:Ey(e),defaultActions:zy(e),generationError:ky(e),detectedReferences:Sy(e)})}function Gy(e,t,n,o){const a=e.assistant.state.view("session").view((0,s.ls)(Q.z.toStarted,i.chain((e=>i.fromNullable(e.results[o+1]))),i.filter(Zn.x.isComplete),i.chain((e=>e.boundaryContextId)))),l=t.pipe(ie.M(a),C.U((([e,t])=>(0,s.zG)(e,i.filter((0,z.Kg)(Zn.x.isComplete,Zn.x.isInProgress)),i.chain((e=>e.boundaryContextId)),i.filter((e=>!!i.isNone(t)||e!==t.value)))))),c=l.pipe(C.U(i.chain((t=>e.assistant.getContextById(t))))),u=c.pipe(C.U((e=>(0,s.zG)(e,i.chain((e=>e.selection))))));return r.Z.composeOption(r.Z.fromSideEffect((t=>e.notify(t)),G.aj([c,e.assistant.state.view("session").view((0,s.ls)(Q.z.toStarted,i.map((({textRevision:e})=>e)))),e.assistant.state.view("session").view((0,s.ls)(Q.z.toStarted,i.map((({selectionContextStatus:e})=>e))))]).pipe(C.U((([e,t,n])=>$.Y(i.option)({selection:(0,s.zG)(e,i.chain((({selection:e})=>e))),currentTextRevision:t,contextTextRevision:(0,s.zG)(e,i.map((({textRevision:e})=>e))),selectionContextStatus:n}))),E.oA,C.U((({selection:e,currentTextRevision:t,contextTextRevision:n,selectionContextStatus:r})=>({selectedText:e.text,selectedRange:r===Q.z.SelectionContextStatus.dynamic&&i.isSome(n)&&t===n.value?e.range:void 0}))))),(()=>G.aj([u,n]).pipe(C.U((([e,t])=>(0,s.zG)(e,i.filter((()=>t))))))))}function Ly(e){return()=>e.assistant.state.view("session").view(Q.z.toStarted).view((0,s.ls)(i.chain((e=>e.inProgressResult)),i.fold((()=>({text:""})),(e=>({text:e.text})))))}function Dy(e,t){return Gy(e,e.assistant.state.view("session").view(Q.z.toStarted).view(i.chain((e=>e.inProgressResult))),t,-1)}function Zy(e){const t=f.h.combine(e.assistant.state.view("session"),e.routing.activeView,((e,t)=>(0,s.zG)(Q.z.toStarted(e),i.chain((e=>e.inProgressResult)),i.filter((()=>"thread"===t.kind)),i.map((e=>({result:e}))))));return r.Z.composeOption(function(e){return r.Z.composeKnot({content:r.Z.composeKnot({root:Ly(e),header:Dy(e,e.theme.theme.view("flatUI"))}),header:Dy(e,e.theme.theme.view("flatUI").view((e=>!e)))})}(e),(()=>t))}function Hy(e,t){return r.Z.composeOption(r.Z.fromSideEffect((t=>e.notify(t)),e.userSurvey.state.pipe(C.U((e=>(0,s.zG)(e.activeSurvey,i.map((t=>({survey:t,state:e})))))),E.oA,C.U((({survey:e,state:t})=>({survey:e,stage:t.stage,transitionStage:t.transitionStage,rating:t.rating,openAnswer:(0,s.zG)(t.openAnswer,i.getOrElse((0,s.a9)(""))),ratingLabels:(0,s.zG)(t.activeSurvey,i.fold((0,s.a9)([]),(e=>e.ratingLabels))),errors:t.errors}))))),(()=>f.h.combine(e.userSurvey.state,t,e.routing.activeView,(({activeSurvey:e,stage:t},n,r)=>(0,s.zG)(e,i.filter((e=>"thread"===r.kind&&(0,s.zG)(n,ue.FX(e.resultId))&&t!==Fn.x.Stage.Type.Closed)))))))}var Vy=n(27278);function $y(e){const t=e.assistant.state.view("contextualActions").view((e=>(0,s.zG)(e,i.map(K.UI(Kn.RegularAction.make)),i.map((e=>Fy(e,(0,s.ff)(W.aU.isSkillAction)))),i.chain(K.c2))));return r.Z.composeUnion({none:()=>U.of(null),loading:()=>U.of(null),actions:r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),null),actions:My(e,t,"compact")})},(()=>f.h.combine(t,e.theme.theme.view("flatUI"),e.assistant.state.view("genAIAvailability"),e.assistant.state.view("session"),((e,t,n,r)=>(0,s.zG)(Q.z.toStarted(r),i.map((e=>e.activeContext)),i.filter((()=>!t)),i.fold((()=>"none"),(t=>(0,s.zG)(e,i.filter((()=>!q._.isUnavailable(n))),i.fold((()=>q._.isUnavailable(n)||!Vy._.isPending(t)?"none":"loading"),(()=>"actions"))))),(e=>({kind:e})))))))}function Ky(e){return()=>e.assistant.state.view("session").view("selectedText").pipe(C.U((e=>({header:i.isSome(e)?`Work with: ${e.value}`:"Ideas for you",isQuickReply:!1,withContext:i.isSome(e)}))))}function Wy(e){const t=e.assistant.state.view("contextualActions").view((e=>(0,s.zG)(e,i.chain(K.hX((0,z.ff)(W.aU.isSkillAction))),i.map(K.UI(Kn.RegularAction.make)),i.map(K.IR(Kn.RegularAction.ordByActionStore)),i.map(K.UI((e=>({groupId:e[0].action.group.id,label:e[0].action.store.label,actions:Fy(e,(t=>W.aU.Store.Id.eq.equals(t.store.id,e[0].action.store.id))),view:e[0].action.store.view})))))));return r.Z.composeKnot({actions:Uy(e,t.pipe(E.oA))})}function qy(e){return r.Z.composeOption(r.Z.composeKnot({actions:r.Z.composeUnion({loading:Ky(e),loaded:Wy(e)},(()=>e.assistant.state.view("session").view(Q.z.toStarted).pipe(C.U(i.map((e=>"pending"===e.activeContext.kind?{kind:"loading"}:{kind:"loaded"}))),E.oA)))}),(()=>e.assistant.state.view("session").view(Q.z.toStarted)))}function Qy(e){const t=f.h.combine(e.assistant.state.view("session"),e.routing.activeView,e.theme.theme.view("flatUI"),((e,t,n)=>(0,s.zG)(e,Q.z.toStarted,i.filter((e=>"thread"===t.kind&&i.isNone(e.inProgressResult)&&i.isNone(e.error)&&!n)),i.map((e=>e.results)),i.chain(K.c2))));return r.Z.composeOption(function(e){return r.Z.composeUnion({followUp:r.Z.composeKnot({actions:$y(e)}),newContext:qy(e)},(()=>e.assistant.state.view("session").view(Q.z.toStarted).pipe(C.U((e=>(0,s.zG)(e,i.map((e=>e.activeContext.isBoundary&&i.isSome(e.activeContext.textRevision)&&(Vy._.isPending(e.activeContext)||i.isSome((0,s.zG)(i.fromNullable(e.results[0]),i.filter((e=>!Zn.x.isHistory(e))),i.chain((({boundaryContextId:e})=>e)),i.filter((t=>t!==e.activeContext.id)))))?"newContext":"followUp"))))),E.oA,C.U((e=>({kind:"followUp"===e?"followUp":"newContext"}))))))}(e),(()=>t))}var Yy=n(24713),Xy=n(26328);function Jy(e,t){return r.Z.fromSideEffect((t=>e.notify(t)),t)}function ek(e,t){const n=function(e,t){return e.assistant.state.view((({genAIAvailability:e,session:n})=>(0,s.zG)(Q.z.toStarted(n),i.map((n=>{const r=q._.isPassive(e)||q._.isUnavailable(e),o=(0,s.zG)(n.activeContext.userPromptAction,i.chain((e=>(0,s.zG)(t.header.copiablePrompt,i.map((t=>W.aU.UserPromptActionValue.fromInput(e,t,i.none,i.none)))))));return{actions:(0,s.zG)(Xy.nI(n.activeContext.availableActions.filter((0,z.Kg)(W.aU.isFollowUpQuestionActionInput,W.aU.isQuickActionInput))),i.filter((()=>!r)),i.map(Xy.UI(Kn.RegularAction.make))),originalAction:o,disabled:r,result:t}}))))).pipe(E.oA)}(e,t),o=n.pipe(Yy.j("actions"));return r.Z.composeKnot({root:Jy(e,n),actions:My(e,o,"standard")})}function tk(e,t){return r.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.pipe(w.w((e=>{const n=(0,s.zG)(t.header.copiablePrompt,i.fold((()=>({kind:Dv.searchLabel,label:t.header.label,iconUrl:t.header.iconUrl})),(n=>({kind:Dv.clickableSearchLabel,label:t.header.label,disabled:q._.isUnavailable(e.genAIAvailability),copiablePrompt:n}))));return Zn.x.isComplete(t)&&function(e){return(0,s.zG)(e.replacementDelta,ge.fold(s.yR,(e=>e.generic)),(e=>e.ops.some((e=>{var t;return vv.s.isInsert(e)&&!!(null===(t=e.attributes)||void 0===t?void 0:t[Rv.knowledgeHubTerm])}))))}(t)&&t.timestamp+3e3>Date.now()?T.H(t.timestamp+3e3-Date.now()).pipe(ha.h(n),k.O({kind:Dv.knowledgeHub})):U.of(n)}))))}function nk(e,t,n,o){return r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view((({genAIAvailability:e,activeCards:i,session:r,referencesVisibility:o,overrideCardVoice:a})=>{var l,c;return{disabled:q._.isUnavailable(e),result:t,isActive:(0,s.zG)(!!i.has(t.id)||0===i.size&&n&&!ik(Q.z.toStarted(r))),isReferencesOpen:null!==(l=o.get(t.id))&&void 0!==l&&l,isMyVoice:(null!==(c=a.get(t.id))&&void 0!==c?c:(0,s.zG)(t.replacementDelta,ge.fold((()=>Zn.x.GeneratedTextVoice.generic),(e=>e.preferVoice))))===Zn.x.GeneratedTextVoice.user}}))),header:tk(e,t),contextHeader:Gy(e,U.of(i.some(t)),U.of(!0),o)})}function ik(e){return(0,s.zG)(e,i.fold(s.jv,(e=>i.isSome(e.inProgressResult)||i.isSome(e.error))))}function rk(e,t){return r.Z.composeList(R.Ot,(()=>t.pipe(C.U((0,s.ls)(R.ke(50),R.Su(((e,t)=>({result:t,isLast:0===e,index:e}))),R.GY)))),(({result:t,isLast:n,index:i})=>function(e,t,n,i){return r.Z.composeUnion({promptResultComplete:nk(e,t,n,i),aiUsageNotification:ek(e,t)},(()=>U.of(Zn.x.isAIUsageNotification(t)?{kind:"aiUsageNotification"}:{kind:"promptResultComplete"})))}(e,t,n,i)))}function ok(e,t){return r.Z.composeUnion({none:()=>U.of(null),loading:()=>U.of({root:{text:""}}),loaded:r.Z.composeKnot({results:rk(e,t.view(i.getOrElse((()=>[]))))})},(()=>f.h.combine(t,e.assistant.state.view("session").view("kind"),e.routing.activeView,((e,t,n)=>"thread"===n.kind?{kind:"starting"===t?"loading":i.isSome(e)?"loaded":"none"}:{kind:"none"}))))}function sk(e){const t=e.assistant.state.view("session").view((0,s.ls)(Q.z.toStarted,i.map((e=>e.results)),i.chain(K.c2)));return r.Z.composeKnot({documentOverview:wy(e),intent:Ey(e),resultList:ok(e,t),lastResultSurvey:Hy(e,t.view(i.map((0,s.ls)(K.YM,(e=>e.id))))),lastResultActions:Qy(e),inProgressResult:Zy(e),generationError:ky(e),detectedReferences:Sy(e)})}function ak(e){return r.Z.composeUnion({home:Py(e),thread:sk(e),error:ky(e),followUpPrompt:ay(e),legacyVoiceProfile:vy(e),voiceProfile:xy(e),feedbackForm:sy(e),skill:gy(e,!1),toneReport:r.Z.composeKnot({toneReport:fy(e)}),settings:hy(e),plagiarism:(0,s.zG)(e.revision,i.fold((()=>()=>U.of(null)),(t=>r.Z.composeKnot({plagiarism:py(Object.assign(Object.assign({},t),{lifecycle:e.lifecycle}))}))))},(()=>e.routing.activeView))}const lk=new Xs(999999);var ck;function uk(e){const t=e.promptMenu.state.pipe(Qt.R(((e,t)=>(0,s.zG)(t,i.fold((()=>e),(()=>e+1)))),0));return r.Z.fromSideEffect((t=>e.notify(t)),G.aj([e.assistant.state,t,e.routing.activeView]).pipe(C.U((([e,t,n])=>{return{kind:(0,s.zG)(Q.z.toStarted(e.session),i.fold((()=>"loading"),(e=>(0,s.zG)(e.inProgressResult,i.fold((()=>"ready"),(()=>"waitingForResult")))))),genAIAvailability:e.genAIAvailability,placeholder:(r=e,(0,s.zG)(r.selectedAction,i.chain((e=>""!==e.args[0].label.trim()?i.some([e.args[0].label]):i.none)),i.alt((()=>(0,s.zG)(r.userPromptAction,i.map((e=>[e.arg.label]))))))),text:e.textBox,autofocusToken:ck.create(`${n.kind}_${(0,s.zG)(Q.z.toStarted(e.session),i.chain((e=>e.inProgressResult)),i.fold((()=>"done"),(()=>"inProgress")))}_${(0,s.zG)(e.selectedAction,i.fold((()=>"no-selected-action"),(()=>"selected-action")))}_${e.promptAutofocusToken}_promptMenuOpen:${t}`)};var r})),S.x()))}function dk(e){return r.Z.fromSideEffect((t=>e.notify(t)),e.promptMenu.state.view((0,s.ls)(i.map((e=>e.actions)),pk)))}function mk(e){var t,n;return Object.assign(Object.assign({},e),{group:Object.assign(Object.assign({},e.group),{rank:null!==(t=W.aU.knownGroupRank[e.group.id])&&void 0!==t?t:e.group.rank,label:null!==(n=W.aU.knowGroupLabels[e.group.id])&&void 0!==n?n:e.group.label})})}function pk(e){return(0,s.zG)(e,i.map(K.UI(mk)),i.chain(K.hX((e=>e.group.label.trim().length>0))),i.map(K.IR(W.aU.ListableActionInput.ordByGroup)),i.fold((()=>({actionGroups:[]})),(e=>({actionGroups:e.map((e=>({label:e[0].group.label,actions:(0,s.zG)(e,K.UI((e=>({action:Kn.RegularAction.make(e),label:e.label,icon:e.iconUrl}))))})))}))))}function hk(e){return(0,s.zG)(e,R.pO((e=>{const{init:t,rest:n}=R.zT((t=>W.aU.Group.Id.eq.equals(t.group.id,e[0].group.id)))(e);return[t,n]})),R.UI((e=>$.Y(i.Applicative)({groupId:(0,s.zG)(e,R.YM,i.map((e=>e.group.id))),label:(0,s.zG)(e,R.YM,i.map((e=>e.group.label))),view:i.some(W.aU.Store.View.normal),actions:(0,s.zG)(e,R.UI(Kn.RegularAction.make),K.c2),withContext:i.some(!1)}))),R.oA,K.c2,i.getOrElse((()=>[{label:e[0].group.label,groupId:e[0].group.id,view:W.aU.Store.View.normal,actions:[Kn.RegularAction.make(e[0])],withContext:!1}])))}function gk(e){const t=e.promptMenu.state.view((0,s.ls)(i.map((e=>e.actions)),i.map(K.DY(W.aU.ListableActionInput.ordByGroup)),i.map(hk)));return r.Z.composeOption(Uy(e,t.pipe(E.oA)),(()=>t))}function fk(e){return r.Z.composeKnot({searchResults:My(e,e.promptMenu.state.view((0,s.ls)(i.map((e=>e.actions)),i.map(K.UI(Kn.RegularAction.make)))),"standard"),customPromptGo:Ny(e,U.of({kind:"go"}),"standard")})}function vk(e){return r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),e.promptMenu.state.view((0,s.ls)(i.map((e=>e.actions)),xk))),goAction:r.Z.composeOption(Ny(e,U.of({kind:"go"}),"standard"),(()=>e.assistant.state.pipe(C.U((e=>q._.isUnavailable(e.genAIAvailability)?i.none:i.some(null))))))})}function xk(e){return(0,s.zG)(e,i.fold((()=>({actions:[]})),(e=>({actions:e.map((e=>({action:Kn.RegularAction.make(e),label:e.label,icon:e.iconUrl})))}))))}function bk(e){return r.Z.composeOption(r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),U.of(null)),content:r.Z.composeUnion({legacySearchResults:fk(e),legacyActionStore:gk(e),searchResults:vk(e),actionStore:dk(e),none:()=>U.of(null)},(()=>f.h.combine(e.theme.theme.view("flatUI"),e.promptMenu.state,((e,t)=>(0,s.zG)(t,i.map((({kind:t})=>e?{kind:t}:{kind:"actionStore"===t?"legacyActionStore":"legacySearchResults"})),i.getOrElse((()=>({kind:"none"}))))))))}),(()=>e.promptMenu.state))}function yk(e){const t=f.h.combine(e.theme.theme.view("flatUI"),e.assistant.state.view("genAIAvailability"),e.promptMenu.state,((e,t,n)=>e&&q._.isUnavailable(t)&&i.isNone(n)));return r.Z.composeOption(function(e){return r.Z.composeKnot({root:r.Z.fromSideEffect((t=>e.notify(t)),e.promptMenu.state.pipe(C.U((e=>({menuExpanded:i.isSome(e)}))))),promptField:uk(e),promptStudioMenu:bk(e)})}(e),(()=>t.view((0,z.RN)(i.none,i.some(null)))))}function kk(e,t=f.h.create(!1)){return r.Z.fromSideEffect((t=>e.notify(t.action.action)),f.h.combine(e.assistant.state.view("session"),e.assistant.state.view("genAIAvailability"),e.routing.activeView,e.theme.theme.view("flatUI"),t,((e,t,n,r,o)=>{const s="started"!==e.kind||e.historyStatus!==Q.z.HistoryStatus.hasHistory&&0===e.results.length?"disabled":e.historyStatus===Q.z.HistoryStatus.historyRequested?"loading":"enabled",a="home"===n.kind&&!q._.isUnavailable(t);return r?a&&!o?i.some({state:s,flatUI:!0}):i.none:"started"===e.kind&&a&&(e.historyStatus===Q.z.HistoryStatus.hasHistory||e.historyStatus===Q.z.HistoryStatus.historyRequested||e.results.length>0)?i.some({state:s,flatUI:!1}):i.none})))}!function(e){e.create=function(e){return null!=e?e:lk.newId()}}(ck||(ck={}));const wk=["toneAction","plagiarismAction","skillAction","followUpQuestion"],Ck={quickAction:new Set(wk.slice(0)),toneAction:new Set(wk.slice(1)),plagiarismAction:new Set(wk.slice(2)),skillAction:new Set(wk.slice(3)),followUpQuestion:new Set(wk.slice(4))},Ek=me.fromCompare(((e,t)=>e.kind===t.kind?0:Ck[e.kind].has(t.kind)?-1:1));function Sk(e){return r.Z.fromSideEffect((t=>e.notify(t)),f.h.combine(e.promptActions.contextualActions,e.promptActions.toneAction,e.promptActions.plagiarismAction,e.promptActions.skillActions,e.assistant.state.view("genAIAvailability"),((e,t,n,i,r)=>{const o=[t,n],a=(0,s.zG)(e.actions.concat((0,s.zG)(o,R.oA)).concat(i).map(Kn.RegularAction.make),R.DY(me.contramap((e=>e.action))(Ek)));return{loading:e.loading,actions:a,hasMore:e.actions.length>a.length,hasHistoryButton:!q._.isUnavailable(r)}})))}function _k(e){return r.Z.fromSideEffect((t=>e.notify(t)),f.h.combine(e.promptActions.contextualActions,e.promptActions.toneAction,e.promptActions.plagiarismAction,e.promptActions.skillActions,e.routing.activeView,(({actions:e,loading:t},n,i,r,o)=>{const a="home"===o.kind?3:2,l=[n,i],c=(0,s.zG)(e.concat((0,s.zG)(l,R.oA)).concat(r).map(Kn.RegularAction.make),R.DY(me.contramap((e=>e.action))(Ek)),R.ke(a));return{loading:t,maxActionsCount:a,actions:c,hasMore:e.length>c.length}})))}function Ik(e){return r.Z.composeUnion({none:()=>U.of(null),actionBar:Ak(e),actionPanel:Bk(e)},(()=>f.h.combine(e.routing.activeView,e.assistant.state.view("session"),e.theme.theme.view("flatUI"),((t,n,r)=>{if(!X(t)||!r||"thread"===t.kind&&"starting"===n.kind)return{kind:"none"};if(i.isSome(e.revision)&&"home"===t.kind)return{kind:"quickReply"!==n.mode?"actionBar":"actionPanel"};return{kind:(0,s.zG)(Q.z.toStarted(n),i.chain((e=>e.inProgressResult)),i.isSome)?"none":"actionPanel"}}))))}function Ak(e){return r.Z.composeKnot({root:Sk(e),header:r.Z.fromSideEffect((t=>e.notify(t.action.action)),f.h.combine(e.assistant.state.view("session").view("selectedText"),e.promptActions.contextualActions,((e,t)=>(0,s.zG)(e,i.filter((()=>"pending"===t.context.kind)),i.alt((()=>(0,s.zG)(t.context.selection,i.map((e=>e.text))))),i.map((e=>({selectedText:e}))))))),historyButton:kk(e)})}function Bk(e){return r.Z.composeKnot({root:_k(e),header:Ok(e),historyButton:kk(e)})}function Ok(e){return r.Z.fromSideEffect((t=>e.notify(t.action)),f.h.combine(e.routing.activeView,e.promptActions.contextualActions,e.assistant.state.view("session").view("mode"),((e,t,n)=>X(e)?(0,s.zG)(t.context.selection,i.map((e=>e.text)),i.filter((()=>t.context.isBoundary&&i.isSome(t.context.textRevision))),i.fold((()=>"home"===e.kind?{kind:"title",title:"quickReply"===n?"How do you want to reply?":"How do you want to get started?"}:{kind:"none"}),(e=>({kind:"selectionContext",selectedText:e})))):{kind:"none"})))}function Rk(e){return r.Z.composeKnot({header:Ik(e),fieldContainer:yk(e)})}function Tk(e){return r.Z.composeUnion({none:()=>U.of(null),skill:gy(e,!0),promptStudio:Rk(e)},(()=>e.routing.activeView.view((e=>"skill"===e.kind?{kind:"skill"}:X(e)||"followUpPrompt"===e.kind&&"string"===e.inputType?{kind:"promptStudio"}:{kind:"none"}))))}function Nk(e){return(0,s.zG)(e.revision,i.fold((()=>f.h.create(i.none)),(e=>e.suggestionCount.allSuggestionCount.view(i.some))))}function Mk(e){return r.Z.fromSideEffect((t=>{if("suggestionCountButtonClick"===t.kind)return e.routing.pop();(0,D.L0)(t.kind)}),f.h.combine(e.assistant.state.view("session").view((0,s.ls)(Q.z.toStarted,i.chain((e=>e.inProgressResult)),i.isSome)),Nk(e),((e,t)=>(0,s.zG)(t,i.getOrElse((()=>0)),(t=>({count:t,disabled:e}))))))}function Uk(e){return r.Z.composeUnion({withoutSuggestions:()=>U.of(null),withSuggestions:Mk(e)},(()=>Nk(e).view((0,s.ls)(i.filter((e=>e>0)),i.fold((()=>({kind:"withoutSuggestions"})),(()=>({kind:"withSuggestions"})))))))}function Fk(e){return r.Z.fromSideEffect((t=>e.notify(t.action.action)),f.h.combine(e.routing.activeView.view("kind"),e.theme.theme.view("flatUI"),((t,n)=>i.isSome(e.settings)&&"settings"!==t?i.some({flatUI:n}):i.none)))}function zk(e){return(0,s.zG)(e,i.fold((()=>""),(e=>(0,s.zG)(Gn.L.toLegacyVoiceProfile(e),i.fold((()=>"My Voice"),(e=>(0,s.zG)(i.fromNullable(e.styles.find((t=>Gn.L.Style.Id.eq.equals(t.id,e.selectedStyle)))),i.fold((()=>""),(e=>e.label)))))))))}function jk(e){return e.assistant.state.view("session").view((e=>({styleLabel:zk((0,s.zG)(Q.z.toStarted(e),i.map((e=>e.voiceProfile))))})))}function Pk(e){return r.Z.fromSideEffect((t=>e.notify(t)),U.of(null))}function Gk(e){const t=e.assistant.state.view((e=>(0,s.zG)(e.genAIAvailability,i.fromPredicate(q._.isActiveOrPassive),i.filter((()=>i.isSome(Q.z.toStarted(e.session)))))));return r.Z.composeOption(function(e,t,n){return r.Z.fromSideEffect((t=>e.notify(t)),(0,s.zG)(G.aj([t,n]),C.U((([e,t])=>({user:e,genAIAvailability:t})))))}(e,e.assistant.state.view("user"),t.pipe(E.oA)),(()=>f.h.combine(t,e.routing.activeView.view("kind"),((e,t)=>(0,s.zG)(e,i.filter((()=>"voiceProfile"!==t&&"legacyVoiceProfile"!==t&&"feedbackForm"!==t&&"skill"!==t&&"settings"!==t&&"toneReport"!==t)))))))}function Lk(e){return()=>e.user.isGrammarlyInstitutionMember.view((e=>({version:(0,s.zG)(e,i.fromPredicate(Boolean),i.map((()=>d)))})))}function Dk(e){return()=>f.h.combine(e.routing.activeView,e.skill.state,(0,s.zG)(e.toneDetector,i.fold((()=>f.h.create(i.none)),(e=>e.state.view(i.some)))),e.theme.theme.view("flatUI"),((e,t,n,r)=>r?Zk(e,t,n).label:i.none))}function Zk(e,t,n){switch(e.kind){case"home":case"thread":case"error":case"followUpPrompt":case"plagiarism":return{label:i.none,iconUrl:i.none};case"legacyVoiceProfile":case"voiceProfile":return{label:i.some("My voice"),iconUrl:i.none};case"feedbackForm":return{label:i.some("Share your thoughts"),iconUrl:i.none};case"skill":return{label:(0,s.zG)(t,i.map((e=>e.skill.displayName))),iconUrl:(0,s.zG)(t,i.map((e=>e.skill.iconUrl)))};case"toneReport":return{label:(0,s.zG)(n,i.filter(ne.isLoaded),i.chain((e=>e.brandToneInfo)),i.chain((({institutionName:e})=>e)),i.map((e=>`${e} Tone Detector`)),i.alt((()=>i.some("Tone insights")))),iconUrl:(0,s.zG)(n,i.filter(ne.isLoaded),i.chain((e=>e.brandToneInfo)),i.chain((e=>e.institutionLogo)))};case"settings":return{label:i.some("Settings"),iconUrl:i.none};default:(0,D.L0)(e)}}function Hk(e){return r.Z.composeKnot({left:Vk(e),right:r.Z.composeKnot({historyButton:kk(e,e.theme.theme.view("flatUI")),credits:Gk(e),voiceButton:qk(e),settingsButton:Fk(e),closeButton:Pk(e)}),pageTitle:Dk(e)})}function Vk(e){const t=f.h.combine(e.assistant.state,e.routing.activeView,e.theme.theme.view("flatUI"),(({session:t},n,r)=>(0,s.zG)(Q.z.toStarted(t),i.fold((()=>ee(n)?"backButton":"logoOnly"),(()=>{if("error"===n.kind)return"logoOnly";if("home"===n.kind||"thread"===n.kind){if("home"===n.kind)return i.isSome(e.revision)||r?"logoOnly":"logoAndVoiceButton";if("thread"===n.kind)return i.isSome(e.revision)?"suggestionCount":r?"logoOnly":"logoAndVoiceButton";(0,D.L0)(n)}else{if("followUpPrompt"===n.kind)return r?"backButton":"backButtonAndVoiceButton";if(ee(n))return"backButton";(0,D.L0)(n)}})))));return r.Z.composeUnion({logoOnly:Lk(e),suggestionCount:r.Z.composeKnot({button:Uk(e)}),logoAndVoiceButton:Wk(e),backButton:$k(e),backButtonAndVoiceButton:Kk(e)},(()=>t.pipe(k.O("logoOnly"),C.U((e=>({kind:e}))))))}function $k(e){return r.Z.fromSideEffect((t=>e.notify(t)),f.h.combine(e.routing.activeView,e.skill.state,(0,s.zG)(e.toneDetector,i.fold((()=>f.h.create(i.none)),(e=>e.state.view(i.some)))),e.theme.theme.view("flatUI"),((e,t,n,r)=>(0,s.zG)(Zk(e,t,n),(({label:t,iconUrl:n})=>({activeViewLabel:r?i.none:t,activeViewIconUrl:n,activeView:e}))))))}function Kk(e){return r.Z.fromSideEffect((t=>e.notify(t.action)),f.h.combine(jk(e),e.routing.activeView,((e,t)=>({back:{activeViewIconUrl:i.none,activeViewLabel:i.none,activeView:t},voice:e}))))}function Wk(e){return r.Z.fromSideEffect((t=>e.notify(t)),jk(e).view((e=>Object.assign(Object.assign({},e),{kind:"logoAndVoiceButton"}))))}function qk(e){return r.Z.fromSideEffect((t=>e.notify(t.action.action)),f.h.combine(e.assistant.state.view("session"),e.routing.activeView,e.theme.theme.view("flatUI"),((t,n,r)=>(0,s.zG)(Q.z.toStarted(t),i.map((e=>e.voiceProfile)),i.filter((()=>(r||i.isSome(e.revision))&&X(n))),i.map((e=>({styleLabel:zk(i.some(e)),flatUI:r})))))))}function Qk(e){return r.Z.composeKnot({assistant:r.Z.composeKnot({root:ry(e),content:ak(e),header:Hk(e),footer:Tk(e),notifications:iy(e),onboarding:(t=e.onboarding,r.Z.fromSideEffect((e=>t.notify(e)),t.onboardingStep.view((e=>({step:e})))))})});var t}function Yk(e){var t;const n=null!==(t=e.logger)&&void 0!==t?t:new o.W("Assistant"),s=ai(e,{metricsService:new h({lifecycleService:e.lifecycleService,monitoringService:e.monitoringService,revisionEngine:i.fromNullable(e.revisionEngine),logger:n}),logger:n});return{assistantUI:r.UI.mount((a=s,r.UI.Knot.make(r.UI.Grid.make((({slots:e})=>he.createElement(_r.Provider,{value:{notifyUnmount:e=>a.notify(e)}},he.createElement(Oi.N.Provider,{value:a.theme.theme},e.assistant)))),{assistant:ny})),Qk(s)),dispose:()=>s.dispose()};var a}},45174:(e,t,n)=>{n.d(t,{N:()=>s});var i=n(27378),r=n(23239),o=n(12968);const s=i.createContext(r.h.create(o.u))},52528:(e,t,n)=>{n.d(t,{e:()=>i});class i{constructor(e){this._theme=e,this.theme=this._theme}}},20545:(e,t,n)=>{n.d(t,{T:()=>i});var i,r=n(22232);!function(e){let t;!function(e){e.initial="initial",e.initialBTS="initialBTS",e.history="history",e.prompts="prompts",e.review="review",e.rewrite="rewrite",e.knowledgeHub="knowledgeHub",e.references="references"}(t=e.StepName||(e.StepName={})),function(e){e.isAssistantOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.knowledgeHub:case e.references:case e.history:return!0;case e.initial:case e.initialBTS:case e.rewrite:return!1;default:return(0,r.L0)(t)}},e.isTooltipOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.rewrite:case e.knowledgeHub:case e.references:case e.history:return!0;case e.initial:case e.initialBTS:return!1;default:return(0,r.L0)(t)}}}(t=e.StepName||(e.StepName={}))}(i||(i={}))},24451:(e,t,n)=>{n.d(t,{l:()=>i});var i,r=n(22232);!function(e){let t;!function(e){e.close="close",e.tryItOut="tryItOut",e.mount="mount"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e}}(i||(i={})),(0,r.L0)(void 0)},1846:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(95195),r=n(5114),o=n(64015),s=n(57050),a=n(69243);var l;!function(e){const t=["initial","initialBTS","prompts","review","rewrite","knowledgeHub","references","history"],n=["extension","editor","llamaMac","llamaWin"];function l(e,t){return`${e}|${t}`}function c(e,t,n){return`${e}|${t}|${n}`}function u(e){return r.isSome(x(e))}function d(e){return r.isSome(b(e))}const m=new a.Dy("CompletedStepName",(e=>"string"==typeof e&&u(e)),((e,t)=>"string"==typeof e&&u(e)?a.Vp(e):a.Rn(e,t)),a.yR),p=new a.Dy("LastSeenStepName",(e=>"string"==typeof e&&d(e)),((e,t)=>"string"==typeof e&&d(e)?a.Vp(e):a.Rn(e,t)),a.yR),h=a.OT(a.r$({completed:a.Bk(m),lastSeen:a.Bk(p)}));let g,f,v;function x(e){return(0,s.zG)(r.some(e.split("|")),r.filter((e=>2===e.length)),r.filter((e=>t.includes(e[0])&&n.includes(e[1]))))}function b(e){return(0,s.zG)(r.some(e.split("|")),r.filter((e=>3===e.length)),r.filter((e=>t.includes(e[0])&&n.includes(e[1]))),r.filterMap((e=>(0,s.zG)(parseInt(e[2],10),(t=>Number.isNaN(t)?r.none:r.some([e[0],e[1],t]))))))}function y(e,t,n){var i,r,o,s;return{extension:{completed:t.some((t=>t[0]===e&&"extension"===t[1])),lastSeen:null===(i=n.find((t=>t[0]===e&&"extension"===t[1])))||void 0===i?void 0:i[2]},editor:{completed:t.some((t=>t[0]===e&&"editor"===t[1])),lastSeen:null===(r=n.find((t=>t[0]===e&&"editor"===t[1])))||void 0===r?void 0:r[2]},llamaMac:{completed:t.some((t=>t[0]===e&&"llamaMac"===t[1])),lastSeen:null===(o=n.find((t=>t[0]===e&&"llamaMac"===t[1])))||void 0===o?void 0:o[2]},llamaWin:{completed:t.some((t=>t[0]===e&&"llamaWin"===t[1])),lastSeen:null===(s=n.find((t=>t[0]===e&&"llamaWin"===t[1])))||void 0===s?void 0:s[2]}}}e.emptyClientStep={completed:!1,lastSeen:void 0},function(e){function t(e){return t=>e(t.extension)||e(t.editor)||e(t.llamaMac)||e(t.llamaWin)}e.anyClient=t,e.anyClientCompleted=t((e=>e.completed))}(g=e.Step||(e.Step={})),e.emptyStep={extension:e.emptyClientStep,llamaMac:e.emptyClientStep,llamaWin:e.emptyClientStep,editor:e.emptyClientStep},e.codec=new a.Dy("UpstreamOnboarding",(e=>h.is(e)),((e,t)=>(0,s.zG)(h.validate(e,t),i.map((e=>{const t=(0,s.zG)(e.completed||[],o.UI(x),o.oA),n=(0,s.zG)(e.lastSeen||[],o.UI(b),o.oA);return{initial:y("initial",t,n),initialBTS:y("initialBTS",t,n),prompts:y("prompts",t,n),review:y("review",t,n),rewrite:y("rewrite",t,n),knowledgeHub:y("knowledgeHub",t,n),references:y("references",t,n),history:y("history",t,n)}})))),(e=>({completed:(0,s.zG)(Object.entries(e),o.tS((([e,t])=>function(e,t){return(0,s.zG)(Object.entries(t),o.tS((([t,n])=>n.completed?[l(e,t)]:[])))}(e,t)))),lastSeen:(0,s.zG)(Object.entries(e),o.tS((([e,t])=>function(e,t){return(0,s.zG)(Object.entries(t),o.tS((([t,n])=>n.lastSeen?[c(e,t,n.lastSeen)]:[])))}(e,t))))}))),e.decode=function(t){return(0,s.zG)(decodeURIComponent(t),(n=>{try{const t=JSON.parse(n);return e.codec.decode(t)}catch(e){return i.left(`Cannot decode raw onboarding state: ${t}.`)}}),i.getOrElse((()=>e.State.empty)))},e.encode=function(t){return encodeURIComponent(JSON.stringify(e.codec.encode(t)))},function(t){t.empty={initial:e.emptyStep,initialBTS:e.emptyStep,prompts:e.emptyStep,review:e.emptyStep,rewrite:e.emptyStep,knowledgeHub:e.emptyStep,references:e.emptyStep,history:e.emptyStep},t.toClientState=function(e,t){return{initial:e.initial[t],initialBTS:e.initialBTS[t],prompts:e.prompts[t],review:e.review[t],rewrite:e.rewrite[t],knowledgeHub:e.knowledgeHub[t],references:e.references[t],history:e.history[t]}},t.patch=function(e,t){return n=>({initial:Object.assign(Object.assign({},n.initial),{[t]:e.initial}),initialBTS:Object.assign(Object.assign({},n.initialBTS),{[t]:e.initialBTS}),prompts:Object.assign(Object.assign({},n.prompts),{[t]:e.prompts}),review:Object.assign(Object.assign({},n.review),{[t]:e.review}),rewrite:Object.assign(Object.assign({},n.rewrite),{[t]:e.rewrite}),knowledgeHub:Object.assign(Object.assign({},n.knowledgeHub),{[t]:e.knowledgeHub}),references:Object.assign(Object.assign({},n.references),{[t]:e.references}),history:Object.assign(Object.assign({},n.history),{[t]:e.history})})}}(f=e.State||(e.State={})),function(t){t.empty={initial:e.emptyClientStep,initialBTS:e.emptyClientStep,prompts:e.emptyClientStep,review:e.emptyClientStep,rewrite:e.emptyClientStep,knowledgeHub:e.emptyClientStep,references:e.emptyClientStep,history:e.emptyClientStep}}(v=e.ClientState||(e.ClientState={}))}(l||(l={}))},55093:(e,t,n)=>{n.d(t,{T:()=>xe});var i=n(27378),r=n(90845),o=n(2834),s=n(98403),a=n(23239),l=n(34217),c=n(12968),u=n(45174),d=n(13578),m=n(9546),p=n(89894),h=n(93986),g=n(31956),f=n(31278),v=n(94689);const x=({name:e,style:t,onClick:n})=>i.createElement(h.z,{variant:"tertiary",style:[b,t],onClick:n,compact:!0,size:"medium",theme:"light",name:e},i.createElement(f.JO.Close,null)),b={icon:Object.assign(Object.assign({},(0,v.fx)(1.5)),{stroke:d.Il.Background.Neutral.Default})};var y=n(24435),k=n(20545),w=n(24451),C=n(88392),E=n(54001);const S=({className:e})=>i.createElement("span",Object.assign({},(0,E.Sh)(_,e)),"New"),_=p.ux.style({color:d.S5.Content.OnPrimary.Default,fontWeight:700,fontSize:p.ux.rem(.75),lineHeight:p.ux.rem(1),justifyContent:"center",alignItems:"center",background:"linear-gradient(226.37deg, #BBD86D 0%, #41D9B5 100%)",borderRadius:p.ux.rem(C.HP),padding:`${p.ux.rem(m.yC)} ${p.ux.rem(m.x)}`,textTransform:"uppercase",width:"fit-content",cursor:"default"});var I=n(37869),A=n(62172),B=n(40);const O=i.forwardRef((function({placement:e,style:t,arrowColor:n},r){return i.createElement("div",{ref:r,style:{width:33}},i.createElement("svg",{width:33,height:12,viewBox:"0 0 33 12.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object.assign(Object.assign(Object.assign({position:"absolute"},t),{transform:`${(null==t?void 0:t.transform)||""} rotate(${R(e)}deg)`.trimStart()}),T(e))},i.createElement("path",{d:"M0.5 3.41877e-07C3.5 3.41877e-07 29.5 3.41877e-07 32.5 3.41877e-07C28.5 3.41877e-07 26.4111 0.903505 24.1814 3.69994L17.5562 11.4728C16.957 12.1757 15.8652 12.1757 15.2661 11.4728L8.64084 3.69994C6.41113 0.903505 4.5 3.41877e-07 0.5 3.41877e-07Z",fill:n||"white"})))}));function R(e){return(null==e?void 0:e.startsWith("right"))?90:(null==e?void 0:e.startsWith("bottom"))?180:(null==e?void 0:e.startsWith("left"))?270:0}function T(e){return(null==e?void 0:e.startsWith("bottom"))?{top:-12}:(null==e?void 0:e.startsWith("top"))?{bottom:-12}:(null==e?void 0:e.startsWith("right"))?{transformOrigin:"top left",top:-16.5,left:0}:(null==e?void 0:e.startsWith("left"))?{transformOrigin:"top right",top:-16.5,right:0}:{}}const N=(0,E.xb)((({reference:e,placement:t,offset:n,boundaryAreaPadding:r,className:o,arrowColor:s,children:a})=>{const[l,c]=i.useState(null),[u,d]=i.useState(null),m=(0,B.s)(),{styles:p,attributes:h,state:g}=(0,I.D)(e,l,{placement:t,modifiers:[{name:"offset",options:{offset:[0,12+(null!=n?n:0)]}},{name:"arrow",options:{element:u,padding:12}},{name:"preventOverflow",options:{padding:null!=r?r:5}},m]});return i.createElement("div",Object.assign({dir:"ltr",ref:c,style:p.popper},h.popper,(0,E.Sh)(U,o)),i.createElement(O,{ref:d,style:p.arrow,placement:null==g?void 0:g.placement,arrowColor:s}),a)})),M=e=>p.ux.color(A.BlueGray40).toRGBA().fade(e).toString(),U=p.ux.style({filter:`drop-shadow(0px 0px 0.5px ${A.BlueGray40}) drop-shadow(0px 0px 2px ${M(.5)}) drop-shadow(0px 1px 6px ${M(.25)})`,borderRadius:p.ux.rem(C.xB+C.fe)}),F=p.ux.rem(C.xB+C.fe),z={width:p.ux.rem(25.875),background:d.Il.Background.Base.Default},j={display:"flex",flexDirection:"column",gap:p.ux.rem(m.F2),padding:`${p.ux.rem(m.mh)} ${p.ux.rem(m.x0)} ${p.ux.rem(m.sD)} ${p.ux.rem(m.sD)}`,color:d.Il.Text.Base.Default},P={display:"flex",flexDirection:"row",alignItems:"center",gap:p.ux.rem(m.x),fontWeight:"bold",fontSize:p.ux.rem(1),lineHeight:p.ux.rem(1.5)},G={fontSize:p.ux.rem(.875),lineHeight:p.ux.rem(1.375)},L={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottomLeftRadius:F,borderBottomRightRadius:F,padding:`${p.ux.rem(m.qp)} ${p.ux.rem(m.sD)} ${p.ux.rem(m.qp)} ${p.ux.rem(m.sD)}`,backgroundColor:d.Il.Background.Base.Subdued,color:d.Il.Text.Base.Subdued,fontSize:p.ux.rem(.875),lineHeight:p.ux.rem(1.3125),$nest:{a:{color:"inherit"}}},D={width:p.ux.rem(14),lineHeight:p.ux.rem(1),fontSize:p.ux.rem(.75)},Z=p.ux.style(z),H=p.ux.style(j),V=p.ux.style(P),$=p.ux.style(G),K=p.ux.style(L),W=p.ux.style(D),q=p.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end"}),Q=p.ux.style({display:"inline",fontWeight:600}),Y=(e=k.T.StepName.initial)=>l.UI.Grid.make((({slots:t,view:n,notify:r})=>{const{onMount:s}=(0,y.F)(o.b((t=>r({kind:w.l.Kind.mount,step:e,element:t})())));return i.createElement(N,{className:Z,reference:n("reference"),placement:n("placement"),offset:n("offset"),boundaryAreaPadding:n("boundaryAreaPadding"),arrowColor:d.Il.Background.Base.Subdued},i.createElement("div",{ref:s},t.content),i.createElement("div",{className:K},i.createElement("div",{className:W},t.footerText),i.createElement("div",{className:q},i.createElement(h.z,{variant:"tertiary",onClick:r({kind:w.l.Kind.close,step:e}),style:te,name:"skip"},"Skip"),i.createElement(h.z,{onClick:r({kind:w.l.Kind.tryItOut,step:e}),style:ne,name:"tryItOut"},"Try it out"))))})),X=l.UI.Node.make((({notify:e})=>i.createElement(i.Fragment,null,i.createElement(x,{style:ie,onClick:e({kind:w.l.Kind.close,step:k.T.StepName.initial}),name:"onboardingClose"}),i.createElement("div",{className:H},i.createElement(S,null),i.createElement("div",{className:V},i.createElement("div",null,"Write faster with generative AI")),i.createElement("div",{className:$},"Brainstorm, write, and rewrite with generative AI assistance at your fingertips."))))),J=l.UI.Node.make((()=>i.createElement(i.Fragment,null,"If you use Grammarly's generative AI services,"," ",i.createElement(g.d,{href:"https://grammarly.com/terms",className:Q},"additional terms")," ","apply."))),ee=l.UI.Knot.make(Y(),{content:X,footerText:J}),te={default:{marginRight:p.ux.rem(.5),fontSize:p.ux.rem(.875)}},ne={default:{fontSize:p.ux.rem(.875),fontWeight:"bold"}},ie={default:{position:"absolute",top:p.ux.rem(m.x),right:p.ux.rem(m.x)}},re=l.UI.Node.make((({notify:e})=>i.createElement(i.Fragment,null,i.createElement(x,{style:se,onClick:e({kind:w.l.Kind.close,step:k.T.StepName.initialBTS}),name:"onboardingClose"}),i.createElement("div",{className:H},i.createElement(S,null),i.createElement("div",{className:V},i.createElement("div",null,"Write better papers faster (for free!)")),i.createElement("div",{className:$},"Start with a brainstorm, then get instant feedback, revisions, and citations to ace your assignment."))))),oe=l.UI.Knot.make(Y(k.T.StepName.initialBTS),{content:re,footerText:l.UI.Node.empty}),se={default:{position:"absolute",top:p.ux.rem(m.x),right:p.ux.rem(m.x)}};var ae=n(57050),le=n(41398),ce=n(77176),ue=n(8543),de=n(27995);const me={[k.T.StepName.prompts]:{title:"Start with a prompt",description:e=>e?`Choose a suggested prompt, or type your own to get started. Youll get ${Number(e).toLocaleString()} each month.`:"Choose a suggested prompt, or type your own to get started."},[k.T.StepName.review]:{title:"How does this sound?",description:"Adjust it to your liking with additional prompts. Dont forget to check for any inaccuracies. "},[k.T.StepName.rewrite]:{title:"Want help rewriting?",description:"Select your text to rewrite it with GrammarlyGO."},[k.T.StepName.knowledgeHub]:{title:"Using organizational language?",description:"Prompt GrammarlyGO using terms and project names from Knowledge Share to automatically insert organizational context."},[k.T.StepName.references]:{title:"GrammarlyGO now incorporates your organizational knowledge",description:"Review the references for accuracy and relevance and regenerate the response without any references that seem irrelevant or outdated."},[k.T.StepName.history]:{title:"Return to recent history",description:"Pick up where you left off with your latest prompts."}},pe=l.UI.Node.make((({state:e,view:t,notify:n})=>{const{onMount:r}=(0,y.F)((0,ae.ls)(le.M(t("name")),ce.U((([e,t])=>({element:e,stepName:t}))),o.b((({element:e,stepName:t})=>n({kind:w.l.Kind.mount,step:t,element:e})()))));return i.createElement(ue.F.Fragment,null,e.pipe(ce.U((({name:e,placement:t,offset:o,reference:s,boundaryAreaPadding:a,promptsAllocated:l})=>i.createElement(de.J2,{key:e,className:p.ux.style({width:ge(e)}),reference:s,placement:t,offset:o,containerPadding:a,onClose:n({kind:w.l.Kind.close,step:e}),title:me[e].title,body:e===k.T.StepName.prompts?me[e].description(l):me[e].description,onMount:r})))))})),he=l.UI.Union.asOption(pe);function ge(e){switch(e){case k.T.StepName.knowledgeHub:return p.ux.rem(16);case k.T.StepName.references:return p.ux.rem(17.8);default:return p.ux.rem(13.75)}}const fe=l.UI.Union.make("kind",{none:l.UI.Node.empty,initial:ee,initialBTS:oe,tooltip:he}),ve=l.UI.Grid.make((({slots:e,view:t})=>{const n=i.useMemo((()=>a.h.create(c.u)),[]);return r.P.useSubscriptionTo(t("theme").pipe(o.b(s.wW(n)))),i.createElement(u.N.Provider,{value:n},e.onboarding)})),xe=l.UI.Knot.make(ve,{onboarding:fe})},21903:(e,t,n)=>{n.d(t,{A:()=>x});var i=n(5114),r=n(57050),o=n(76974),s=n(22232),a=n(34217),l=n(20545),c=n(60797);const u=e=>a.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(c.oA)),d=e=>{const t=u(e);return a.Z.composeKnot({root:t,content:t,footerText:t})},m=e=>{const t=u(e);return a.Z.composeKnot({root:t,content:t,footerText:t})};var p=n(77176),h=n(85985),g=n(41398),f=n(82496);function v(e){return a.Z.composeOption(function(e){return a.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(c.oA,h.h(f.X.isTooltipOnboardingStep),g.M(e.promptsAllocated.pipe(p.U(i.toUndefined))),p.U((([e,t])=>Object.assign(Object.assign({},e),{promptsAllocated:t})))))}(e),(()=>e.activeStep.pipe(p.U(i.filter(f.X.isTooltipOnboardingStep)))))}function x(e){return a.Z.composeKnot({root:()=>e.theme.theme.view((e=>({theme:e}))),onboarding:a.Z.composeUnion({none:()=>o.of(null),initial:d(e.onboarding),initialBTS:m(e.onboarding),tooltip:v(e.onboarding)},(()=>e.onboarding.activeStep.view(b).view((e=>({kind:e})))))})}function b(e){return(0,r.zG)(e,i.filter((e=>e.show)),i.fold((()=>"none"),(e=>{switch(e.name){case l.T.StepName.initial:return"initial";case l.T.StepName.initialBTS:return"initialBTS";case l.T.StepName.prompts:case l.T.StepName.review:case l.T.StepName.rewrite:case l.T.StepName.knowledgeHub:case l.T.StepName.references:case l.T.StepName.history:return"tooltip";default:return(0,s.L0)(e.name)}})))}},35144:(e,t,n)=>{n.d(t,{Q:()=>j});var i,r=n(5114),o=n(14601),s=n(85985),a=n(23239),l=n(83289),c=n(12968),u=n(52528),d=n(64015),m=n(57050),p=n(93508),h=n(16118),g=n(77176),f=n(60797),v=n(41398),x=n(66310),b=n(80544),y=n(79692),k=n(2834),w=n(24209),C=n(67434),E=n(17343),S=n(40151),_=n(8125),I=n(22232),A=n(83078),B=n(14047),O=n(7903),R=n(69693),T=n(20545),N=n(24451);function M(e,t,n,i,r=1e3){return e.pipe(s.h(N.l.is(N.l.Kind.mount)),s.h((e=>n(e.step))),x.w((({step:e})=>t.pipe(g.U(A.FX(e)),x.w((e=>e?i.pipe(E.h(Date.now())):S.E)),s.h((e=>Date.now()-e>=r)),E.h(e)))))}!function(e){e.completeInitialOrRewriteStepOnSessionInit=({session:e,stepsSeenOnThisSession:t})=>e.pipe(p.O(r.none),h.G(),g.U((([e,t])=>r.isNone(e)&&r.isSome(t)?r.some(t):r.none)),f.oA,v.M(t),x.w((([e,t])=>(0,m.zG)([t.has(T.T.StepName.initial)?r.some(T.T.StepName.initial):r.none,t.has(T.T.StepName.initialBTS)?r.some(T.T.StepName.initialBTS):r.none,R.w.isRewriteOrQuickRewrite(e.value.mode)?r.some(T.T.StepName.rewrite):r.none],d.oA)))),e.completeReviewStepOnSecondResultReceived=({session:e,activeStep:t})=>e.pipe(g.U((0,m.ls)(r.chain(O.z.toStarted),r.fold((()=>0),(e=>e.results.length)))),h.G(),s.h((([e,t])=>1===e&&2===t)),v.M(t),g.U((([e,t])=>(0,m.zG)(t,r.filter((e=>e===T.T.StepName.review))))),f.oA),e.completeActiveAssistantStepOnSessionEnd=({session:e,activeStep:t,visibleForMs:n,onboardingUIActions:i})=>M(i,t.pipe(b.QV(y.E)),T.T.StepName.isAssistantOnboardingStep,e.pipe(h.G(),s.h((([e,t])=>r.isSome(e)&&r.isNone(t)))),n),e.completeStepOnCloseClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(s.h(N.l.is(N.l.Kind.close)),g.U((e=>(e.step===T.T.StepName.initial&&t.trackOnboardingPopupSkip(),e.step===T.T.StepName.initialBTS&&t.trackBTSOnboardingPopupSkip(),e.step)))),e.completeInitialStepOnTryItOutClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(s.h(N.l.is(N.l.Kind.tryItOut)),g.U((e=>(e.step===T.T.StepName.initial&&t.trackOnboardingPopupNext(),e.step===T.T.StepName.initialBTS&&t.trackBTSOnboardingPopupNext(),e.step)))),e.completeReviewStepOnResultInteraction=({assistantUIActions:e})=>e.pipe(s.h(l.i.isResultAction),s.h((e=>B.x.isStandardCompletedResult(e.result))),g.U((()=>T.T.StepName.review))),e.completeHistoryStepOnHistoryRestore=({assistantUIActions:e})=>e.pipe(s.h(l.i.is(l.i.Kind.restoreHistoryButtonClick)),g.U((()=>T.T.StepName.history))),e.completeAssistantStepsOnUserActions=({assistantUIActions:e,activeStep:t})=>e.pipe(s.h((0,_.Kg)(l.i.is(l.i.Kind.actionBrickClick),l.i.is(l.i.Kind.promptSubmitButtonClick),l.i.is(l.i.Kind.promptFieldKeyPressEnter),l.i.is(l.i.Kind.headerVoiceButtonClick),l.i.is(l.i.Kind.setVoiceButtonClick),l.i.is(l.i.Kind.openFeedbackFormButtonClick))),v.M(t),g.U((([e,t])=>(0,m.zG)(t,r.filter(T.T.StepName.isAssistantOnboardingStep)))),f.oA),e.completeInitialStepOnDispose=({onboardingUIActions:e,activeStep:t,disposed:n,visibleForMs:i})=>M(e,t,(e=>e===T.T.StepName.initial||e===T.T.StepName.initialBTS),n,i);const t=e=>t=>n=>t(n).pipe(k.b((t=>{var i;return null===(i=n.logger)||void 0===i?void 0:i.debug(`${e} - step to complete: ${t}`)})));function n(e){return e.pipe(C.R(((e,t)=>({seen:new Set(e.seen).add(t),step:e.seen.has(t)?r.none:r.some(t)})),{seen:new Set,step:r.none}),g.U((e=>e.step)),f.oA)}e.defaultCompletionSources=[t("session init")(e.completeInitialOrRewriteStepOnSessionInit),t("second result received")(e.completeReviewStepOnSecondResultReceived),t("session end")(e.completeActiveAssistantStepOnSessionEnd),t("user closed step")(e.completeStepOnCloseClick),t("user clicked try-it-out")(e.completeInitialStepOnTryItOutClick),t("user interacted with results")(e.completeReviewStepOnResultInteraction),t("user interacted with assistant")(e.completeAssistantStepsOnUserActions),t("user restored history")(e.completeHistoryStepOnHistoryRestore),t("feature disposed")(e.completeInitialStepOnDispose)],e.extractStepsToComplete=function(e,t){return w.T(...e.map((e=>e(t)))).pipe(n)}}(i||(i={}));var U=n(82496),F=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class z extends U.o{constructor(e,t){super(e),this._onDispose=t}dispose(){super.dispose(),this._onDispose()}}function j(e){var{assistantUIActions:t,trackingService:n,completeOnboardingStep:d,stepCompletionSources:m,disposed:p,theme:h,logger:g}=e,f=F(e,["assistantUIActions","trackingService","completeOnboardingStep","stepCompletionSources","disposed","theme","logger"]);const v=new o.w,x=new z(Object.assign(Object.assign({},f),{assistantMountActions:t.pipe(s.h(l.i.is(l.i.Kind.mount))),assistantUnmountActions:t.pipe(s.h(l.i.is(l.i.Kind.unmount)))}),(()=>v.unsubscribe()));return v.add(i.extractStepsToComplete(null!=m?m:i.defaultCompletionSources,{onboardingUIActions:x.uiActions,assistantUIActions:t,activeStep:x.activeStep.view(r.map((e=>e.name))),stepsSeenOnThisSession:x.stepsSeenOnThisSession,session:f.session,trackingService:n,disposed:p,logger:g}).subscribe((e=>{d(e)}))),v.add(function(e,t){return e.pipe(s.h(N.l.is(N.l.Kind.mount)),k.b((e=>{switch(e.step){case T.T.StepName.initial:return t.trackOnboardingPopupView();case T.T.StepName.initialBTS:return t.trackBTSOnboardingPopupView();case T.T.StepName.prompts:return t.trackOnboardingPromptsTooltipView();case T.T.StepName.review:return t.trackOnboardingReviewTooltipView();case T.T.StepName.rewrite:return t.trackOnboardingRewriteTooltipView();case T.T.StepName.knowledgeHub:return t.trackOnboardingKnowledgeHubTooltipView();case T.T.StepName.references:return t.trackOnboardingReferencesTooltipView();case T.T.StepName.history:return t.trackOnboardingHistoryTooltipView();default:return(0,I.L0)(e.step)}})))}(x.uiActions,n).subscribe()),{onboarding:x,theme:new u.e(null!=h?h:a.h.create(c.u))}}},82496:(e,t,n)=>{n.d(t,{X:()=>i,o:()=>C});var i,r=n(5114),o=n(57050),s=n(14601),a=n(32952),l=n(98403),c=n(60797),u=n(77176),d=n(93508),m=n(16118),p=n(85985),h=n(2844),g=n(28043),f=n(41398),v=n(67434),x=n(22232),b=n(23239),y=n(99877),k=n(20545),w=n(1846);!function(e){e.isTooltipOnboardingStep=function(e){return k.T.StepName.isTooltipOnboardingStep(e.name)}}(i||(i={}));class C{constructor(e){var t,n,i,v,C,_;this._params=e,this._subs=new s.w,this._assistantElements=b.h.create({}),this._externalElements=b.h.create({}),this._hideAssistantTooltips=b.h.create(!1),this._nextCandidateStep=b.h.create(r.none),this.stepsSeenOnThisSession=b.h.create(new Set),this._uiActions=new a.xQ,this.uiActions=this._uiActions.asObservable(),this.activeStep=b.h.combine(this._nextCandidateStep,this._assistantElements,this._externalElements,this._hideAssistantTooltips,((e,t,n,i)=>(0,o.zG)(e,r.chain((e=>function(e,t,n,i){switch(e){case k.T.StepName.initial:return(0,o.zG)(r.fromNullable(n[y.n.initialPopupAnchor]),r.map((e=>({name:k.T.StepName.initial,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case k.T.StepName.initialBTS:return(0,o.zG)(r.fromNullable(n[y.n.initialBTSPopupAnchor]),r.map((e=>({name:k.T.StepName.initialBTS,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case k.T.StepName.rewrite:return(0,o.zG)(r.fromNullable(n[y.n.rewriteTooltipAnchor]),r.map((e=>({name:k.T.StepName.rewrite,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case k.T.StepName.prompts:return(0,o.zG)(r.fromNullable(t[y.e.initialActionsList]),r.map((e=>({name:k.T.StepName.prompts,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case k.T.StepName.review:return(0,o.zG)(r.fromNullable(t[y.e.followUpActionsList]),r.map((e=>({name:k.T.StepName.review,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case k.T.StepName.knowledgeHub:return(0,o.zG)(r.fromNullable(t[y.e.promptInput]),r.map((e=>({name:k.T.StepName.knowledgeHub,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case k.T.StepName.references:return(0,o.zG)(r.fromNullable(t[y.e.referencesList]),r.map((e=>({name:k.T.StepName.references,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case k.T.StepName.history:return(0,o.zG)(r.fromNullable(t[y.e.historyButton]),r.map((e=>({name:k.T.StepName.history,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));default:return(0,x.L0)(e)}}(e,t,n,i)))))),this.promptsAllocated=this._params.promptsAllocated,this._subs.add((t=this.activeStep,n=this._params.upstreamOnboardingState,i=this._params.session,v=this._params.textStats,C=this._params.forceDisabledOnboardingSteps,_=this._params.client,h.aj([i,n,v.pipe(S()),i.pipe(u.U(r.isSome),g.x(),f.M(n),u.U((([e,t])=>e?r.some(t):r.none)))]).pipe(u.U((([e,n,i,s])=>{if(r.isNone(e)){const e=!(0,o.zG)(t.get(),r.map((e=>e.name===k.T.StepName.initial)),r.getOrElse(o.jv))&&!C.has(k.T.StepName.initialBTS)&&!n.initialBTS[_].completed&&void 0===n.initialBTS[_].lastSeen,s=!C.has(k.T.StepName.initial)&&!n.initial[_].completed&&void 0===n.initial[_].lastSeen&&!n.initialBTS[_].completed&&void 0===n.initialBTS[_].lastSeen,a=!C.has(k.T.StepName.rewrite)&&!n.rewrite[_].completed&&(n.initial[_].completed||n.initialBTS[_].completed)&&i>=30;return e?r.some(k.T.StepName.initialBTS):s?r.some(k.T.StepName.initial):a?r.some(k.T.StepName.rewrite):r.none}return w.Z.Step.anyClientCompleted(n.prompts)||C.has(k.T.StepName.prompts)?w.Z.Step.anyClientCompleted(n.review)||C.has(k.T.StepName.review)?w.Z.Step.anyClientCompleted(n.history)||C.has(k.T.StepName.history)||!E(s)?w.Z.Step.anyClientCompleted(n.knowledgeHub)||C.has(k.T.StepName.knowledgeHub)||!E(s)?w.Z.Step.anyClientCompleted(n.references)||C.has(k.T.StepName.references)||!E(s)?r.none:r.some(k.T.StepName.references):r.some(k.T.StepName.knowledgeHub):r.some(k.T.StepName.history):r.some(k.T.StepName.review):r.some(k.T.StepName.prompts)})))).subscribe(l.wW(this._nextCandidateStep))),this._subs.add(this._params.assistantMountActions.subscribe((({name:e,element:t})=>this._assistantElements.modify((n=>Object.assign(Object.assign({},n),{[e]:{reference:t,placement:e===y.e.historyButton?"bottom":"left"}})))))),this._subs.add(this._params.assistantUnmountActions.subscribe((({name:e})=>this._assistantElements.modify((t=>Object.assign(Object.assign({},t),{[e]:void 0})))))),this._subs.add(this._params.externalElements.subscribe(l.wW(this._externalElements))),this._subs.add(this._params.hideAssistantOnboardingTooltips.subscribe(l.wW(this._hideAssistantTooltips))),this._subs.add(this.activeStep.pipe(c.oA).subscribe((e=>this.stepsSeenOnThisSession.modify((t=>new Set([...t,e.name])))))),this._subs.add(this._params.session.pipe(u.U(r.isSome),d.O(!1),m.G(),p.h((([e,t])=>e&&!t))).subscribe((()=>this._assistantElements.set({}))))}notify(e){this._uiActions.next(e)}dispose(){this._subs.unsubscribe()}}function E(e){return(0,o.zG)(e,r.fold(o.jv,(({prompts:e,review:t})=>{const n={prompts:w.Z.Step.anyClientCompleted(e),review:w.Z.Step.anyClientCompleted(t)};return Object.values(n).every(o.yR)})))}function S(){return(0,o.ls)(c.oA,u.U((e=>e.wordCount)),d.O(0),m.G(),v.R(((e,[t,n])=>(0,o.zG)(Math.abs(n-t),(t=>t<=2?e+t:e))),0),d.O(0),g.x())}},72004:(e,t,n)=>{var i;n.d(t,{x:()=>i}),function(e){let t,n;!function(e){e.ok="ok",e.satisfied="satisfied",e.dissatisfied="dissatisfied"}(t=e.Mood||(e.Mood={})),function(e){e.resultCard="resultCard",e.quickReplyInitialActions="quickReplyInitialActions",e.intentCard="intentCard"}(n=e.Source||(e.Source={}))}(i||(i={}))},63817:(e,t,n)=>{var i,r;n.d(t,{C:()=>r}),function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}e.create=function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(i||(i={})),function(e){e.create=function(e,t,n,r,o){return"information"===e?{kind:"information",persistent:!!r,customTimeout:o,text:t,id:n||i.create()}:{kind:e,persistent:!!n,customTimeout:"number"==typeof r?r:void 0,id:t||i.create()}}}(r||(r={}))},3299:(e,t,n)=>{n.d(t,{s:()=>i});var i,r=n(5114);!function(e){let t;!function(e){e.create=e=>e}(t=e.Id||(e.Id={})),e.create=function(t){return Object.assign(Object.assign({},t),{id:e.Id.create(t.id),url:r.fromNullable(t.url),contextText:r.none})}}(i||(i={}))},13463:(e,t,n)=>{n.d(t,{_:()=>s,h:()=>o});var i=n(57050);const r=n(64681).k4();function o(e){return{revisionEngine:r.wrap(e),dispose:i.Q1}}function s(e){return r.unwrap(e)}},71078:(e,t,n)=>{function i(e){return"alertAdded"===e.kind}function r(e){return{kind:"alertAdded",alertId:e}}function o(e){return"alertRemoved"===e.kind}function s(e,t){return{kind:"alertRemoved",alertId:e,reason:t}}function a(e){return"alertCollectionReset"===e.kind}function l(){return{kind:"alertCollectionReset"}}n.d(t,{BG:()=>i,Jg:()=>a,Tm:()=>r,cT:()=>l,nq:()=>o,qQ:()=>s})},19125:(e,t,n)=>{function i(e){return"sduiItemAdd"===e.kind}function r(e,t){return{kind:"sduiItemAdd",sduiRootId:e,sdui:t}}function o(e){return"sduiItemUpdate"===e.kind}function s(e,t){return{kind:"sduiItemUpdate",sduiRootId:e,sdui:t}}function a(e){return"sduiItemRemove"===e.kind}function l(e){return{kind:"sduiItemRemove",sduiRootId:e}}function c(e){return"sduiItemCollectionReset"===e.kind}function u(){return{kind:"sduiItemCollectionReset"}}n.d(t,{FE:()=>s,H$:()=>c,K5:()=>r,Ul:()=>l,Y9:()=>o,Zw:()=>d,ex:()=>u,tC:()=>i,zi:()=>a});const d=(0,n(8125).Kg)(i,o,a,c)},41866:(e,t,n)=>{function i(e){return{kind:"error",source:"skill",name:"getSkillsFailed",data:e}}function r(e){return{kind:"error",source:"skill",name:"initSkillFailed",data:e}}function o(e){return{kind:"error",source:"skill",name:"terminateSkillFailed",data:e}}n.d(t,{YC:()=>i,go:()=>o,iJ:()=>r})},90488:(e,t,n)=>{n.d(t,{Bs:()=>r,Fl:()=>u,Lt:()=>m,RO:()=>o,_q:()=>i});var i,r,o,s=n(5114),a=n(45701),l=n(57050),c=n(22232);!function(e){e.Slight="Slight",e.Moderate="Moderate",e.Strong="Strong",e.VeryStrong="Very strong"}(i||(i={})),function(e){e.On="on",e.Off="off"}(r||(r={})),function(e){e.positive="positive",e.negative="negative"}(o||(o={}));const u=a.contramap((e=>e.confidence))(a.getDualOrd(a.ordNumber)),d=a.contramap((e=>e===r.Off||e!==r.On&&(0,c.L0)(e)))(a.ordBoolean),m=a.contramap((({brandToneInfo:e,confidence:t})=>[(0,l.zG)(e,s.map((({status:e})=>e))),t]))(a.getTupleOrd(a.getDualOrd(s.getOrd(d)),a.getDualOrd(a.ordNumber)))},29972:(e,t,n)=>{n.d(t,{w:()=>f});var i=n(71249),r=n(5114),o=n(64015),s=n(57050),a=n(84966),l=n(9922),c=n(85985),u=n(22232),d=n(23239),m=n(33148),p=n(63346),h=n(26320),g=n(90488);class f{constructor(e){var t;this._params=e,this._subscriptions=new l.w.Keeper,this._logger=null!==(t=this._params.logger)&&void 0!==t?t:new p.W(f.name),this._state=d.h.create(r.none),this.state=this._state.view(),this.trackToneReportShow=this._params.trackToneReportShow,this._subscriptions.push(this._params.capiService.relevantInboundCAPIMessages.pipe(c.h(m.JS.TonesResult.is)).subscribe((e=>this._handleTonesResultMessage(e))))}submitToneFeedback(e,t){const n=t===g.RO.positive?a.y_.EMOTION_LIKE:t===g.RO.negative?a.y_.EMOTION_DISLIKE:(0,u.L0)(t);(0,h.t)("submitToneFeedback",this._params.capiService.feedback({emotion:e,type:n,subtype:a.e3.Inline}),this._logger)}_handleTonesResultMessage(e){const t=!0===e.brandTonesEnabled;this._state.set(r.some({tones:(0,s.zG)(e.emotions,(0,i.UI)((({name:e,emojiId:t,confidence:n,brandToneLabel:i,brandToneDescription:o})=>({name:e,emojiId:t,confidence:n,brandToneInfo:void 0!==i?r.some({status:x(i),description:r.fromNullable(o)}):r.none}))),v,o.DY(t?g.Lt:g.Fl)),hidden:!0===e.hidden,brandTonesEnabled:t,institutionLogo:r.fromNullable(e.institutionLogo)}))}dispose(){this._subscriptions.dispose()}}function v(e){const t=e.reduce(((e,t)=>e+t.confidence),0);return e.map((e=>{let n;return n=e.confidence<.25?g._q.Slight:e.confidence<.5?g._q.Moderate:e.confidence/t>.5?g._q.VeryStrong:g._q.Strong,Object.assign(Object.assign({},e),{prevalence:n})}))}function x(e){switch(e){case"on":return g.Bs.On;case"off":return g.Bs.Off;default:return(0,u.L0)(e)}}},31705:(e,t,n)=>{n.d(t,{x:()=>i});var i,r=n(80800),o=n(22232);!function(e){let t;!function(e){let t;!function(e){e.Rating="rating",e.Feedback="feedback",e.Completed="completed",e.Closed="closed"}(t=e.Type||(e.Type={})),e.isOpen=e=>e!==t.Closed,e.toCAPIStage=e=>{switch(e){case t.Rating:return r.v0.Survey.Data.OpenAnswerScoreSurvey.scoreStage;case t.Feedback:case t.Closed:case t.Completed:return r.v0.Survey.Data.OpenAnswerScoreSurvey.submitStage;default:(0,o.L0)(e)}}}(t=e.Stage||(e.Stage={}))}(i||(i={}))},36847:(e,t,n)=>{n.d(t,{p:()=>g});var i=n(5114),r=n(57050),o=n(80800),s=n(9922),a=n(85985),l=n(23239),c=n(33148),u=n(98370),d=n(14047),m=n(26320);function p(e){return{source:"userSurvey",kind:"error",name:"submitSurveyFailed",data:e}}var h=n(31705);class g{constructor(e){this._params=e,this._subs=new s.w.Keeper,this._activeSurvey=l.h.create(i.none),this.activeSurvey=this._activeSurvey.view(),this._init()}dispose(){this._subs.dispose()}submitSurveyResult(e){(0,m.t)("submitSurveyResult",this._params.capiService.submit_survey_result({placement:e.placement,score:e.rating,stage:h.x.Stage.toCAPIStage(e.stage),open_answer:i.getOrElse((()=>""))(e.openAnswer),detailed_placement:e.detailedPlacement,type:e.type}),void 0,void 0,(()=>this._params.monitoringService.notify((0,u.L)(p({surveyType:e.type,surveyPlacement:e.placement,surveyDetailedPlacement:e.detailedPlacement})))))}dismissSurvey(e){(0,m.t)("submitSurveyResult",this._params.capiService.submit_survey_result({placement:e.placement,score:"declined",stage:h.x.Stage.toCAPIStage(e.stage),detailed_placement:e.detailedPlacement,type:e.type}),void 0,void 0,(()=>this._params.monitoringService.notify((0,u.L)(p({surveyType:e.type,surveyPlacement:e.placement,surveyDetailedPlacement:e.detailedPlacement})))))}_init(){this._subs.push(this._params.capiService.relevantInboundCAPIMessages.pipe(a.h(c.JS.ShowSurvey.is)).subscribe((e=>this._handleShowSurvey(e))))}_handleShowSurvey(e){(0,r.zG)(e.survey,i.fromPredicate((e=>e.placement===o.v0.Survey.Data.BaseSurvey.Placement.ggo)),i.chain((e=>"open_answer_score"===e.type?i.some(e):i.none)),i.chain((e=>{var t;return"string"==typeof e.detailed_placement&&2===(null===(t=e.detailed_placement)||void 0===t?void 0:t.split(":").length)?i.some({survey:e,detailedPlacement:e.detailed_placement}):i.none})),i.chain((({survey:e,detailedPlacement:t})=>{const[n,r]=t.split(":"),o=Math.abs(Number.parseInt(r,10));return Number.isNaN(o)?i.none:i.some({survey:e,detailedPlacement:t,sessionId:n,resultId:d.x.Id.create(o)})})),i.fold((()=>this._params.monitoringService.notify((0,u.L)({source:"userSurvey",kind:"warn",name:"unexpectedSurveyFormatReceived",data:{surveyType:e.survey.type,surveyPlacement:e.survey.placement,surveyDetailedPlacement:e.survey.detailed_placement}}))),(({survey:e,detailedPlacement:t,resultId:n})=>{this._activeSurvey.modify((()=>i.some({placement:e.placement,title:e.title,detailedPlacement:t,type:o.v0.Survey.Data.OpenAnswerScoreSurvey.type,resultId:n,maxScore:e.max_score,boxText:i.fromNullable(e.box_text),ratingLabels:e.score_labels,acknowledgmentTitle:i.fromNullable(e.acknowledgment_title),acknowledgment:i.fromNullable(e.acknowledgment),skipOpenAnswerFrom:e.skip_open_answer_from,openAnswer:i.fromNullable({placeholder:e.open_answer.placeholder,maxLen:e.open_answer.max_len,minLen:i.fromNullable(e.open_answer.min_len)})})))})))}}},33305:(e,t,n)=>{n.d(t,{L:()=>i,b:()=>r});var i,r,o=n(73975),s=n(5114),a=n(64015),l=n(48044),c=n(13853),u=n(22232);!function(e){let t,n,i,r,d,m;!function(e){let t;!function(e){e.create=function(e){return e},e.eq=o.yv}(t=e.Id||(e.Id={}))}(t=e.Tone||(e.Tone={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=o.yv}(t=e.Id||(e.Id={}))}(n=e.Style||(e.Style={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=o.yv}(t=e.Id||(e.Id={}))}(i=e.Role||(e.Role={})),function(e){function t(e){switch(e){case"american":return"American English";case"australian":return"Australian English";case"british":return"British English";case"canadian":return"Canadian English";case"indian":return"Indian English";default:return(0,u.L0)(e)}}function n(e){switch(e){case"american":return"https://assets.grammarly.com/emoji/v1/1f1fa-1f1f8.svg";case"australian":return"https://assets.grammarly.com/emoji/v1/1f1e6-1f1fa.svg";case"british":return"https://assets.grammarly.com/emoji/v1/1f1ec-1f1e7.svg";case"canadian":return"https://assets.grammarly.com/emoji/v1/1f1e8-1f1e6.svg";case"indian":return"https://assets.grammarly.com/emoji/v1/1f1ee-1f1f3.svg";default:return(0,u.L0)(e)}}let i;!function(e){e.create=function(e){return e},e.eq=o.yv}(i=e.Id||(e.Id={})),e.american={id:i.create("american"),label:t("american"),iconUrl:n("american")},e.australian={id:i.create("australian"),label:t("australian"),iconUrl:n("australian")},e.british={id:i.create("british"),label:t("british"),iconUrl:n("british")},e.canadian={id:i.create("canadian"),label:t("canadian"),iconUrl:n("canadian")},e.indian={id:i.create("indian"),label:t("indian"),iconUrl:n("indian")},e.all=function(){return[e.american,e.australian,e.british,e.canadian,e.indian]}}(r=e.Dialect||(e.Dialect={})),function(e){e.eq=o.MW({selectedStyle:n.Id.eq,selectedTonesPerStyle:l.Eh(n.Id.eq,c.Eh(t.Id.eq)),selectedRole:s.getEq(i.Id.eq),selectedDialect:r.Id.eq})}(d=e.Selections||(e.Selections={})),e.toLegacyVoiceProfile=function(e){return"legacyVoiceProfile"===e.kind?s.some(e):s.none},function(e){const t=o.MW({name:o.yv,state:o.yv}),n=o.MW({name:o.yv,tags:a.Eh(t)}),l=o.MW({name:o.yv,summary:o.yv,selected:o.vD,sections:a.Eh(n)}),c=a.Eh(l);e.eqByRoleDialectProfileAndIsEnabledByDefault=o.MW({profiles:c,selectedRole:s.getEq(i.Id.eq),selectedDialect:r.Id.eq,isEnabledByDefault:o.vD})}(m=e.NewSelections||(e.NewSelections={})),e.toNewVoiceProfile=function(e){return"newVoiceProfile"===e.kind?s.some(e):s.none}}(i||(i={})),function(e){e.createId=({tagName:e,sectionName:t,profileName:n})=>`${t}-${e}-${n}`}(r||(r={}))},71761:(e,t,n)=>{n.r(t),n.d(t,{ActionArg:()=>f,ActionArgDef:()=>v,ActionArgDefRadioButtonGroup:()=>k,ActionArgDefRadioButtonGroupHint:()=>y,ActionArgDefString:()=>b,ActionArgDefStringHint:()=>x,ActionDef:()=>E,ActionDefDisabled:()=>C,ActionDefGeneratesTextType:()=>w,ActionInfo:()=>S,AvailableVoiceProfile:()=>B,AvailableVoiceProfileSection:()=>A,AvailableVoiceProfileSectionTag:()=>I,AvailableVoiceProfileSectionTagState:()=>_,AvailableVoiceProfiles:()=>O,ClientMessage:()=>c,ClientMessageImplementations:()=>Te,Context:()=>R,DocumentOverview:()=>T,Error:()=>M,ErrorKind:()=>N,GeneratedText:()=>U,GenerationMode:()=>F,Message:()=>z,MessageAction:()=>G,MessageChunk:()=>Q,MessageError:()=>K,MessageGetContext:()=>j,MessageGetHistory:()=>$,MessageGetUserState:()=>H,MessageInterrupt:()=>Z,MessageInvalidateContext:()=>P,MessageResult:()=>X,MessageResultChangesSummary:()=>Y,MessageSearchReferences:()=>V,MessageSearchReferencesResult:()=>q,MessageSetContext:()=>W,MessageSetHistory:()=>re,MessageSetHistoryCard:()=>ie,MessageSetHistoryCardTitle:()=>ee,MessageSetHistoryCardTitleAction:()=>ne,MessageSetHistoryCardTitleUserPrompt:()=>te,MessageSetUserState:()=>J,MessageSetVoice:()=>L,MessageSetVoiceProfile:()=>D,Metadata:()=>oe,Notification:()=>ae,NotificationKind:()=>se,OuterContext:()=>ce,OuterContextItem:()=>le,PreviousText:()=>ue,PreviousTextHistory:()=>me,PreviousTextRegular:()=>de,PreviousTextWriterExpert:()=>pe,ProtocolMessage:()=>u,Reference:()=>he,ReferencePrivacyLevel:()=>ge,ReferencePrivacyLevelPublic:()=>fe,ReferencePrivacyLevelRestricted:()=>ve,Root:()=>g,ServerMessage:()=>d,ServerMessageImplementations:()=>Ne,SpecialView:()=>xe,SpecialViewAiUsageAlert:()=>be,StartMessage:()=>m,StartedMessage:()=>p,Style:()=>ye,Text:()=>ke,TextLike:()=>h,TextRange:()=>we,Toggle:()=>Ce,UrlReference:()=>Ee,Usage:()=>Se,UserState:()=>Ie,UserStateSettings:()=>_e,Voice:()=>Ae,VoiceProfileSettings:()=>Re,VoiceProfileSettingsMyVoiceIsEnabledByDefault:()=>Be,VoiceProfileSettingsStatus:()=>Oe,encoderSchemable:()=>Pe,extend:()=>je,interpreter:()=>ze,make:()=>Fe});var i=n(59312),r=n(50687),o=n(83257),s=n(18164),a=n(73915),l=n(57050),c=Fe((function(e){return Ue(u(e),e.struct({}))(e)})),u=Fe((function(e){return e.struct({id:e.number})})),d=Fe((function(e){return Ue(u(e),e.struct({}))(e)})),m=Fe((function(e){return e.intersect(e.partial({docIdIsTransient:e.boolean}))(e.struct({}))})),p=Fe((function(e){return e.struct({cheetahState:Ie(e)})})),h=Fe((function(e){return e.struct({plain:e.sensitiveString,delta:e.sensitiveDelta})})),g=Fe((function(e){return z(e)})),f=Fe((function(e){return e.struct({name:e.string,value:e.sensitiveString})})),v=Fe((function(e){var t;return e.sum("valueType")(((t={}).string=b(e),t.radioButtonGroup=k(e),t))})),x=Fe((function(e){return e.struct({header:e.string,text:e.readonly(e.array(e.string))})})),b=Fe((function(e){return e.intersect(e.partial({hint:x(e)}))(e.struct({valueType:e.literal("string"),label:e.string,name:e.string}))})),y=Fe((function(e){return e.struct({header:e.string,text:e.readonly(e.array(e.string))})})),k=Fe((function(e){return e.intersect(e.partial({hint:y(e)}))(e.struct({valueType:e.literal("radioButtonGroup"),label:e.string,name:e.string,radioButtonGroupValues:e.readonly(e.array(e.string))}))})),w=Me(r.cX),C=Fe((function(e){return e.intersect(e.partial({onActionNotification:ae(e)}))(e.struct({}))})),E=Fe((function(e){return e.intersect(e.partial({generatesTextType:w(e)}))(e.intersect(e.partial({disabled:C(e)}))(e.struct({id:e.string,iconUrl:e.string,group:e.string,label:e.string,searchTags:e.readonly(e.array(e.string)),args:e.readonly(e.array(v(e)))})))})),S=Fe((function(e){return e.intersect(e.partial({useReferences:e.readonly(e.array(Ee(e)))}))(e.intersect(e.partial({omitReferenceIds:e.readonly(e.array(e.string))}))(e.struct({contextId:e.string,triggerContextId:e.string,actionId:e.string,args:e.readonly(e.array(f(e)))})))})),_=Me(r.ES),I=Fe((function(e){return e.struct({name:e.string,state:_(e)})})),A=Fe((function(e){return e.struct({name:e.string,tags:e.readonly(e.array(I(e)))})})),B=Fe((function(e){return e.struct({name:e.string,summary:e.string,selected:e.boolean,sections:e.readonly(e.array(A(e)))})})),O=Fe((function(e){return e.readonly(e.array(B(e)))})),R=Fe((function(e){return e.intersect(e.partial({voiceProfileSettings:Re(e)}))(e.intersect(e.partial({intent:e.sensitiveString}))(e.intersect(e.partial({documentOverview:T(e)}))(e.intersect(e.partial({specialView:xe(e)}))(e.intersect(e.partial({textScope:we(e)}))(e.intersect(e.partial({contextNotification:ae(e)}))(e.intersect(e.partial({metadata:oe(e)}))(e.struct({id:e.string,voice:Ae(e),availableActions:e.readonly(e.array(E(e))),parentAction:S(e),stateBlob:e.string,promptAction:E(e),quickRewriteAction:E(e)}))))))))})),T=Fe((function(e){return e.struct({title:e.string,summary:e.string})})),N=Me(r.oS),M=Fe((function(e){return e.struct({kind:N(e),title:e.string,text:e.string})})),U=Fe((function(e){return Ue(h(e),e.struct({plain:e.sensitiveString,interrupted:e.boolean,renderDiff:e.boolean,delta:e.sensitiveDelta}))(e)})),F=Me(r.s2),z=Fe((function(e){var t;return Ue(u(e),e.sum("action")(((t={})["cheetah:getContext"]=j(e),t["cheetah:invalidateContext"]=P(e),t["cheetah:action"]=G(e),t["cheetah:setVoice"]=L(e),t["cheetah:setVoiceProfile"]=D(e),t["cheetah:interrupt"]=Z(e),t["cheetah:getUserState"]=H(e),t["cheetah:searchReferences"]=V(e),t["cheetah:getHistory"]=$(e),t["cheetah:error"]=K(e),t["cheetah:setContext"]=W(e),t["cheetah:searchReferencesResult"]=q(e),t["cheetah:chunk"]=Q(e),t["cheetah:result"]=X(e),t["cheetah:setUserState"]=J(e),t["cheetah:setHistory"]=re(e),t)))(e)})),j=Fe((function(e){return Ue(c(e),e.intersect(e.partial({outerContext:ce(e)}))(e.intersect(e.partial({selectedRange:we(e)}))(e.intersect(e.partial({stateBlob:e.string}))(e.intersect(e.partial({previousText:ue(e)}))(e.intersect(e.partial({includeDisabledActions:e.boolean}))(e.intersect(e.partial({metadata:oe(e)}))(e.struct({action:e.literal("cheetah:getContext"),rev:e.number,generationMode:F(e)}))))))))(e)})),P=Fe((function(e){return Ue(d(e),e.struct({action:e.literal("cheetah:invalidateContext")}))(e)})),G=Fe((function(e){return Ue(c(e),e.intersect(e.partial({useReferences:e.readonly(e.array(Ee(e)))}))(e.intersect(e.partial({omitReferenceIds:e.readonly(e.array(e.string))}))(e.intersect(e.partial({previousText:ue(e)}))(e.intersect(e.partial({metadata:oe(e)}))(e.struct({action:e.literal("cheetah:action"),rev:e.number,contextId:e.string,triggerContextId:e.string,actionId:e.string,stateBlob:e.string,args:e.readonly(e.array(f(e)))}))))))(e)})),L=Fe((function(e){return Ue(c(e),e.struct({action:e.literal("cheetah:setVoice"),voice:Ae(e)}))(e)})),D=Fe((function(e){return Ue(c(e),e.intersect(e.partial({role:e.string}))(e.intersect(e.partial({isEnabledByDefault:e.boolean}))(e.intersect(e.partial({profiles:O(e)}))(e.struct({action:e.literal("cheetah:setVoiceProfile")})))))(e)})),Z=Fe((function(e){return Ue(c(e),e.struct({action:e.literal("cheetah:interrupt"),promptId:e.number}))(e)})),H=Fe((function(e){return Ue(c(e),e.struct({action:e.literal("cheetah:getUserState")}))(e)})),V=Fe((function(e){return Ue(c(e),e.intersect(e.partial({url:e.string}))(e.struct({action:e.literal("cheetah:searchReferences")})))(e)})),$=Fe((function(e){return Ue(c(e),e.struct({action:e.literal("cheetah:getHistory")}))(e)})),K=Fe((function(e){return Ue(d(e),e.struct({action:e.literal("cheetah:error"),promptId:e.number,error:M(e)}))(e)})),W=Fe((function(e){return Ue(d(e),e.intersect(e.partial({progressMessage:e.string}))(e.struct({action:e.literal("cheetah:setContext"),promptId:e.number,context:R(e),usage:Se(e)})))(e)})),q=Fe((function(e){return Ue(d(e),e.struct({action:e.literal("cheetah:searchReferencesResult"),promptId:e.number,references:e.readonly(e.array(he(e)))}))(e)})),Q=Fe((function(e){return Ue(d(e),e.intersect(e.partial({metadata:oe(e)}))(e.struct({action:e.literal("cheetah:chunk"),promptId:e.number,token:e.sensitiveString})))(e)})),Y=Fe((function(e){return e.struct({title:e.string,description:e.readonly(e.array(e.string))})})),X=Fe((function(e){return Ue(d(e),e.intersect(e.partial({metadata:oe(e)}))(e.intersect(e.partial({context:R(e)}))(e.intersect(e.partial({error:M(e)}))(e.intersect(e.partial({text:U(e)}))(e.intersect(e.partial({withVoiceText:U(e)}))(e.intersect(e.partial({showVoiceTextByDefault:e.boolean}))(e.intersect(e.partial({references:e.readonly(e.array(he(e)))}))(e.intersect(e.partial({changesSummary:Y(e)}))(e.struct({action:e.literal("cheetah:result"),promptId:e.number,usage:Se(e)}))))))))))(e)})),J=Fe((function(e){return Ue(d(e),e.struct({action:e.literal("cheetah:setUserState"),state:Ie(e)}))(e)})),ee=Fe((function(e){var t;return e.sum("kind")(((t={}).userPrompt=te(e),t.action=ne(e),t))})),te=Fe((function(e){return e.struct({kind:e.literal("userPrompt"),text:e.string})})),ne=Fe((function(e){return e.struct({kind:e.literal("action"),iconUrl:e.string,label:e.string})})),ie=Fe((function(e){return e.intersect(e.partial({showVoiceTextByDefault:e.boolean}))(e.struct({id:e.string,text:ke(e),withVoiceText:ke(e),title:ee(e),references:e.readonly(e.array(he(e)))}))})),re=Fe((function(e){return Ue(d(e),e.struct({action:e.literal("cheetah:setHistory"),cards:e.readonly(e.array(ie(e)))}))(e)})),oe=Fe((function(e){return e.any})),se=Me(r.W7),ae=Fe((function(e){return e.intersect(e.partial({title:e.string}))(e.struct({kind:se(e),text:e.string}))})),le=Fe((function(e){return e.intersect(e.partial({title:e.sensitiveString}))(e.intersect(e.partial({people:e.readonly(e.record(e.readonly(e.array(e.sensitiveString))))}))(e.struct({text:e.sensitiveString})))})),ce=Fe((function(e){return e.intersect(e.partial({pageIdHash:e.string}))(e.intersect(e.partial({title:e.sensitiveString}))(e.intersect(e.partial({people:e.readonly(e.record(e.readonly(e.array(e.sensitiveString))))}))(e.intersect(e.partial({items:e.readonly(e.array(le(e)))}))(e.struct({})))))})),ue=Fe((function(e){var t;return e.sum("kind")(((t={}).regular=de(e),t.history=me(e),t.writerExpert=pe(e),t))})),de=Fe((function(e){return e.struct({kind:e.literal("regular"),text:e.string})})),me=Fe((function(e){return e.struct({kind:e.literal("history"),text:e.string})})),pe=Fe((function(e){return e.struct({kind:e.literal("writerExpert"),text:e.string,suggestionId:e.string,pname:e.string})})),he=Fe((function(e){return e.intersect(e.partial({url:e.string}))(e.struct({id:e.string,privacyLevel:ge(e),title:e.string,iconUrl:e.string}))})),ge=Fe((function(e){var t;return e.sum("kind")(((t={}).public=fe(e),t.restricted=ve(e),t))})),fe=Fe((function(e){return e.struct({kind:e.literal("public")})})),ve=Fe((function(e){return e.struct({kind:e.literal("restricted")})})),xe=Fe((function(e){var t;return e.sum("kind")(((t={}).aiUsageAlert=be(e),t))})),be=Fe((function(e){return e.struct({kind:e.literal("aiUsageAlert")})})),ye=Fe((function(e){return e.struct({button:Ce(e),tones:e.readonly(e.array(Ce(e))),maxTones:e.number})})),ke=Fe((function(e){return Ue(h(e),e.struct({}))(e)})),we=Fe((function(e){return e.struct({start:e.number,end:e.number})})),Ce=Fe((function(e){return e.struct({iconUrl:e.string,label:e.string,description:e.string})})),Ee=Fe((function(e){return e.struct({url:e.string,referenceId:e.string})})),Se=Fe((function(e){return e.struct({promptsRemaining:e.number,promptsAllocated:e.number,refillDate:e.string})})),_e=Fe((function(e){return e.struct({inlineQuickReplyEnabled:e.boolean,inlineRewriteEnabled:e.boolean})})),Ie=Fe((function(e){return e.intersect(e.partial({historyItems:e.number}))(e.struct({settings:_e(e),usage:Se(e)}))})),Ae=Fe((function(e){return e.intersect(e.partial({styles:e.readonly(e.array(ye(e)))}))(e.intersect(e.partial({selectedRole:e.string}))(e.intersect(e.partial({roles:e.readonly(e.array(e.string))}))(e.struct({selectedStyle:e.string,selectedTones:e.readonly(e.array(e.string)),needSetup:e.boolean}))))})),Be=Fe((function(e){return e.struct({state:e.boolean,label:e.string})})),Oe=Me(r.J8),Re=Fe((function(e){return e.intersect(e.partial({status:Oe(e)}))(e.struct({userName:e.string,myVoiceIsEnabledByDefault:Be(e),title:e.string,subTitle:e.string,profiles:O(e)}))})),Te=Fe((function(e){var t;return e.sum("action")(((t={})["cheetah:getContext"]=j(e),t["cheetah:action"]=G(e),t["cheetah:setVoice"]=L(e),t["cheetah:setVoiceProfile"]=D(e),t["cheetah:interrupt"]=Z(e),t["cheetah:getUserState"]=H(e),t["cheetah:searchReferences"]=V(e),t["cheetah:getHistory"]=$(e),t))})),Ne=Fe((function(e){var t;return e.sum("action")(((t={})["cheetah:invalidateContext"]=P(e),t["cheetah:error"]=K(e),t["cheetah:setContext"]=W(e),t["cheetah:searchReferencesResult"]=q(e),t["cheetah:chunk"]=Q(e),t["cheetah:result"]=X(e),t["cheetah:setUserState"]=J(e),t["cheetah:setHistory"]=re(e),t))}));function Me(e){var t=Object.keys(e).map((function(t){return e[t]})),n=t[0],r=t.slice(1);return Fe((function(e){return e.literal.apply(e,(0,i.ev)([n],r,!1))}))}function Ue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fe((function(t){return e.reduce((function(e,n){return t.intersect(n)(e)}))}))}function Fe(e){return s.H(e)}var ze=(0,l.MZ)(a.n);function je(e){return function(t){return(0,i.pi)((0,i.pi)({},e),t)}}var Pe={URI:o.ov,literal:function(){return o.id()},string:o.id(),number:o.id(),boolean:o.id(),nullable:o.AG,type:o.dt,struct:o.n_,partial:o.r$,record:o.IM,array:o.IX,tuple:o.bc,intersect:o.wf,sum:o.Sm,lazy:function(e,t){return o.Vo(t)},readonly:o.OT}},50687:(e,t,n)=>{var i,r,o,s,a,l;n.d(t,{ES:()=>r,J8:()=>l,W7:()=>a,cX:()=>i,oS:()=>o,s2:()=>s}),function(e){e.Insertable="insertable",e.NonInsertable="non_insertable"}(i||(i={})),function(e){e.Active="active",e.Snoozed="snoozed"}(r||(r={})),function(e){e.Generic="generic",e.Overflow="overflow",e.PromptsLimitExceeded="promptsLimitExceeded",e.SensitiveContent="sensitiveContent",e.ServerOverloaded="serverOverloaded",e.UnsupportedLanguage="unsupportedLanguage"}(o||(o={})),function(e){e.Ideation="ideation",e.PushRewrite="pushRewrite",e.QuickReply="quickReply",e.QuickRewrite="quickRewrite",e.Rewrite="rewrite"}(s||(s={})),function(e){e.Generic="generic",e.Info="info"}(a||(a={})),function(e){e.Initial="initial",e.Seen="seen",e.Updated="updated"}(l||(l={}))},101:(e,t,n)=>{n.d(t,{l:()=>i});var i,r=n(50693),o=n(82900),s=n(74923),a=n(18775),l=n(31099),c=n(50858),u=n(55818),d=n(71346),m=n(27378),p=n(95300),h=n(60797),g=n(66310),f=n(24209),v=n(85089),x=n(49708),b=n(85985),y=n(76974),k=n(98403),w=n(17343),C=n(93508),E=n(77176),S=n(2844),_=n(41398),I=n(19751),A=n(18625),B=n(5114),O=n(19962),R=n(18208),T=n(81531);!function(e){var t;!function(e){e.nextLevel=function(e,t){return{rect:e,level:t+1}}}(e.State||(e.State={})),function(e){e.empty={top:0,bottom:0}}(e.Padding||(e.Padding={})),function(e){e.root="root",e.inherit="inherit"}(t=e.ContainerType||(e.ContainerType={})),e.withViewportContainer=function(e,i){return function(S){(0,l._)(I,S);var _=(0,d._)(I);function I(){var e;return(0,o._)(this,I),e=_.apply(this,arguments),(0,a._)((0,r._)(e),"_viewportEl",new p.X(B.none)),(0,a._)((0,r._)(e),"_onMount",(function(t){e._viewportEl.next(B.fromNullable(t)),e.props.onMount&&t&&e.props.onMount(t)})),e}return(0,s._)(I,[{key:"render",value:function(){var r=this.props,o=r.name,s=r.children,a=this._viewportEl.pipe(h.oA,g.w((function(e){return f.T(v.Qr,x.R(e,"transitionend").pipe(b.h((function(t){return t.target===e}))),y.of(!0).pipe(g.w(k.b2.rafScheduler))).pipe(w.h(e),C.O(e),E.U(O.UL.fromEl))}))),l=i.type===t.root?n:R;return m.createElement(e,(0,u._)((0,c._)({},this.props),{onMount:this._onMount,name:o}),m.createElement(l,{viewport:a,name:o},s))}}]),I}(m.Component)};var n=e.RootVirtualContainer=function(e){var t=e.viewport,n=e.viewportPadding,r=void 0===n?y.of(i.Padding.empty):n,o=e.name,s=e.children,a=m.useContext(i.Context);return m.createElement(F.Provider,{key:M(o),value:S.aj(t,r,N).pipe(_.M(a.pipe(E.U((function(e){return e.level}))),i.State.nextLevel),I.shareReplay({bufferSize:1,refCount:!0}))},s)},R=e.InheritVirtualContainer=function(e){var t=e.viewport,n=e.viewportPadding,r=void 0===n?y.of(O.UL.empty):n,o=e.name,s=e.children,a=m.useContext(i.Context);return m.createElement(F.Provider,{key:M(o),value:S.aj(a.pipe(E.U((function(e){return e.rect}))),S.aj(t||a.pipe(E.U((function(e){return e.rect}))),r,N),O.UL.intersection).pipe(E.U(B.getOrElse((function(){return T.C8.Logging.getLogger("InheritVirtualContainer").warn("Got an empty rect for inherit viewport",{name:o}),O.UL.empty}))),_.M(a.pipe(E.U((function(e){return e.level}))),i.State.nextLevel),I.shareReplay({bufferSize:1,refCount:!0}))},s)},U=A.P((function(){return v.Qr.pipe(w.h(document.body),C.O(document.body),E.U(O.UL.fromEl),E.U((function(e){return{rect:e,level:0}})))})).pipe(I.shareReplay({bufferSize:1,refCount:!0})),F=e.Context=m.createContext(U)}(i||(i={}));var N=function(e,t){return{top:e.top+t.top,bottom:e.bottom-t.bottom,height:e.height-t.top-t.bottom,left:e.left,right:e.right,width:e.width}},M=function(e){return"viewportProvider".concat(R._A(e))}},48911:(e,t,n)=>{n.d(t,{In:()=>m,Vg:()=>c,dy:()=>d});var i=n(98314),r=n(20096),o=n(27378),s=n(54001),a=n(59179),l=n(89894),c=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function u(e){return a.g+function(e){return e.length<4?e.codePointAt(0).toString(16):e.codePointAt(0).toString(16)+"-"+e.codePointAt(2).toString(16)}(e)+".svg"}var d=function(e){var t=e.children,n=e.emojiClassName,i=e.className,r=o.useRef(null);return o.useEffect((function(){r.current&&(r.current.innerHTML=r.current.innerHTML.replace(c,(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.emoji;return'<img alt="'.concat(e,'" class="').concat(t,'" src="').concat(u(e),'" onerror="this.replaceWith(this.alt)" draggable="false" />')}(e,n)})))}),[r,n]),o.createElement("span",{ref:r,className:i},t)},m=function(e){var t=e.id,n=e.className,l=(0,i._)(o.useState(!1),2),c=l[0],u=l[1],d=(0,i._)(o.useState(""),2),m=d[0],h=d[1],g=(0,i._)(o.useState(""),2),f=g[0],v=g[1];return o.useEffect((function(){u(!1),v(function(e){return a.g+e+".svg"}(t)),h(function(e){try{var t;return(t=String).fromCodePoint.apply(t,(0,r._)(e.map((function(e){return parseInt(e,16)}))))}catch(e){return""}}(t.split("-")))}),[t]),c?o.createElement("span",(0,s.Sh)(n,p.emojiFromIDAlt),m):o.createElement("img",{className:n,src:f,alt:m,onError:function(){return u(!0)},"aria-hidden":!0})},p=l.ux.stylesheet({emoji:[{display:"inline",marginRight:".25em",width:"1em",verticalAlign:"sub",lineHeight:1,transform:"scale(1.25)",transformOrigin:"bottom",userSelect:"none"}],emojiFromIDAlt:[{display:"flex",alignItems:"center"}]})},56377:(e,t,n)=>{n.d(t,{L:()=>l});var i,r=n(18775),o=n(27378),s=n(54001),a=n(89894),l=function(e){var t=e.double,n=e.triple,i=e.small;return o.createElement("div",(0,s.Sh)(d,!0===t&&p,!0===n&&g,!0===i&&f))},c=.875,u="spacer",d=a.ux.joinClasses([u,a.ux.style({margin:0,minHeight:a.ux.rem(c),maxHeight:a.ux.rem(1),width:a.ux.percent(100),height:a.ux.rem(1)})]),m="spacerDouble",p=a.ux.joinClasses([m,a.ux.style({minHeight:a.ux.rem(1.75),maxHeight:a.ux.rem(2),height:a.ux.rem(2)})]),h="spacerTriple",g=a.ux.joinClasses([h,a.ux.style({minHeight:a.ux.rem(2.625),maxHeight:a.ux.rem(3),height:a.ux.rem(3)})]),f=a.ux.style({$nest:(i={},(0,r._)(i,"&.".concat(u),{minHeight:a.ux.rem(.4375),maxHeight:a.ux.rem(.5),height:a.ux.rem(.5)}),(0,r._)(i,"&.".concat(m),{minHeight:a.ux.rem(c),maxHeight:a.ux.rem(1),height:a.ux.rem(1)}),(0,r._)(i,"&.".concat(h),{minHeight:a.ux.rem(1.3125),maxHeight:a.ux.rem(1.5),height:a.ux.rem(1.5)}),i)})},24782:(e,t)=>{t.byteLength=function(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,o=l(e),s=o[0],a=o[1],c=new r(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),u=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,o=[],s=16383,a=0,l=i-r;a<l;a+=s)o.push(c(e,a,a+s>l?l:a+s));1===r?(t=e[i-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,i){for(var r,o,s=[],a=t;a<i;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},30816:(e,t,n)=>{var i=n(24782),r=n(78898),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.INSPECT_MAX_BYTES=50;var s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|g(e,t),i=a(n),r=i.write(e,t);r!==n&&(i=i.slice(0,r));return i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(L(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(L(e,SharedArrayBuffer)||e&&L(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,n);var r=function(e){if(l.isBuffer(e)){var t=0|h(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||D(e.length)?a(0):m(e);if("Buffer"===e.type&&Array.isArray(e.data))return m(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),a(e<0?0:0|h(e))}function m(e){for(var t=e.length<0?0:0|h(e.length),n=a(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,l.prototype),i}function h(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(e).length;default:if(r)return i?-1:j(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return B(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function x(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),D(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){var o,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var u=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var d=!0,m=0;m<l;m++)if(c(e,o+m)!==c(t,m)){d=!1;break}if(d)return o}return-1}function y(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(D(a))return s;e[n+s]=a}return s}function k(e,t,n,i){return G(j(t,e.length-n),e,n,i)}function w(e,t,n,i){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function C(e,t,n,i){return G(P(t),e,n,i)}function E(e,t,n,i){return G(function(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(n=e.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function S(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,s,a,l,c=e[r],u=null,d=c>239?4:c>223?3:c>191?2:1;if(r+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[r+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[r+1],s=e[r+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[r+1],s=e[r+2],a=e[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=I));return n}(i)}l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(L(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(L(o,Uint8Array))r+o.length>i.length?l.from(o).copy(i,r):Uint8Array.prototype.set.call(i,o,r);else{if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r)}r+=o.length}return i},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):f.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,i,r){if(L(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(i,r),u=e.slice(t,n),d=0;d<a;++d)if(c[d]!==u[d]){o=c[d],s=u[d];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function A(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function B(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function O(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=Z[e[o]];return r}function R(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length-1;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,i,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function M(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,i,o){return t=+t,n>>>=0,o||M(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function F(e,t,n,i,o){return t=+t,n>>>=0,o||M(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t>>>=0,n>>>=0,i)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t>>>=0,n>>>=0,i)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var r=e.charCodeAt(0);("utf8"===i&&r<128||"latin1"===i)&&(e=r)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=l.isBuffer(e)?e:l.from(e,i),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var z=/[^+/0-9A-Za-z-_]/g;function j(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function P(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function D(e){return e!=e}var Z=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var i=16*n,r=0;r<16;++r)t[i+r]=e[n]+e[r];return t}()},13853:(e,t,n)=>{n.d(t,{$T:()=>_,AO:()=>l,DZ:()=>R,Eh:()=>c,G:()=>u,G0:()=>v,KX:()=>h,Lf:()=>k,Lx:()=>E,Od:()=>I,Sq:()=>o,UI:()=>d,ZN:()=>s,cS:()=>a,e5:()=>y,hX:()=>g,jV:()=>x,nI:()=>A,oA:()=>B,oP:()=>w,ri:()=>S,t9:()=>f,tS:()=>p,tV:()=>b,u4:()=>C,xu:()=>O,yW:()=>m});var i=n(73975),r=n(57050);function o(e){return new Set(e)}function s(e){return{show:function(t){var n="";return t.forEach((function(t){n+=e.show(t)+", "})),""!==n&&(n=n.substring(0,n.length-2)),"new Set(["+n+"])"}}}var a=new Set;function l(e){return function(t){var n=[];return t.forEach((function(e){return n.push(e)})),n.sort(e.compare)}}function c(e){var t=h(e);return(0,i.f7)((function(e,n){return t(e,n)&&t(n,e)}))}function u(e){return function(t){for(var n,i=t.values(),r=!1;!r&&!(n=i.next()).done;)r=e(n.value);return r}}function d(e){var t=f(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){var r=e(n);t(r,i)||i.add(r)})),i}}}function m(e){return(0,r.ff)(u((0,r.ff)(e)))}function p(e){var t=f(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){e(n).forEach((function(e){t(e,i)||i.add(e)}))})),i}}}function h(e){var t=f(e);return function(n,i){if(void 0===i){var r=h(e);return function(e){return r(e,n)}}return m((function(e){return t(e,i)}))(n)}}function g(e){return function(t){for(var n,i=t.values(),r=new Set;!(n=i.next()).done;){var o=n.value;e(o)&&r.add(o)}return r}}function f(e){return function(t,n){if(void 0===n){var i=f(e);return function(e){return i(t,e)}}for(var r,o=n.values(),s=!1;!s&&!(r=o.next()).done;)s=e.equals(t,r.value);return s}}function v(e){var t=f(e);return function(n,i){if(void 0===i){var r=v(e);return function(e){return r(n,e)}}if(n===a)return i;if(i===a)return n;var o=new Set(n);return i.forEach((function(e){t(e,o)||o.add(e)})),o}}function x(e){var t=f(e);return function(n,i){if(void 0===i){var r=x(e);return function(e){return r(e,n)}}if(n===a||i===a)return a;var o=new Set;return n.forEach((function(e){t(e,i)&&o.add(e)})),o}}function b(e,t){return function(n){return function(i){for(var r,o=i.values(),s=new Set,a=new Set,l=f(e),c=f(t);!(r=o.next()).done;){var u=n(r.value);switch(u._tag){case"Left":l(u.left,s)||s.add(u.left);break;case"Right":c(u.right,a)||a.add(u.right)}}return{left:s,right:a}}}}function y(e){var t=f(e);return function(n,i){if(void 0===i){var r=y(e);return function(e){return r(e,n)}}return g((function(e){return!t(e,i)}))(n)}}function k(e){return{concat:v(e),empty:a}}function w(e){return{concat:x(e)}}function C(e){var t=l(e);return function(e,n){return function(i){return t(i).reduce(n,e)}}}function E(e,t){var n=l(e);return function(e){return function(i){return n(i).reduce((function(n,i){return t.concat(n,e(i))}),t.empty)}}}function S(e){return new Set([e])}function _(e){var t=f(e);return function(e){return function(n){if(t(e)(n))return n;var i=new Set(n);return i.add(e),i}}}function I(e){return function(t){return function(n){return g((function(n){return!e.equals(t,n)}))(n)}}}function A(e){return function(t){for(var n=t.length,i=new Set,r=f(e),o=0;o<n;o++){var s=t[o];r(s,i)||i.add(s)}return i}}function B(e){return R(e)(r.yR)}function O(e,t){return function(n){var i=f(e),r=f(t),o=new Set,s=new Set;return n.forEach((function(e){switch(e._tag){case"Left":i(e.left,o)||o.add(e.left);break;case"Right":r(e.right,s)||s.add(e.right)}})),{left:o,right:s}}}function R(e){var t=f(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){var r=e(n);"Some"!==r._tag||t(r.value,i)||i.add(r.value)})),i}}}},78898:(e,t)=>{t.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?r-1:0,m=n?-1:1,p=e[t+d];for(d+=m,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=m,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+d],d+=m,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,d=u>>1,m=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,h=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?m/l:m*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=h,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[n+p]=255&s,p+=h,s/=256,c-=8);e[n+p-h]|=128*g}},33829:(e,t,n)=>{n.d(t,{I:()=>a});var i=n(27378),r=n(15141),o=n(92236);const s=[];function a(e,t){const{onClose:n,shouldCloseOnBlur:a,isOpen:l,isDismissable:c=!1,isKeyboardDismissDisabled:u=!1,shouldCloseOnInteractOutside:d}=e;i.useEffect((()=>(l&&s.push(t),()=>{const e=s.indexOf(t);e>=0&&s.splice(e,1)})),[l,t]);const m=()=>{s[s.length-1]===t&&n&&n()};(0,o.Fc)({ref:t,onInteractOutside:c?e=>{e instanceof Event&&(e=>{d&&!d(e.target,e)||(s[s.length-1]===t&&(e.stopPropagation(),e.preventDefault()),m())})(e)}:void 0,onInteractOutsideStart:e=>{e instanceof Event&&(e=>{d&&!d(e.target,e)||s[s.length-1]===t&&(e.stopPropagation(),e.preventDefault())})(e)}});const{focusWithinProps:p}=(0,o.L_)({isDisabled:!a,onBlurWithin:e=>{e.relatedTarget&&!(0,r.cW)(e.relatedTarget)&&(d&&!d(e.relatedTarget,e instanceof Event?e:void 0)||null==n||n())}});return{overlayProps:Object.assign({onKeyDown:e=>{"Escape"!==e.key||u||(e.stopPropagation(),e.preventDefault(),m())}},p),underlayProps:{onPointerDown:e=>{e.target===e.currentTarget&&e.preventDefault()}}}}},65432:(e,t,n)=>{n.d(t,{C:()=>a,GO:()=>l,Hd:()=>s,Ic:()=>v,Ng:()=>m,RS:()=>u,SP:()=>f,Wr:()=>r,_y:()=>L,c3:()=>p,ik:()=>o,xe:()=>d});class i{_sendMessage;constructor(e){this._sendMessage=e}async terminate(e){return await this._sendMessage("applet.lifecycle.terminate",e)??null}}class r{implementation;static objectName="host.authorizedHttpClient";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.authorizedHttpClient.";if(e.startsWith(n)&&(e=e.slice(n.length)),"sendRequest"===e){const e=t??null;return await this.implementation.sendRequest(e)??null}throw new Error(`Unknown action: ${e}`)}}class o{_sendMessage;constructor(e){this._sendMessage=e}async sendRequest(e){return await this._sendMessage("host.authorizedHttpClient.sendRequest",e)??null}}class s{implementation;static objectName="host.capiSocket";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.capiSocket.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"sendMessage":{const e=t??null;return await this.implementation.sendMessage(e)??null}case"subscribeToMessage":{const e=t??null;return await this.implementation.subscribeToMessage(e)??null}case"subscribeToMessages":{const e=t??null;return await this.implementation.subscribeToMessages(e)??null}case"unsanitizeText":{const e=t??null;return await this.implementation.unsanitizeText(e)??null}case"sanitizeText":{const e=t??null;return await this.implementation.sanitizeText(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class a{_sendMessage;constructor(e){this._sendMessage=e}async sendMessage(e){return await this._sendMessage("host.capiSocket.sendMessage",e)??null}async subscribeToMessage(e){return await this._sendMessage("host.capiSocket.subscribeToMessage",e)??null}async subscribeToMessages(e){return await this._sendMessage("host.capiSocket.subscribeToMessages",e)??null}async unsanitizeText(e){return await this._sendMessage("host.capiSocket.unsanitizeText",e)??null}async sanitizeText(e){return await this._sendMessage("host.capiSocket.sanitizeText",e)??null}}class l{_sendMessage;constructor(e){this._sendMessage=e}async start(e){return await this._sendMessage("applet.cheetah.start",e)??null}}class c{implementation;static objectName="host.editSession";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.editSession.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"insertText":{const e=t??null;return await this.implementation.insertText(e)??null}case"pasteImage":{const e=t??null;return await this.implementation.pasteImage(e)??null}case"copyImage":{const e=t??null;return await this.implementation.copyImage(e)??null}case"getDocumentState":{const e=t??null;return await this.implementation.getDocumentState(e)??null}case"insertAtCaret":{const e=t??null;return await this.implementation.insertAtCaret(e)??null}case"setSelection":{const e=t??null;return await this.implementation.setSelection(e)??null}case"applyDelta":{const e=t??null;return await this.implementation.applyDelta(e)??null}case"getCapabilities":{const e=t??null;return await this.implementation.getCapabilities(e)??null}case"copyText":{const e=t??null;return await this.implementation.copyText(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class u{_sendMessage;constructor(e){this._sendMessage=e}async textUpdated(e){return await this._sendMessage("applet.editSession.textUpdated",e)??null}async selectionUpdated(e){return await this._sendMessage("applet.editSession.selectionUpdated",e)??null}}class d{implementation;static objectName="host.lifecycle";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.lifecycle.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"initialize":case"init":{const e=t??null;return await this.implementation.initialize(e)??null}case"visuallyReady":{const e=t??null;return await this.implementation.visuallyReady(e)??null}case"resizeFrame":{const e=t??null;return await this.implementation.resizeFrame(e)??null}case"requestClose":{const e=t??null;return await this.implementation.requestClose(e)??null}case"startDragMove":{const e=t??null;return await this.implementation.startDragMove(e)??null}case"log":{const e=t??null;return await this.implementation.log(e)??null}case"openURL":case"openUrl":{const e=t??null;return await this.implementation.openURL(e)??null}case"triggerSettingsMenu":{const e=t??null;return await this.implementation.triggerSettingsMenu(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class m{implementation;static objectName="host.userAccount";constructor(e){this.implementation=e}async handleMessage(e,t){const n="host.userAccount.";switch(e.startsWith(n)&&(e=e.slice(n.length)),e){case"getInfo":{const e=t??null;return await this.implementation.getInfo(e)??null}case"setDialect":{const e=t??null;return await this.implementation.setDialect(e)??null}default:throw new Error(`Unknown action: ${e}`)}}}class p{_sendMessage;constructor(e){this._sendMessage=e}async getInfo(e){return await this._sendMessage("host.userAccount.getInfo",e)??null}async setDialect(e){return await this._sendMessage("host.userAccount.setDialect",e)??null}}var h,g;function f(e){return`${e.kind}:${e.id}`}!function(e){e.UI="ui",e.BACKGROUND="background"}(h||(h={})),function(e){e.GLOBAL="global",e.EDIT_SESSION="editSession"}(g||(g={}));class v{_manifests=new Map;_implementations=new Map;register(e){const t=f(e);if(this._manifests.set(t,e),null!=e.implementsObjects)for(const n of e.implementsObjects){const e=this._implementations.get(n)??new Set;e.add(t),this._implementations.set(n,e)}}all(){return[...this._manifests.values()]}get(e){return this._manifests.get(e)}findImplementations(e){const t=this._implementations.get(e)??new Set;return Array.from(t).map((e=>this._manifests.get(e)))}}class x{_parent;_objects=new Map;_resolving=new Map;_resolver;constructor(e=null,t){this._parent=e,this._resolver=t}register(e,t){this._objects.set(e,t)}unregister(e){this._objects.delete(e)}get(e){return this._objects.get(e)??null}execute(e,t){const n=e.split("."),i=n.pop(),r=n.join(".");if(null==r||null==i)throw new y(e);return this._handleWithResolver({target:r,method:i,data:t})}dispose(){this._objects.clear(),this._resolving.clear()}_handleWithResolver(e){const t=this._resolve(e.target);return t instanceof Promise?t.then((()=>this._handle(e))):this._handle(e)}_handle(e){const t=this._objects.get(e.target);if(null!=t)return t.handleMessage(e.method,e.data);if(null!=this._parent)return this._parent._handle(e);throw new k(e.target)}_isResolved(e){return this._objects.has(e)||(this._parent?._isResolved(e)??!1)}_resolve(e){if(!this._isResolved(e)){if(this._resolving.has(e))return this._resolving.get(e);if(null!=this._resolver){const t=this._resolver(e);if(t instanceof Promise){const n=t.then((t=>{if(!!this._resolving.has(e))return null==t?this._parent?._resolve(e):void this._objects.set(e,t)})).finally((()=>{this._resolving.delete(e)}));return this._resolving.set(e,n),n}if(null!=t)return void this._objects.set(e,t)}return this._parent?._resolve(e)}}}class b extends Error{}class y extends b{action;constructor(e){super(`Malformed action: ${e}`),this.action=e}}class k extends b{action;constructor(e){super(`Object not found: ${e}`),this.action=e}}let w;class C{onAppletStart(e,t){this._send({action:"onAppletStart",data:[e,t],timestamp:Date.now()})}onAppletStop(e){this._send({action:"onAppletStop",data:[e],timestamp:Date.now()})}onAfterRPCCall(e,t){this._send({action:"onAfterRPCCall",data:[e,t],timestamp:Date.now()})}onBeforeRPCCall(e,t){this._send({action:"onBeforeRPCCall",data:[e,t],timestamp:Date.now()})}_send(e){self.postMessage({type:"gOS::devtools::collector",data:e},"*")}}var E,S;function _(e=""){return e?((Number(e)^16*Math.random())>>Number(e)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,_)}!function(e){e.INCOMING="incoming",e.OUTGOING="outgoing",e.UNEXPECTED="unexpected"}(E||(E={}));class I{_defaultRequestTimeout=3e4;_pendingRequests=new Map;_transport;requestHandler;debugHandler;constructor(e,t,n){this._transport=e,this.requestHandler=t,this.debugHandler=n,e.onMessage=e=>{"response"===e.type?this._handleIncomingResponse(e):"request"===e.type&&this._handleIncomingRequest(e)}}_lastId=0;_prefix=_();_generateId(){return`${this._prefix}-${++this._lastId}`}async call(e,t,n=this._defaultRequestTimeout){const i=this._generateId();return new Promise(((r,o)=>{const s=setTimeout((()=>{this._pendingRequests.has(i)&&(this._pendingRequests.delete(i),o(new O(i,e,t)))}),n);this._pendingRequests.set(i,{complete:e=>{clearTimeout(s),this.debugHandler?.(E.INCOMING,e),this._pendingRequests.delete(i);const t=e.data;if("success"===t.status)r(t.data);else{const e="object"==typeof t.data&&null!=t.data&&"errorMessage"in t.data?String(t.data.errorMessage):"Unknown error";o(Object.assign(new Error(e),t.data))}},timerId:s});const a={id:i,type:"request",action:e,data:t};this.debugHandler?.(E.OUTGOING,a),this._transport.sendMessage(a)}))}dispose(){for(const e of this._pendingRequests.values())clearTimeout(e.timerId);this._pendingRequests.clear(),this._transport.onMessage=void 0}_handleIncomingResponse(e){const t=this._pendingRequests.get(e.id);null!=t?t.complete(e):this.debugHandler?.(E.UNEXPECTED,e)}async _handleIncomingRequest(e){try{if(this.debugHandler?.(E.INCOMING,e),null==this.requestHandler)throw new B(e.action);const t={id:e.id,action:e.action,type:"response",data:{status:"success",data:await this.requestHandler(e)}};this.debugHandler?.(E.OUTGOING,t),this._transport.sendMessage(t)}catch(t){const n={id:e.id,action:e.action,type:"response",data:{status:"failure",data:Object.assign({errorMessage:t.message},JSON.parse(JSON.stringify(t)))}};this.debugHandler?.(E.INCOMING,n),this._transport.sendMessage(n)}}}class A extends Error{}class B extends A{action;constructor(e){super(`No handler for RPC call ${e}`),this.action=e}}class O extends A{id;action;data;constructor(e,t,n){super(`RPC call ${t} timed out`),this.id=e,this.action=t,this.data=n}}!function(e){e.TRACE="trace",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(S||(S={}));class R{logger;constructor(e){this.logger=e}log(e,t,n,i="<unknown>",r=-1,o=-1,s="<unknown>"){this.logger.log(e,t,n,i,r,o,s)}trace(e,t){this.log(S.TRACE,e,t)}debug(e,t){this.log(S.DEBUG,e,t)}info(e,t){this.log(S.INFO,e,t)}warn(e,t){this.log(S.WARN,e,t)}error(e,t){this.log(S.ERROR,e,t)}fatal(e,t){this.log(S.ERROR,e,t)}}class T{_outgoing;constructor(e){this._outgoing=e}_listener;get onMessage(){return this._listener}set onMessage(e){if(this._listener=e,null!=e){for(const t of this._queue)e(t);this._queue.length=0}}async sendMessage(e){await this._outgoing.sendMessage(e)}_queue=[];receiveMessage(e){if(null==this._listener){if(this._queue.length>100)throw new N;this._queue.push(e)}else this._listener(e)}}class N extends Error{constructor(){super("Buffer overrun")}}class M extends T{constructor(e){super({sendMessage:async t=>e.postMessage(t)}),e.onMessage((e=>this.receiveMessage(e)))}}class U{frame;_isLoaded=!1;_receiveMessage;_pendingMessages=[];_postMessageTargetOrigin="";constructor(e){this.frame=e,this.resize({width:480,height:300})}_onMessage=e=>{e.source===this.frame.contentWindow&&null!=this.frame.contentWindow&&this._receiveMessage?.(e.data)};setSource(e){try{this._isLoaded=!1;const t=new URL(e,self.location.href);"null"===self.origin||"http:"===self.location.protocol&&"https:"===t.protocol||!1===this.frame.getAttribute("sandbox")?.includes("allow-same-origin")?this._postMessageTargetOrigin="*":this._postMessageTargetOrigin=t.origin,this.frame.src=t.href}catch(e){throw this._postMessageTargetOrigin="",e}this.frame.addEventListener("load",(()=>queueMicrotask(this._onLoad)),{once:!0})}_onLoad=()=>{this._isLoaded=!0,this._flushPendingMessages()};onMessage(e){this._receiveMessage=e,self.addEventListener("message",this._onMessage)}postMessage(e){this._isLoaded&&null!==this.frame.contentWindow?(this._flushPendingMessages(),this.frame.contentWindow.postMessage(e,this._postMessageTargetOrigin)):this._pendingMessages.push(e)}dispose(){this.frame.src="about:blank",this._postMessageTargetOrigin="",this._pendingMessages.length=0,self.removeEventListener("message",this._onMessage)}resize(e){this.frame.style.width=`${e.width}px`,this.frame.style.height=`${e.height}px`}_flushPendingMessages(){if(0!==this._pendingMessages.length&&null!==this.frame.contentWindow){for(const e of this._pendingMessages)console.log("postMessage",e,this.frame.src,this._postMessageTargetOrigin),this.frame.contentWindow.postMessage(e,this._postMessageTargetOrigin);this._pendingMessages.length=0}}}class F{_worker;_handler;execute(e){this._worker=new Worker(e),this._worker.onmessage=e=>this._handler?.(e.data)}onMessage(e){this._handler=e}postMessage(e){this._worker?.postMessage(e)}dispose(){this._worker?.terminate(),this._worker=void 0}}class z{logger;manifest;objects;rpc;environment;sandbox;beforeUnloadHandlers=[];devtools=function(){return w??(w=new C)}();debugId;constructor(e,t,n,i){this.environment=t.environment,this.objects=new x(t.objects,(t=>e(t,this))),this.logger=new R(t.environment.makeLogger(`container/${n.id}`)),this.manifest=n,this.sandbox=i,this.debugId=`${this.manifest.id}/${this.manifest.version}/${Date.now()}/${Math.random()}`,this.rpc=new I(new M(this.sandbox),(async e=>await this.objects.execute(e.action,e.data)),((e,t)=>{if(this.environment.isDebugMode)switch(t.type){case"request":this.devtools?.onBeforeRPCCall(this.debugId,t);break;case"response":this.devtools?.onAfterRPCCall(this.debugId,t)}}))}instantiate(e){return new e(this._call.bind(this))}_call=async(e,t)=>{if(void 0===this.rpc)throw new Error("Applet is not loaded");return await this.rpc.call(e,t)};applet=new i(this._call);async gracefullyUnloadApplet(){try{await this.applet.terminate(null);for(const e of this.beforeUnloadHandlers)await e()}finally{this.unloadApplet()}}onBeforeUnload(e){this.beforeUnloadHandlers.push(e)}async createInitializeResponse(e){const[t,n]=await Promise.all([this.environment.getContainerId(),this.environment.getUserId()]);return{platform:"macos",environment:this.environment.environment,clientType:this.environment.clientType,clientVersion:this.environment.clientVersion,containerId:t,userId:n,protocolVersion:"0.1.1",protocolVersions:{gondolaAuthorizedHttpClient:"0.1",gondolaCapiSocket:"0.1",gondolaCheetah:"0.1",gondolaCore:"0.1",gondolaEditSession:"0.1",gondolaLifecycle:"0.1",gondolaUserAccount:"0.1",gondolaAlerts:"0.1",gondolaSDUI:"0.1"}}}}class j extends z{view;_isLoaded=!1;constructor(e,t,n,i){super(e,t,n,i),this.view=i}loadApplet(){this._isLoaded||(this.devtools?.onAppletStart(this.debugId,this.manifest.displayName),this.view.setSource(this.manifest.entryPoint),this._isLoaded=!0)}unloadApplet(){this._isLoaded=!1,this.devtools?.onAppletStop(this.debugId),this.view.dispose()}}class P extends z{constructor(e,t,n,i){super(e,t,n,i)}_isLoaded=!1;get bg(){return super.sandbox}loadApplet(){this._isLoaded||(this.devtools?.onAppletStart(this.debugId,this.manifest.displayName),this.bg.execute(this.manifest.entryPoint),this._isLoaded=!0)}unloadApplet(){this._isLoaded=!1,this.devtools?.onAppletStop(this.debugId),this.bg.dispose()}async handleMessage(e,t){return await this.rpc.call(e,t)}}const G={createUISandbox:()=>new U(document.createElement("iframe")),createBackgroundSandbox(){throw new F}};class L{parent;environment;registry;objects;_applets=new Map;_objectFactories=new Map;_containerFactory=null;static default(e,t){return new L(e,t)}constructor(e,t){let n,i;e instanceof L?(this.parent=e,n=e.environment,i=e.registry):(this.parent=null,n=e,i=t),this.environment=n,this.registry=i,this.objects=new x(this.parent?.objects,(e=>{if(null==this.parent)return this._getOrCreateAppletService(f(this._findImplementingManifest(e)))}))}createAppletService(e){const t=this._findManifest(e),n=new P(((e,t)=>this._objectFactories.get(e)?.(t)),this,t,this._getContainerFactory().createBackgroundSandbox(t,this));return n.loadApplet(),n}createAppletView(e){const t=this._findManifest(e),n=new j(((e,t)=>this._getObjectFactory(e)?.(t)),this,t,this._getContainerFactory().createUISandbox(t,this));return n.loadApplet(),n}_getObjectFactory(e){return this._objectFactories.get(e)??this.parent?._getObjectFactory(e)}_getContainerFactory(){return this._containerFactory??this.parent?._getContainerFactory()??G}_getOrCreateAppletService(e){const t=this._applets.get(e);if(void 0!==t)return t;const n=this.createAppletService(e);return this._applets.set(e,n),n}_findManifest(e){const t=this.registry.get(e);if(void 0===t)throw new Error(`Applet ${e} is not registered`);return t}_findImplementingManifest(e){const t=this.registry.findImplementations(e);if(0===t.length)throw new Error(`No applet implements ${e}`);if(t.length>1)throw new Error(`Multiple applets implement ${e}`);return t[0]}registerObject(e,t){this.objects.register(e,t)}registerObjectFactory(e,t){this._objectFactories.set(e,t)}withEditSession(e){const t=new L(this);return t.registerObject(c.objectName,new c(e)),t}withContainerFactory(e){const t=new L(this);return t._containerFactory=e,t}}}}]);