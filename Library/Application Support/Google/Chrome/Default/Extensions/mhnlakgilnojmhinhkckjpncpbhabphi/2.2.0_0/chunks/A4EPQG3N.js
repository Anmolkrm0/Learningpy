import{c as A,f as q,i as H,l as K}from"./Z3L7RW5H.js";import{g as U}from"./5QUJ6DKB.js";import{f as N}from"./ZLWHHAAC.js";import{f as D}from"./WJHHHIFF.js";import{h as E}from"./3NC6GYYS.js";import{f as k}from"./RPTTQXMU.js";import{d as F}from"./ZDOLJC6M.js";import{g as W}from"./SH2AV755.js";import{d as C}from"./BEC6NYYF.js";import{a as S,u as _}from"./JUQUTDV2.js";import{j as P,t as w}from"./MT7GI5KY.js";import{c as z}from"./QPPETRF6.js";import{b as y,q as v}from"./BIAAAE54.js";import{M as B}from"./T463YMPS.js";import{a as O}from"./64D36THL.js";import{f as M}from"./PQ35KENF.js";var t=M(O());var a=M(O());function G(r,{inputValue:l}){let d=r.filter(n=>{let f=n.label.toLowerCase(),c=n.value.toLowerCase(),o=l.toLowerCase();return f.includes(o)||c.includes(o)});if(l.length>2){l.split(".")[1]||(l.endsWith(".")?l+="com":l+=".com");try{let n=new URL(/^http[s]?/.test(l)?l:`https://${l}`).hostname.replace(/^www\./,"").replace(/:\d+$/,"");if(d.find(f=>f.value===n))return d;d.push({label:n,value:n,origin:{inputValue:l}})}catch{}}return d}var J=r=>{let{label:l="Enter website URL",onChange:d=e=>{},disabled:n,sx:f}=r,[c,o]=a.default.useState(!1),[u,g]=a.default.useState(null),b=(0,a.useMemo)(()=>r.value&&!y.find(e=>e.value===r.value)?y.concat({label:r.value,value:r.value}):y,[r.value]),p=(0,a.useMemo)(()=>b.find(e=>e.value===r.value),[r.value,b]);return a.default.createElement(U,{onKeyDown:e=>{e.key==="Enter"&&e.stopPropagation()},disabled:n,open:c&&!u,onInputChange:(e,m)=>{m!==r.value&&g(null),m.length===0?o(!1):o(!0)},value:p,onClose:()=>o(!1),freeSolo:!0,disableClearable:!0,clearOnBlur:!0,blurOnSelect:!0,size:"small",sx:{width:160,...f},autoHighlight:!0,getOptionLabel:e=>e.label,options:b,onChange:(e,m)=>{g(m),d(m.value)},filterOptions:G,renderInput:e=>a.default.createElement(N,{...e,label:l,inputProps:{...e.inputProps,autoComplete:"new-password"}}),renderOption:(e,m)=>a.default.createElement("li",{...e},a.default.createElement("img",{width:16,height:16,src:v(m.value),style:{marginRight:8}}),a.default.createElement(_,{color:"text.primary",noWrap:!0,fontSize:14},m.label))})},$=J;var Q=r=>{let{defaultValue:l,onChange:d,disabled:n,mode:f}=r,c=f==="black",{t:o}=z(["settings","common"]),[u,g]=(0,t.useState)(""),[b,p]=(0,t.useState)(!1),e=(0,t.useRef)(null),m=()=>{g(""),p(!0),setTimeout(()=>{e.current?.querySelector("input")?.focus()},100)},I=()=>{p(!1)},T=()=>{h(c?{...i,isWhitelistMode:!1,blacklist:w([u,...i.blacklist]).filter(Boolean)}:{...i,isWhitelistMode:!0,whitelist:w([u,...i.whitelist]).filter(Boolean)}),p(!1),setTimeout(()=>{p(!1)},0)},L=(0,t.useRef)(!1),[i,h]=(0,t.useState)(()=>B(l));(0,t.useEffect)(()=>{if(!L.current)if(!P(l,i))L.current=!0;else return;if(i.isWhitelistMode&&i.whitelist.length===0){h({...i,isWhitelistMode:!1,blacklist:[],whitelist:[]});return}d(i)},[i]);let j=(0,t.useMemo)(()=>i.isWhitelistMode?i.whitelist:i.blacklist,[i]);return t.default.createElement(S,{sx:{...r.sx}},t.default.createElement(F,{sx:{p:0,bgcolor:s=>s.palette.mode==="dark"?"rgb(32, 33, 36)":"rgb(255,255,255)",borderRadius:"4px",border:"1px solid",borderColor:"customColor.borderColor","& .MuiListItem-root":{p:2},"& .MuiListItemText-root":{m:0,mr:2}}},t.default.createElement(D,{sx:{p:0}},t.default.createElement(k,{primary:o(c?"settings:visibility_card__black_list_title":"settings:visibility_card__white_list_title"),secondary:o(c?"settings:visibility_card__black_list_description":"settings:visibility_card__white_list_description")}),t.default.createElement(C,{variant:"outlined",sx:{flexShrink:0,borderColor:"customColor.borderColor",color:"text.primary"},onClick:m,disabled:n},o("common:add"))),j.map(s=>t.default.createElement(D,{key:s,sx:{boxSizing:"border-box",p:"12px 16px",borderTop:"1px solid",borderColor:"customColor.borderColor"}},t.default.createElement(k,{primary:t.default.createElement(S,{direction:"row",alignItems:"center",spacing:2},t.default.createElement("img",{src:v(s),alt:s,style:{width:20,height:20,flexShrink:0}}),t.default.createElement(_,{component:"span",noWrap:!0,fontSize:14},s))}),t.default.createElement(W,{sx:{flexShrink:0},disabled:n,onClick:()=>{h(c?{...i,blacklist:i.blacklist.filter(x=>x!==s)}:{...i,whitelist:i.whitelist.filter(x=>x!==s)})}},t.default.createElement(E,{icon:"Delete",sx:{fontSize:20}}))))),t.default.createElement(A,{open:b,onClose:I,onKeyDownCapture:s=>{s.key==="Enter"&&u&&T()}},t.default.createElement(q,null,o("settings:visibility_card__add_a_site_dialog__title")),t.default.createElement(H,null,t.default.createElement(S,{width:500,ref:e,spacing:1},t.default.createElement(_,{fontSize:16},o("settings:visibility_card__add_a_site_dialog__field_site__title")),t.default.createElement($,{label:o("settings:visibility_card__add_a_site_dialog__field_site__placeholder"),value:u,sx:{width:"100%"},disabled:n,onChange:async s=>{s&&g(s)}}))),t.default.createElement(K,null,t.default.createElement(C,{variant:"outlined",onClick:I},o("common:cancel")),t.default.createElement(C,{disabled:!u,variant:"contained",onClick:T},o("common:add")))))},St=Q;export{St as a};
